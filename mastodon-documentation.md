# Table of Contents

- [What is Mastodon?](#what-is-mastodon)
- [Signing up for an account](#signing-up-for-an-account)
- [Preparing your machine](#preparing-your-machine)
- [Getting started with the API](#getting-started-with-the-api)
- [Technical overview](#technical-overview)
- [ActivityPub](#activitypub)
- [Datetime formats](#datetime-formats)
- [apps API methods](#apps-api-methods)
- [Account](#account)
- [Setting up your profile](#setting-up-your-profile)
- [Posting to your profile](#posting-to-your-profile)
- [Using the network features](#using-the-network-features)
- [Dealing with unwanted content](#dealing-with-unwanted-content)
- [Promoting yourself and others](#promoting-yourself-and-others)
- [Set your preferences](#set-your-preferences)
- [More settings](#more-settings)
- [Using Mastodon externally](#using-mastodon-externally)
- [Moving or leaving accounts](#moving-or-leaving-accounts)
- [Running your own server](#running-your-own-server)
- [Installing from source](#installing-from-source)
- [Configuring your environment](#configuring-your-environment)
- [Configuring full-text search](#configuring-full-text-search)
- [Installing optional features](#installing-optional-features)
- [Setting up your new instance](#setting-up-your-new-instance)
- [Using the admin CLI](#using-the-admin-cli)
- [Upgrading to a new release](#upgrading-to-a-new-release)
- [Backing up your server](#backing-up-your-server)
- [Migrating to a new machine](#migrating-to-a-new-machine)
- [Scaling up your server](#scaling-up-your-server)
- [Moderation actions](#moderation-actions)
- [Troubleshooting errors](#troubleshooting-errors)
- [Roles](#roles)
- [Object storage](#object-storage)
- [Onion services](#onion-services)
- [Captcha](#captcha)
- [Single Sign On](#single-sign-on)
- [Database index corruption](#database-index-corruption)
- [Playing with public data](#playing-with-public-data)
- [Obtaining client app access](#obtaining-client-app-access)
- [Logging in with an account](#logging-in-with-an-account)
- [Libraries and implementations](#libraries-and-implementations)
- [Setting up a dev environment](#setting-up-a-dev-environment)
- [Code structure](#code-structure)
- [Routes](#routes)
- [Bug bounties and responsible disclosure](#bug-bounties-and-responsible-disclosure)
- [WebFinger](#webfinger)
- [Security](#security)
- [Microformats](#microformats)
- [OAuth](#oauth)
- [Bearcaps](#bearcaps)
- [Guidelines and best practices](#guidelines-and-best-practices)
- [OAuth Tokens](#oauth-tokens)
- [OAuth Scopes](#oauth-scopes)
- [Rate limits](#rate-limits)
- [accounts API methods](#accounts-api-methods)
- [profile API methods](#profile-api-methods)
- [statuses API methods](#statuses-api-methods)
- [timelines API methods](#timelines-api-methods)
- [Grouped notifications API methods](#grouped-notifications-api-methods)
- [notifications API methods](#notifications-api-methods)
- [search API methods](#search-api-methods)
- [instance API methods](#instance-api-methods)
- [admin API methods](#admin-api-methods)
- [proofs API methods](#proofs-api-methods)
- [oembed API methods](#oembed-api-methods)
- [OAuth API methods](#oauth-api-methods)
- [emails API methods](#emails-api-methods)
- [bookmarks API methods](#bookmarks-api-methods)
- [favourites API methods](#favourites-api-methods)
- [mutes API methods](#mutes-api-methods)
- [blocks API methods](#blocks-api-methods)
- [domain_blocks API methods](#domain-blocks-api-methods)
- [filters API methods](#filters-api-methods)
- [reports API methods](#reports-api-methods)
- [follow_requests API methods](#follow-requests-api-methods)
- [endorsements API methods](#endorsements-api-methods)
- [featured_tags API methods](#featured-tags-api-methods)
- [preferences API methods](#preferences-api-methods)
- [followed_tags API methods](#followed-tags-api-methods)
- [suggestions API methods](#suggestions-api-methods)
- [tags API methods](#tags-api-methods)
- [media API methods](#media-api-methods)
- [polls API methods](#polls-api-methods)
- [scheduled_statuses API methods](#scheduled-statuses-api-methods)
- [conversations API methods](#conversations-api-methods)
- [lists API methods](#lists-api-methods)
- [markers API methods](#markers-api-methods)
- [streaming API methods](#streaming-api-methods)
- [push API methods](#push-api-methods)
- [trends API methods](#trends-api-methods)
- [directory API methods](#directory-api-methods)
- [custom_emojis API methods](#custom-emojis-api-methods)
- [announcements API methods](#announcements-api-methods)
- [admin/accounts API methods](#admin-accounts-api-methods)
- [canonical_email_blocks API methods](#canonical-email-blocks-api-methods)
- [dimensions API methods](#dimensions-api-methods)
- [domain_allows API methods](#domain-allows-api-methods)
- [admin/domain_blocks API methods](#admin-domain-blocks-api-methods)
- [email_domain_blocks API methods](#email-domain-blocks-api-methods)
- [ip_blocks API methods](#ip-blocks-api-methods)
- [measures API methods](#measures-api-methods)
- [admin/reports API methods](#admin-reports-api-methods)
- [retention API methods](#retention-api-methods)
- [admin/trends API methods](#admin-trends-api-methods)
- [AccountWarning](#accountwarning)
- [Admin::Account](#admin-account)
- [Admin::CanonicalEmailBlock](#admin-canonicalemailblock)
- [Admin::Cohort](#admin-cohort)
- [Admin::Dimension](#admin-dimension)
- [Admin::DomainAllow](#admin-domainallow)
- [Admin::DomainBlock](#admin-domainblock)
- [Admin::EmailDomainBlock](#admin-emaildomainblock)
- [Admin::Ip](#admin-ip)
- [Admin::IpBlock](#admin-ipblock)
- [Admin::Measure](#admin-measure)
- [Admin::Report](#admin-report)
- [Announcement](#announcement)
- [Appeal](#appeal)
- [Application](#application)
- [Context](#context)
- [Conversation](#conversation)
- [CustomEmoji](#customemoji)
- [DomainBlock](#domainblock)
- [Error](#error)
- [ExtendedDescription](#extendeddescription)
- [FamiliarFollowers](#familiarfollowers)
- [FeaturedTag](#featuredtag)
- [Filter](#filter)
- [FilterKeyword](#filterkeyword)
- [FilterResult](#filterresult)
- [FilterStatus](#filterstatus)
- [IdentityProof](#identityproof)
- [Instance](#instance)
- [List](#list)
- [Marker](#marker)
- [MediaAttachment](#mediaattachment)
- [Notification](#notification)
- [NotificationPolicy](#notificationpolicy)
- [NotificationRequest](#notificationrequest)
- [Poll](#poll)
- [Preferences](#preferences)
- [PreviewCard](#previewcard)
- [PreviewCardAuthor](#previewcardauthor)
- [PrivacyPolicy](#privacypolicy)
- [Reaction](#reaction)
- [Relationship](#relationship)
- [RelationshipSeveranceEvent](#relationshipseveranceevent)
- [Report](#report)
- [Role](#role)
- [Rule](#rule)
- [ScheduledStatus](#scheduledstatus)
- [Search](#search)
- [Status](#status)
- [StatusEdit](#statusedit)
- [StatusSource](#statussource)
- [Suggestion](#suggestion)
- [Tag](#tag)
- [Token](#token)
- [Translation](#translation)
- [V1::Filter](#v1-filter)
- [V1::Instance](#v1-instance)
- [V1::NotificationPolicy](#v1-notificationpolicy)
- [WebPushSubscription](#webpushsubscription)

---


# What is Mastodon?

Source: https://docs.joinmastodon.org

# What is Mastodon?

Welcome to the Mastodon documentation!

## What is a microblog?

Similar to how blogging is the act of publishing updates to a website, **microblogging** is the act of publishing small updates to a stream of updates on your profile. You can publish text posts and optionally attach media such as pictures, audio, video, or polls. Mastodon lets you follow friends and discover new ones.

## What is federation?

**Federation** is a form of decentralization. Instead of a single central service that all people use, there are multiple services, that any number of people can use.

| Grade of centralization | Examples |
| --- | --- |
| Centralized | Twitter, Facebook, Instagram |
| Federated | Email, XMPP, phone networks, physical mail |
| Distributed | BitTorrent, IPFS, Scuttlebutt |

A Mastodon website can operate alone. Just like a traditional website, people sign up on it, post messages, upload pictures and talk to each other. *Unlike* a traditional website, Mastodon websites can interoperate, letting their users communicate with each other; just like you can send an email from your Gmail account to someone from Outlook, Fastmail, Protonmail, or any other email provider, as long as you know their email address, **you can mention or message anyone on any website using their address**.

![From left to right: Centralized, Federated, Distributed](/assets/network-models.jpg)From left to right: Centralized, Federated, Distributed

## What is ActivityPub?

Mastodon uses a standardized, open protocol to implement federation. It is called **ActivityPub**. Any software that likewise implements federation via ActivityPub can seamlessly communicate with Mastodon, just like Mastodon websites communicate with one another.

The **fediverse** (“federated universe”) is the name for all websites that can communicate with each other over ActivityPub and the World Wide Web. That includes all Mastodon servers, but also other implementations:

* Pleroma, a modular microblogging engine
* Pixelfed, federated image sharing platform, which lets you share and consume media posts
* Misskey, which includes microblogging alongside a customizable dashboard
* PeerTube, which lets you upload videos to channels
* Plume, which lets you publish longer-form articles
* And many more, including individual and personal websites!

The fediverse does not have its own brand, so you might more often hear “follow me on Mastodon” than “follow me on the fediverse”, but technically the latter is more correct.

## Practical implications

## Choice of service provider and policy

Because Mastodon is just software that can be used to power any website, potential users of Mastodon have the option of choosing a service provider from already-existing Mastodon websites, or to create their own Mastodon website if they wish. The Mastodon project maintains a list of recommended service providers at [joinmastodon.org](https://joinmastodon.org), sortable by category and/or language. Some websites may have moderation policies that go beyond this, such as requiring the use of certain tags on potentially sensitive content, and some websites may have more relaxed moderation policies, but websites listed in the picker all agree to adopt the [Mastodon Server Covenant](https://joinmastodon.org/covenant), meaning that they pledge to actively moderate against hate speech, to take daily backups, to have at least one emergency admin, and to provide at least 3 months advance notice in case of shutdown.

> Maintaining communities that feel safe for all of its members is not easy. Mastodon provides a lot of foundational framework and tools for doing it, and shifts the power to effect change from one commercial entity to the communities themselves.
> 
> – Eugen Rochko, Jul 6 2018, [“Cage the Mastodon”](https://blog.joinmastodon.org/2018/07/cage-the-mastodon/)
> 
> 

> A centralized social media platform has a hierarchical structure where rules and their enforcement, as well as the development and direction of the platform, are decided by the CEO […] A decentralized network deliberately relinquishes control of the platform owner, by essentially not having one.
> 
> – Eugen Rochko, Dec 30 2018, [“Why does decentralization matter?”](https://blog.joinmastodon.org/2018/12/why-does-decentralization-matter/)
> 
> 

## Funding and monetization

Mastodon websites are operated by different people or organizations completely independently. Mastodon does not implement any monetization strategies in the software.

Some server operators choose to offer paid accounts, some server operators are companies who can utilize their existing infrastructure, some server operators rely on crowdfunding from their users via Patreon and similar services, and some server operators are just paying out-of-pocket for a personal server for themselves and maybe some friends. So if you want to support the server hosting your account, check if it offers a way to donate.

Mastodon development is likewise crowdfunded via [Patreon](https://patreon.com/mastodon) and via [OpenCollective](https://opencollective.com/mastodon). **No venture capital is involved.**

> In my opinion, “instant, public, global messaging and conversation” should, in fact, be *global*. Distributed between independent organizations and actors who can self-govern. A public utility, without incentives to exploit the conversations for profit.
> 
> – Eugen Rochko, Mar 3 2018, [“Twitter is not a public utility”](https://blog.joinmastodon.org/2018/03/twitter-is-not-a-public-utility/)
> 
> 

## Interoperability between different software

In practical terms: Imagine if you could follow an Instagram user from your Twitter account and comment on their photos without leaving your account. If Twitter and Instagram were federated services that used the same protocol, that would be possible. With a Mastodon account, **you can communicate with any other compatible website,** ***even if it is not running on Mastodon***. All that is necessary is that the software support the same subset of the ActivityPub protocol that allows for creating and interacting with status updates. To find out more about the technical specifications required to interoperate with Mastodon, see [ActivityPub](/spec/activitypub/), [WebFinger](/spec/webfinger/), and [Security](/spec/security/). To read more about what ActivityPub allows us to do, see [Why ActivityPub is the future](https://blog.joinmastodon.org/2018/06/why-activitypub-is-the-future/).

> All of these platforms are different and they focus on different needs. And yet, the foundation is all the same: people subscribing to receive posts from other people. And so, they are all compatible.
> 
> – Eugen Rochko, Jun 27 2018, [“Why ActivityPub is the future”](https://blog.joinmastodon.org/2018/06/why-activitypub-is-the-future/)
> 
> 

## Free/libre software

Unlike proprietary services, **anyone has the complete freedom to run, examine, inspect, copy, modify, distribute, and reuse the Mastodon source code, provided they guarantee the same freedoms for any derivative work.** Just like how users of Mastodon can choose their service provider, you as an individual are free to contribute features to Mastodon or publish a modified version of Mastodon that includes different features. These modified versions, also known as software forks, are required to also uphold the same freedoms as the original Mastodon project. For example, [glitch-soc](https://glitch-soc.github.io/docs/) is a software distribution that adds various experimental features. Many individual forks exist as well, perhaps themed slightly differently or including small modifications to the codebase. Because Mastodon is libre software that respects your freedom, personalizations like these are not only allowed but encouraged.

> The ultimate power is in giving people the ability to create their own spaces, their own communities, to modify the software as they see fit, but without sacrificing the ability of people from different communities to interact with each other.
> 
> – Eugen Rochko, Feb 20 2017, [“The power to build communities: A response to Mark Zuckerberg”](https://blog.joinmastodon.org/2017/02/the-power-to-build-communities/)
> 
> 

> Decentralization is biodiversity of the digital world, the hallmark of a healthy ecosystem. A decentralized network like the fediverse allows different user interfaces, different software, different forms of government to co-exist and cooperate.
> 
> – Eugen Rochko, Dec 30 2018, [“Why does decentralization matter?”](https://blog.joinmastodon.org/2018/12/why-does-decentralization-matter/)
> 
> 

## Choose your path

Learn how to use Mastodon:

[Signing up for an account](/user/signup/)Learn how to install Mastodon:

[Preparing your machine](/admin/prerequisites/)Learn how to write an app for Mastodon:

[Getting started with the API](/client/intro/)Learn about the Mastodon backend and how to contribute:

[Technical overview](/dev/overview/)Last updated January 14, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/_index.md)  
Also available in:
[简体中文](/zh-cn/)
[日本語](/ja/)
[Polski](/pl/)

---


# Signing up for an account

Source: https://docs.joinmastodon.org/user/signup/

# Signing up for an account

Find your perfect community.

## Choosing a website

You have to choose a website to sign up on, like you would choose an email provider, or a World of Warcraft realm for your new character. The website will be your service provider, hosting your account, your profile, and your home feed.

You can [browse a list of servers by categories and languages on joinmastodon.org](https://joinmastodon.org/#getting-started).## Understanding a website’s policies

Before you sign up for a service, it is important to understand its policies and terms of use. A Mastodon website will usually have its policies listed on the `/about/more` page, which can be found by clicking “learn more” on the landing page while not logged in to that website.

## Signup modes

Mastodon allows website administrators to set one of three different signup modes: open signups, invites, and approval mode.

## Open signup

Some websites may allow you to register immediately – just fill out the registration with your username, email address, and password, and you can start using your account.

## Server invites

Some websites disable the registration form, and instead require invite links to be generated and shared in order to allow people to register.

## Approval-based registration

Some websites allow you to fill out a registration form, but with an additional form entry for mentioning why you want to join that website. Once you submit the form, your account must be approved by a moderator before you can start using it.

## Your username and your domain

Mastodon usernames actually consist of two parts:

* The local username, e.g. `alice`
* And the domain of the website, e.g. `example.com`

Just like an email address. For convenience sake, Mastodon allows you to skip the second part when addressing people on the same server as you, but you have to keep in mind when sharing your username with other people, you need to include the domain or they won’t be able to find you as easily.

| Sharing your username |  |
| --- | --- |
| I’m `@alice` on Mastodon! | Wrong |
| I’m `@alice@example.com` on Mastodon! | Correct |
| I’m <https://example.com/@alice> on Mastodon! | Correct |

The search form in Mastodon will find people either with the above address form, or the link to the person’s profile, so you can share that instead if you prefer.

The same username *can* be registered on different servers – there is no way to claim all of them ahead of time. Just like with email, you should not expect `alice@outlook.com` to be the same person as `alice@gmail.com` or `alice@yahoo.com`.

Last updated November 22, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/signup.md)  
Also available in:
[简体中文](/zh-cn/user/signup/)
[日本語](/ja/user/signup/)
[Polski](/pl/user/signup/)

---


# Preparing your machine

Source: https://docs.joinmastodon.org/admin/prerequisites/

# Preparing your machine

If you are setting up a fresh machine, it is recommended that you secure it first. Assuming that you are running **Ubuntu 22.04**:

## Do not allow password-based SSH login (keys only)

First, make sure you are actually logging in to the server using keys and not via a password, otherwise, this will lock you out. Many hosting providers support uploading a public key and automatically set up key-based root login on new machines for you.

Edit `/etc/ssh/sshd_config` and find `PasswordAuthentication`. Make sure it’s uncommented and set to `no`. If you made any changes, restart sshd:

```
systemctl restart ssh.service

```
## Update system packages

```
apt update && apt upgrade -y

```
## Install fail2ban so it blocks repeated login attempts

First, install fail2ban:

```
apt install fail2ban

```
Edit `/etc/fail2ban/jail.local` and put this inside:

```
[DEFAULT]
destemail = your@email.here
sendername = Fail2Ban

[sshd]
enabled = true
port = 22
mode = aggressive

```
Finally, restart fail2ban:

```
systemctl restart fail2ban

```
## Install a firewall and only allow SSH, HTTP and HTTPS ports

First, install iptables-persistent. During installation, it will ask you if you want to keep the current rules–decline.

```
apt install -y iptables-persistent

```
Edit `/etc/iptables/rules.v4` and put this inside:

```
\*filter

# Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn't use lo0
-A INPUT -i lo -j ACCEPT
-A INPUT ! -i lo -d 127.0.0.0/8 -j REJECT

# Accept all established inbound connections
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Allow all outbound traffic - you can modify this to only allow certain traffic
-A OUTPUT -j ACCEPT

# Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).
-A INPUT -p tcp --dport 80 -j ACCEPT
-A INPUT -p tcp --dport 443 -j ACCEPT
# (optional) Allow HTTP/3 connections from anywhere.
-A INPUT -p udp --dport 443 -j ACCEPT

# Allow SSH connections
# The -dport number should be the same port number you set in sshd\_config
-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT

# Allow ping
-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT

# Allow destination unreachable messages, especially code 4 (fragmentation required) is required or PMTUD breaks
-A INPUT -p icmp -m icmp --icmp-type 3 -j ACCEPT

# Log iptables denied calls
-A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables denied: " --log-level 7

# Reject all other inbound - default deny unless explicitly allowed policy
-A INPUT -j REJECT
-A FORWARD -j REJECT

COMMIT

```
With iptables-persistent, that configuration will be loaded at boot time. But since we are not rebooting right now, we need to load it manually for the first time:

```
iptables-restore < /etc/iptables/rules.v4

```
If your server is also reachable over IPv6, edit `/etc/iptables/rules.v6` and add this inside:

```
\*filter

# Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn't use lo0
-A INPUT -i lo -j ACCEPT
-A INPUT ! -i lo -d ::1/128 -j REJECT

# Accept all established inbound connections
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Allow all outbound traffic - you can modify this to only allow certain traffic
-A OUTPUT -j ACCEPT

# Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).
-A INPUT -p tcp --dport 80 -j ACCEPT
-A INPUT -p tcp --dport 443 -j ACCEPT
# (optional) Allow HTTP/3 connections from anywhere.
-A INPUT -p udp --dport 443 -j ACCEPT

# Allow SSH connections
# The -dport number should be the same port number you set in sshd\_config
-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT

# Allow ping
-A INPUT -p icmpv6 -j ACCEPT

# Log iptables denied calls
-A INPUT -m limit --limit 5/min -j LOG --log-prefix "iptables denied: " --log-level 7

# Reject all other inbound - default deny unless explicitly allowed policy
-A INPUT -j REJECT
-A FORWARD -j REJECT

COMMIT

```
Similar to the IPv4 rules, you can load it manually like this:

```
ip6tables-restore < /etc/iptables/rules.v6

```
Last updated August 1, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/prerequisites.md)  
Also available in:
[简体中文](/zh-cn/admin/prerequisites/)

---


# Getting started with the API

Source: https://docs.joinmastodon.org/client/intro/

# Getting started with the API

A primer on REST APIs, HTTP requests and responses, and parameters.

## An introduction to REST

Mastodon provides access to its data over a REST API. REST stands for REpresentational State Transfer, but for our purposes, just think of it as sending and receiving information about various resources based on the request. The Mastodon REST API uses HTTP for its requests and JSON for its payloads.

## Understanding HTTP requests and responses

REST API endpoints can be called with certain HTTP methods, and more than one method can be used on the same endpoint. The Mastodon API will generally use the following HTTP methods:

* **GET**: Read or view a resource.
* **POST**: Send information to the server.
* **PUT** | **PATCH**: Update a resource.
* **DELETE**: Removes a resource.

Your favorite programming language probably has a utility or library to make HTTP requests. For the purposes of this section, the cURL utility will be used for examples, which is a command-line utility included with many operating systems by default (as `curl`).

With cURL, the default HTTP method is GET, but you can specify the type of request to make by using the `--request` or `-X` flag; for example, `curl -X POST` will send a POST request instead of a GET request. You may also want to use the `-i` flag to include additional HTTP headers that may be returned as part of the response where relevant.

## Providing parameters

HTTP requests can include additional parameters in various different ways, but most notably, the Mastodon API understands query strings, form data, and JSON.

Query strings, form data, and JSON submitted via POST body are equally understood by the API. It is expected that query strings are used for GET requests, and form data or JSON is used for all other requests.## Query strings

Request the URL, but append query strings to the end. Query strings can be appended by first typing ? and then appending them in the form of parameter=value. Multiple query strings can be appended by separating them with &. For example:

```
curl https://mastodon.example/endpoint?q=test&n=0

```
## Form data

Instead of mutating the URL with query strings, you can send the data separately. With cURL, this is done by passing it with the `--data` or `-d` flag. Data may be sent together similar to query strings, or it may be sent separately as key-value pairs with multiple data flags. You may also use the `--form` or `-F` flag for key-value pairs, which also allows sending multipart data such as files. For example:

```
# send raw data as query strings
curl -X POST \
 -d 'q=test&n=0' \
 https://mastodon.example/endpoint
# send raw data separately
curl -X POST \
 -d 'q=test' \
 -d 'n=0' \
 https://mastodon.example/endpoint
# explicit form-encoded; allows for multipart data
curl -X POST \
 -F 'q=test' \
 -F 'n=0' \
 -F 'file=@filename.jpg' \
 https://mastodon.example/endpoint

```
## JSON

*JavaScript Object Notation* as defined in ECMA-404. Quick one-page overview: <https://www.json.org/>

Similar to sending form data, but with an additional header to specify that the data is in JSON format. To send a JSON request with cURL, specify the JSON content type with a header, then send the JSON data as form data:

```
curl -X POST \
 -H 'Content-Type: application/json' \
 -d '{"parameter": "value"}' \
 https://mastodon.example/endpoint

```
## Data types

## Multiple values (Array)

An array parameter must be encoded using bracket notation. For example, `array[]=foo&array[]=bar` would be translated into the following:

```
array = [
 'foo',
 'bar',
]

```
As JSON, arrays are formatted like so:

```
{
 "array": ["foo", "bar"]
}

```
## Nested parameters (Hash)

Some parameters need to be nested. For that, bracket notation must also be used. For example, `source[privacy]=public&source[language]=en` would be translated into:

```
source = {
 privacy: 'public',
 language: 'en',
}

```
As JSON, hashes are formatted like so:

```
{
 "source": {
 "privacy": "public",
 "language": "en"
 }
}

```
## True-or-false (Booleans)

A boolean value is considered false for the values `0`, `f`, `F`, `false`, `FALSE`, `off`, `OFF`; considered to not be provided for empty strings; and considered to be true for all other values. When using JSON data, use the literals `true`, `false`, and `null` instead.

## Files

File uploads must be encoded using `multipart/form-data`.

This can be combined with arrays as well.

## How to use API response data

The Mastodon REST API will return JSON as the response text. It also returns HTTP headers which may be useful in handling the response, as well as an HTTP status code which should let you know how the server handled the request. The following HTTP status codes may be expected:

* 200 = OK. The request was handled successfully.
* 4xx = Client error. Your request was not correct. Most commonly, you may see 401 Unauthorized, 404 Not Found, 410 Gone, or 422 Unprocessed.
* 5xx = Server error. Something went wrong while handling the request. Most commonly, you may see 503 Unavailable.

Last updated March 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/client/intro.md)

---


# Technical overview

Source: https://docs.joinmastodon.org/dev/overview/

# Technical overview

A description of Mastodon's architecture.

Mastodon is a Ruby on Rails application with a React.js front-end. It follows standard practices of those frameworks, so if you are already familiar with Rails or React.js, you will not find any surprises here.

The best way of working with Mastodon in a development environment is installing all the dependencies on your system, rather than using Docker or Vagrant. You need Ruby, Node.js, PostgreSQL and Redis, which is a pretty standard set of dependencies for Rails applications.

Tutorials for installing these dependencies can be found on the “Installing from source” page in the Running Mastodon section of the documentation. After following the installation guide in the Running Mastodon section, see the “Setting up a dev environment” page for further instructions on how to configure your environment for development.

## Environments

An “environment” is a set of configuration values intended for a specific use case. Some environments could be: development, in which you intend to change the code; test, in which you intend to run the automated test suite; staging, which is meant to preview the code to end-users; and production, which is intended to face end-users. Mastodon comes with configurations for development, testing and production.

The default value of `RAILS_ENV` is `development`, so you don’t need to set anything extra to run Mastodon in development mode. In fact, all of Mastodon’s configuration has correct defaults for the development environment, so you do not need an `.env` file unless you need to customize something. Here are some of the different behaviours between the development environment and the production environment:

* Ruby code reloads itself when you change it, which means you don’t need to restart the Rails server process to see changes
* All errors you encounter show stack traces in the browser, rather than being hidden behind a generic error page
* Webpack runs continuously and re-compiles JS and CSS assets when you change any of the front-end files, and the pages automatically reload
* Caching is disabled by default
* An admin account with the e-mail `admin@localhost:3000` and password `mastodonadmin` is created automatically during `db:seed`

It should be noted that the Docker configuration distributed with Mastodon is optimized for the production environment, and so is an extremely bad fit for development. The Vagrant configuration, on the other hand, is meant specifically for development and not production use.

Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/dev/overview.md)

---


# ActivityPub

Source: https://docs.joinmastodon.org/spec/activitypub/

# ActivityPub

A decentralized social networking protocol based upon the ActivityStreams 2.0 data format and JSON-LD.

## Status federation

[app/lib/activitypub/activity.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/activitypub/activity.rb)## Supported activities for statuses

CreateTransformed into a status and saved into databaseDeleteRemoves a status from the databaseLikeTransformed into a favourite on a statusAnnounceTransformed into a boost on a statusUpdateRefresh vote count on polls. As of Mastodon 3.5.0: edit statuses when the `updated` timestamp is present.UndoUndo a previous Like or Announce.FlagTransformed into a report to the moderation team. See the [Reports](/spec/activitypub/#Flag) extension for more information.## Payloads

The first-class Object types supported by Mastodon are `Note` and `Question`.

* Notes are transformed into regular statuses.
* Questions are transformed into a poll status. See the [Polls](/spec/activitypub/#Question) extension for more information.

Some other Object types are converted as best as possible:

* Article
* Page
* Image
* Audio
* Video
* Event

The transformer uses `content` if available, or `name` if not, in order to generate status text. The `url` will be appended. The `summary` property will be used as the CW text. The `icon` will be used as a thumbnail.

## HTML sanitization

[lib/sanitize\_ext/sanitize\_config.rb](https://github.com/mastodon/mastodon/blob/main/lib/sanitize_ext/sanitize_config.rb)Mastodon sanitizes incoming HTML in order to not break assumptions for API client developers. Supported elements will be kept as-is, and unsupported elements will be converted or removed. Supported attributes will be kept, and all other attributes will be stripped. The following elements and attributes are supported:

* `<p>`
* `<span>` (`class`)
* `<br>`
* `<a>` (`href`, `rel`, `class`)
* lists will be converted to `<p>`, and list items will be separated with `<br>`

Since Mastodon v4.2, the following elements and attributes are supported:

* `<p>`
* `<span>` (`class`)
* `<br>`
* `<a>` (`href`, `rel`, `class`)
* `<del>`
* `<pre>`
* `<code>`
* `<em>`
* `<strong>`
* `<b>`
* `<i>`
* `<u>`
* `<ul>`
* `<ol>` (`start`, `reversed`)
* `<li>` (`value`)
* `<blockquote>`
* headings will be converted to `<strong>` and then wrapped in `<p>`

The sanitizer will keep classes if they begin with microformats prefixes or are semantic classes:

* h-\*
* p-\*
* u-\*
* dt-\*
* e-\*
* mention
* hashtag
* ellipsis
* invisible

Links will be kept if the protocol is supported, and converted to text otherwise. The following link protocols are supported:

* http
* https
* dat
* dweb
* ipfs
* ipns
* ssb
* gopher
* xmpp
* magnet
* gemini

## Properties used

contentUsed as status textnameUsed as status text, if `content` is not provided on a transformed Object typesummaryUsed as CW textsensitiveUsed to determine whether status media or text should be hidden by default. See the [Sensitive content](/spec/activitypub/#sensitive) extension section for more information about `as:sensitive`inReplyToUsed for threading a status as a reply to another statuspublishedUsed as status dateurlUsed for status permalinks, and also appended to status text for transformed ObjectsattributedToUsed to determine the profile which authored the statusto/ccUsed to determine audience and visibility of a status, in combination with mentions. See [Mentions for adddressing and notifications](/spec/activitypub/#Mention)tagUsed to mark up mentions and hashtags.tag[].typeEither `Mention`, `Hashtag`, or `Emoji` is currently supported. See the [Hashtag](/spec/activitypub/#Hashtag) and [Custom emoji](/spec/activitypub/#Emoji) extension sections for more informationtag[].nameThe plain-text Webfinger address of a profile Mention (`@user` or `@user@domain`), or the plain-text Hashtag (`#tag`), or the custom Emoji shortcode (`:thounking:`)tag[].hrefThe URL of the actor or tagattachmentUsed to include attached images, videos, or audio.attachment[].urlUsed to fetch the media attachmentattachment[].summaryUsed as media descriptionattachment[].blurhashUsed to generate a blurred preview image corresponding to the colors used within the image. See [Blurhash](/spec/activitypub/#blurhash) for more details.repliesA Collection of statuses that are in reply to the current status. Up to 5 replies from the same server will be fetched upon discovery of a remote status, in order to resolve threads more fully. On Mastodon’s side, the first page contains self-replies, and additional pages contain replies from other people.likesA Collection used to represent `Like` activities received for this status. The actual activities are not exposed by Mastodon at this time.likes.totalItemsThe number of likes this status has received.sharesA Collection used to represent `Announce` activities received for this status. The actual activities are not exposed by Mastodon at this time.shares.totalItemsThe number of `Announce` activities received for this status.## Poll-specific properties

endTimeThe timestamp for when voting will close on the pollclosedThe timestamp for when voting closed on the poll. The timestamp will likely match the `endTime` timestamp. If this property is present, the poll is assumed to be closed.votersCountHow many people have voted in the poll. Distinct from how many votes have been cast (in the case of multiple-choice polls)oneOfSingle-choice poll optionsanyOfMultiple-choice poll optionsoneOf/anyOf[].nameThe poll option’s textoneOf/anyOf[].replies.totalItemsThe poll option’s vote count## Profile federation

## Supported activities for profiles

FollowIndicate interest in receiving status updates from a profile.Accept/RejectUsed to approve or deny Follow activities. Unlocked accounts will automatically reply with an Accept, while locked accounts can manually choose whether to approve or deny a follow request.Add/RemoveManage pinned posts and featured collections.UpdateRefresh account detailsDeleteRemove an account from the database, as well as all of their statuses.UndoUndo a previous Follow, Accept Follow, or Block.BlockSignal to a remote server that they should hide your profile from that user. Not guaranteed. See [Remote blocking](/spec/activitypub/#Block) for more information.FlagReport a user to their moderation team. See the [Reports](/spec/activitypub/#Flag) extension for more information.MoveMigrate followers from one account to another. Requires `alsoKnownAs` to be set on the new account pointing to the old account.## Properties used

preferredUsernameUsed for Webfinger lookup. Must be unique on the domain, and must correspond to a Webfinger `acct:` URI.nameUsed as profile display name.summaryUsed as profile bio.typeAssumed to be Person. If type is Application or Service, it will be interpreted as a bot flag.urlUsed as profile link.iconUsed as profile avatar.imageUsed as profile header.manuallyApprovesFollowersWill be shown as a locked account.discoverableWill be shown in the profile directory. See [Discoverability flag](/spec/activitypub/#discoverable).indexablePosts by this account can be indexed for full-text search. See [Indexable flag](/spec/activitypub/#indexable).publicKeyRequired for signatures. See [Public key](/spec/activitypub/#publicKey).featuredPinned posts. See [Featured collection](/spec/activitypub/#featured).attachmentUsed for profile fields. See [Profile metadata](/spec/activitypub/#PropertyValue) and [Identity proofs](/spec/activitypub/#IdentityProof).alsoKnownAsRequired for Move activity.publishedWhen the profile was created.memorialWhether the account is a memorial account.suspendedWhether the account is currently suspended.attributionDomainsDomains allowed to use `fediverse:creator` for this actor in published articles.## JSON-LD Contexts and Extensions

[app/lib/activitypub/adapter.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/activitypub/adapter.rb)## Mastodon extensions (`toot:`)

Base URI: `http://joinmastodon.org/ns#`

Contains terms used for Mastodon features.

* toot:Emoji (`http://joinmastodon.org/ns#Emoji`)
* toot:IdentityProof (`http://joinmastodon.org/ns#IdentityProof`)
* toot:attributionDomains (`http://joinmastodon.org/ns#attributionDomains`)
* toot:blurhash (`http://joinmastodon.org/ns#blurhash`)
* toot:discoverable (`http://joinmastodon.org/ns#discoverable`)
* toot:featured (`http://joinmastodon.org/ns#featured`)
* toot:featuredTags (`http://joinmastodon.org/ns#featuredTags`)
* toot:focalPoint (`http://joinmastodon.org/ns#focalPoint`)
* toot:indexable (`http://joinmastodon.org/ns#indexable`)
* toot:memorial (`http://joinmastodon.org/ns#memorial`)
* toot:suspended (`http://joinmastodon.org/ns#suspended`)
* toot:votersCount (`http://joinmastodon.org/ns#votersCount`)

## ActivityStreams extensions (`as:`)

Base URI: `https://www.w3.org/ns/activitystreams#`

Contains ActivityStreams extended properties that have been proposed but not officially adopted yet.

* as:Hashtag (`https://www.w3.org/ns/activitystreams#Hashtag`)
* as:manuallyApprovesFollowers (`https://www.w3.org/ns/activitystreams#manuallyApprovesFollowers`)
* as:movedTo (`https://www.w3.org/ns/activitystreams#movedTo`)
* as:sensitive (`https://www.w3.org/ns/activitystreams#sensitive`)

## Schema.org extensions (`schema:`)

Contains properties used for profile metadata.

Base URI: `http://schema.org#` (incorrect; should be `https://schema.org/`)

* [schema:PropertyValue (`http://schema.org#PropertyValue`, should be `https://schema.org/PropertyValue`)](https://schema.org/PropertyValue)
* [schema:value (`http://schema.org#value`, should be `https://schema.org/value`)](https://schema.org/value)

## W3ID Security Vocabulary (`sec:`)

Context: [`https://w3id.org/security/v1`](https://w3id.org/security/v1)

Used for HTTPS Signatures. Also used for identity proofs. See [Security](/spec/security/) for more information.

* [sec:publicKey (`https://w3id.org/security#publicKey`)](https://w3id.org/security#publicKey)
* [sec:publicKeyPem (`https://w3id.org/security#publicKeyPem`)](https://w3id.org/security#publicKeyPem)
* [sec:owner (`https://w3id.org/security#owner`)](https://w3id.org/security#owner)
* [sec:signature (`https://w3id.org/security#signature`)](https://w3id.org/security#signature)
* [sec:signatureValue (`https://w3id.org/security#signatureValue`)](https://w3id.org/security#signatureValue)

## W3ID Identity

Context: [`https://w3id.org/identity/v1`](https://w3id.org/identity/v1) (offline)

Used for Linked Data Signatures. See [Security > Linked Data Signatures](/spec/security/#ld) for more information.

* [dc:creator (`http://purl.org/dc/terms/creator`)](http://purl.org/dc/terms/creator)
* [dc:created (`http://purl.org/dc/terms/created`)](http://purl.org/dc/terms/created)
* [sec:signature (`https://w3id.org/security#signature`)](https://w3id.org/security#signature)
* [sec:signatureValue (`https://w3id.org/security#signatureValue`)](https://w3id.org/security#signatureValue)

## Extensions defined using ActivityStreams vocabulary

While the Activity Vocabulary defines a wide range of types and terms, ActivityPub only defines side effects for a subset of them. The following activity types have the following side effects when received in a Mastodon inbox.

## Remote blocking (`Block`)

ActivityPub defines the `Block` activity for client-to-server (C2S) use-cases, but not for server-to-server (S2S) – it recommends that servers SHOULD NOT deliver Block activities to their `object`. However, Mastodon will send this activity when a local user blocks a remote user. When Mastodon receives a `Block` activity where the `object` is an actor on the local domain, it will interpret this as a signal to hide the actor’s profile and posts from the local user, as well as disallowing mentions of that actor by that local user.

```
{
 "@context": "https://www.w3.org/ns/activitystreams",
 "id": "https://mastodon.example/bd06bb61-01e0-447a-9dc8-95915db9aec8",
 "type": "Block",
 "actor": "https://mastodon.example/users/alice",
 "object": "https://example.com/~mallory",
 "to": "https://example.com/~mallory"
}

```
## Reporting profiles and posts (`Flag`)

To report profiles and/or posts on remote servers, Mastodon will send a `Flag` activity from the instance actor. The `object` of this activity contains the user being reported, as well as any posts attached to the report. If a comment is attached to the report, it will be used as the `content` of the activity.

```
{
 "@context": "https://www.w3.org/ns/activitystreams",
 "id": "https://mastodon.example/ccb4f39a-506a-490e-9a8c-71831c7713a4",
 "type": "Flag",
 "actor": "https://mastodon.example/actor",
 "content": "Please take a look at this user and their posts",
 "object": [
 "https://example.com/users/1",
 "https://example.com/posts/380590",
 "https://example.com/posts/380591"
 ],
 "to": "https://example.com/users/1"
}

```
## Account migration (`Move`)

Mastodon uses the Move activity to signal that an account has migrated to a different account. For the migration to be considered valid, Mastodon checks that the new account has defined an alias pointing to the old account (via the `alsoKnownAs` property).

```
{
 "@context": "https://www.w3.org/ns/activitystreams",
 "id": "https://mastodon.example/users/alice#moves/1",
 "actor": "https://mastodon.example/users/alice",
 "type": "Move",
 "object": "https://mastodon.example/users/alice",
 "target": "https://alice.com/users/109835986274379",
 "to": "https://mastodon.example/users/alice/followers"
}

```
## Polls

[Activity Vocabulary §5.4 - Representing Questions](https://www.w3.org/TR/activitystreams-vocabulary/#questions)The ActivityStreams Vocabulary specification describes loosely (non-normatively) how a question might be represented. Mastodon’s implementation of polls is somewhat inspired by this section. The following implementation details can be observed:

* `Question` is used as an `Object` type instead of as an `IntransitiveActivity`; rather than being sent directly, it is wrapped in a `Create` just like any other status.
* Poll options are serialized using `oneOf` or `anyOf` as an array.
	+ Each item in this array has no `id`, has a `type` of `Note`, and has a `name` representing the text of the poll option.
	+ Each item in this array also has a `replies` property, representing the responses to this particular poll option. This node has no `id`, has a `type` of `Collection`, and has a `totalItems` property representing the total number of votes received for this option.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "votersCount": "http://joinmastodon.org/ns#votersCount"
 }
 ],
 "id": "https://mastodon.example/users/alice/statuses/1009947848598745",
 "type": "Question",
 "content": "What should I eat for breakfast today?",
 "published": "2023-03-05T07:40:13Z",
 "endTime": "2023-03-06T07:40:13Z",
 "votersCount": 7,
 "anyOf": [
 {
 "type": "Note",
 "name": "apple",
 "replies": {
 "type": "Collection",
 "totalItems": 3
 }
 },
 {
 "type": "Note",
 "name": "orange",
 "replies": {
 "type": "Collection",
 "totalItems": 7
 }
 },
 {
 "type": "Note",
 "name": "banana",
 "replies": {
 "type": "Collection",
 "totalItems": 6
 }
 }
 ]
}

```
* Poll votes are serialized as `Create` activities, where the `object` is a `Note` with a `name` that exactly matches the `name` of the poll option. The `Note.inReplyTo` points to the URI of the `Question` object.
	+ For multiple-choice polls, multiple activities may be sent. Votes will be counted if you have not previously voted for that option.

```
{
 "@context": "https://www.w3.org/ns/activitystreams",
 "id": "https://mastodon.example/users/bob#votes/827163/activity",
 "to": "https://mastodon.example/users/alice",
 "actor": "https://mastodon.example/users/bob",
 "type": "Create",
 "object": {
 "id": "https://mastodon.example/users/bob#votes/827163",
 "type": "Note",
 "name": "orange",
 "attributedTo": "https://mastodon.example/users/bob",
 "to": "https://mastodon.example/users/alice",
 "inReplyTo": "https://mastodon.example/users/alice/statuses/1009947848598745"
 }
}

```

```
{
 "@context": "https://www.w3.org/ns/activitystreams",
 "id": "https://mastodon.example/users/bob#votes/827164/activity",
 "to": "https://mastodon.example/users/alice",
 "actor": "https://mastodon.example/users/bob",
 "type": "Create",
 "object": {
 "id": "https://mastodon.example/users/bob#votes/827164",
 "type": "Note",
 "name": "banana",
 "attributedTo": "https://mastodon.example/users/bob",
 "to": "https://mastodon.example/users/alice",
 "inReplyTo": "https://mastodon.example/users/alice/statuses/1009947848598745"
 }
}

```
## Mentions for addressing and notifications

[Activity Vocabulary §5.6 - Mentions, Tags, and Other Common Social Microsyntaxes](https://www.w3.org/TR/activitystreams-vocabulary/#microsyntaxes)In the ActivityStreams Vocabulary, `Mention` is a subtype of `Link` that is intended to represent the microsyntax of @mentions. The `tag` property is intended to add references to other Objects or Links. For Link tags, the `name` of the Link should be a substring of the natural language properties (`name`, `summary`, `content`) on that object. Wherever such a substring is found, it can be transformed into a hyperlink reference to the `href`.

However, Mastodon also uses `Mention` tags for addressing in some cases. Based on the presence or exclusion of Mention tags, and compared to the explicitly declared audiences in `to` and `cc`, Mastodon will calculate a visibility level for the post. Additionally, Mastodon requires Mention tags in order to generate a notification. (The mentioned actor must still be included within `to` or `cc` explicitly in order to receive the post.)

* `public`: Public statuses have the `as:Public` magic collection in `to`
* `unlisted`: Unlisted statuses have the `as:Public` magic collection in `cc`
* `private`: Followers-only statuses have an actor’s follower collection in `to` or `cc`, but do not include the `as:Public` magic collection
* `limited`: Limited-audience statuses have actors in `to` or `cc`, at least one of which is not `Mention`ed in `tag`
* `direct`: Mentions-only statuses have actors in `to` or `cc`, all of which are `Mention`ed in `tag`

[app/lib/activitypub/activity/create.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/activitypub/activity/create.rb)[app/lib/activitypub/parser/status\_parser.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/activitypub/parser/status_parser.rb)## Extensions not defined by ActivityStreams

The following features are defined using properties and types that are not defined by ActivityStreams.

## Public key

Public keys are used for HTTP Signatures and Linked Data Signatures. This is implemented using an extra property `publicKey` on actor objects. See [Security](/spec/security/) for more information.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 "https://w3id.org/security/v1"
 ],
 "id": "https://mastodon.social/users/Gargron",
 "type": "Person",
 "publicKey": {
 "id": "https://mastodon.social/users/Gargron#main-key",
 "owner": "https://mastodon.social/users/Gargron",
 "publicKeyPem": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvXc4vkECU2/CeuSo1wtn\nFoim94Ne1jBMYxTZ9wm2YTdJq1oiZKif06I2fOqDzY/4q/S9uccrE9Bkajv1dnkO\nVm31QjWlhVpSKynVxEWjVBO5Ienue8gND0xvHIuXf87o61poqjEoepvsQFElA5ym\novljWGSA/jpj7ozygUZhCXtaS2W5AD5tnBQUpcO0lhItYPYTjnmzcc4y2NbJV8hz\n2s2G8qKv8fyimE23gY1XrPJg+cRF+g4PqFXujjlJ7MihD9oqtLGxbu7o1cifTn3x\nBfIdPythWu5b4cujNsB3m3awJjVmx+MHQ9SugkSIYXV0Ina77cTNS0M2PYiH1PFR\nTwIDAQAB\n-----END PUBLIC KEY-----\n"
 }
}

```
## Featured collection

What is known in Mastodon as “pinned statuses”, or statuses that are always featured at the top of people’s profiles, is implemented using an extra property `featured` on the actor object that points to a `Collection` of objects.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "featured": {
 "@id": "http://joinmastodon.org/ns#featured",
 "@type": "@id"
 }
 }
 ],

 "id": "https://example.com/@alice",
 "type": "Person",
 "featured": "https://example.com/@alice/collections/featured"
}

```
## Featured tags

Mastodon allows users to feature specific hashtags on their profile for easy browsing, as a discoverability mechanism. This is implemented using an extra property `featuredTags` on the actor object that points to a `Collection` of `Hashtag` objects specifically.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "featuredTags": {
 "@id": "http://joinmastodon.org/ns#featuredTags",
 "@type": "@id"
 }
 }
 ],

 "id": "https://example.com/@alice",
 "type": "Person",
 "featuredTags": "https://example.com/@alice/collections/tags"
}

```
## Profile metadata

Mastodon supports arbitrary profile fields containing name-value pairs. This is implemented using the `attachment` property on actor objects, with objects in the array having a type of `PropertyValue` and a `value` property, both from the schema.org namespace.

As noted above while listing the [schema.org @context extensions](/#schema), Mastodon currently incorrectly expects and maps the term `schema` to the base URI `http://schema.org#` instead of to the base URI `https://schema.org/`. Therefore, JSON-LD processors who use the correct context definition will fail to process profile fields correctly.
```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "schema": "http://schema.org#",
 "PropertyValue": "schema:PropertyValue",
 "value": "schema:value"
 }
 ],
 "id": "https://mastodon.social/users/Gargron",
 "type": "Person",
 "attachment": [
 {
 "type": "PropertyValue",
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span}"
 },
 {
 "type": "PropertyValue",
 "name": "Homepage",
 "value": "<a href=\"https://zeonfederated.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">zeonfederated.com</span><span class=\"invisible\"></span}"
 }
 ]
}

```
## Identity proofs deprecated

This property is currently unused/deprecated due to the removal of Keybase support in Mastodon 3.5: <https://github.com/mastodon/mastodon/pull/17045>Mastodon supports integration with identity providers to prove that a profile is linked to a certain identity. This is implemented using the `attachment` property on actor objects, with objects in the array having a type of `IdentityProof` from the Mastodon namespace. The object also includes `signatureAlgorithm` and `signatureValue` from the W3ID Security Vocabulary namespace.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 "https://w3id.org/security/v1",
 {
 "IdentityProof": "http://joinmastodon.org/ns#IdentityProof"
 }
 ],
 "id": "https://mastodon.social/users/Gargron",
 "type": "Person",
 "attachment": [
 {
 "type": "IdentityProof",
 "name": "gargron",
 "signatureAlgorithm": "keybase",
 "signatureValue": "5cfc20c7018f2beefb42a68836da59a792e55daa4d118498c9b1898de7e845690f"
 }
 ]
}

```
## Discoverability flag

Mastodon allows users to opt-in or opt-out of discoverability features like the profile directory. This flag may also be used as an indicator of the user’s preferences toward being included in external discovery services. If you are implementing such a tool, it is recommended that you respect this property if it is present. This is implemented using an extra property `discoverable` on objects mapping to profiles.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "discoverable": "http://joinmastodon.org/ns#discoverable"
 }
 ],
 "id": "https://mastodon.social/users/Gargron",
 "type": "Person",
 "discoverable": true
}

```
## Indexable flag

Mastodon allows users to opt-in or opt-out of indexing features like full-text search of public statuses. If you are implementing such a tool, it is recommended that you respect this property if it is present. This is implemented using an extra property `indexable` on objects mapping to profiles.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "indexable": "http://joinmastodon.org/ns#indexable"
 }
 ],
 "id": "https://mastodon.social/users/Gargron",
 "type": "Person",
 "indexable": true
}

```
## Suspended flag

Mastodon reports whether a user was locally suspended, for better handling of these accounts. Suspended accounts in Mastodon return empty data. If a remote account is marked as suspended, it cannot be unsuspended locally. Suspended accounts can be targeted by activities such as Update, Undo, Reject, and Delete. This functionality is implemented using an extra property `suspended` on objects.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "suspended": "http://joinmastodon.org/ns#suspended"
 }
 ],
 "id": "https://example.com/@eve",
 "type": "Person",
 "suspended": true
}

```
## Memorial flag

Mastodon reports whether a user’s profile was memorialized, for better handling of these accounts. Memorial accounts in Mastodon return normal data, but are rendered with a header indicating that the account is a memorial account. This functionality is implemented using an extra property `memorial` on objects.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "memorial": "http://joinmastodon.org/ns#memorial"
 }
 ],
 "id": "https://example.com/@alice",
 "type": "Person",
 "memorial": true
}

```
## Hashtags

Similar to the `Mention` subtype of Link already defined in ActivityStreams, Mastodon will use `Hashtag` as a subtype of Link in order to surface posts referencing some common topic identified by a string key. The Hashtag has a `name` containing the #hashtag microsyntax – a `#` followed by a string sequence representing a topic. This is similar to the @mention microsyntax, where an `@` is followed by some string sequence representing a resource (where in Mastodon’s case, this resource is expected to be an account). Mastodon will also normalize hashtags to be case-insensitive lowercase strings, performing ASCII folding and removing invalid characters.

[app/lib/hashtag\_normalizer.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/hashtag_normalizer.rb)
```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "Hashtag": "https://www.w3.org/ns/activitystreams#Hashtag"
 }
 ],
 "id": "https://example.com/some-post",
 "type": "Note",
 "attributedTo": "https://example.com",
 "content": "I love #cats",
 "tag": [
 {
 "type": "Hashtag",
 "name": "#cats",
 "href": "https://example.com/tagged/cats"
 }
 ]
}

```
## Custom emojis

Mastodon supports arbitrary emojis by including a `tag` of the `Emoji` type. Handling of custom emojis is similar to handling of mentions and hashtags, where the `name` of the tagged entity is found as a substring of the natural language properties (`name`, `summary`, `content`) and then linked to the local representation of some resource or topic. In the case of emoji shortcodes, the `name` is replaced by the HTML for an inline image represented by the `icon` property (where `icon.url` links to the image resource).

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "Emoji": "http://joinmastodon.org/ns#Emoji",
 }
 ],

 "id": "https://example.com/@alice/hello-world",
 "type": "Note",
 "content": "Hello world :kappa:",
 "tag": [
 {
 "id": "https://example.com/emoji/123",
 "type": "Emoji",
 "name": ":kappa:",
 "icon": {
 "type": "Image",
 "mediaType": "image/png",
 "url": "https://example.com/files/kappa.png"
 }
 }
 ]
}

```
## Focal points

Mastodon supports setting a focal point on uploaded images, so that wherever that image is displayed, the focal point stays in view. This is implemented using an extra property `focalPoint` on `Image` objects. The property is an array of two floating points between -1.0 and 1.0, with 0,0 being the center of the image, the first value being x (-1.0 is the left edge, +1.0 is the right edge) and the second value being y (-1.0 is the bottom edge, +1.0 is the top edge). See [API Guidelines > Focal points](/api/guidelines/#focal-points) for more information.

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "focalPoint": {
 "@container": "@list",
 "@id": "http://joinmastodon.org/ns#focalPoint"
 }
 }
 ],

 "id": "https://example.com/@alice/hello-world",
 "type": "Note",
 "content": "A picture attached!",
 "attachment": [
 {
 "type": "Image",
 "mediaType": "image/png",
 "url": "https://example.com/files/cats.png",
 "focalPoint": [
 -0.55,
 0.43
 ]
 }
 ]
}

```
![A demonstration of various focal points and their coordinates.](/assets/focal-points.jpg)A demonstration of various focal points and their coordinates.

The focal point of (-0.55, 0.43) in the example above corresponds to a point 55% to the left of center and 43% above center. This focal point should remain visible within the cropped thumbnail, if any cropping is done.

## Blurhash

Mastodon generates colorful preview thumbnails for attachments. This is implemented using an extra property `blurhash` on `Image` objects. The property is a string generated by the [BlurHash algorithm](https://blurha.sh).

```
{
 "@context": [
 "https://www.w3.org/ns/activitystreams",
 {
 "blurhash": "http://joinmastodon.org/ns#blurhash"
 }
 ],

 "id": "https://example.com/@alice/hello-world",
 "type": "Note",
 "content": "A picture attached!",
 "attachment": [
 {
 "type": "Image",
 "mediaType": "image/png",
 "url": "https://example.com/files/cats.png",
 "blurhash": "UBL\_:rOpGG-oBUNG,qRj2so|=eE1w^n4S5NH"
 }
 ]
}

```
## Sensitive content

Mastodon uses the `as:sensitive` extension property to mark certain posts as sensitive. When a post is marked as sensitive, any media attached to it will be hidden by default, and if a `summary` is present, the status `content` will be collapsed behind this summary. In Mastodon, this is known as a **content warning**.

## Other functionality

## Secure mode

When a Mastodon server runs in secure mode, all cross-server HTTP requests to it must be signed (in other words, even `GET` requests to public resources). That way, the Mastodon server can choose to reject requests from servers it has blocked and avoid “leaking” public information. Mastodon itself uses a dedicated system actor to sign such HTTP requests. See [Security](/spec/security/) for more details on HTTP signatures.

Secure mode is the foundation upon which “limited federation mode” is built. A Mastodon server in limited federation mode will only federate with servers its admin has explicitly allowed, and reject all other requests.

## Follower synchronization mechanism

Mastodon has a concept of “followers-only” posts, but expanding the followers collection is currently handled at the destination rather than at the origin (i.e., not with explicit addressing). Therefore, a mechanism to detect synchronization issues and correct them is needed. This mechanism must work on partial followers collections, rather than the full collection (which may not be public information). This collection is partial in the sense that it only contains the followers from a specific instance, but it MUST contain all of those followers. A follower being omitted from the collection would lead to that follow relationship getting severed.

When delivering a message to a remote user, an optional `Collection-Synchronization` HTTP header is attached, following the same syntax as the `Signature` header, with the following attributes:

* `collectionId` = MUST be the sender’s `followers` collection
* `url` = a URL to a partial collection containing the identifier of every one of the sender’s followers residing on the receiver’s instance. MUST reside on the same domain as the actor itself, and SHOULD be only accessible with a signed query from the receiver’s instance
* `digest` = hexadecimal representation of the XORed SHA256 digests of each of the identifiers in the partial collection

Example:

```
POST https://mastodon.social/users/foo/inbox HTTP/1.1
Collection-Synchronization:
 collectionId="https://social.sitedethib.com/users/Thib/followers",
 url="https://social.sitedethib.com/users/Thib/followers\_synchronization",
 digest="b08ab6951c7d6cc2b91e17ebd9557da7fae02489728e9332fcb3a97748244d50"

```
When a remote user attempts to GET the partial collection `url`, this request must be signed with HTTP signatures. Example:

```
GET https://social.sitedethib.com/users/Thib/followers\_synchronization HTTP/1.1
Signature: ... # a signature from an account on mastodon.social

{
 "@context": "https://www.w3.org/ns/activitystreams",
 "id": "https://social.sitedethib.com/users/Thib/followers?domain=mastodon.social",
 "type": "OrderedCollection",
 "orderedItems": [
 "https://mastodon.social/users/Gargron"
 ]
}

```
Last updated March 25, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/spec/activitypub.md)

---


# Datetime formats

Source: https://docs.joinmastodon.org/api/datetime-format/

# Datetime formats

Datetime formats

## Datetime

A “datetime” specifies an instant in time.

The string representation of a datetime uses the “Internet Date/Time Format” defined in [RFC3339 section 5.6](https://www.rfc-editor.org/rfc/rfc3339#section-5.6).

To summarise, that is the following mandatory components:

```
[YYYY]-[MM]-[DD]T[hh]:[mm]:[ss].[s][TZD]

```
where:

* `[YYYY]` = four-digit year
* `[MM]` = two-digit month (01=January, etc.)
* `[DD]` = two-digit day of month (01 through 31)
* `[hh]` = two digits of hour (00 through 23) (24 NOT allowed)
* `[mm]` = two digits of minute (00 through 59)
* `[ss]` = two digits of second (00 through 60)
* `[s]` = one or more digits representing a decimal fraction of a second
* `[TZD]` = time zone designator (either `Z` for UTC, or `+[hh]:[mm]` or `-[hh]:[mm]` to represent an offset from UTC)

For example, `1994-11-05T13:15:30.000Z` (equivalent to `1994-11-05T08:15:30-05:00`).

See [RFC3339 section 5.6](https://www.rfc-editor.org/rfc/rfc3339#section-5.6) for the complete [ABNF grammar](https://www.rfc-editor.org/rfc/rfc2234).

## Interoperability

* The date and time portions are always separated by an uppercase `T` (not lowercase, not a space).
* The timezone designator `Z` is always uppercase, not lowercase.
* The fractional (`[s]`) part of the second is represented with at least one digit and at most three digits.
* A field may be presented as a datetime while having lower resolution. E.g., the server clamps the value to the midnight on the date in question.

## Date

A “date” specifies the calendar date an activity occurred, in UTC.

The string representation of a date uses the complete, extended calendar date representation from ISO 8601, the International Standard for the representation of dates and times (section 5.2.1.1). This is also the “Complete date” format from [W3C Date and Time formats](https://www.w3.org/TR/NOTE-datetime).

That is the following mandatory components:

```
[YYYY]-[MM]-[DD]

```
* `[YYYY]` = four-digit year
* `[MM]` = two-digit month (01=January, etc.)
* `[DD]` = two-digit day of month (01 through 31)

## Interoperability

* The year, month, and date components are always separated by a `-`.

Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/api/datetime-format.md)

---


# apps API methods

Source: https://docs.joinmastodon.org/methods/apps/

# apps API methods

Register client applications that can be used to obtain OAuth tokens.

## Create an application

```
POST /api/v1/apps HTTP/1.1

```
Create a new application to obtain OAuth2 credentials.

In Mastodon prior to 4.3, OAuth Applications could be “vacuumed” and removed from the database under certain conditions, meaning your Application’s `client_id` and `client_secret` would not be recognised by the Mastodon server.  
This automated removal of applications was removed in Mastodon 4.3  
  
A workaround for Mastodon versions older than 4.3 was to register your application, and then immediately request a [Client Credential](/client/token/#flow) token, which would permanently ensure your application always had an active access token and would not be removed.At present, Mastodon only supports provisioning confidential clients, i.e., you will always receive a `client_secret` and `client_secret_expires_at` attributes in the [CredentialApplication](/entities/Application/#CredentialApplication) entity.  
  
For more information see: [OAuth 2 client types](/spec/oauth/#client-types)**Returns:** [CredentialApplication](/entities/Application/#CredentialApplication)  
**OAuth:** Public  
**Version history:**  
0.0.0 - added  
2.7.2 - now returns `vapid_key`  
4.3.0 - deprecated `vapid_key`, please see [api/v2/instance](/methods/instance/#v2)  
4.3.0 - added support for multiple `redirect_uris` in Form data parameters  
4.3.0 - added `redirect_uris` response property  
4.3.0 - deprecated `redirect_uri` response property, since this can be a non-URI if multiple `redirect_uris` are registered, use `redirect_uris` instead  
4.3.0 - changed entity type from [Application](/entities/Application/) to [CredentialApplication](/entities/Application/#CredentialApplication)

## Request

Example request:

```
POST /api/v1/apps HTTP/1.1
Content-Type: application/json

{
  "client_name": "Test Application",
  "redirect_uris": ["https://app.example/callback", "https://app.example/register"],
  "scopes": "read write push",
  "website": "https://app.example"
}

```
## Form data parameters

client\_namerequired String. A name for your applicationredirect\_urisrequired String or Array of Strings. Where the user should be redirected after authorization. To display the authorization code to the user instead of redirecting to a web page, use `urn:ietf:wg:oauth:2.0:oob` in this parameter.scopesString. Space separated list of scopes. If none is provided, defaults to `read`. See [OAuth Scopes](/api/oauth-scopes/) for a list of possible scopes.websiteString. A URL to the homepage of your app## Response

## 200: OK

Store the `client_id` and `client_secret` in your cache, as these will be used to obtain OAuth tokens.

Treat the `client_id` and `client_secret` properties as if they are passwords. We recommend you encrypt these when storing in your cache, to prevent credential exposure.
```
{
 "id": "563419",
 "name": "Test Application",
 "website": "https://app.example",
 "scopes": ["read", "write", "push"],
 "redirect\_uri": "urn:ietf:wg:oauth:2.0:oob",
 "redirect\_uris": ["urn:ietf:wg:oauth:2.0:oob"],
 "client\_id": "TWhM-tNSuncnqN7DBJmoyeLnk6K3iJJ71KKXxgL1hPM",
 "client\_secret": "ZEaFUFmF0umgBX1qKJDjaU99Q31lDkOU8NutzTOoliw"
}

```
Or with multiple redirect URIs:

```
{
 "id": "563419",
 "name": "Test Application",
 "website": "https://app.example",
 "scopes": ["read", "write", "push"],
 "redirect\_uri": "https://app.example/callback\nhttps://app.example/register",
 "redirect\_uris": [
 "https://app.example/callback",
 "https://app.example/register"
 ],
 "client\_id": "TWhM-tNSuncnqN7DBJmoyeLnk6K3iJJ71KKXxgL1hPM",
 "client\_secret": "ZEaFUFmF0umgBX1qKJDjaU99Q31lDkOU8NutzTOoliw"
}

```
The `redirect_uri` property in the above examples is considered deprecated as of 4.3.0 and should not be used, instead use the `redirect_uris` property.## 422: Unprocessable entity

If a required parameter is missing or improperly formatted, the request will fail.

```
{
 "error": "Validation failed: Redirect URI must be an absolute URI."
}

```

---

## Verify your app works

```
GET /api/v1/apps/verify\_credentials HTTP/1.1

```
Confirm that the app’s OAuth2 credentials work.

**Returns:** [Application](/entities/Application/)  
**OAuth:** App token  
**Version history:**  
2.0.0 - added  
2.7.2 - now returns `vapid_key`  
4.3.0 - deprecated `vapid_key`, please see [api/v2/instance](/methods/instance/#v2)  
4.3.0 - removed needing `read` scope to access this API, now any valid App token can be used  
4.3.0 - added `scopes` and `redirect_uris` properties

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <app_token>` to gain authorized access to this API method. `<app_token>` may be either a `client_credential` or `access_token` returned from [`/oauth/token`](/methods/oauth/#token)## Response

## 200: OK

If the Authorization header was provided with a valid token, you should see your app returned as an Application entity.

```
{
 "name": "Test Application",
 "website": "https://app.example",
 "scopes": ["read", "write", "push"],
 "redirect\_uris": [
 "https://app.example/callback",
 "https://app.example/register"
 ]
}

```
## 401: Unauthorized

If the Authorization header contains an invalid token, is malformed, or is not present, an error will be returned indicating an authorization failure.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[app/controllers/api/v1/apps\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/apps_controller.rb)[app/controllers/api/v1/apps/credentials\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/apps/credentials_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/apps.md)

---


# Account

Source: https://docs.joinmastodon.org/entities/Account/

# Account

Represents a user of Mastodon and their associated profile.

## Example

```
{
 "id": "23634",
 "username": "noiob",
 "acct": "noiob@awoo.space",
 "display\_name": "ikea shark fan account",
 "locked": false,
 "bot": false,
 "created\_at": "2017-02-08T02:00:53.274Z",
 "attribution\_domains": ["example.com", "example.net"],
 "note": "<p>:ms\_rainbow\_flag:​ :ms\_bisexual\_flagweb:​ :ms\_nonbinary\_flag:​ <a href=\"https://awoo.space/tags/awoo\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>awoo</span}.space <a href=\"https://awoo.space/tags/admin\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>admin</span} ~ <a href=\"https://awoo.space/tags/bi\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>bi</span} ~ <a href=\"https://awoo.space/tags/nonbinary\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>nonbinary</span} ~ compsci student ~ likes video <a href=\"https://awoo.space/tags/games\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>games</span} and weird/ old electronics and will post obsessively about both ~ avatar by <span class=\"h-card\"><a href=\"https://weirder.earth/@dzuk\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>dzuk</span}</span></p>",
 "url": "https://awoo.space/@noiob",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/023/634/original/6ca8804dc46800ad.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/023/634/original/6ca8804dc46800ad.png",
 "header": "https://files.mastodon.social/accounts/headers/000/023/634/original/256eb8d7ac40f49a.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/023/634/original/256eb8d7ac40f49a.png",
 "followers\_count": 547,
 "following\_count": 404,
 "statuses\_count": 28468,
 "last\_status\_at": "2019-11-17",
 "emojis": [
 {
 "shortcode": "ms\_rainbow\_flag",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/028/691/original/6de008d6281f4f59.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/028/691/static/6de008d6281f4f59.png",
 "visible\_in\_picker": true
 },
 {
 "shortcode": "ms\_bisexual\_flag",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/050/744/original/02f94a5fca7eaf78.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/050/744/static/02f94a5fca7eaf78.png",
 "visible\_in\_picker": true
 },
 {
 "shortcode": "ms\_nonbinary\_flag",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/105/099/original/8106088bd4782072.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/105/099/static/8106088bd4782072.png",
 "visible\_in\_picker": true
 }
 ],
 "fields": [
 {
 "name": "Pronouns",
 "value": "they/them",
 "verified\_at": null
 },
 {
 "name": "Alt",
 "value": "<span class=\"h-card\"><a href=\"https://cybre.space/@noiob\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>noiob</span}</span>",
 "verified\_at": null
 },
 {
 "name": "Bots",
 "value": "<span class=\"h-card\"><a href=\"https://botsin.space/@darksouls\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>darksouls</span}</span>, <span class=\"h-card\"><a href=\"https://botsin.space/@nierautomata\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>nierautomata</span}</span>, <span class=\"h-card\"><a href=\"https://mastodon.social/@fedi\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>fedi</span}</span>, code for <span class=\"h-card\"><a href=\"https://botsin.space/@awoobot\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>awoobot</span}</span>",
 "verified\_at": null
 },
 {
 "name": "Website",
 "value": "<a href=\"http://shork.xyz\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">http://</span><span class=\"\">shork.xyz</span><span class=\"invisible\"></span}",
 "verified\_at": "2019-11-10T10:31:10.744+00:00"
 }
 ]
}

```
## Attributes

## `id`

**Description:** The account id.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
0.1.0 - added

## `username`

**Description:** The username of the account, not including domain.  
**Type:** String  
**Version history:**  
0.1.0 - added

## `acct`

**Description:** The Webfinger account URI. Equal to `username` for local users, or `username@domain` for remote users.  
**Type:** String  
**Version history:**  
0.1.0 - added

## `url`

**Description:** The location of the user’s profile page.  
**Type:** String (URL)  
**Version history:**  
0.1.0 - added

## `display_name`

**Description:** The profile’s display name.  
**Type:** String  
**Version history:**  
0.1.0 - added

## `note`

**Description:** The profile’s bio or description.  
**Type:** String (HTML)  
**Version history:**  
0.1.0 - added

## `avatar`

**Description:** An image icon that is shown next to statuses and in the profile.  
**Type:** String (URL)  
**Version history:**  
0.1.0 - added

## `avatar_static`

**Description:** A static version of the avatar. Equal to `avatar` if its value is a static image; different if `avatar` is an animated GIF.  
**Type:** String (URL)  
**Version history:**  
1.1.2 - added

## `header`

**Description:** An image banner that is shown above the profile and in profile cards.  
**Type:** String (URL)  
**Version history:**  
0.1.0 - added

## `header_static`

**Description:** A static version of the header. Equal to `header` if its value is a static image; different if `header` is an animated GIF.  
**Type:** String (URL)  
**Version history:**  
1.1.2 - added

## `locked`

**Description:** Whether the account manually approves follow requests.  
**Type:** Boolean  
**Version history:**  
0.1.0 - added

## `fields`

**Description:** Additional metadata attached to a profile as name-value pairs.  
**Type:** Array of [Field](/entities/Account/#Field)  
**Version history:**  
2.4.0 - added

## `emojis`

**Description:** Custom emoji entities to be used when rendering the profile.  
**Type:** Array of [CustomEmoji](/entities/CustomEmoji/)  
**Version history:**  
2.4.0 - added

## `bot`

**Description:** Indicates that the account may perform automated actions, may not be monitored, or identifies as a robot.  
**Type:** Boolean  
**Version history:**  
2.4.0 - added

## `group`

**Description:** Indicates that the account represents a Group actor.  
**Type:** Boolean  
**Version history:**  
3.1.0 - added

## `discoverable`

**Description:** Whether the account has opted into discovery features such as the profile directory.  
**Type:** nullable Boolean  
**Version history:**  
3.1.0 - added

## `noindex` optional

**Description:** Whether the local user has opted out of being indexed by search engines.  
**Type:** nullable Boolean  
**Version history:**  
4.0.0 - added

## `moved` optional

**Description:** Indicates that the profile is currently inactive and that its user has moved to a new account.  
**Type:** nullable [Account](/entities/Account/), or null if the profile is suspended.  
**Version history:**  
2.1.0 - added

## `suspended` optional

**Description:** An extra attribute returned only when an account is suspended.  
**Type:** Boolean  
**Version history:**  
3.3.0 - added

## `limited` optional

**Description:** An extra attribute returned only when an account is silenced. If true, indicates that the account should be hidden behind a warning screen.  
**Type:** Boolean  
**Version history:**  
3.5.3 - added

## `created_at`

**Description:** When the account was created.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
0.1.0 - added  
3.4.0 - now resolves to midnight instead of an exact time

## `last_status_at`

**Description:** When the most recent status was posted.  
**Type:** nullable String ([Date](/api/datetime-format/#date)), or null if no statuses  
**Version history:**  
3.0.0 - added  
3.1.0 - now returns date only, no time

## `statuses_count`

**Description:** How many statuses are attached to this account.  
**Type:** Integer  
**Version history:**  
0.1.0 - added

## `followers_count`

**Description:** The reported followers of this profile.  
**Type:** Integer  
**Version history:**  
0.1.0 - added

## `following_count`

**Description:** The reported follows of this profile.  
**Type:** Integer  
**Version history:**  
0.1.0 - added

## CredentialAccount entity attributes

```
{
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 "attribution\_domains": ["example.com", "example.net"],
 "note": "<p>i have approximate knowledge of many things. perpetual student. (nb/ace/they)</p><p>xmpp/email: a@trwnh.com<br /><a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a><br />help me live: <a href=\"https://liberapay.com/trwnh\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/trwnh</span><span class=\"invisible\"></span></a> or paypal</p><p>- my triggers are moths and glitter<br />- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise<br />- dm me if i did something wrong, so i can improve<br />- purest person on fedi, do not lewd in my presence</p>",
 // ...
 "source": {
 "privacy": "public",
 "sensitive": false,
 "language": "",
 "note": "i have approximate knowledge of many things. perpetual student. (nb/ace/they)\r\n\r\nxmpp/email: a@trwnh.com\r\nhttps://trwnh.com\r\nhelp me live: https://liberapay.com/trwnh or paypal\r\n\r\n- my triggers are moths and glitter\r\n- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise\r\n- dm me if i did something wrong, so i can improve\r\n- purest person on fedi, do not lewd in my presence",
 "fields": [
 {
 "name": "Website",
 "value": "https://trwnh.com",
 "verified\_at": "2019-08-29T04:14:55.571+00:00"
 },
 {
 "name": "Portfolio",
 "value": "https://abdullahtarawneh.com",
 "verified\_at": "2021-02-11T20:34:13.574+00:00"
 },
 {
 "name": "Fan of:",
 "value": "Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo's Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)",
 "verified\_at": null
 },
 {
 "name": "What to expect:",
 "value": "talking about various things i find interesting, and otherwise being a genuine and decent wholesome poster. i'm just here to hang out and talk to cool people! and to spill my thoughts.",
 "verified\_at": null
 }
 ],
 "follow\_requests\_count": 5
 },
 // ...
 "fields": [
 {
 "name": "Website",
 "value": "<a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-08-29T04:14:55.571+00:00"
 },
 {
 "name": "Portfolio",
 "value": "<a href=\"https://abdullahtarawneh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">abdullahtarawneh.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2021-02-11T20:34:13.574+00:00"
 },
 {
 "name": "Fan of:",
 "value": "Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo&#39;s Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)",
 "verified\_at": null
 },
 {
 "name": "What to expect:",
 "value": "talking about various things i find interesting, and otherwise being a genuine and decent wholesome poster. i&#39;m just here to hang out and talk to cool people! and to spill my thoughts.",
 "verified\_at": null
 }
 ],
 "role": {
 "id": "-99",
 "name": "",
 "permissions": "65536",
 "color": "",
 "highlighted": false
 }
}

```
## `attribution_domains`

**Description:** Domains of websites allowed to credit the account.  
**Type:** Array of String  
**Version history:**  
4.4.0 (`mastodon` [API version](/entities/Instance/#api-versions) 3) - added

## `source`

**Description:** An extra attribute that contains source values to be used with API methods that [verify credentials](/methods/accounts/#verify_credentials) and [update credentials](/methods/accounts/#update_credentials).  
**Type:** Hash  
**Version history:**  
2.4.0 - added

## `source[note]`

**Description:** Profile bio, in plain-text instead of in HTML.  
**Type:** String  
**Version history:**  
1.5.0 - added

## `source[fields]`

**Description:** Metadata about the account.  
**Type:** Array of [Field](/entities/Account/#Field)  
**Version history:**  
2.4.0 - added

## `source[privacy]`

**Description:** The default post privacy to be used for new statuses.  
**Type:** String (Enumerable, oneOf)  
`public` = Public post  
`unlisted` = Unlisted post  
`private` = Followers-only post  
`direct` = Direct post  
**Version history:**  
1.5.0 - added

## `source[sensitive]`

**Description:** Whether new statuses should be marked sensitive by default.  
**Type:** Boolean  
**Version history:**  
1.5.0 - added

## `source[language]`

**Description:** The default posting language for new statuses.  
**Type:** String (ISO 639-1 language two-letter code) or empty string  
**Version history:**  
2.4.2 - added

## `source[follow_requests_count]`

**Description:** The number of pending follow requests.  
**Type:** Integer  
**Version history:**  
3.0.0 - added

## `role`

**Description:** The role assigned to the currently authorized user.  
**Type:** [Role](/entities/Role/)  
**Version history:**  
4.0.0 - added

## MutedAccount entity attributes

## `mute_expires_at`

**Description:** When a timed mute will expire, if applicable.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)), or null if the mute is indefinite  
**Version history:**  
3.3.0 - added

## Field entity attributes

## `name`

**Description:** The key of a given field’s key-value pair.  
**Type:** String  
**Version history:**  
2.4.0 - added

## `value`

**Description:** The value associated with the `name` key.  
**Type:** String (HTML)  
**Version history:**  
2.4.0 - added

## `verified_at`

**Description:** Timestamp of when the server verified a URL value for a rel=“me” link.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)) if `value` is a verified URL. Otherwise, null.  
**Version history:**  
2.6.0 - added

## See also

[accounts API methods](/methods/accounts/)[app/serializers/rest/account\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/account_serializer.rb)[app/serializers/rest/credential\_account\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/credential_account_serializer.rb)[app/serializers/rest/muted\_account\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/muted_account_serializer.rb)Last updated January 17, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Account.md)

---


# Setting up your profile

Source: https://docs.joinmastodon.org/user/profile/

# Setting up your profile

Get started with your new account.

## Your appearance

![Profile card showing display name, avatar, header and short bio](/assets/profile-card.png)Profile card showing display name, avatar, header and short bio

You can change how your profile appears to others by navigating to **Preferences** > **Public profile** > **Edit profile**.

## Display name

Your display name is shown to other users before your address. You can set a display name up to 30 characters by default.

## Bio

Your bio is a short description of yourself that is displayed as a note on your profile. You can set a bio of up to 500 characters by default. All links are counted as 23 characters, no matter how long they actually are, so there is no need to use a link shortener to save characters. In fact, using a link shortener is actively discouraged.

## Avatar

Your avatar is an icon that is displayed next to your posts and is part of your visual identity. You can upload an avatar as a PNG, GIF, or JPG image up to 2MB in size. This image will be downscaled to 400x400.

## Header

Your header is a banner image shown at the top of your profile, as well as in profile cards used in follow lists and account directories. You can upload a header as a PNG, GIF, or JPG image up to 2MB in size. This image will be downscaled to 1500x500.

## Profile flags

You can set certain flags on your profile to let others know how you use Mastodon.

![Overview of a profile with the Automated flag set](/assets/bot-flag.png)Overview of a profile with the Automated flag set

## Locked account

By locking your account, two things will happen:

* New followers will not be automatically accepted, but will instead require you to manually approve them.
* A lock icon will be shown to others, to let them know that their follow will not be immediately accepted.

## Bot account

Enabling the bot flag will add a bot icon to your profile. This icon will let others know that your profile may perform automated actions, or might not be monitored by a human. Other software may choose to treat bot profiles differently, but Mastodon currently treats the bot flag as a visual indication only.

## Profile directory

Opting in to be listed on the profile directory will make your profile discoverable through a feature that allows browsing through profiles.

## Profile metadata

Profile metadata is a way to add extra information to your profile that is easy to skim. You have 4 rows where you can define the label and the value. For example:

| Label | Content |
| --- | --- |
| Age | 25 |
| Country | Germany |
| Pronouns | he/him |
| Website | <https://example.com> |

It’s completely up to you what you put there. The content can contain mentions, hashtags, custom emojis and links.

## Link verification

Document-based verification and blue ticks are not possible without a central authority. However, Mastodon can cross-reference the links you put on your profile to prove that you are the real owner of those links. In case one of those links is your personal homepage that is known and trusted, it can serve as the next-best-thing to identity document verification.

Because Mastodon can be self-hosted, there is no better way to verify your identity than to host Mastodon on your own domain, which people already trust.If you put an HTTPS link in your profile metadata, Mastodon checks if that link resolves to a web page that links back to your Mastodon profile with a special `rel=me` attribute. If so, you get a verification checkmark next to that link, since you are confirmed as the owner. Likewise, Mastodon puts `rel="me"` on the links within profile metadata. The link might look something like this:

```
<a href="https://social.example.com/@username" rel="me">Follow me on Mastodon!</a>

```
It may also be embedded directly in the head of your web page:

```
<link href="https://social.example.com/@username" rel="me">

```
## Validation criteria for verified links

Mastodon will validate the “verified link” profile field under the following conditions:

* The value of the profile field is **a link that MUST start with HTTPS**. Other values will not be processed. Other types of links are not processed. In particular, plain HTTP links are not processed because they are insecure and may be modified by an attacker in transit.
* Since 4.0: **the hostname must not change after IDN normalization**. This is to prevent homeograph attacks where some Unicode character is used that looks confusingly similar to some ASCII character in a mixed string. For example, `U+0061` (English lowercase “a”) and `U+0430` (Cyrillic small letter “а”) appear nearly identical, but they are completely different characters. This similarity in appearance could be used maliciously to mislead people.

Mastodon will then resolve the link and fetch the web page located there, looking for a qualified link that matches the criteria:

* The resolved page must contain at least one `a` or `link` tag with a `rel="me"` attribute.
	+ The `href` attribute on one of those elements must be equal to the URL for your Mastodon profile.
* If no links with `rel="me"` are found, Mastodon will look for the *first* link, and the `href` value must redirect to your Mastodon profile’s URL. (This provides limited support for web pages that use link shorteners and do not use rel-me.)
* The HTTP response must not exceed 1 MB.

**Any such link must not be within an `iframe`**. An `iframe` effectively means the link is no longer on the same web page, but rather it is on some external web page which is being embedded in the current one. (Note that some “block-based” CMS software may wrap block elements within iframes, which prevents verification for this reason.)

Make sure to save your profile *after* adding the rel-me link to your web page! The verification process is triggered when you save your profile, and may take some time before completing. If you have added the rel-me link and verification is not working, then try deleting the link, saving, re-adding the link, and saving again.Last updated October 8, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/profile.md)  
Also available in:
[简体中文](/zh-cn/user/profile/)
[日本語](/ja/user/profile/)
[Polski](/pl/user/profile/)

---


# Posting to your profile

Source: https://docs.joinmastodon.org/user/posting/

# Posting to your profile

Sharing your thoughts has never been more convenient.

![Compose form with optional Content Warning enabled](/assets/compose-with-cw.png)Compose form with optional Content Warning enabled

## Text

The main body of each status update can be composed using the text field. The default character limit is 500 characters.

## Links

![Links must start with http(s):// and are counted as 23 characters regardless of length](/assets/compose-links.png)Links must start with http(s):// and are counted as 23 characters regardless of length

If you include links in your post, they must begin with `http://` or `https://`. All links are counted as 23 characters, no matter how long they actually are, so there is no need to use a link shortener to save characters. In fact, using a link shortener is actively discouraged.

## Mentions

![Suggested mentions for both local and remote users](/assets/compose-mentions.png)Suggested mentions for both local and remote users

You can mention users by typing out their full address, e.g. `@alice@example.com`. Note that any usage of`@word` will be interpreted as mentioning the local user with the username `word`, if that user exists. Only the username part will count against your character limit – the domain is not counted.

## Hashtags

![Hashtags are autosuggested with usage frequency](/assets/compose-hashtags.png)Hashtags are autosuggested with usage frequency

You can use a `#hashtag` to make your post discoverable to anyone searching for that hashtag. Hashtags can contain alphanumeric characters and underscores, but cannot contain numbers only.

## Custom emoji

![An array of custom emoji are available in the selector](/assets/compose-custom-emoji.png)An array of custom emoji are available in the selector

Each server offers a set of custom emoji you can use, similar to Slack or Discord. You can use an emoji using its shortcode like `:thounking:` or by clicking the emoji face in the compose box and browsing through the “Custom” category. You can also browse through and search for standard unicode emoji.

## Attachments

You can attach either files or a poll to your status.

## Files

![New post with a thumbnail for attached media, with an Edit button for additional options](/assets/compose-media-attachment.png)New post with a thumbnail for attached media, with an Edit button for additional options

Click the photo stack to attach a file to your post. You can attach the following:

* **Images** (PNG, JPG, HEIF, WEBP, AVIF) **up to 16MB**. Images will be downscaled to 8.3 megapixels (enough for a 3840x2160 image). Up to 4 images can be attached, per post.
* **Animated GIFs** (GIFV) **up to 16MB** are converted to soundless MP4s. GIF dimensions must be less than 1MP (1280x720). You can also upload soundless MP4 and WebM files, which will be looped in clients the same way as an animated GIF. Only one animated GIF can be attached, per post.
	+ Static GIF files have the same limits applied to them as animated GIF files. If you are having issues uploading these images, you will need to convert it to another supported image format.
* **Videos** (MP4, M4V, MOV, WebM) **up to 99MB**. Video will be transcoded to H.264 MP4 with a maximum bitrate of 1300kbps and framerate of 120fps. Only one video can be attached, per post.
* **Audio** (MP3, OGG, WAV, FLAC, OPUS, AAC, M4A, 3GP) **up to 99MB**. Audio will be transcoded to MP3 using V2 VBR (roughly 192kbps). Only one audio file can be attached, per post.

## Editing media

![Edit media to add a media description (ALT text) or choose a focal point for the preview thumbnail](/assets/edit-media.png)Edit media to add a media description (ALT text) or choose a focal point for the preview thumbnail

By clicking the “Edit” link on the attachment thumbnail, you can load a modal which will allow adding a media description or changing the focal point. Although optional, it is a good idea to add media descriptions that briefly describe what is in contained in the media. These descriptions will be shown when the media fails to load for any reason, or when accessed by screen readers and other assistive technology. Setting the focal point is also optional, but can make preview thumbnails looks better when they are not shown in a 16:9 aspect ratio.

## Polls

![New post with a poll in a ‘pick one’ style, that expires after one day](/assets/compose-polls.png)New post with a poll in a ‘pick one’ style, that expires after one day

Click the bar graph icon to attach a poll to your post.

* You can add up to 4 choices. Each choice can be up to 25 characters.
* Polls default to pick-one/single-choice. Click on the radio button to switch your poll to any-of/multiple-choice checkboxes.
* Polls can be set to expire in 5 minutes, 30 minutes, 1 hour, 6 hours, 1 day, 3 days, or 7 days.

## Publishing levels

![New post with the option to modify the publishing level](/assets/post-visibility.png)New post with the option to modify the publishing level

| Level | Public timelines | Permalink | Profile view | Home feeds |
| --- | --- | --- | --- | --- |
| Public | Yes | Yes | Yes | Yes |
| Quiet Public | No | Yes | Yes | Yes |
| Followers | No | Logged in on the same site | In-app or logged in | Yes |
| Specific People | No | Logged in and mentioned | In-app or logged in | No |

Posts can be published with one of four different privacy levels, as described below. You can [set a default privacy level for your posts](../preferences#posting), and you can change the privacy level for a draft post by selecting the “Change Post Privacy” icon beneath the text of the post.

## Public

The default option.

* Anyone can see your post at the permalink without logging in.
* Your post will appear in-app in the public timelines.
* Your followers will receive the post in their home feeds, and anyone mentioned will receive the post in notifications.
* Your post can be boosted into other home feeds.

## Quiet Public

Exactly the same as public, but with the following difference:

* Your post will not appear in Mastodon’s live feeds or explore features.
* Your post will not appear in search results, even if your account has opted-in to full text search.

This option was previously known as Unlisted.

## Followers

A more limited delivery option.

* Seeing your post at the permalink requires being logged in on the same website as someone who follows you or was mentioned.
* Your post will not appear in-app except to followers browsing your profile, and to anyone mentioned.
* Your followers will receive the post in their home feeds, and anyone mentioned will receive the post in notifications.
* Your post cannot be boosted, except by yourself.

To effectively publish private (followers-only) posts, you must **lock your account**–otherwise, anyone could follow you to view older posts.Please mind that post privacy on Mastodon is per-post, rather than account-wide, and as such **there is no way to make past public posts private.**## Specific People

Send your post only to mentioned users.

* Seeing your post at the permalink requires being logged in on the same website as someone who was mentioned.
* Your post will not appear in-app except to anyone mentioned.
* Anyone mentioned will receive the post in notifications. It will not appear in the home timeline.
* Your post cannot be boosted.

**Do not share dangerous and sensitive information over private mentions**. Mastodon is not an encrypted messaging app like Signal or Matrix, the database administrators of the sender’s and recipient’s servers may obtain access to the text.## Visibility of Replies

Your replies will only appear on your followers’ Home feeds if they follow both you and the person you are replying to.

Some notes about this:

* A new post you make which starts with an `@mention` is **not** considered a reply, so it will show up on the Home feed of all your followers.
* The reply’s visibility (Public vs Unlisted vs Followers-Only) does **not** affect whether it shows up on the Home feed.
* If your post is public and contains a followed hashtag, it will be shown on the Home feed regardless of whether it is a reply.
* Other Fediverse software may show all of your replies on the Home feed, no matter who the posts are replies to.

## Content Warnings

![Expanded post with a content warning that also has attached images obscured](/assets/status-cw.png)Expanded post with a content warning that also has attached images obscured

One feature that Mastodon provides that you may not have seen on other social networks is the option to attach a content warning to your posts. When a content warning is included, the status content will be collapsed by default, and only the Content Warning will be shown, similarly to an email subject line or a “read more” break. This can be used to add a summary or subject for your post, to collapse long posts, or to otherwise provide context or setup for the body of the post.

When media is attached, a checkbox appears to allow you to “mark media as sensitive”. This hides the full media behind a blurred thumbnail by default. Adding a CW to a post automatically marks the media as sensitive as well.

Last updated October 8, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/posting.md)  
Also available in:
[简体中文](/zh-cn/user/posting/)
[日本語](/ja/user/posting/)
[Polski](/pl/user/posting/)

---


# Using the network features

Source: https://docs.joinmastodon.org/user/network/

# Using the network features

Follow and talk to anyone from any server.

## Browsing Content in Live Feeds

![Posts from other servers being streamed into the Live Feed](/assets/timeline.png)Posts from other servers being streamed into the Live Feed

To allow you to discover potentially interesting content, Mastodon provides a way to browse all public posts. Well, there is no global shared state between all servers, so there is no way to browse *all* public posts. When you browse **Live Feeds** > **Other Servers**, you see all public posts that the server you are on knows about. There are various ways your server may discover posts, but the bulk of them will be from people that other users on your server follow.

You can also filter the Live Feeds to view only public posts created on your server.

## Interacting with Posts

![An expanded view can be loaded by clicking a status in the timeline](/assets/status.png)An expanded view can be loaded by clicking a status in the timeline

You can perform quick actions on a post directly from the timeline, or you can click on the post to load an expanded view that shows extra information, such as a full timestamp, interaction counts, and threaded replies, if any. The following actions can be performed on a post:

* **Reply** to a post by clicking the arrow icon. Your post will show up in the thread below the post you are replying to.
* **Boost** a post by clicking the cycled-arrow icon. The post will be reshared on your profile.
* **Favourite** a post by clicking the star icon. The post will be added to your favourites list, and a favourite notification will be delivered to its author.
* **Bookmark** a post by clicking the ribbon icon. The post will be privately added to your bookmarks list without generating a notification.
* Access a **menu** of additional options by clicking the ellipsis icon.

## Notifications

![Notifications column with grouping feature enabled](/assets/notifications.png)Notifications column with grouping feature enabled

When other people interact with you or your posts, you will receive a notification depending on the type of the event. Your notifications column allows you to view all notifications in the same stream, or to filter for specific types of notifications:

* **Mentions:** received when someone has mentioned you in a post.
* **Favourites:** received when someone has favourited one of your posts.
* **Boosts:** received when someone has boosted one of your posts.
* **Polls:** Received when a poll that you have voted in or created has ended.
* **Statuses:** Received when a user you have enabled notifications for posts a status.
* **Follows:** Received when someone has followed your profile.

When unread notifications are present, a checkmark will appear in the column header. Clicking this checkmark will mark notifications as read.

## Following Profiles

![Profile card with the Follow button shown](/assets/profile.png)Profile card with the Follow button shown

As long as you encounter a person within your app’s user interface, e.g. the web interface on your home server, or your mobile app, you can just click “follow” and you won’t notice a difference if that person is on your server or not.

However if you come across someone’s public profile hosted on a different server, there’s an obstacle: That server sees you as just another anonymous visitor. Not to worry! You can copy the URL of that profile, or of one of their posts, and then paste that URL into the search function.

If you are visiting a public page on another Mastodon site, see [Using Mastodon outside of your site](../external/#interact).

## Enabling Notifications

![An example of a profile that you are following](/assets/bell.png)An example of a profile that you are following

If you are following someone, you also have the option to receive a notification every time they post. To opt into this functionality, click the bell icon.

## Search

![The search function with modifier options exposed, see the section on prefixes below for description](/assets/search.png)The search function with modifier options exposed, see the section on prefixes below for description

Mastodon’s basic search allows logged-in users to find posts containing a specific hashtag, or to load a user or status directly if they know the URL or address. Searching for a term will show profiles whose username or display name contains that term, as well as hashtags that match or contain that term. Searching for a remote post or account’s full URL will cause the server to fetch it if it is not already in the database so it can be viewed locally.

![An example of a post being loaded directly by its URL](/assets/direct-url.png)An example of a post being loaded directly by its URL

![An example of results when searching for "arstechnica" including an account validated by the domain](/assets/search-accounts.png)An example of results when searching for "arstechnica" including an account validated by the domain

![An example of hashtags returned when searching for "friday"](/assets/search-hashtags.png)An example of hashtags returned when searching for "friday"

Admins may optionally install full-text search. Mastodon’s full-text search allows logged-in users to find results from their own posts, their favourites, their bookmarks and their mentions. It deliberately does not allow searching for arbitrary strings in the entire database, in order to reduce the risk of abuse by people searching for controversial terms to find people to dogpile.

The following operators are supported:

* **“exact phrases”** will try to find the term inside the quote marks. This allows looking only for direct matches, such as `"look at my cluckers"` to find posts explicitly telling you to look at someone’s cluckers.
* **-exclude** will exclude the term prepended by a minus sign. This allows filtering out certain terms, such as `animals -cats` to find posts about animals without posts about cats.
* **+include** will include the term after the plus sign. This allows searching for multiple terms that must be included, such as `cat +dog` to find posts about both cats and dogs.

The following `prefix:value` pairs are also supported:

* `has:` (`media`, `poll`, `embed`) - posts that contain the specified attachment type
* `is:` (`reply`, `sensitive`) - posts that are either a reply or marked sensitive.
* `language:` (`{language_code}`) - posts made in a specific language, indicated by its [ISO639 language code](https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes)
* `from:` (`@{username}`, `@{username}@{domain}`, `me`) - posts from a specified author
* `before:` (`{date}`) - posts created before an ISO8601 formatted date, e.g. “`2025-03-01`”. If the account has a timezone set, searches using their local timezone - otherwise in UTC.
* `after:` (`{date}`) - posts created after an ISO8601 formatted date
* `during:` (`{date}`) - posts created during an ISO8601 formatted date
* `in:` (`library`, `public`) - `library` is the collection of posts that you have interacted with in some way: favorited, reblogged, bookmarked, etc. `public` is the global full text search index. The default is to search both, if this option is omitted.

Each can be used in combination with a text search, for example to find all posts from yourself about cryptids, you could search for `from:me "cryptids"`.

Prefixes can be combined, though they are combined with `AND`, so e.g. one can’t search for all posts from multiple languages.

Prefixes can be negated with `-` as with string queries, so one can search for posts from anyone else about cryptids like `-from:me "cryptids"`.

## Private Mentions

![A list of conversations containing private mentions](/assets/dm-column.png)A list of conversations containing private mentions

In Mastodon, private mentions are just posts that have the “mention only” visibility selected. Visibility can be selected per-post, which allows changing the privacy level later in a thread. The private mentions column currently shows a list of all conversations containing a mention only post. Clicking on a conversation will load the associated thread.

## List Timelines

Lists are subsets of your home timeline. You can create a list, give it a name, and add users that you follow to that list.

![A list of lists](/assets/lists.png)A list of lists

Opening a list will load that list’s timeline. List timelines contain only posts by members of that list, as well as replies to you or to other members of the list. This can be changed to show replies to all people you follow, or to no one.

Last updated March 25, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/network.md)  
Also available in:
[简体中文](/zh-cn/user/network/)
[日本語](/ja/user/network/)
[Polski](/pl/user/network/)

---


# Dealing with unwanted content

Source: https://docs.joinmastodon.org/user/moderating/

# Dealing with unwanted content

Control what you see, for a more comfortable social media experience.

## Filtering posts

It is possible to filter statuses for specific keywords and phrases so that they can be hidden automatically.

![A sample of active filters for various keywords in different contexts](/assets/filter-list.png)A sample of active filters for various keywords in different contexts

To create or manage your filters, go to **Preferences** > **Filters**. The “Add new filter” button will let you create a new filter, and existing filters can be edited or deleted. Your existing filters will be summarized in a table.

![Filters can have an expiry date, specific contexts, server-side visibility options, and use word boundaries](/assets/filter-edit.png)Filters can have an expiry date, specific contexts, server-side visibility options, and use word boundaries

## Keyword or phrase

This is the string that will be matched. The keyword will be searched for in any status’s content, including CW, media descriptions, and poll options.

## Expire after

Optionally only apply the filter for a limited amount of time. Expired filters are not automatically deleted, but can be reactivated by setting a new expiry date (or changing it back to “never” expire).

## Filter contexts

Choose where the filter will be applied:

* Home timeline and lists = matching statuses will be removed from your home feed and lists
* Notifications = matching notifications will not be shown
* Public timelines = matching statuses will not appear in local/federated timelines
* Conversations = matching statuses will be hidden in threads and detailed views

## Drop instead of hide

Filtering is usually done client-side, so that disabling a filter will cause filtered statuses to be visible again. However, if you enable “drop instead of hide”, any matching statuses will be disappear completely and will never be delivered to your home or notifications.

## Whole word

Filters normally apply to any status that contains the included characters, regardless of whether they are in the middle of a word. Enabling “whole word” will only apply the filter if the keyword is surrounded by spaces or other non-alphanumeric characters.

## User-level actions

![The profile dropdown menu offers various actions](/assets/profile-dropdown.png)The profile dropdown menu offers various actions

## Hiding boosts

If you hide boosts from someone, you won’t see their boosts in your home feed. This option only appears on users who you are currently following.

## Muting

When muting, you have the option to mute notifications from them or not. Muting without muting notifications hides the user from your view:

* You won’t see the user in your home feed
* You won’t see other people boosting the user
* You won’t see other people mentioning the user
* You won’t see the user in public timelines

If you choose to also mute notifications from them, you will additionally not see notifications from that user.

Mutes can also have an optional duration, after which they will expire.

The user has no way of knowing they have been muted.

## Blocking

Blocking hides a user from your view:

* You won’t see the user in your home feed
* You won’t see other people boosting the user
* You won’t see other people mentioning the user
* You won’t see the user in public timelines
* You won’t see notifications from that user

Additionally, on the blocked user’s side:

* The user is forced to unfollow you
* The user cannot follow you
* The user won’t see other people’s boosts of you
* The user won’t see you in public timelines

If you and the blocked user are on the same server, the blocked user will not be able to view your posts on your profile while logged in.

## Hiding an entire server

![Sample of blocking an entire domain](/assets/block-domain.png)Sample of blocking an entire domain

If you block an entire server:

* You will not see posts from that server on the public timelines
* You won’t see other people’s boosts of that server in your home feed
* You won’t see notifications from that server
* You will lose any followers that you might have had on that server

## Reporting problematic content to moderators

![The report modal allows selecting example statuses, adding a note, and forwarding reports](/assets/report-modal.png)The report modal allows selecting example statuses, adding a note, and forwarding reports

If you see a status or user that is violating the rules of your website, you can report that user to your site’s moderators. Clicking the “report” option on the user dropdown or status dropdown will open the report modal. Here, you can (and should) add a note about why you are reporting this account. You can attach certain problematic statuses for additional context on why you are reporting the account, and if their conduct is violating the rules of the remote website, you can also choose to forward the report to their site’s moderators.

Last updated October 8, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/moderating.md)  
Also available in:
[简体中文](/zh-cn/user/moderating/)
[日本語](/ja/user/moderating/)
[Polski](/pl/user/moderating/)

---


# Promoting yourself and others

Source: https://docs.joinmastodon.org/user/discoverability/

# Promoting yourself and others

Give visibility to hashtags, profiles, and posts.

## Featured links on your profile

## Featured hashtags

![A list of featured hashtags showing last usage date and total usage](/assets/featured-tags.png)A list of featured hashtags showing last usage date and total usage

You can choose to feature certain hashtags that you use often. Go to **Preferences** > **Edit profile** > **Featured hashtags** to manage which hashtags you are currently featuring. Once featured, a link to the hashtag will be shown on your profile, with the date of the last time it was used in a status, as well as the total number of statuses in which it was used.

## Pinned posts

![An example of a user’s pinned post](/assets/pinned.png)An example of a user’s pinned post

You can choose to feature up to 5 of your own public posts at the top of your profile. Go to the status dropdown menu and click “Pin on profile”. When you pin a post, it will appear at the top of your “posts” tab, before all other chronological status updates.

## Profile directory

![List of users in the profile directory](/assets/directory.png)List of users in the profile directory

The profile directory shows all accounts that have opted into being shown in the directory, and can be used to quickly find profiles that you may be interested in following.

The profile directory can be sorted either by recent activity (the most recently published status), or by new arrivals (the most recently created accounts). The directory can also be filtered to show only local accounts, or to show all known accounts that your website is aware of.

Profiles appear as cards that include a user’s display name, address, account bio, and some brief stats such as how many posts they’ve published, how many followers they have, and the time of their last published status.

Last updated October 8, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/discoverability.md)  
Also available in:
[简体中文](/zh-cn/user/discoverability/)
[日本語](/ja/user/discoverability/)
[Polski](/pl/user/discoverability/)

---


# Set your preferences

Source: https://docs.joinmastodon.org/user/preferences/

# Set your preferences

Customize things just the way you like them.

## Customizing the user interface

## Choose a theme

Mastodon has multiple theme options:

* Automatically switch between a dark and light theme depending on your operating system preferences.
* Manually switch between a dark and light theme.
* Manually use a dark high contrast theme.

![Mastodon post and thread as viewed from the light theme](/assets/light-theme.png)Mastodon post and thread as viewed from the light theme

## Choose your layout

Mastodon defaults to a simple, one-column layout with a compose box on the left and a column switcher on the right. You can choose to enable the advanced web interface, which allows you view and pin multiple columns at the same time.

![Columns of the advanced web interface using the light theme](/assets/advanced-web-ui.png)Columns of the advanced web interface using the light theme

In either interface, updates will load automatically as new posts are available. You can enable Slow Mode to instead show a banner at the top of the column indicating the number of new items available, which will be loaded only when you click the banner.

For accessibility reasons, the auto-play of animated GIFs is disabled by default. You can enable animated GIFs if you want to see animations. You can also reduce motion of animations throughout the UI.

Trending hashtags can be shown or hidden below the getting started column in the advanced UI, or below the column switcher in the simple UI (only when there is enough space to display them).

## Confirmation dialogs

You can choose to require confirmation before performing certain actions. Currently, confirmations can be set before performing the following actions:

* Unfollow
* Boost
* Delete

## Sensitive content

By default, any media marked as sensitive is hidden behind a click-through overlay. You can also choose to always show/hide media behind this overlay, regardless of whether it is marked as sensitive.

Hidden and unloaded media uses a colorful gradient provided by the BlurHash algorithm, which uses the colors of the image but blurs the details. These gradients can be disabled.

![An example blurhash thumbnail](/assets/blurhash.png)An example blurhash thumbnail

Posts with content warnings are collapsed by default, but you can choose to always expand the warnings so that the full post is displayed.

## Controlling your notifications

## Sending emails

You can choose to receive email notifications according to the type of notification you receive within Mastodon. The following notification types are available to enable:

* Follows
* Follow requests
* Boosts
* Favourites
* Mentions

You can also enable digest emails, which will provide you with an overview of notifications received during periods of long inactivity.

## Hiding certain notifications

You can choose to not receive notifications from people you don’t follow, or from people who don’t follow you. This will cause replies, favourites, boosts, and other interactions to not be shown to you.

You can also choose to not receive notifications when you receive a direct message from people you don’t follow.

## Miscellaneous options

If you opt out of search engine indexing, a `noindex` flag will be added to your public profile and status pages.

You can choose to hide your network, which will make your following and follower lists private to you only.

If you want to see posts that are boosted multiple times be reinserted into your feed at the top, you can disable boost grouping in timelines.

## Setting defaults for post privacy, post language, and media sensitivity

Posts default to public privacy. You can choose to default new posts as unlisted or followers-only instead. For an explanation of post privacy levels, see [Posting to your Mastodon profile > Publishing levels](../posting#privacy).

If you primarily or exclusively post in a certain language, it is a good idea to set that language here.

If you often post sensitive media, you can choose to always mark your media as sensitive.

## Filtering languages on public timelines

You can choose to only show posts in certain detected languages while browsing the public timelines. However, note that language detection can be very imprecise, so you may still see some posts in a disabled language, or miss some posts from enabled languages.

Last updated October 8, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/preferences.md)  
Also available in:
[简体中文](/zh-cn/user/preferences/)
[日本語](/ja/user/preferences/)
[Polski](/pl/user/preferences/)

---


# More settings

Source: https://docs.joinmastodon.org/user/contacts/

# More settings

Invite new users, sort through your contacts, and secure your account.

## Generating invites

![Invite people to join your server](/assets/invites.png)Invite people to join your server

Invite links can be generated and shared with other people, and some servers require invites in order to register for an account. When generating an invite link, you can set the max uses to limit how many times a certain link is used, or how long it has been active. Invite links can be deactivated at any time.

## Follows and followers

![Mutuals who have not moved their account, sorted by most recent](/assets/relationships.png)Mutuals who have not moved their account, sorted by most recent

Within settings, you can find a relationship manager that lets you filter and sort through the profiles that you are connected to, based on different criteria:

* **Relationship:** whether a profile is following you, followed by you, or mutually following each other.
* **Account status:** whether a profile is currently marked as redirected or not.
* **Account activity:** whether a profile has posted in the past month or not.

You can select certain users to unfollow, or to remove from your followers, by checking the boxes and clicking the corresponding button in the table header.

## Account settings

From the account settings, you can change your email address, set a new password, revoke active sessions or authorized apps, and enable two-factor authentication.

Last updated October 8, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/contacts.md)  
Also available in:
[简体中文](/zh-cn/user/contacts/)
[日本語](/ja/user/contacts/)
[Polski](/pl/user/contacts/)

---


# Using Mastodon externally

Source: https://docs.joinmastodon.org/user/external/

# Using Mastodon externally

You can browse and interact on Mastodon from external apps or websites.

## Remote interactions on another Mastodon site

When you are browsing a remote site powered by Mastodon, clicking on any of the interaction buttons will load a dialog that will redirect you to your local site.

![A remote interaction dialog for replying to a post](/assets/external-reply.gif)A remote interaction dialog for replying to a post

## Signing into a client app

You can use your Mastodon account to sign into any app that implements the Mastodon API. A list of such apps can be found at <https://joinmastodon.org/apps>.

Last updated October 8, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/external.md)  
Also available in:
[简体中文](/zh-cn/user/external/)
[日本語](/ja/user/external/)
[Polski](/pl/user/external/)

---


# Moving or leaving accounts

Source: https://docs.joinmastodon.org/user/moving/

# Moving or leaving accounts

Take your information and do what you want with it.

## Exporting your information

![The data export page in settings](/assets/export.png)The data export page in settings

At any time you want, you can go to Settings > Export and download a CSV file for your current followed accounts, your currently created lists, your currently blocked accounts, your currently muted accounts, and your currently blocked domains. Your following, blocking, muting, and domain-blocking lists can be imported at Settings > Import, where they can either be merged or overwritten.

Requesting an archive of your posts and media can be done once every 7 days, and can be downloaded in Activity Streams 2.0 JSON format. Mastodon currently does not support importing posts or media due to technical limitations, but your archive can be viewed by any software that understands how to parse Activity Streams 2.0 documents.

## Redirecting or moving your profile

From the bottom of Settings > Account, you can find options related to account redirection or migration.

## Profile redirect

Redirecting your account disables posting from that account and displays a “profile moved” notice indicating your new account. Anyone viewing your profile can see this notice and will know to follow you at your new account. Following redirected accounts is not possible. The redirect can be canceled at any time.

## Profile move

![Profile move form](/assets/account-move.png)Profile move form

Moving your account is the same as redirecting your account, but it will also irreversibly force everyone to unfollow your current account and follow your new account, if their software supports the Move activity. Your posts will not be moved, due to technical limitations. There is also a 30 day cooldown period in which you cannot migrate again, so be very careful before using this option!

While moving your profile should automatically move your followers over, it does not automatically transfer your follows, blocks, mutes, or bookmarks. Those can be imported from [previously exported CSV files](/#export).

## Account aliases

Profile moves can only be initiated when your two accounts have been aliased. Account aliases are currently not used for anything other than profile moves, where you will need to set your old account as an alias of your new account before initiating the move. Setting aliases is harmless and reversible on its own.

## Deleting your account

![Account deletion form](/assets/account-delete.png)Account deletion form

From the bottom of Settings > Account, you can find the form to delete your account. Deleting your account is irreversible, and will cause both your profile and username to become forever unusable.

Last updated March 19, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/moving.md)  
Also available in:
[简体中文](/zh-cn/user/moving/)
[日本語](/ja/user/moving/)
[Polski](/pl/user/moving/)

---


# Running your own server

Source: https://docs.joinmastodon.org/user/run-your-own/

# Running your own server

## Why would you want to run your own Mastodon server?

* Absolute control over your own voice on the web, not subject to anyone else’s rules or whims. Your server is your property, with your rules. It will exist as long as you want it to exist.
* You are *not* isolated on your own server. You can follow anyone on any other server, and they can follow you and you can exchange messages just like if you were on the same server.
* You can either limit sign-ups to be the only one on the server and run it like personal (micro)blog, maintain an invite-only community for family or friends or run a server anyone can sign up on, it’s up to you!

Please mind that providing a public internet service involves moderation work and community management, and that such work becomes more complicated the larger your server grows.## So you want to run your own Mastodon server

Here is what you need:

* A **domain name**. This is how you and others will access your server and how you and your users will be identified on the network.

**How to get**: Namecheap, Gandi, any of the infinite number of domain name registrars. Comes with a yearly cost that varies depending on domain name choice.
* A **VPS**. Something that will run the Mastodon code that will always be connected to the internet.

**How to get**: DigitalOcean, Hetzner, Exoscale, Scaleway, any of the infinite number of hosting providers. Comes with a monthly or yearly cost that varies depending on hardware specifications.
* An **e-mail provider**. Mastodon needs to send confirmation links and various notifications through e-mail, and hosting your own SMTP server, while possible, is much more difficult to do reliably than to use a third-party provider.

**How to get**: Mailgun, SparkPost, Postmark, Sendgrid, any of the infinite number of e-mail hosting providers that expose a SMTP API. Comes with a monthly cost based on volume of e-mails sent.
* Optional: **Object storage provider**. Mastodon can save files that you and your users upload on the hard disk drive of the VPS it runs on, however, the hard disk drive is usually not infinite and difficult to upgrade later. An object storage provider gives you practically infinite metered file storage.

**How to get**: Amazon S3, Exoscale, Wasabi, Google Cloud, anything that exposes either an S3-compatible or OpenStack Swift-compatible API. Comes with a monthly cost based on the amount of files stored as well as how often they are accessed.

There exist a number of **dedicated Mastodon hosting providers** that take care of many if not all of the above requirements, that you can choose if you’re interested in someone else taking care of all the technical stuff. Usually you still need to buy your own domain name though. Some of such providers are:

[Masto.host](https://masto.host)[Hostdon](https://hostdon.jp)[Spacebear](https://app.spacebear.ee/mastodon)[Ossrox](https://ossrox.org)[Weingärtner IT](https://weingaertner-it.de)[Fedi.monster](https://fedi.monster/)[Cloudplane](https://cloudplane.org)[ungleich.ch](https://ungleich.ch/u/products/mastodon-hosting/)Managed hosting solutions are great for those who do not have experience or desire to install and maintain software. However, being in charge of all components on your own hardware gives greater control over scaling, performance and customization.

Mastodon scales quite well horizontally. If your needs outgrow the capacity of a single machine, Mastodon can be divided into multiple app servers, background workers, multiple Redis backends, PostgreSQL replicas – but 1-click install won’t cut it.

If you’re interested in installing everything on your own, proceed here:

[Preparing your machine](/admin/prerequisites/)Last updated September 25, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/user/run-your-own.md)  
Also available in:
[简体中文](/zh-cn/user/run-your-own/)
[日本語](/ja/user/run-your-own/)
[Polski](/pl/user/run-your-own/)

---


# Installing from source

Source: https://docs.joinmastodon.org/admin/install/

# Installing from source

Instructional guide on creating your own Mastodon-powered website.

## Pre-requisites

* A machine running **Ubuntu 24.04** or **Debian 12** that you have root access to
* A **domain name** (or a subdomain) for the Mastodon server, e.g. `example.com`
* An email delivery service or other **SMTP server**

We will be using `example.com` as the domain in the following example. Please remember to replace it with your own domain before running any commands.

You will be running the commands as root. If you aren’t already root, switch to root: `sudo -i`

## System repositories

Make sure curl, wget, gnupg, apt-transport-https, lsb-release and ca-certificates are installed first:

```
apt install -y curl wget gnupg apt-transport-https lsb-release ca-certificates

```
## Node.js

```
curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg
echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node\_20.x nodistro main" | tee /etc/apt/sources.list.d/nodesource.list

```
## PostgreSQL

```
wget -O /usr/share/keyrings/postgresql.asc https://www.postgresql.org/media/keys/ACCC4CF8.asc
echo "deb [signed-by=/usr/share/keyrings/postgresql.asc] http://apt.postgresql.org/pub/repos/apt $(lsb\_release -cs)-pgdg main" > /etc/apt/sources.list.d/postgresql.list

```
## System packages

```
apt update
apt install -y \
 imagemagick ffmpeg libvips-tools libpq-dev libxml2-dev libxslt1-dev file git-core \
 g++ libprotobuf-dev protobuf-compiler pkg-config gcc autoconf \
 bison build-essential libssl-dev libyaml-dev libreadline6-dev \
 zlib1g-dev libncurses5-dev libffi-dev libgdbm-dev \
 nginx nodejs redis-server redis-tools postgresql postgresql-contrib \
 certbot python3-certbot-nginx libidn11-dev libicu-dev libjemalloc-dev

```
## Yarn

Enable `corepack` so that the correct version of `yarn` can be installed automatically:

```
corepack enable

```
## Creating the `mastodon` user

This is the user account under which Mastodon will run:

```
adduser --disabled-password mastodon

```
## Setup

## Setting up PostgreSQL

## Performance configuration (optional)

For optimal performance, you may use [pgTune](https://pgtune.leopard.in.ua/#/) to generate an appropriate configuration and edit values in `/etc/postgresql/17/main/postgresql.conf` before restarting PostgreSQL with `systemctl restart postgresql`.

## Creating a user

You will need to create a PostgreSQL user that Mastodon could use. It is easiest to go with “ident” authentication in a simple setup, i.e. the PostgreSQL user does not have a separate password and can be used by the Linux user with the same username.

Open the prompt:

```
sudo -u postgres psql

```
In the prompt, execute:

```
CREATE USER mastodon CREATEDB;
\q

```
Done!

## Setting up Mastodon

It is time to download the Mastodon code. Switch to the mastodon user:

```
su - mastodon

```
## Checking out the code

Use git to download the latest stable release of Mastodon:

```
git clone https://github.com/mastodon/mastodon.git live && cd live
git checkout $(git tag -l | grep '^v[0-9.]\*$' | sort -V | tail -n 1)

```
## Installing Ruby

We will use rbenv to manage Ruby versions as it simplifies obtaining the correct versions and updating them when new releases are available.
Install rbenv and ruby-build:

```
git clone https://github.com/rbenv/rbenv.git ~/.rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(rbenv init -)"' >> ~/.bashrc
exec bash
git clone https://github.com/rbenv/ruby-build.git "$(rbenv root)"/plugins/ruby-build

```
Once this is done, we can install the correct Ruby version:

```
RUBY\_CONFIGURE\_OPTS=--with-jemalloc rbenv install

```
## Installing the last dependencies

Now to install Ruby and JavaScript dependencies:

```
bundle config deployment 'true'
bundle config without 'development test'
bundle install -j$(getconf \_NPROCESSORS\_ONLN)
yarn install

```
The two `bundle config` commands are only needed the first time you’re installing dependencies. If you’re going to be updating or re-installing dependencies later, just `bundle install` will be enough.## Generating a configuration

Run the interactive setup wizard:

```
RAILS\_ENV=production bin/rails mastodon:setup

```
This will:

* Create a configuration file
* Run asset precompilation
* Create the database schema

The configuration file is saved as `.env.production`. You can review and edit it to your liking. Refer to the [documentation on configuration.](/admin/config/)

You’re done with the mastodon user for now, so switch back to root:

```
exit

```
## Acquiring an SSL certificate

We’ll use Let’s Encrypt to get a free SSL certificate:

```
certbot certonly --nginx -d example.com

```
This will obtain the certificate, and save it in the directory `/etc/letsencrypt/live/example.com/`.

## Setting up nginx

Copy the configuration template for nginx from the Mastodon directory:

```
cp /home/mastodon/live/dist/nginx.conf /etc/nginx/sites-available/mastodon
ln -s /etc/nginx/sites-available/mastodon /etc/nginx/sites-enabled/mastodon
rm /etc/nginx/sites-enabled/default

```
Then edit `/etc/nginx/sites-available/mastodon` to

1. Replace `example.com` with your own domain name
2. Uncomment the `ssl_certificate` and `ssl_certificate_key` (ignore this step if you are bringing your own certificate):

```
ssl_certificate     /etc/letsencrypt/live/example.com/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;;

```
3. Make any other adjustments you might need.

Allow other users to traverse the mastodon user’s home directory, so that nginx’s `www-data` user can access asset files:

```
chmod o+x /home/mastodon

```
Restart nginx for the changes to take effect:

```
systemctl restart nginx

```
At this point, you should be able to visit your domain in the browser and see the elephant hitting the computer screen error page. This is because we haven’t started the Mastodon process yet.

## Setting up systemd services

Copy the systemd service templates from the Mastodon directory:

```
cp /home/mastodon/live/dist/mastodon-\*.service /etc/systemd/system/

```
If you deviated from the defaults at any point, check that the username and paths are correct:

```
$EDITOR /etc/systemd/system/mastodon-\*.service

```
Finally, start and enable the new systemd services:

```
systemctl daemon-reload
systemctl enable --now mastodon-web mastodon-sidekiq mastodon-streaming

```
They will now automatically start at boot.

**Hurray! This is it. You can visit your domain in the browser now!**Last updated November 22, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/install.md)  
Also available in:
[简体中文](/zh-cn/admin/install/)

---


# Configuring your environment

Source: https://docs.joinmastodon.org/admin/config/

# Configuring your environment

Setting environment variables for your Mastodon installation.

Mastodon uses environment variables as its configuration.

For convenience, it can read them from a flat file called `.env.production` in the Mastodon directory (called a “dotenv” file), but they can always be overridden by a specific process. For example, systemd service files can read environment variables from an `EnvironmentFile` or inline definitions with `Environment`, so you can have different configuration parameters for specific services. They can also be specified when calling Mastodon from the command line.

## Basic

## Federation and display

## `LOCAL_DOMAIN`

This is the unique identifier of your server in the network. It cannot be safely changed later, as changing it will cause remote servers to confuse your existing accounts with entirely new ones. It has to be the domain name you are running the server under (without the protocol part, e.g. just `example.com`).

## `WEB_DOMAIN`

`WEB_DOMAIN` is an optional environment variable allowing the installation of Mastodon on one domain, while having the users’ handles on a different domain, e.g. addressing users as `@alice@example.com` but accessing Mastodon on `mastodon.example.com`. This may be useful if your domain name is already used for a different website but you still want to use it as a Mastodon identifier because it looks better or shorter.

As with `LOCAL_DOMAIN`, `WEB_DOMAIN` cannot be safely changed once set, as this will confuse remote servers that know of your previous settings and may break communication with them or make it unreliable. As the issues lie with remote servers’ understanding of your accounts, re-installing Mastodon from scratch will not fix the issue. Therefore, please be extremely cautious when setting up `LOCAL_DOMAIN` and `WEB_DOMAIN`.

To install Mastodon on `mastodon.example.com` in such a way it can serve `@alice@example.com`, set `LOCAL_DOMAIN` to `example.com` and `WEB_DOMAIN` to `mastodon.example.com`. This also requires additional configuration on the server hosting `example.com` to redirect requests from `https://example.com/.well-known/webfinger` to `https://mastodon.example.com/.well-known/webfinger`. For instance, with nginx, the configuration could look like the following:

```
location /.well-known/webfinger {
  add_header Access-Control-Allow-Origin '*';
  return 301 https://mastodon.example.com$request_uri;
}

```
You must serve the redirect with CORS headers; otherwise, some functions of Mastodon’s web UI will not work. For example: `Access-Control-Allow-Origin: *`## `ALTERNATE_DOMAINS`

If you have multiple domains pointed at your Mastodon server, this setting will allow Mastodon to recognize itself when users are addressed using those other domains. Separate the domains by commas, e.g. `foo.com,bar.com`

## `ALLOWED_PRIVATE_ADDRESSES`

Comma-separated list of private IP addresses/subnets that are allowed in outgoing HTTP requests. Mastodon blocks HTTP requests to hosts on private IP address ranges (like `127.0.0.1` or `192.168.1.1/16`) to prevent [Server-side request forgeries](https://en.wikipedia.org/wiki/Server-side_request_forgery). This setting removes the specified IP addresses/subnets from being blocked.

## `AUTHORIZED_FETCH`

Also called “secure mode”. When set to `true`, the following changes occur:

* Mastodon will stop generating linked-data signatures for public posts, which prevents them from being re-distributed efficiently but without precise control. Since a linked-data object with a signature is entirely self-contained, it can be passed around without making extra requests to the server where it originates.
* Mastodon will require HTTP signature authentication on ActivityPub representations of public posts and profiles, which are normally available without any authentication. Profiles will only return barebones technical information when no authentication is supplied.
* Prior to v4.0.0: Mastodon will require any REST/streaming API access to have a user context (i.e. having gone through an OAuth authorization screen with an active user) when normally some API endpoints are available without any authentication.

As a result, through the authentication mechanism and avoiding re-distribution mechanisms that do not have your server in the loop, it becomes possible to enforce who can and cannot retrieve even public content from your server, e.g. servers whose domains you have blocked.

Unfortunately, secure mode is not without its drawbacks, which is why it is not enabled by default. Not all software in the fediverse can support it fully, in particular, some functionality will be broken with Mastodon servers older than 3.0; you lose some useful functionality even with up-to-date servers since linked-data signatures are used to make public conversation threads more complete; and because an authentication mechanism on public content means no caching is possible, it comes with an increased computational cost.Secure mode does not hide HTML representations of public posts and profiles. HTML is a more lossy format compared to first-class ActivityPub representations or the REST API but it is still a potential vector for scraping content.## `LIMITED_FEDERATION_MODE`

When set to `true`, Mastodon will restrict federation to servers you have manually approved only, as well as disable all public pages and some REST APIs. Limited federation mode is based on secure mode (`AUTHORIZED_FETCH`).

When switching an existing instance to limited federation mode, the following command should be used to remove any already existent data on non-allowed domains:

```
tootctl domain purge --limited-federation-mode

```
This mode is intended for private use only, such as in academic institutions or internal company networks, as it effectively creates a data silo, which is contrary to Mastodon’s mission of decentralization.This setting was known as `WHITELIST_MODE` prior to 3.1.5.## `DISALLOW_UNAUTHENTICATED_API_ACCESS`

As of Mastodon v4.0.0, the web app is now used to render all requests, even for logged-out viewers. To make these views work, the web app makes public API requests to fetch accounts and statuses. If you would like to disallow this, then set this variable to `true`. Note that disallowing unauthenticated API access will cause profile and post permalinks to return an error to logged-out users, essentially making it so that the only way to view content is to either log in locally or fetch it via ActivityPub.

## `SINGLE_USER_MODE`

If set to `true`, the front page of your Mastodon server will always redirect to the first profile in the database and registrations will be disabled.

## `DISABLE_AUTOMATIC_SWITCHING_TO_APPROVED_REGISTRATIONS`

In order to prevent abandoned Mastodon servers from being used for spam, harassment and other malicious activity, Mastodon will automatically switch new user registrations to require moderator approval whenever they are left open and no activity (including non-moderation actions from apps) from any logged-in user with permission to access moderation reports has been detected in a full week. When this happens, users with the permission to change server settings will receive an email notification.

Setting `DISABLE_AUTOMATIC_SWITCHING_TO_APPROVED_REGISTRATIONS=true` disables this behavior.

**Version history:**  
4.2.8 - added

## `DEFAULT_LOCALE`

By default, Mastodon will automatically detect the visitor’s language from browser headers and display the Mastodon interface in that language (if it’s supported). If you are running a language-specific or regional server, that behavior may mislead visitors who do not speak your language into signing up on your server. For this reason, you may want to set this variable to a specific language.

Example value: `de`

Supported languages:

* `ar`
* `ast`
* `bg`
* `bn`
* `br`
* `ca`
* `co`
* `cs`
* `cy`
* `da`
* `de`
* `el`
* `en`
* `eo`
* `es`
* `es-AR`
* `et`
* `eu`
* `fa`
* `fi`
* `fr`
* `ga`
* `gl`
* `he`
* `hi`
* `hr`
* `hu`
* `hy`
* `id`
* `io`
* `is`
* `it`
* `ja`
* `ka`
* `kab`
* `kk`
* `kn`
* `ko`
* `lt`
* `lv`
* `mk`
* `ml`
* `mr`
* `ms`
* `nl`
* `nn`
* `no`
* `oc`
* `pl`
* `pt-BR`
* `pt-PT`
* `ro`
* `ru`
* `sk`
* `sl`
* `sq`
* `sr`
* `sr-Latn`
* `sv`
* `ta`
* `te`
* `th`
* `tr`
* `uk`
* `ur`
* `vi`
* `zh-CN`
* `zh-HK`
* `zh-TW`

## Secrets

## `SECRET_KEY_BASE`

Generate with `rake secret`. Changing it will break all active browser sessions.

## `OTP_SECRET`

Generate with `rake secret`. Changing it will break two-factor authentication.

## `VAPID_PRIVATE_KEY`

Generate with `rake mastodon:webpush:generate_vapid_key`. Changing it will break push notifications.

## `VAPID_PUBLIC_KEY`

Generate with `rake mastodon:webpush:generate_vapid_key`. Changing it will break push notifications.

## Deployment

## `RAILS_ENV`

Environment. Can be `production`, `development`, or `test`. If you are running Mastodon on your personal computer for development purposes, use `development`. That is also the default. If you are running Mastodon online, use `production`. Mastodon will load different configuration defaults based on the environment.

This variable cannot be defined in dotenv (`.env`) files as it’s used before they are loaded.## `RAILS_SERVE_STATIC_FILES`

If set to true, Mastodon will answer requests for files in its `public` directory. This may be necessary if the reverse proxy (e.g. nginx) has no file system access to the `public` directory itself, such as in a containerized environment. It is a suboptimal setting because serving static files directly from the file system will always be much faster than serving them through the Ruby on Rails process.

## `RAILS_LOG_LEVEL`

Determines the amount of logs generated by Mastodon for the web and Sidekiq processes. Defaults to `info`, which generates a log entry about every request served by Mastodon and every background job processed by Mastodon. This can be useful but can get quite noisy and strain the I/O of your machine if there is a lot of traffic/activity. In that case, `warn` is recommended, which will only output information about things that are going wrong, and otherwise stay quiet. Possible values are `debug`, `info`, `warn`, `error`, `fatal` and `unknown`.

## `LOG_LEVEL`

Determines the amount of logs generated by Mastodon for the streaming processes. Defaults to `info`. Possible values are `silly` and `info`.

## `TRUSTED_PROXY_IP`

Tells the Mastodon web and streaming processes which IPs act as your trusted reverse proxy (e.g. nginx, Cloudflare). It affects how Mastodon determines the source IP of each request, which is used for important rate limits and security functions. If the value is set incorrectly then Mastodon could use the IP of the reverse proxy instead of the actual source.

By default, the loopback and private network address ranges are trusted. Specifically:

* `127.0.0.1/8`
* `::1/128`
* `10.0.0.0/8`
* `172.16.0.0/12`
* `192.168.0.0/16`
* `fc00::/7`

If you’re using a single reverse proxy and it runs on the same machine or is in the same private network as your Mastodon web and streaming processes then you most likely don’t need to modify this setting and can use the default. Or if you’re using multiple reverse proxy servers and they’re all in the same private network as your Mastodon web and streaming processes then, again, the default should be fine. However, if you’re using a reverse proxy server that reaches your Mastodon web and streaming servers via a public IP address (for example if you’re using Cloudflare or a similar proxy) then you’ll need to set this variable. It should be the IPs of all reverse proxies in use, as a comma-separated list of IPs or IP ranges using [CIDR notation](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing#CIDR_notation). Note that when this variable is set the default ranges (mentioned above) will no longer be trusted, so if you have both an external reverse proxy *and* a proxy on localhost then you must include the IPs (or IP ranges) of both.

Administrators and moderators can find what Mastodon sees as the source IP for each user by navigating to the Settings > Moderation > Accounts tab. You can use a tool like [IPInfo](https://ipinfo.io) to gauge whether the IP is being used by an end-user ISP, or by a server hosting your proxy.

## `SOCKET`

Instead of binding to an IP address like `127.0.0.1`, you may bind to a Unix socket. This variable is process-specific, e.g. you need different values for every process, and it works for both web (Puma) processes and streaming API (Node.js) processes.

This variable cannot be defined in dotenv (`.env`) files as it’s used before they are loaded.## `PORT`

If you are not using Unix sockets, this defines which port the process will listen on. This variable is process-specific, e.g. you need different values for every process, and it works for both web (Puma) processes and streaming API (Node.js) processes. By default, web listens on `3000` and streaming API on `4000`.

This variable cannot be defined in dotenv (`.env`) files as it’s used before they are loaded.## `NODE_ENV`

Equivalent to `RAILS_ENV`, but for the streaming API (Node.js).

This variable cannot be defined in dotenv (`.env`) files as it’s used before they are loaded.## `BIND`

If you are not using Unix sockets, this defines the IP to which the process will bind. Multiple processes can bind to the same IP as long as they listen on different ports. Defaults to `127.0.0.1`.

This variable cannot be defined in dotenv (`.env`) files as it’s used before they are loaded.## `MASTODON_USE_LIBVIPS`

By default, Mastodon uses ImageMagick to process images in posts. As an alternative, [libvips](https://www.libvips.org) 8.13+ can be utilized, which has better performance and lower resource utilization.

When installing Mastodon from source, this defaults to `false`, set to `true` to enable.

When deploying the Mastodon project container image, this is hardcoded to `true` and should not be overridden.

**Version history:**  
4.3.0 - added

## Scaling options

[Scaling up your server](/admin/scaling/)## `SIDEKIQ_CONCURRENCY`

Added in 4.1. Specific to Sidekiq, this variable determines how many different processes Sidekiq forks into. Defaults to `5`.

## `WEB_CONCURRENCY`

Specific to Puma, this variable determines how many different processes Puma forks into. Defaults to `2`.

## `MAX_THREADS`

Specific to Puma, this variable determines how many threads each Puma process maintains. Defaults to `5`.

## `PERSISTENT_TIMEOUT`

Specific to Puma, this variable determines how long Puma should wait before closing a connection. Defaults to `20`.

## `PREPARED_STATEMENTS`

By default, Mastodon uses the prepared statements feature of PostgreSQL, which offers some performance advantages. This feature is not available if you are using a connection pool where connections are shared between transactions and must thus be set to `false`. When you are scaling up, the advantages of having a transaction-based connection pool outweigh those provided by prepared statements.

## `STREAMING_API_BASE_URL`

The streaming API can be deployed to a different domain/subdomain. This may improve the performance of the streaming API as in the default configuration long-lived streaming API requests are proxied through nginx, while serving the streaming API from a different domain/subdomain would allow one to skip nginx entirely.

Example value: `wss://streaming.example.com`

## `STREAMING_CLUSTER_NUM` removed

**Removed:**  
The streaming server process now only uses a single node.js process, to scale it further, you’ll need to follow the documentation in the [scaling guide](/admin/scaling/#streaming)Specific to the streaming API, this variable determines how many different processes the streaming API forks into. Defaults to the number of CPU cores minus one.

## Backend

## PostgreSQL

## `DB_HOST`

Defaults to `localhost`.

## `DB_USER`

Defaults to `mastodon`.

## `DB_NAME`

Defaults to `mastodon_production`.

## `DB_PASS`

No default.

## `DB_PORT`

Defaults to `5432`.

## `DB_POOL`

Defines how many database connections to pool in the process. This value should cover every thread in the process, for this reason, it defaults to the value of `MAX_THREADS`.

## `DB_SSLMODE`

PostgreSQL [SSL mode](https://www.postgresql.org/docs/10/libpq-ssl.html). Defaults to `prefer`.

## `DATABASE_URL`

If provided, takes precedence over `DB_HOST`, `DB_USER`, `DB_NAME`, `DB_PASS` and `DB_PORT`.

Example value: `postgresql://user:password@localhost:5432`

## `QUERY_LOG_TAGS_ENABLED`

If set to `true`, then ActiveRecord will insert comments at the end of every SQL statement, which can help analyzing the performance of the application.

The comments are formatted using the SqlCommenter format and the following attributes:

* `namespaced_controller`: full name of the controller for the HTTP request that generated this SQL statement
* `action`: name of the action for the HTTP request that generated this SQL statement
* `sidekiq_job_class`: class name of the Sidekiq job that generated this SQL statement

Enabling this option will disable prepared statementsDefaults to `false`.

**Version history:**  
4.4.0 - added

## PostgreSQL (read-only replica)

If you want to use a read-only database replica, you can have more details [on this page](../scaling/#read-replicas)## `REPLICA_DB_HOST`

No default.

## `REPLICA_DB_PORT`

No default.

## `REPLICA_DB_NAME`

No default.

## `REPLICA_DB_USER`

No default.

## `REPLICA_DB_PASS`

No default.

## `REPLICA_DATABASE_URL`

If provided, takes precedence over `REPLICA_DB_HOST`, `REPLICA_DB_PORT`, `REPLICA_DB_NAME`, `REPLICA_DB_USER` and `REPLICA_DB_PASS`

No default.

## Redis

Mastodon uses Redis in three different ways:

* The web application itself uses redis to store data and communicate with the streaming server.
* Redis is used as cache backend for Rails’ built-in caching functionality.
* Sidekiq, which we use to process background jobs, stores job data in redis.

You can use a single Redis instance for all three use cases. Simple use the appropriate `REDIS_*` variables mentioned below. But you can
also use two or even three distinct Redis instances by using the variables prefixed with `CACHE_` and `SIDEKIQ_`.

It is advisable to use a separate Redis server for volatile cache. You may wish to do so if your single Redis server starts getting overwhelmed.## `REDIS_HOST`

Defaults to `localhost`.

## `REDIS_PORT`

Defaults to `6379`.

## `REDIS_USER`

Optional. The username used to connect to Redis.

**Version history:**  
4.3.0 - added

## `REDIS_PASSWORD`

Optional. The password used to connect to Redis.

## `REDIS_URL`

If provided, takes precedence over `REDIS_HOST`, `REDIS_PORT`, `REDIS_USER`, `REDIS_PASSWORD` and sentinel settings.

Example value: `redis://user:password@localhost:6379`

If you need to use TLS to connect to your Redis server, you must use `REDIS_URL` with the protocol scheme `rediss://` and set `REDIS_DRIVER` as described below.

## `REDIS_DRIVER`

If provided, the driver for Redis connections is changed from using the Mastodon default hiredis driver to the standard Ruby driver. Using the Ruby driver is required to connect to Redis using TLS. Note that use of the Ruby driver may have an impact on Redis performance in some environments.

Defaults to `hiredis`, accepted values are `hiredis` or `ruby`.

**Version history:**  
4.3.0 - added

## `REDIS_NAMESPACE`

If provided, namespaces all Redis keys. This allows the sharing of the same Redis database between different projects or Mastodon servers.

This option is deprecated. Sidekiq 7 removes support for namespaces, and so will a future version of Mastodon. We will attempt to document a clear migration path by the time that happens. If you are setting up a new instance, using this option is highly discouraged.**Version history:**  
4.3.0 - deprecated

## `REDIS_SENTINELS`

A comma-delimited list of Redis Sentinel instance HOST:PORTs. The port number is optional, if omitted it will use the value given in `REDIS_SENTINEL_PORT` or the default of `26379`.

Please note that if you would like to use Redis Sentinel you also need to specify `REDIS_SENTINEL_MASTER`.

**Version history:**  
4.3.0 - added

## `REDIS_SENTINEL_MASTER`

The name of the Redis Sentinel master to connect to.

Please note that if you would like to use Redis Sentinel you also need to specify `REDIS_SENTINELS`.

**Version history:**  
4.3.0 - added

## `REDIS_SENTINEL_PORT`

The default port for the sentinels given in `REDIS_SENTINELS`.

**Version history:**  
4.3.0 - added

## `REDIS_SENTINEL_USERNAME`

The username used to authenticate with sentinels.

**Version history:**  
4.3.0 - added

## `REDIS_SENTINEL_PASSWORD`

The password used to authenticate with sentinels.

**Version history:**  
4.3.0 - added

## `CACHE_REDIS_HOST`

Defaults to the value of `REDIS_HOST`.

## `CACHE_REDIS_PORT`

Defaults to the value of `REDIS_PORT`.

## `CACHE_REDIS_USER`

Optional. The username used to connect to Redis.

**Version history:**  
4.3.0 - added

## `CACHE_REDIS_PASSWORD`

Optional. The password used to connect to Redis.

## `CACHE_REDIS_URL`

If provided, takes precedence over `CACHE_REDIS_HOST` and `CACHE_REDIS_PORT`. Defaults to the value of `REDIS_URL`.

## `CACHE_REDIS_NAMESPACE`

Defaults to the value of `REDIS_NAMESPACE`.

## `CACHE_REDIS_SENTINELS`

A comma-delimited list of Redis Sentinel instance HOST:PORTs. The port number is optional, if omitted it will use a default of `26379`.

Please note that if you would like to use Redis Sentinel you also need to specify `CACHE_REDIS_SENTINEL_MASTER`.

**Version history:**  
4.3.0 - added

## `CACHE_REDIS_SENTINEL_MASTER`

The name of the Redis Sentinel master to connect to.

Please note that if you would like to use Redis Sentinel you also need to specify `CACHE_REDIS_SENTINELS`.

**Version history:**  
4.3.0 - added

## `CACHE_REDIS_SENTINEL_PORT`

The default port for the sentinels given in `CACHE_REDIS_SENTINELS`.

**Version history:**  
4.3.0 - added

## `CACHE_REDIS_SENTINEL_USERNAME`

The username used to authenticate with sentinels.

**Version history:**  
4.3.0 - added

## `CACHE_REDIS_SENTINEL_PASSWORD`

The password used to authenticate with sentinels.

**Version history:**  
4.3.0 - added

## `SIDEKIQ_REDIS_HOST`

Defaults to the value of `REDIS_HOST`.

## `SIDEKIQ_REDIS_PORT`

Defaults to the value of `REDIS_PORT`.

## `SIDEKIQ_REDIS_USER`

Optional. The username used to connect to Redis.

**Version history:**  
4.3.0 - added

## `SIDEKIQ_REDIS_PASSWORD`

Optional. The password used to connect to Redis.

## `SIDEKIQ_REDIS_URL`

If provided, takes precedence over `SIDEKIQ_REDIS_HOST` and `SIDEKIQ_REDIS_PORT`. Defaults to the value of `REDIS_URL`.

## `SIDEKIQ_REDIS_NAMESPACE`

Defaults to the value of `REDIS_NAMESPACE`.

## `SIDEKIQ_REDIS_SENTINELS`

A comma-delimited list of Redis Sentinel instance HOST:PORTs. The port number is optional, if omitted it will use a default of `26379`.

Please note that if you would like to use Redis Sentinel you also need to specify `SIDEKIQ_REDIS_SENTINEL_MASTER`.

**Version history:**  
4.3.0 - added

## `SIDEKIQ_REDIS_SENTINEL_MASTER`

The name of the Redis Sentinel master to connect to.

Please note that if you would like to use Redis Sentinel you also need to specify `SIDEKIQ_REDIS_SENTINELS`.

**Version history:**  
4.3.0 - added

## `SIDEKIQ_REDIS_SENTINEL_PORT`

The default port for the sentinels given in `SIDEKIQ_REDIS_SENTINELS`.

**Version history:**  
4.3.0 - added

## `SIDEKIQ_REDIS_SENTINEL_USERNAME`

The username used to authenticate with sentinels.

**Version history:**  
4.3.0 - added

## `SIDEKIQ_REDIS_SENTINEL_PASSWORD`

The password used to authenticate with sentinels.

**Version history:**  
4.3.0 - added

## Elasticsearch

[Configuring full-text search](/admin/elasticsearch/)## `ES_ENABLED`

If set to `true`, Mastodon will use Elasticsearch for its search functions.

## `ES_PRESET`

It controls the Elasticsearch indices configuration (number of shards and replica).

Possible values are:

* `single_node_cluster` (default)
* `small_cluster`
* `large_cluster`

See the [Elasticsearch setup page for details on each setting](../elasticsearch#choosing-the-correct-preset).

## `ES_HOST`

Host of the Elasticsearch server. Defaults to `localhost`. If using TLS, prepend the hostname with `https://`. For example: `https://elastic.example.com`.

## `ES_PORT`

Port of the Elasticsearch server. Defaults to `9200`

## `ES_USER`

Used for optionally authenticating with Elasticsearch

## `ES_PASS`

Used for optionally authenticating with Elasticsearch

## `ES_PREFIX`

Useful if the Elasticsearch server is shared between multiple projects or different Mastodon servers. Defaults to the value of `REDIS_NAMESPACE`.

## `ES_CA_FILE`

Override Certificate Authority bundle file to use. Useful when using self-signed certificates.

**Version history:**  
4.3.0 - added

## SMTP email delivery

## `SMTP_SERVER`

## `SMTP_PORT`

## `SMTP_LOGIN`

## `SMTP_PASSWORD`

## `SMTP_FROM_ADDRESS`

## `SMTP_DOMAIN`

## `SMTP_DELIVERY_METHOD`

## `SMTP_AUTH_METHOD`

## `SMTP_CA_FILE`

## `SMTP_OPENSSL_VERIFY_MODE`

## `SMTP_ENABLE_STARTTLS_AUTO`

## `SMTP_ENABLE_STARTTLS`

Set to `auto` (default), `always`, or `never`.

**Version history:**  
4.0.0 - added

## `SMTP_TLS`

## `SMTP_SSL`

Email configuration is based on the *action\_mailer* component of the *Ruby on Rails* framework that Mastodon is built on. Complete documentation on action\_mailer is available [here](https://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration). The client uses SMTP or derivatives: StartTLS + SMTP or SMTPS (SMTP over TLS).

## Basic configuration

* `SMTP_SERVER`: Specify the server to use. For example `sub.domain.tld`.
* `SMTP_PORT`: By default, the value is `25` (the usual port for SMTP). If StartTLS is detected, it may be switched to port 587.
* `SMTP_DOMAIN`: Only required if a HELO domain is needed. Will be set to the `SMTP_SERVER` domain by default.
* `SMTP_FROM_ADDRESS`: Specify a sender address.
* `SMTP_DELIVERY_METHOD`: By default, the value is `smtp` (can also be `sendmail`).

## Authentication for the SMTP server

* `SMTP_LOGIN`: Login for the SMTP user.
* `SMTP_PASSWORD`: Password for the SMTP user.
* `SMTP_AUTH_METHOD`: Either `plain` (default; the password is transmitted in the clear), `login` (password will be base64 encoded) or `cram_md5`.

## Secured SMTP

By default, a StartTLS connection will be attempted to the specified SMTP server.

* `SMTP_ENABLE_STARTTLS_AUTO`: Default `true`.
* `SMTP_CA_FILE`: A value may be specified, but on many Linux distros (e.g. Debian-based) this will be `/etc/ssl/certs/ca-certificates.crt`.
* `SMTP_OPENSSL_VERIFY_MODE`: `none` or `peer`. When using TLS, it may be useful to accept connections with a self-signed certificate.
* `SMTP_TLS`: `true` or `false` (default `false`)
* `SMTP_SSL`: `true` or `false` (default `false`)

Note that `TLSv1.3` and `TLSv1.2` are the only SSL/TLS protocols currently considered to be secure.

## Prometheus Metrics

Mastodon optionally supports exposing some metrics using the Prometheus format.

For the Ruby processes, it is using the [`prometheus_exporter` gem](https://github.com/discourse/prometheus_exporter). Please refer to their documentation for more details.

By default, you will need to run a `prometheus_exporter` server (using `./bin/prometheus_exporter`) to collect the metrics and expose them to be scraped. See `MASTODON_PROMETHEUS_EXPORTER_LOCAL` if you want to change this behaviour.

Note that metrics in the Prometheus format are always enabled for the streaming server, and can be accessed at `http://streaming-server-host:port/metrics`

**Version history:**  
4.4.0 - added support for the Ruby processes

## `MASTODON_PROMETHEUS_EXPORTER_ENABLED`

If set to `true`, Mastodon’s Ruby processes (web & Sidekiq) will enable the Prometheus instrumentation.

## `MASTODON_PROMETHEUS_EXPORTER_WEB_DETAILED_METRICS`

If set to `true`, the instrumentation will collect and expose per-controller/action metrics for every web request. Note that this might cause some resource overhead.

## `MASTODON_PROMETHEUS_EXPORTER_SIDEKIQ_DETAILED_METRICS`

If set to `true`, the instrumentation will collect and expose per job metrics for every Sidekiq job. Note that this might cause some resource overhead.

## `MASTODON_PROMETHEUS_EXPORTER_LOCAL`

If set to `true`, an in-process server will be started to expose the metrics, rather than trying to send them to an external `prometheus_exporter` server. This can be useful when running Sidekiq in a containerized environment to avoid the overhead of the external exporter. Metrics will be exposed on `http://host:port/metrics`

Important: this will not work for multi-process servers, like Puma, as every process will try to listen on the same port and will fail.

## `PROMETHEUS_EXPORTER_HOST`

If the in-process server is not enabled, the metrics will be sent to this host (which should be running a `prometheus_exporter` server). Defaults to `localhost`.

## `PROMETHEUS_EXPORTER_PORT`

If the in-process server is not enabled, the metrics will be sent to this host (which should be running a `prometheus_exporter` server). Defaults to `9394`.

## `MASTODON_PROMETHEUS_EXPORTER_HOST`

If the in-process server is enabled, the in-process exporter will listen on this host. Defaults to `localhost`

## `MASTODON_PROMETHEUS_EXPORTER_PORT`

If the in-process server is enabled, the in-process exporter will listen on this port. Defaults to `9394`

## OpenTelemetry

Mastodon supports exporting tracing data using the OpenTelemetry protocol. The instrumentation uses the standard OTEL Ruby SDK, and should support the [standard OTEL environment configuration variables](https://opentelemetry.io/docs/languages/sdk-configuration/general/), with the exception of `OTEL_SERVICE_NAME` (see `OTEL_SERVICE_NAME_PREFIX` below). Mastodon currently only ships with the OLTP exporter.

**Version history:**  
4.3.0 - added support for the Ruby backend

## `OTEL_SERVICE_NAME_PREFIX`

Prefix for the OTEL service names. The services names will be `$prefix/web` and `$prefix/sidekiq`. Defaults to `mastodon`.

## `OTEL_SERVICE_NAME_SEPARATOR`

What character to use in service names when differentiating between different services. Defaults to `/` (i.e. `mastodon/web`).

## `OTEL_EXPORTER_OTLP_ENDPOINT`

URL of the OLTP server to send the traces to. OpenTelemetry instrumentation is disabled if this variable is not set. No default (empty value).

## File storage

## CDN

## `CDN_HOST`

You can serve static assets (logos, emojis, CSS, JS, etc) from a separate host, like a CDN (Content Delivery Network) as it can decrease loading times for your users.

Example value: `https://assets.example.com`

You must serve the files with CORS headers, otherwise some functions of Mastodon’s web UI will not work. For example, `Access-Control-Allow-Origin: *`## Local file storage

## `PAPERCLIP_ROOT_PATH`

## `PAPERCLIP_ROOT_URL`

## AWS S3 and compatible

[Object storage](/admin/optional/object-storage/)The bucket must support access control lists (ACLs). For AWS S3, this means setting the “Object Ownership” setting to “ACLs enabled”. For Google Cloud Storage, this means setting the “Access control” setting to “Fine-grained”.

## `S3_ENABLED`

## `S3_REGION`

## `S3_ENDPOINT`

## `S3_BUCKET`

## `AWS_ACCESS_KEY_ID`

## `AWS_SECRET_ACCESS_KEY`

## `S3_SIGNATURE_VERSION`

## `S3_OVERRIDE_PATH_STYLE`

## `S3_PROTOCOL`

## `S3_HOSTNAME`

## `S3_ALIAS_HOST`

## `S3_OPEN_TIMEOUT`

## `S3_READ_TIMEOUT`

## `S3_FORCE_SINGLE_REQUEST`

## `S3_ENABLE_CHECKSUM_MODE`

## `S3_STORAGE_CLASS`

## `S3_MULTIPART_THRESHOLD`

## `S3_PERMISSION`

## `S3_BATCH_DELETE_LIMIT`

## `S3_BATCH_DELETE_RETRY`

## Swift

## `SWIFT_ENABLED`

## `SWIFT_USERNAME`

## `SWIFT_TENANT`

## `SWIFT_PASSWORD`

## `SWIFT_PROJECT_ID`

## `SWIFT_AUTH_URL`

## `SWIFT_CONTAINER`

## `SWIFT_OBJECT_URL`

## `SWIFT_REGION`

## `SWIFT_DOMAIN_NAME`

## `SWIFT_CACHE_TTL`

## HTTP Cache Buster

If configured, the Cache Buster feature will send a request to invalidate the cache for media files when they are deleted or made unavailable from your origin. This allows you to ensure that your caching layer / CDN is purged from any content that is removed from Mastodon.

The way to achieve this is very dependent of your proxy/CDN provider and will require configuration. If you are using nginx for HTTP caching, you will want to look at the `proxy_cache_purge` configuration directive.## `CACHE_BUSTER_ENABLED`

If set to `true`, then Mastodon will send a cache-busting request to the media URL when deleting the file so the file can be purged from the cache.

Defaults to `false`

## `CACHE_BUSTER_HTTP_METHOD`

Defaults to `GET`

## `CACHE_BUSTER_SECRET_HEADER`

Name of the header containing the secret defined in `CACHE_BUSTER_SECRET`.

Defaults to an empty value, meaning no header will be added

## `CACHE_BUSTER_SECRET`

Value of the `CACHE_BUSTER_SECRET_HEADER` header configured above.

## External authentication

## OmniAuth

## `ALLOW_UNSAFE_AUTH_PROVIDER_REATTACH`

Allow existing users to log in using external authentication providers they have not previously used, provided they use the same e-mail address. This can be useful if you want to offer users the ability to migrate from one external provider to another, but this is a potential security risk, as this allows attackers to hijack an account if they manage to create a new identity with their target’s e-mail address on any of your configured providers.

**Version history:**  
4.2.6 - added

## `OMNIAUTH_ONLY`

## `ONE_CLICK_SSO_LOGIN`

Enables the `Login or Register` button.
Useful for instances where all authentication takes place using a single
external provider (CAS, SAML or OIDC).

Enabling this will prevent caching for anonymous sessions.
And, when using OIDC discovery, the identity provider has to be available
before Mastodon starts.

## LDAP

## `LDAP_ENABLED`

## `LDAP_HOST`

## `LDAP_PORT`

## `LDAP_METHOD`

## `LDAP_BASE`

## `LDAP_BIND_DN`

## `LDAP_PASSWORD`

## `LDAP_UID`

## `LDAP_SEARCH_FILTER`

## `LDAP_MAIL`

## `LDAP_UID_CONVERSION_ENABLED`

## PAM

## `PAM_ENABLED`

## `PAM_EMAIL_DOMAIN`

## `PAM_DEFAULT_SERVICE`

## `PAM_CONTROLLED_SERVICE`

## CAS

## `CAS_ENABLED`

## `CAS_DISPLAY_NAME`

## `CAS_URL`

## `CAS_HOST`

## `CAS_PORT`

## `CAS_SSL`

## `CAS_VALIDATE_URL`

## `CAS_CALLBACK_URL`

## `CAS_LOGOUT_URL`

## `CAS_LOGIN_URL`

## `CAS_UID_FIELD`

## `CAS_CA_PATH`

## `CAS_DISABLE_SSL_VERIFICATION`

## `CAS_UID_KEY`

The key to the username to use for the account.
The created account will be `@uid@domain.tld`.

## `CAS_NAME_KEY`

## `CAS_EMAIL_KEY`

## `CAS_NICKNAME_KEY`

## `CAS_FIRST_NAME_KEY`

## `CAS_LAST_NAME_KEY`

## `CAS_LOCATION_KEY`

## `CAS_IMAGE_KEY`

The key to the image to use as account avatar.
The value in this key must be a URL to the image file.
It is important to use a supported file format (JPEG or PNG, not SVG).

## `CAS_PHONE_KEY`

## `CAS_SECURITY_ASSUME_EMAIL_IS_VERIFIED`

## SAML

## `SAML_ENABLED`

## `SAML_ACS_URL`

## `SAML_ISSUER`

## `SAML_IDP_SSO_TARGET_URL`

## `SAML_IDP_CERT`

## `SAML_IDP_CERT_FINGERPRINT`

## `SAML_NAME_IDENTIFIER_FORMAT`

## `SAML_CERT`

## `SAML_PRIVATE_KEY`

## `SAML_SECURITY_WANT_ASSERTION_SIGNED`

## `SAML_SECURITY_WANT_ASSERTION_ENCRYPTED`

## `SAML_SECURITY_ASSUME_EMAIL_IS_VERIFIED`

## `SAML_ATTRIBUTES_STATEMENTS_UID`

## `SAML_ATTRIBUTES_STATEMENTS_EMAIL`

## `SAML_ATTRIBUTES_STATEMENTS_FULL_NAME`

## `SAML_ATTRIBUTES_STATEMENTS_FIRST_NAME`

## `SAML_ATTRIBUTES_STATEMENTS_LAST_NAME`

## `SAML_UID_ATTRIBUTE`

## `SAML_ATTRIBUTES_STATEMENTS_VERIFIED`

## `SAML_ATTRIBUTES_STATEMENTS_VERIFIED_EMAIL`

## Hidden services

## TOR

[Onion services](/admin/optional/tor/)## `http_proxy`

## `http_hidden_proxy`

## `ALLOW_ACCESS_TO_HIDDEN_SERVICE`

## Limits

## Anti Spam / Abuse

## `HCAPTCHA_SITE_KEY`

## `HCAPTCHA_SECRET_KEY`

If set, registrations confirm page will display a captcha, see [Captcha](https://docs.joinmastodon.org/admin/optional/captcha/)

## Email domains

## `EMAIL_DOMAIN_ALLOWLIST`

If set, registrations will not be possible with any emails **except** those from the specified domains. Pipe-separated values, e.g.: `foo.com|bar.com`

## `EMAIL_DOMAIN_DENYLIST` deprecated

If set, registrations will not be possible with any emails from the specified domains. Pipe-separated values, e.g.: `foo.com|bar.com`

This option is deprecated. You can dynamically block email domains from the admin interface or the `tootctl` command-line interface.## Sessions

## `MAX_SESSION_ACTIVATIONS`

Defines the maximum number of browser sessions allowed per user, which defaults to 10. If a new browser session is created and the limit is exceeded, the oldest session is deleted, resulting in the user being logged out of that session.

## Home feeds

## `USER_ACTIVE_DAYS`

Mastodon stores home feeds in RAM (specifically, in the Redis database). This makes them very fast to access and update, but it also means that you don’t want to keep them there if they’re not used, and you don’t want to spend resources on inserting new items into home feeds that will not be accessed. For this reason, Mastodon periodically clears out home feeds of users who haven’t been online in a while, and if they re-appear, it regenerates those home feeds from database data. By default, users are considered active if they have been online in the past `7` days.

Regeneration of home feeds is computationally expensive, if your Sidekiq is constantly doing it because your users come online every 3 days but your `USER_ACTIVE_DAYS` is set to 2, then consider adjusting it up.

This setting has no relation to which users are considered active for the purposes of statistics, such as the Monthly Active Users number.## Other

## DB migrations

## `SKIP_POST_DEPLOYMENT_MIGRATIONS`

This variable only has any effect when running `rake db:migrate` and it is extremely specific to the Mastodon upgrade process. There are two types of database migrations, those that run before new code is deployed and running, and those that run after. By default, both types of migrations are executed. If you shut down all Mastodon processes before running migrations, then there is no difference. The variable makes sense for zero-downtime upgrades. You will see in the upgrade instructions of a specific Mastodon version if you need to use it or not.

## DB Encryption support

These three environment variables must be set to enable the Active Record
Encryption feature within Rails that Mastodon uses to encrypt and decrypt some
database attributes.

* `ACTIVE_RECORD_ENCRYPTION_PRIMARY_KEY`
* `ACTIVE_RECORD_ENCRYPTION_DETERMINISTIC_KEY`
* `ACTIVE_RECORD_ENCRYPTION_KEY_DERIVATION_SALT`

**Version history:**  
4.3.0 - added

## StatsD (removed in 4.3.0)

StatsD support has been deprecated in Mastodon 4.2.0, and remove entirely in 4.3.0.## `STATSD_ADDR`

If set, Mastodon will log some events and metrics into a StatsD instance identified by its hostname and port.

Example value: `localhost:8125`

## `STATSD_NAMESPACE`

If set, all StatsD keys will be prefixed with this. Defaults to `Mastodon.production` when `RAILS_ENV` is `production`, `Mastodon.development` when it’s `development`, etc.

## `STATSD_SIDEKIQ`

If set to `true`, Mastodon will log some Sidekiq metrics into StatsD. Defaults to `false`.

## Uncategorized or unsorted

## `BUNDLE_GEMFILE`

## `DEEPL_API_KEY`

## `DEEPL_PLAN`

## `ENABLE_SIDEKIQ_UNIQUE_JOBS_UI`

Enable `sidekiq-unique-jobs`’s web interface. This can be used to review and clear the locks managed by this gem, but is rarely useful in practice and has had critical security vulnerabilities in the past.
If you only need to clear all locks, you can now use the newly-added `bundle exec rake sidekiq_unique_jobs:delete_all_locks`.

**Version history:**  
4.2.6 - added

## `LIBRE_TRANSLATE_ENDPOINT`

## `LIBRE_TRANSLATE_API_KEY`

## `GITHUB_REPOSITORY`

Defaults to `mastodon/mastodon`

## `SOURCE_BASE_URL`

Defaults to `https://github.com/$GITHUB_REPOSITORY`

## `FFMPEG_BINARY`

Defaults to empty value (not enabled)

## `LOCAL_HTTPS`

## `PATH`

## `MAX_FOLLOWS_THRESHOLD`

Defaults to `7500`

## `MAX_FOLLOWS_RATIO`

Defaults to `1.1`

## `IP_RETENTION_PERIOD`

Defaults to `31536000` (1 year)

## `SESSION_RETENTION_PERIOD`

Defaults to `31536000` (1 year)

## `BACKTRACE`

Set to `1` to allow backtracing to Rails framework code.

## `DISABLE_SIMPLECOV`

## `EMAIL_DOMAIN_LISTS_APPLY_AFTER_CONFIRMATION`

## `DISABLE_FOLLOWERS_SYNCHRONIZATION`

## `MAX_REQUEST_POOL_SIZE`

Defaults to `512`.

## `GITHUB_API_TOKEN`

Used in a rake task for generating AUTHORS.md from GitHub commit history.

Last updated January 27, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/config.md)  
Also available in:
[简体中文](/zh-cn/admin/config/)

---


# Configuring full-text search

Source: https://docs.joinmastodon.org/admin/elasticsearch/

# Configuring full-text search

Setting up Elasticsearch to search for statuses (authored, favourited, or mentioned), public indexable status, and accounts

Mastodon supports full-text search when Elasticsearch is available. It is strongly recommended to configure this feature.

Mastodon’s full-text search allows logged-in users to find results from:

* public statuses from accounts that opted into appearing in search results
* their own statuses
* their mentions
* their favourites
* their bookmarks
* accounts (display name, usernames and bios)

It deliberately does not allow searching for arbitrary strings in the entire database.

## Installing Elasticsearch

Mastodon is tested with Elasticsearch version 7. It should support OpenSearch, as well as Elasticsearch versions 6 and 8, but those setups are not officially supported.Elasticsearch requires a Java runtime. If you don’t have Java already installed, do it now. Assuming you are logged in as `root`:

```
apt install openjdk-17-jre-headless

```
Add the official Elasticsearch repository to apt:

```
wget -O /usr/share/keyrings/elasticsearch.asc https://artifacts.elastic.co/GPG-KEY-elasticsearch
echo "deb [signed-by=/usr/share/keyrings/elasticsearch.asc] https://artifacts.elastic.co/packages/7.x/apt stable main" > /etc/apt/sources.list.d/elastic-7.x.list

```
Now you can install Elasticsearch:

```
apt update
apt install elasticsearch

```
**Security warning:** By default, Elasticsearch is supposed to bind to localhost only, i.e. be inaccessible from the outside network. You can check which address Elasticsearch binds to by looking at `network.host` within `/etc/elasticsearch/elasticsearch.yml`. Consider that anyone who can access Elasticsearch can access and modify any data within it, as there is no authentication layer. So it’s really important that the access is secured. Having a firewall that only exposes the 22, 80 and 443 ports is advisable, as outlined in the [main installation instructions](../../prerequisites/#install-a-firewall-and-only-whitelist-ssh-http-and-https-ports). If you have a multi-host setup, you must know how to secure internal traffic.To start Elasticsearch:

```
systemctl daemon-reload
systemctl enable --now elasticsearch

```
## Configuring Mastodon

Edit `.env.production` to add the following variables:

```
ES\_ENABLED=true
ES\_HOST=localhost
ES\_PORT=9200
ES\_PRESET= # single\_node\_cluster, small\_cluster or large\_cluster
# ES\_USER=
# ES\_PASS=

```
*Note*: If using TLS, prepend the hostname with `https://`. For example: `https://elastic.example.com`.

## Choosing the correct preset

The value for `ES_PRESET` depends on the size of your Elasticsearch and will be used to set the number of shards and replicas for your indices to the best value for your setup:

* `single_node_cluster` if you only have one node in your Elasticsearch cluster. Indices will be configured without any replica
* `small_cluster` if you have less than 6 nodes in your cluster. Indices will be configured with 1 replica
* `large_cluster` if you have 6 or more nodes in your cluster. Indices will be configured with more shards than with the `small_cluster` setting, to allow them to be distributed over more nodes

If you have multiple Mastodon servers on the same machine, and you are planning to use the same Elasticsearch installation for all of them, make sure that all of them have unique `REDIS_NAMESPACE` in their configurations, to differentiate the indices. If you need to override the prefix of the Elasticsearch indices, you can set `ES_PREFIX` directly.

## Security

By default, Elasticsearch does not handle any authentication and every request is made with full admin permission. We strongly advise you to configure Elasticsearch security features on your cluster.

To configure it, please refer [to the official documentation](https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-minimal-setup.html). It will guide you through:

* Enabling the security features (`xpack.security.enabled: true`)
* Creating passwords for built-in users

Once done, you can create a custom role for Mastodon to connect.

For example (please adapt this snippet to use your Elastic admin password):

```
curl -X POST -u elastic:admin\_password "localhost:9200/\_security/role/mastodon\_full\_access?pretty" -H 'Content-Type: application/json' -d'
{
 "cluster": ["monitor"],
 "indices": [{
 "names": ["\*"],
 "privileges": ["read", "monitor", "write", "manage"]
 }]
}
'

```
[Elasticsearch documentation for role creation](https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-api-put-role.html)

Once the role is created, you can create a user for the Mastodon server to use, and assign it the role.

For example (please adapt this snippet to use your Elastic admin password, and customize your new user `mastodon` user password):

```
curl -X POST -u elastic:admin\_password "localhost:9200/\_security/user/mastodon?pretty" -H 'Content-Type: application/json' -d'
{
 "password" : "l0ng-r4nd0m-p@ssw0rd",
 "roles" : ["mastodon\_full\_access"]
}
'

```
[Elasticsearch documentation for user creation](https://www.elastic.co/guide/en/elasticsearch/reference/7.17/security-api-put-user.html)

Once this is done, you need to configure Mastodon to use the credentials for your newly created user.

In `.env.production`, adjust your configuration:

```
ES\_USER=mastodon
ES\_PASS=l0ng-r4nd0m-p@ssw0rd

```
You are all set, and your Elasticsearch server should be much more secure!

## Populate the indices

After saving the new configuration, restart Mastodon processes for it to take effect:

```
systemctl restart mastodon-sidekiq
systemctl reload mastodon-web

```
Now it’s time to create the Elasticsearch indices and fill them with data:

```
su - mastodon
cd live
RAILS\_ENV=production bin/tootctl search deploy

```
Creating Elasticsearch indicies could require more memory than the JVM (Java Virtual Machine) provides. If Elasticsearch crashes while creating indicies, try to allocate more memory.

1. Create and open a file in the directory `/etc/elasticsearch/jvm.options.d/` (for example: `nano /etc/elasticsearch/jvm.options.d/ram.options`)
2. Add following text and edit the allocated memory to your needs. As a rule of thumb, Elasticsearch should use about 25%-50% of your available memory. Do not allocate more memory than available.

```
# Xms represents the initial size of total heap space
# Xmx represents the maximum size of total heap space
# Both values should be the same
-Xms2048m
-Xmx2048m

```
3. Save the file.
4. Restart Elasticsearch using `systemctl restart elasticsearch`.
5. Retry creating Elasticsearch indicies. If Elasticsearch still crashes, try to set a higher number.
## Search optimization for other languages

## Chinese search optimization

The standard analyzer is the default for Elasticsearch, but for some languages like Chinese it may not be the optimal choice. To enhance the search experience, consider installing a language-specific analyzer. Before creating indices in Elasticsearch, be sure to install the following extensions:

* [elasticsearch-analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik)
* [elasticsearch-analysis-stconvert](https://github.com/medcl/elasticsearch-analysis-stconvert)

And then modify Mastodon’s index definition as follows:

```
diff --git a/app/chewy/accounts\_index.rb b/app/chewy/accounts\_index.rb
--- a/app/chewy/accounts\_index.rb
+++ b/app/chewy/accounts\_index.rb
@@ -4,7 +4,7 @@ class AccountsIndex < Chewy::Index
 settings index: { refresh\_interval: '5m' }, analysis: {
 analyzer: {
 content: {
- tokenizer: 'whitespace',
+ tokenizer: 'ik\_max\_word',
 filter: %w(lowercase asciifolding cjk\_width),
 },

diff --git a/app/chewy/statuses\_index.rb b/app/chewy/statuses\_index.rb
--- a/app/chewy/statuses\_index.rb
+++ b/app/chewy/statuses\_index.rb
@@ -16,9 +16,17 @@ class StatusesIndex < Chewy::Index
 language: 'possessive\_english',
 },
 },
+ char\_filter: {
+ tsconvert: {
+ type: 'stconvert',
+ keep\_both: false,
+ delimiter: '#',
+ convert\_type: 't2s',
+ },
+ },
 analyzer: {
 content: {
- tokenizer: 'uax\_url\_email',
+ tokenizer: 'ik\_max\_word',
 filter: %w(
 english\_possessive\_stemmer
 lowercase
@@ -27,6 +35,7 @@ class StatusesIndex < Chewy::Index
 english\_stop
 english\_stemmer
 ),
+ char\_filter: %w(tsconvert),
 },
 },
 }
diff --git a/app/chewy/tags\_index.rb b/app/chewy/tags\_index.rb
--- a/app/chewy/tags\_index.rb
+++ b/app/chewy/tags\_index.rb
@@ -2,10 +2,19 @@

 class TagsIndex < Chewy::Index
 settings index: { refresh\_interval: '15m' }, analysis: {
+ char\_filter: {
+ tsconvert: {
+ type: 'stconvert',
+ keep\_both: false,
+ delimiter: '#',
+ convert\_type: 't2s',
+ },
+ },
 analyzer: {
 content: {
- tokenizer: 'keyword',
+ tokenizer: 'ik\_max\_word',
 filter: %w(lowercase asciifolding cjk\_width),
+ char\_filter: %w(tsconvert),
 },

 edge\_ngram: {

```
Last updated September 13, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/elasticsearch.md)

---


# Installing optional features

Source: https://docs.joinmastodon.org/admin/optional/

# Installing optional features

Mastodon offers a few optional features that can be used if needed.

* [Object storage](./object-storage/)
* [Hidden services](./tor/)
* [Single Sign On](./sso/)

Last updated September 6, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/optional.md)  
Also available in:
[简体中文](/zh-cn/admin/optional/)

---


# Setting up your new instance

Source: https://docs.joinmastodon.org/admin/setup/

# Setting up your new instance

Things to do after installing Mastodon

## Creating an admin account

## In the browser

After signing up in the browser, you will need to use the command line to give your newly created account admin privileges. Assuming your username is `alice`:

```
RAILS\_ENV=production bin/tootctl accounts modify alice --role Owner

```
Prior to Mastodon 4.0, roles were hardcoded to be one of `user`, `moderator`, or `admin`. Since Mastodon 4.0, there is a customizable role system, with default roles created for `Moderator`, `Admin`, and `Owner`. Names of custom roles are case-sensitive.## From the command line

You can create a new account using the command-line interface.

```
RAILS\_ENV=production bin/tootctl accounts create \
 alice \
 --email alice@example.com \
 --confirmed \
 --role Owner

```
A randomly generated password will be shown in the terminal.

## Filling in server information

After logging in, navigate to the **Site settings** page (under **Preferences** -> **Administration**). While there are no technical requirements for filling in this information, it is considered crucial for operating a server for humans.

| Setting | Meaning |
| --- | --- |
| Contact username | Your username so people know who owns the server |
| Business email | An email address so people locked out of their accounts, or people without accounts, can contact you |
| Instance description | Why did you start this server? Who is it for? What makes it different? |
| Custom extended information | You can put all sorts of information in here but a **code of conduct** is recommended |

After you fill these in, click “Save changes”.

Last updated November 22, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/setup.md)  
Also available in:
[简体中文](/zh-cn/admin/setup/)

---


# Using the admin CLI

Source: https://docs.joinmastodon.org/admin/tootctl/

# Using the admin CLI

tootctl commands that can be run from the CLI.

The command-line interface of Mastodon is an executable file called `tootctl` residing in the `bin` directory within the Mastodon root directory. You must specify which environment you intend to use whenever you execute it by specifying the `RAILS_ENV` environment variable. Unless you are a developer working on a local machine, you need to use `RAILS_ENV=production`. If you are sure that you will never need another environment (for development, testing, or staging), you can add it to your `.bashrc` file for convenience, e.g.:

```
echo "export RAILS\_ENV=production" >> ~/.bashrc

```
If so, you won’t need to specify it each time inline. Otherwise, calls to `tootctl` will usually go like this, assuming that the Mastodon code is checked out in `/home/mastodon/live`:

```
cd /home/mastodon/live
RAILS\_ENV=production bin/tootctl help

```
## Base CLI

[lib/mastodon/cli/base.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/base.rb)

---

## `tootctl self-destruct`

Erase this server from the federation by broadcasting account Delete activities to all known other servers. This allows a “clean exit” from running a Mastodon server, as it leaves next to no cache behind on other servers. This command is always interactive and requires confirmation twice.

No local data is actually deleted because emptying the database or deleting the entire VPS is faster. If you run this command and then continue to operate the instance anyway, then there will be a state mismatch that might lead to glitches and issues with federation.

**Make sure you know exactly what you are doing before running this command.** This operation is NOT reversible, and it can take a long time. The server will be in a BROKEN STATE after this command finishes. A running Sidekiq process is required, so do not shut down the server until the queues are fully cleared.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
2.8.0 - added

---

## `tootctl --version`

Show the version of the currently running Mastodon instance.

**Version history:**  
2.7.0 - added

---

## Accounts CLI

[lib/mastodon/cli/accounts.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/accounts.rb)

---

## `tootctl accounts rotate`

Generate and broadcast new RSA keys, as part of security maintenance.

`USERNAME`Local username for an account.`--all`Can be provided instead of `USERNAME` to rotate keys for all local accounts.**Version history:**  
2.5.0 - added

---

## `tootctl accounts create`

Create a new user account with the given `USERNAME` and provided `--email`.

`USERNAME`Local username for the new account. required`--email EMAIL`Email address to be attached to the user. required`--confirmed`Skip sending the confirmation email and activate the account immediately.`--role ROLE`Define the new account’s custom role by providing the `name` of that [Role](/entities/Role/). Default roles include `Owner`, `Admin`, and `Moderator` (case-sensitive).`--reattach`Reuse an old USERNAME after its account has been deleted.`--force`
Forcefully delete any existing account with this `USERNAME` and reattach the new account in place of the (just-deleted) account.

`--skip-sign-in-token`Forcefully ensure that the user is never asked for an e-mailed security code.**Version history:**  
2.6.0 - added  
4.0.0 - `--role` no longer takes hard-coded `user`, `moderator`, or `admin` roles. Specify the name of the custom Role instead (case-sensitive).

---

## `tootctl accounts modify`

Modify a user account’s role, email, active status, approval mode, or 2FA requirement.

`USERNAME`Local username for the account. required`--role ROLE`Define the existing account’s custom role by providing the `name` of that [Role](/entities/Role/). Default roles include `Owner`, `Admin`, and `Moderator` (case-sensitive).`--remove-role`Removes the current role from the user.`--email EMAIL`Update the user’s email address to `EMAIL`.`--confirm`Skip confirmation email, when used with `--email`.`--disable`Lock `USERNAME` out of their account.`--enable`Unlock `USERNAME`’s account if it is currently disabled.`--approve`Approve `USERNAME`’s account, if you are/were in approval mode.`--disable-2fa`Remove additional factors and allow login with a password.`--reset-password`Resets the password of the given account.`--skip-sign-in-token`Forcefully ensure that the user is never asked for an e-mailed security code.**Version history:**  
2.6.0 - added  
3.1.2 - added `--reset-password`  
4.0.0 - `--role` no longer takes hard-coded `user`, `moderator`, or `admin` roles. Specify the name of the custom Role instead (case-sensitive). Remove the current role with `--remove-role`.

---

## `tootctl accounts delete`

Delete a user account with the given USERNAME.

`USERNAME`Local username for the new account. required**Version history:**  
2.6.0 - added

---

## `tootctl accounts backup`

Request a backup for a user account with the given USERNAME. The backup will be created in Sidekiq asynchronously, and the user will receive an email with a link to it once it’s done.

`USERNAME`Local username for the new account. required**Version history:**  
2.6.0 - added

---

## `tootctl accounts cull`

Remove remote accounts that no longer exist. Queries every single remote account in the database to determine if it still exists on the origin server, and if it doesn’t, then remove it from the database. Accounts that have had confirmed activity within the last week are excluded from the checks, in case the server is just down.

`DOMAIN[...]`Optionally pass specific domains to cull`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
2.6.0 - added  
2.8.0 - add `--dry-run`  
3.5.0 - add the ability to pass specific domains

---

## `tootctl accounts refresh`

Refetch remote user data and files for one or multiple accounts.

`USERNAME`username@domain for the remote account.`--all`Can be provided instead of `USERNAME` to refresh all remote accounts.`--domain DOMAIN`Can be provided instead of `USERNAME`. Operate only on remote accounts from this `DOMAIN`.`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--verbose`Print additional information while a task is processing.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
2.6.0 - added

---

## `tootctl accounts merge`

Merge two remote accounts into one. This is primarily meant to fix duplicates caused by other servers changing their domain. By default, this only works if the public key is the same, but this can be overridden.

`FROM`username@domain for the remote account to be removed. required`TO`username@domain for the remote account to be kept. required`--force`Override the public key check.**Version history:**  
3.3.0 - added

---

## `tootctl accounts follow`

Force all local accounts to follow a local account specified by username.

`USERNAME`Local username. required`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--verbose`Print additional information while task is processing.**Version history:**  
2.7.0 - added  
3.0.0 - now uses `USERNAME` instead of `ACCT`

---

## `tootctl accounts unfollow`

Force all local accounts to unfollow an account specified by their address.

`ACCT``username@domain` address. required`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--verbose`Print additional information while task is processing.**Version history:**  
2.7.0 - added

---

## `tootctl accounts reset-relationships`

Reset all follow and/or follower relationships for a local account.

`USERNAME`Local username.`--follows`Force `USERNAME` to unfollow everyone, then re-follow them.`--followers`Remove all of `USERNAME`’s followers.**Version history:**  
2.8.0 - added

---

## `tootctl accounts approve`

Approve new registrations when instance is in approval mode.

`USERNAME`Local username.`--number N`Approve the N earliest pending registrations.`--all`Approve all pending registrations.**Version history:**  
2.8.0 - added

---

## `tootctl accounts prune`

Prune remote accounts that never interacted with local users

`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
2.8.0 - added

---

## Cache CLI

[lib/mastodon/cli/cache.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/cache.rb)

---

## `tootctl cache clear`

Clear out the cache storage.

**Version history:**  
2.8.1 - added

---

## `tootctl cache recount`

Update hard-cached counters of TYPE by counting referenced records from scratch. It may take a very long time to finish, depending on the size of the database. Accounts will have their follower, following, and status counts refreshed. Statuses will have their reply, boost, and favourite counts refreshed.

`TYPE`Either `accounts` or `statuses`. required`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--verbose`Print additional information while task is processing.**Version history:**  
3.0.0 - added

---

## Domains CLI

[lib/mastodon/cli/domains.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/domains.rb)

---

## `tootctl domains purge`

Remove all accounts from a given DOMAIN without leaving behind any records. Unlike a suspension, if the DOMAIN still exists in the wild, it means the accounts could return if they are resolved again.

`DOMAIN[...]`Domains to purge, separated by space.`--by-uri`Match domains in the actor URI rather than in the Webfinger address.`--limited-federation-mode`Can be provided instead of DOMAIN. Instead of purging from a single domain, all accounts from domains that are not allow-listed will be removed from the database. Use this after enabling limited federation mode and defining your allow-list.`--concurrency N`The number of workers to use for this task. Defaults to 5.`--verbose`Print additional information while task is processing.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
2.6.0 - added  
2.8.0 - add `--whitelist-mode`  
2.9.0 - remove custom emoji as well  
3.0.0 - accept multiple domains  
3.2.0 - rename `--whitelist-mode` to `--limited-federation-mode`  
3.5.0 - add `--by-uri`

---

## `tootctl domains crawl`

Crawl the known fediverse by using Mastodon REST API endpoints that expose all known peers, and collect statistics from those peers, as long as those peers support those API endpoints. When no START is given, the command uses the server’s own database of known peers to seed the crawl. Returns total servers, total registered users, total active users in the last week, and total users joined in the last week.

`START`Optionally start from a different domain name.`--exclude-suspended`Do not include instances that you have suspended in the output. Also includes any subdomains.`--concurrency N`The number of workers to use for this task. Defaults to N=50.`--format FORMAT`Control how results are returned. `summary` will print a summary. `domains` will return a newline-delimited list of all discovered peers. `json` will dump aggregated raw data. Defaults to `summary`.**Version history:**  
2.7.0 - added  
3.0.0 - add `--exclude-suspended`

---

## Email domain blocks CLI

[lib/mastodon/cli/email\_domain\_blocks.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/email_domain_blocks.rb)

---

## `tootctl email-domain-blocks list`

List all currently blocked email domains.

**Version history:**  
3.2.0 - added

---

## `tootctl email-domain-blocks add`

Add entries to the email domain blocklist.

`DOMAIN[...]`Email domains to block, separated by space. required`--with-dns-records`If provided, will also lookup A, AAAA, and MX records and block them as well.**Version history:**  
3.2.0 - added

---

## `tootctl email-domain-blocks remove`

Remove entries from the e-mail domain blocklist.

`DOMAIN[...]`Email domains to unblock, separated by space. required**Version history:**  
3.2.0 - added

---

## Emoji CLI

[lib/mastodon/cli/emoji.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/emoji.rb)

---

## `tootctl emoji export`

Exports custom emoji to `export.tar.gz` at PATH.

`PATH`Path to create a .tar.gz archive containing pictures. required`--overwrite`Overwrite any existing archive at `PATH`.`--category CATEGORY`Export only the specified `CATEGORY`. If not provided, will export all emoji.**Version history:**  
3.1.4 - added

---

## `tootctl emoji import`

Imports custom emoji from a .tar.gz archive at a given path. The archive should contain PNG or GIF files no larger than 50KB, and the shortcode will be set equal to the filename minus the extension, with optional prefixes and/or suffixes.

`PATH`Path to create a .tar.gz archive containing pictures. required`--prefix PREFIX`Add PREFIX to the beginning of generated shortcodes.`--suffix SUFFIX`Add SUFFIX to the end of generated shortcodes.`--overwrite`Instead of skipping existing emoji, replace them with any discovered emoji with the same shortcode.`--category CATEGORY`Group the processed emoji under CATEGORY in the picker.`--unlisted`Processed emoji will not be shown in the emoji picker, but will be usable only by their direct shortcode.**Version history:**  
2.5.0 - added

---

## `tootctl emoji purge`

Remove all custom emojis.

`--remote-only`If provided, remove only from remote domains.**Version history:**  
2.8.0 - added  
3.1.0 - add `--remote-only`

---

## Feeds CLI

[lib/mastodon/cli/feeds.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/feeds.rb)

---

## `tootctl feeds build`

Build home and list feeds for one or all users. Feeds will be built from the database and cached in-memory with Redis. Mastodon manages home feeds for active users automatically.

`USERNAME`Local username whose feeds will be regenerated.`--all`Can be provided instead of `USERNAME` to refresh all remote accounts.`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--verbose`Print additional information while task is processing.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
2.6.0 - added

---

## `tootctl feeds clear`

Remove all home and list feeds from Redis.

**Version history:**  
2.6.0 - added

---

## Maintenance CLI

[lib/mastodon/cli/maintenance.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/maintenance.rb)

---

## `tootctl maintenance fix-duplicates`

Fix corrupted database indexes that may have been caused due to changing collation rules. Deletes or merges duplicate accounts, statuses, emojis, etc. Mastodon has to be stopped to run this task, which will take a long time and may be destructive. This is useful if your database indexes are corrupted because of issues such as <https://wiki.postgresql.org/wiki/Locale_data_changes>.

**Version history:**  
3.3.0 - added

---

## Media CLI

[lib/mastodon/cli/media.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/media.rb)

---

## `tootctl media remove`

Removes locally cached copies of media attachments, avatars or profile headers from other servers. By default, only media attachments are removed.

`--days N`How old media attachments have to be before they are removed. In case of avatars and headers, how old the last webfinger request and update to the user has to be before they are removed. Defaults to 7.`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--prune-profiles`Instead of media attachments, remove locally cached copies of avatars and headers from other servers. Cannot be combined with `--remove-headers`.`--remove-headers`Instead of media attachments, remove locally cached copies of headers from other servers. Cannot be combined with `--prune-profiles`.`--include-follows`Override the default behavior of `--prune-profiles` and `--remove-headers` to remove locally cached copies of avatars (and headers) from other servers, irrespective of follow status (by default, they are only removed from accounts that are not followed by or following anyone locally). Can only be used with `--prune-profiles` or `--remove-headers`.`--verbose`Print additional information while task is processing.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
2.5.0 - added  
2.6.2 - show freed disk space  
4.1.0 - added –prune-profiles, –remove-headers, and –include-follows.

---

## `tootctl media remove-orphans`

Scans for files that do not belong to existing media attachments, and remove them. Please mind that some storage providers charge for the necessary API requests to list objects. Also, this operation requires iterating over every single file individually, so it will be slow.

`--start-after`The Paperclip attachment key where the loop will start. Use this option if the command was interrupted before.`--dry-run`Print expected results only, without performing any actions.`--prefix`Traverse only a specific prefix of files in the system.`--fix-permissions`Sets S3 ACL to be default according to environment variables.**Version history:**  
3.1.0 - added  
3.1.3 - added `--prefix`  
3.3.0 - added `--fix-permissions`

---

## `tootctl media refresh`

Refetch remote media attachments from other servers. You must specify the source of media attachments with either `--status`, `--account`, `--domain`, or `--days`. If an attachment already exists in the database, it will not be overwritten unless you use `--force`.

`--account ACCT`String `username@domain` handle of the account`--domain DOMAIN`FQDN string`--status ID`Local numeric ID of the status in the database.`--days N`The number of days to limit this task to.`--concurrency N`The number of workers to use for this task. Defaults to 5.`--verbose`Print additional information while task is processing.`--dry-run`Print expected results only, without performing any actions.`--force`Force redownload the remote resource and overwrite the local attachment.**Version history:**  
3.0.0 - added  
3.0.1 - add `--force` and skip already downloaded attachments by default  
4.0.0 - add `--days`

---

## `tootctl media usage`

Calculate disk space consumed by Mastodon.

**Version history:**
3.0.1 - added

---

## `tootctl media lookup`

Prompts for a media URL, then looks up the status where the media is displayed.

**Version history:**  
3.1.0 - added

---

## Preview Cards CLI

[lib/mastodon/cli/preview\_cards.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/preview_cards.rb)

---

## `tootctl preview_cards remove`

Remove local thumbnails for preview cards.

`--days N`How old media attachments have to be before they are removed. Defaults to 180. (NOTE: it is not recommended to delete preview cards within the last 14 days, because preview cards will not be refetched unless the link is reposted after 2 weeks from last time.)`--concurrency N`The number of workers to use for this task. Defaults to N=5.`--verbose`Print additional information while task is processing.`--dry-run`Print expected results only, without performing any actions.`--link`Only delete link-type preview cards; leave video and photo cards untouched.**Version history:**  
3.0.0 - added

---

## Search CLI

[lib/mastodon/cli/search.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/search.rb)

---

## `tootctl search deploy`

Create or update an Elasticsearch index and populate it. If Elasticsearch is empty, this command will create the necessary indices and then import data from the database into those indices. This command will also upgrade indices if the underlying schema has been changed since the last run.

`--batch-size`Defaults to 100. A higher batch size can make Elasticsearch process records more quickly, with less load on the PostgreSQL database, but can increase memory pressure on the Elasticsearch nodes during indexing.`--only INDEX`Specify an index name [`instances`, `accounts`, `tags`, `statuses`, `public_statuses`] to create or update only that index.`--concurrency N`Parallelize execution of the command on multiple threads. Defaults to 5.`--import`
:Import data from the database to the index

`--clean`
:Remove outdated documents from the index

`--reset-chewy`
:Reset Chewy’s internal index

**Version history:**
2.8.0 - added  
3.0.0 - add `--processes` for parallelization  
3.3.0 - options changed  
3.5.0 - add `--batch-size`  
3.5.3 - switched `--batch-size` default from 1000 to 100 and `--concurrency` from 2 to 5, added `--import` and `--clean`  
4.2.0 - added `instances` and `public_statuses` options to `--only`, added `--reset-chewy`

---

## Settings CLI

[lib/mastodon/cli/settings.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/settings.rb)

---

## `tootctl settings registrations open`

Opens registrations.

**Version history:**  
2.6.0 - added

---

## `tootctl settings registrations close`

Closes registrations.

**Version history:**  
2.6.0 - added

---

## `tootctl settings registrations approved`

Set registration to require approval.

**Version history:**  
3.5.2 - added

`--require_reason`If true, users must enter a reason when registering.

---

## Statuses CLI

[lib/mastodon/cli/statuses.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/statuses.rb)

---

## `tootctl statuses remove`

Remove unreferenced statuses from the database, such as statuses that came from relays or from users who are no longer followed by any local accounts, and have not been replied to or otherwise interacted with.

This is a computationally heavy procedure that creates extra database indices before commencing, and removes them afterward.

`--days N`How old statuses have to be before they are removed. Defaults to 90.`--skip-media-remove`Skips removing the media, in case S3 errors out. Defaults to false.**Version history:**  
2.8.0 - added  
3.1.3 - added `--skip-media-remove`  
3.5.0 - now removes orphaned records and performs additional cleanup tasks

---

## Upgrade CLI

[lib/mastodon/cli/upgrade.rb](https://github.com/mastodon/mastodon/blob/main/lib/mastodon/cli/upgrade.rb)

---

## `tootctl upgrade storage-schema`

Upgrade the storage schema to store all non-local media resources in a top-level cache directory. WARNING: This is optional, and only for deployments made before v3.1.4. This command can incur massive object storage costs due to moving potentially terabytes of data.

`--verbose`Print additional information while task is processing.`--dry-run`Print expected results only, without performing any actions.**Version history:**  
3.1.4 - added

Last updated June 11, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/tootctl.md)  
Also available in:
[简体中文](/zh-cn/admin/tootctl/)

---


# Upgrading to a new release

Source: https://docs.joinmastodon.org/admin/upgrading/

# Upgrading to a new release

When a new version of Mastodon comes out, it appears on the [GitHub releases page](https://github.com/mastodon/mastodon/releases). Please mind that running unreleased code from the `main` branch, while possible, is not recommended.## Automatic update verification

Since v4.2.0, Mastodon will automatically check for available updates and notify the users of your server that have the `DevOps` permission.

This happens by fetching `https://api.joinmastodon.org/update-check?version=<current_version>` in the background every 30 minutes. `current_version` omits the build metadata (everything after the first `+`, if there is one, in the version string). For instance, if your version is `4.3.0-beta2+my-fork`, Mastodon will query `https://api.joinmastodon.org/update-check?version=4.3.0-beta2`.

You can change which URL Mastodon queries by setting the `UPDATE_CHECK_URL` environment variable. You can also completely disable this behavior by setting this environment variable to an empty string, although we strongly recommend against doing that unless you are keeping up with Mastodon updates in another way, as Mastodon occasionally releases critical security updates that must be applied in a timely fashion.

## Upgrade steps

Mastodon releases correspond to git tags. Before attempting an upgrade, look up the desired release on the [GitHub releases page](https://github.com/mastodon/mastodon/releases). The page will contain a **changelog** describing everything you need to know about what’s different, as well as **specific upgrade instructions**.

To begin, switch to the `mastodon` user:

```
su - mastodon

```
And navigate to the Mastodon root directory:

```
cd /home/mastodon/live

```
Download the release’s code, assuming that the version is called `v3.1.2`:

```
git fetch --tags
git checkout v3.1.2

```
Now execute the upgrade instructions that are included in that version’s release notes on GitHub. Because different releases require different instructions, we do not include any instructions on this page.

You can safely skip intermediate releases when upgrading from an old version. You do not need to individually check them out. However, you do need to keep track of the instructions with each release. Most instructions overlap, you just need to make sure you execute everything at least once.After you have executed the instructions from the release notes, switch back to root:

```
exit

```
Restart **background workers**:

```
systemctl restart mastodon-sidekiq

```
And reload the **web process**:

```
systemctl reload mastodon-web

```
The `reload` operation is a zero-downtime restart, also called “phased restart”. As such, Mastodon upgrades usually do not require any advance notice to users about planned downtime. In rare cases, you can use the `restart` operation instead, but there will be a (short) felt interruption of service for your users.The **streaming API** server is also updated and requires a restart, doing so will result in all connected clients being disconnected, which can increase the load on your server:

```
systemctl restart mastodon-streaming

```
Restarting the streaming API leads to an increased load on your server as disconnected clients attempt to reconnect or poll the REST API instead, so avoid it whenever you can.**That’s all!** You’re running the new version of Mastodon now.Last updated December 7, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/upgrading.md)  
Also available in:
[简体中文](/zh-cn/admin/upgrading/)

---


# Backing up your server

Source: https://docs.joinmastodon.org/admin/backups/

# Backing up your server

Setting up regular backups (optional, but not really)

For any real-world use, you should make sure to regularly backup your Mastodon server.

## Overview

Things that need to be backed up in order of importance:

1. PostgreSQL database
2. Application secrets from the `.env.production` file or equivalent
3. User-uploaded files
4. Redis database

## Failure modes

There are two failure types that people in general may guard for: The failure of the hardware, such as data corruption on the disk; and human and software error, such as wrongful deletion of a particular piece of data. In this documentation, only the former type is considered.

Mastodon stores all the most important data in the PostgreSQL database. The loss of the PostgreSQL database will result in the complete failure of the server, including all the accounts, their posts and followers.

If you lose application secrets, some functions of Mastodon will stop working for your users, they will be logged out, two-factor authentication will become unavailable, and Web Push API subscriptions will stop working.

If you lose user-uploaded files, you will lose avatars, headers, and media attachments, but Mastodon *will* work moving forward.

Losing the Redis database is almost harmless: The only irrecoverable data will be the contents of the Sidekiq queues and scheduled retries of previously failed jobs. The home and list feeds are stored in Redis but can be regenerated with tootctl.

The best backups are so-called off-site backups, i.e. ones that are not stored on the same machine as Mastodon itself. If the server you are hosted on goes on fire and the hard disk drive explodes, backups stored on that same hard drive won’t be of much use.

## Backing up application secrets

Application secrets are the easiest to back up since they never change. You only need to store `.env.production` somewhere safe.

## Backing up PostgreSQL

PostgreSQL is at risk of data corruption from power cuts, hard disk drive failure, and botched schema migrations. For that reason, occasionally making a backup with `pg_dump` or `pg_dumpall` is recommended.

For high-availability setups, it is possible to use hot streaming replication to have a second PostgreSQL server with always up-to-date data, ready to be switched over to if the other server goes down.

## Backing up user-uploaded files

If you are using an external object storage provider such as Amazon S3, Google Cloud or Wasabi, then you don’t need to worry about backing those up. The respective companies are responsible for handling hardware failures.

If you are using local file storage, then it’s up to you to make copies of the sizeable `public/system` directory, where uploaded files are stored by default.

## Backing up Redis

Backing up Redis is easy. Redis regularly writes to `/var/lib/redis/dump.rdb` which is the only file you need to make a copy of.

Last updated December 7, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/backups.md)  
Also available in:
[简体中文](/zh-cn/admin/backups/)

---


# Migrating to a new machine

Source: https://docs.joinmastodon.org/admin/migrating/

# Migrating to a new machine

Copying your Mastodon installation to a new server without losing anything.

Sometimes, for various reasons, you may want to migrate your Mastodon instance from one server to another. Fortunately, this is not too difficult of a process, although it may result in some downtime.

This guide was written with Ubuntu Server in mind; your mileage may vary for other setups.## Basic steps

1. Set up a new Mastodon server using the [Production Guide](/admin/install/) (however, don’t run `mastodon:setup` and only leave the PostgreSQL service running).
2. Stop Mastodon on the old server (e.g. `systemctl stop 'mastodon-*.service'`).
3. Dump and load the PostgreSQL database using the instructions below.
4. Copy the `system/` files using the instructions below. (Note: if you’re using S3, you can skip this step.)
5. Copy the `.env.production` file.
6. Save the Redis database, stop the Redis service on both your old and new machines, and copy the Redis database from `/var/lib/redis/` to the new server.
7. Run `RAILS_ENV=production bundle exec rails assets:precompile` to compile Mastodon
8. Start Mastodon and Redis on the new server.
9. Run `RAILS_ENV=production ./bin/tootctl feeds build` to rebuild the home timelines for each user.
10. Run `RAILS_ENV=production ./bin/tootctl search deploy` to rebuild your Elasticsearch indices (Note: if you are not using Elasticsearch, you can skip this step.)
11. Update your DNS settings to point to the new server.
12. Update or copy your Nginx configuration, and re-run LetsEncrypt as necessary.
13. Enjoy your new server!

## Detailed steps

## Stop the Mastodon services

```
systemctl stop 'mastodon-\*.service'

```
## What data needs to be migrated

At a high level, you’ll need to copy over the following:

* The `~/live/public/system` directory, which contains user-uploaded images and videos (if using S3, you don’t need this)
* The PostgreSQL database (using [pg\_dump](https://www.postgresql.org/docs/9.1/static/backup-dump.html))
* The `~/live/.env.production` file, which contains server config and secrets
* The Redis database in the `/var/lib/redis/` directory, which contains unproccessed Sidekiq jobs.

Less crucially, you’ll probably also want to copy the following for convenience:

* The nginx config (under `/etc/nginx/sites-available/mastodon`)
* The SSL certificates for your domain (under `/etc/letsencrypt/live/` if using LetsEncrypt)
* The systemd config files (`/etc/systemd/system/mastodon-*.service`), which may contain your server tweaks and customizations
* The PgBouncer configuration under `/etc/pgbouncer` (if you’re using it)

## Dump and load PostgreSQL

Instead of running `mastodon:setup`, we’re going to create an empty PostgreSQL database using the `template0` database (which is useful when restoring a PostgreSQL dump, [as described in the pg\_dump documentation](https://www.postgresql.org/docs/9.1/static/backup-dump.html#BACKUP-DUMP-RESTORE)).

If you are using a password for your PostgreSQL user, you may want to configure the `mastodon` user on your new system to use the same password as your old system for convenience:

```
sudo -u postgres psql 
ALTER USER mastodon WITH PASSWORD 'YOUR\_PASSWORD'; 
\q

```
Run this as the `mastodon` user on your old system:

```
pg\_dump -Fc mastodon\_production -f backup.dump

```
Copy the `backup.dump` file over, using `rsync` or `scp`. Then on the new system, create an empty database as the `mastodon` user:

```
createdb -T template0 mastodon\_production

```
Then import it (replace # in -j# with the number of CPUs in your system to improve restore performance):

```
pg\_restore -Fc -j# -U mastodon -n public --no-owner --role=mastodon \
 -d mastodon\_production backup.dump

```
(Note that if the username is not `mastodon` on the new server, you should change the `-U` AND `--role` values above. It’s okay if the username is different between the two servers.)

## Copy files

This will probably take some time, and you’ll want to avoid re-copying unnecessarily, so using `rsync` is recommended. On your old machine, as the `mastodon` user, run:

```
rsync -avz ~/live/public/system/ mastodon@example.com:~/live/public/system/

```
You’ll want to re-run this if any of the files on the old server change.

You should also copy over the `.env.production` file, which contains secrets.

On your new machine, ensure that Redis is not running, otherwise it may overwrite the dump file you are trying to restore. As the `root` user, run:

```
systemctl stop redis-server.service

```
Now copy your Redis database over (adjust the location of your Redis database as needed). On your old machine, as the `root` user, run:

```
redis-cli SAVE
systemctl stop redis-server.service
rsync -avz /var/lib/redis/ root@example.com:/var/lib/redis

```
Optionally, you may copy over the nginx, systemd, and PgBouncer config files, or rewrite them from scratch.

## During migration

You can edit the `~/live/public/500.html` page on the old machine if you want to show a nice error message to let existing users know that a migration is in progress.

You’ll probably also want to set the DNS TTL to something small (30-60 minutes) about a day in advance, so that DNS can propagate quickly once you point it to the new IP address.

## After migrating

Run the following commands as your mastodon user:

```
RAILS\_ENV=production bundle exec rails assets:precompile 

```
Now run the following commands as your root user:

```
systemctl daemon-reload
systemctl start redis-server 
systemctl enable --now mastodon-web mastodon-sidekiq mastodon-streaming 
systemctl restart nginx

```
Once your server is back online, you can rebuild the home feeds for users (this can take a long time depending on the number of users.)

```
RAILS\_ENV=production ./bin/tootctl feeds build

```
If you use Elasticsearch, run the following command to rebuild the indices (this can take a long time depending on the number of statuses you have.)

```
RAILS\_ENV=production ./bin/tootctl search deploy

```
You can check [whatsmydns.net](https://whatsmydns.net/) to see the progress of DNS propagation. To jumpstart the process, you can always edit your own `/etc/hosts` file to point to your new server so you can start playing around with it early.

Last updated January 23, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/migrating.md)  
Also available in:
[简体中文](/zh-cn/admin/migrating/)

---


# Scaling up your server

Source: https://docs.joinmastodon.org/admin/scaling/

# Scaling up your server

## Managing concurrency

Mastodon has three types of processes:

* Web (Puma)
* Streaming API
* Background processing (Sidekiq)

## Web (Puma)

The web process serves short-lived HTTP requests for most of the application. The following environment variables control it:

* `WEB_CONCURRENCY` controls the number of worker processes
* `MAX_THREADS` controls the number of threads per process

Threads share the memory of their parent process. Different processes allocate their own memory, though they share some memory via copy-on-write. A larger number of threads maxes out your CPU first, and a larger number of processes maxes out your RAM first.

These values affect how many HTTP requests can be served at the same time.

In terms of throughput, more processes are better than more threads.

## Streaming API

The streaming API handles long-lived HTTP and WebSocket connections, through which clients receive real-time updates. The following environment variables control it:

* `STREAMING_API_BASE_URL` controls the base URL of the streaming API
* `PORT` controls the port the streaming server will listen on, by default 4000. The `BIND` and `SOCKET` environment variables are also able to be used.
* Additionally, the shared [database](/admin/config/#postgresql) and [Redis](/admin/config/#redis) environment variables are used.

The streaming API can use a different subdomain if you want to by setting `STREAMING_API_BASE_URL`. This allows you to have one load balancer for streaming and one for web/API requests. However, this also requires applications to correctly request the streaming URL from the [instance endpoint](/methods/instance/#v2), instead of assuming that it’s hosted on the same host as the Web API.

One process of the streaming server can handle a reasonably high number of connections and throughput, but if you find that a single process isn’t handling your instance’s load, you can run multiple processes by varying the `PORT` number of each, and then using nginx to load balance traffic to each of those instances. For example, a community of about 50,000 accounts with 10,000-20,000 monthly active accounts, you’ll typically have an average concurrent load of about 800-1200 streaming connections.

The streaming server also exposes a [Prometheus](https://prometheus.io/) endpoint on `/metrics` with a lot of metrics to help you understand the current load on your Mastodon streaming server, some key metrics are:

* `mastodon_streaming_connected_clients`: This is the number of connected clients, tagged by client type (websocket or eventsource)
* `mastodon_streaming_connected_channels`: This is the number of “channels” that are currently subscribed (note that this is much higher than connected clients due to how our internal “system” channels currently work)
* `mastodon_streaming_messages_sent_total`: This is the total number of messages sent to clients since last restart.
* `mastodon_streaming_redis_messages_received_total`: This is the number of messages received from Redis pubsub, and intended to complement [monitoring Redis directly](https://sysdig.com/blog/redis-prometheus/).

The more streaming server processes that you run, the more database connections will be consumed on PostgreSQL, so you’ll likely want to use PgBouncer, as documented below.An example nginx configuration to route traffic to three different processes on `PORT` 4000, 4001, and 4002 is as follows:

```
upstream streaming {
 least\_conn;
 server 127.0.0.1:4000 fail\_timeout=0;
 server 127.0.0.1:4001 fail\_timeout=0;
 server 127.0.0.1:4002 fail\_timeout=0;
}

```
If you’re using the distributed systemd files, then you can start up multiple streaming servers with the following commands:

```
$ sudo systemctl start mastodon-streaming@4000.service
$ sudo systemctl start mastodon-streaming@4001.service
$ sudo systemctl start mastodon-streaming@4002.service

```
By default, `sudo systemctl start mastodon-streaming` starts just one process on port 4000, equivalent to running `sudo systemctl start mastodon-streaming@4000.service`.

Previous versions of Mastodon had a `STREAMING_CLUSTER_NUM` environment variable that made the streaming server use clustering, which started multiple worker processes and used node.js to load balance them.

This interacted with the other settings in ways which made capacity planning difficult, especially when it comes to database connections and CPU resources. By default, the streaming server would consume resources on all available CPUs which could cause contention with other software running on that server. Another common issue was that misconfiguring the `STREAMING_CLUSTER_NUM` would exhaust your database connections by opening up a connection pool per cluster worker process, so a `STREAMING_CLUSTER_NUM` of `5` and `DB_POOL` of `10` would potentially consume 50 database connections.

Now a single streaming server process will only use at maximum `DB_POOL` PostgreSQL connections, and scaling is handled by running more instances of the streaming server.

## Background processing (Sidekiq)

Many tasks in Mastodon are delegated to background processing to ensure the HTTP requests are fast, and to prevent HTTP request aborts from affecting the execution of those tasks. Sidekiq is a single process, with a configurable number of threads.

## Number of threads

While the number of threads in the web process affects the responsiveness of the Mastodon instance to the end-user, the number of threads allocated to background processing affects how quickly posts can be delivered from the author to anyone else, how soon e-mails are sent out, etc.

The number of threads is not regulated by an environment variable, but rather through a command line argument when invoking Sidekiq, as shown in the following example:

```
bundle exec sidekiq -c 15

```
This would initiate the Sidekiq process with 15 threads. It is important to note that each thread requires a database connection, so this requires a large database pool. The size of this pool is managed by the `DB_POOL` environment variable, which should be set to a value at least equal to the number of threads.

## Queues

Sidekiq uses different queues for tasks of varying importance, where importance is defined by how much it would impact the user experience of your server’s local users if the queue wasn’t working. The queues are listed here, in order of descending importance:

`default`All tasks that affect local users.`push`Delivery of payloads to other servers.`ingress`Incoming remote activities. Lower priority than the default queue, so that local users still see their posts when the server is under load.`mailers`Delivery of e-mails.`pull`Lower priority tasks, such as handling imports, backups, resolving threads, deleting users, forwarding replies.`scheduler`Handling cron jobs, such as refreshing trending hashtags and cleaning up logs.The default queues and their priorities are stored in [config/sidekiq.yml](https://github.com/mastodon/mastodon/blob/main/config/sidekiq.yml), but can be overridden by the command-line invocation of Sidekiq, e.g.:

```
bundle exec sidekiq -q default

```
This command will run just the `default` queue.

Sidekiq processes queues by first checking for tasks in the first queue, and if it finds none, it then checks the subsequent queue. Therefore, if the first queue is overfilled, tasks in the other queues may experience delays.

It is possible to start different Sidekiq processes for the queues to ensure truly parallel execution, by e.g. creating multiple systemd services for Sidekiq with different arguments.

You may run as many Sidekiq processes with as many threads as necessary to efficiently process running jobs, however the `scheduler` queue should never be run in more than one Sidekiq process at a time.## Transaction pooling with PgBouncer

## Why you might need PgBouncer

If you start running out of available PostgreSQL connections (the default is 100) then you may find PgBouncer to be a good solution. This document describes some common gotchas, as well as good configuration defaults for Mastodon.

User roles with `DevOps` permissions in Mastodon can monitor the current usage of PostgreSQL connections through the PgHero link in the Administration view. Generally, the number of connections open is equal to the total threads in Puma, Sidekiq, and the streaming API combined.

## Installing PgBouncer

On Debian and Ubuntu:

```
sudo apt install pgbouncer

```
## Configuring PgBouncer

## Setting a password

Firstly, if your `mastodon` user in PostgreSQL is set up without a password, you will need to set a password.

Here’s how you might reset the password:

```
psql -p 5432 -U mastodon mastodon\_production -w

```
Then (obviously, use a different password than the word “password”):

```
ALTER USER mastodon WITH PASSWORD 'password';

```
Then `\q` to quit.

## Configuring userlist.txt

Edit `/etc/pgbouncer/userlist.txt`

As long as you specify a user/password in `pgbouncer.ini` later, the values in `userlist.txt` do *not* have to correspond to real PostgreSQL roles. You can arbitrarily define users and passwords, but you can reuse the “real” credentials for simplicity’s sake. Add the `mastodon` user to the `userlist.txt`:

```
"mastodon" "md5d75bb2be2d7086c6148944261a00f605"

```
Here we’re using the md5 scheme, where the md5 password is just the md5sum of `password + username` with the string `md5` prepended. For instance, to derive the hash for user `mastodon` with password `password`:

```
# ubuntu, debian, etc.
echo -n "passwordmastodon" | md5sum
# macOS, openBSD, etc.
md5 -s "passwordmastodon"

```
Then just add `md5` to the beginning of that.

You’ll also want to create a `pgbouncer` admin user to log in to the PgBouncer admin database. So here’s a sample `userlist.txt`:

```
"mastodon" "md5d75bb2be2d7086c6148944261a00f605"
"pgbouncer" "md5a45753afaca0db833a6f7c7b2864b9d9"

```
In both cases, the password is just `password`.

## Configuring pgbouncer.ini

Edit `/etc/pgbouncer/pgbouncer.ini`

Add a line under `[databases]` listing the PostgreSQL databases you want to connect to. Here we’ll just have PgBouncer use the same username/password and database name to connect to the underlying PostgreSQL database:

```
[databases]
mastodon\_production = host=127.0.0.1 port=5432 dbname=mastodon\_production user=mastodon password=password

```
The `listen_addr` and `listen_port` tell PgBouncer which address/port to accept connections. The defaults are fine:

```
listen\_addr = 127.0.0.1
listen\_port = 6432

```
Put `md5` as the `auth_type` (assuming you’re using the md5 format in `userlist.txt`):

```
auth\_type = md5

```
Make sure the `pgbouncer` user is an admin:

```
admin\_users = pgbouncer

```
Mastodon requires a different pooling mode than the default session-based one. Specifically, it needs a transaction-based pooling mode. This means that a PostgreSQL connection is established at the start of a transaction and terminated upon its completion. Therefore, it is essential to change the `pool_mode` setting from `session` to `transaction`:

```
pool\_mode = transaction

```
Next up, `max_client_conn` defines how many connections PgBouncer itself will accept, and `default_pool_size` puts a limit on how many PostgreSQL connections will be opened under the hood. (In PgHero the number of connections reported will correspond to `default_pool_size` because it has no knowledge of PgBouncer.)

The defaults are fine to start, and you can always increase them later:

```
max\_client\_conn = 100
default\_pool\_size = 20

```
Don’t forget to reload or restart PgBouncer after making your changes:

```
sudo systemctl reload pgbouncer

```
## Debugging that it all works

You should be able to connect to PgBouncer just like you would with PostgreSQL:

```
psql -p 6432 -U mastodon mastodon\_production

```
Then use your password to log in.

You can also check the PgBouncer logs like so:

```
tail -f /var/log/postgresql/pgbouncer.log

```
## Configuring Mastodon to talk to PgBouncer

In your `.env.production` file, first off make sure that this is set:

```
PREPARED\_STATEMENTS=false

```
Since we’re using transaction-based pooling, we can’t use prepared statements.

Next up, configure Mastodon to use port 6432 (PgBouncer) instead of 5432 (PostgreSQL) and you should be good to go:

```
DB\_HOST=localhost
DB\_USER=mastodon
DB\_NAME=mastodon\_production
DB\_PASS=password
DB\_PORT=6432

```
You cannot use PgBouncer to perform `db:migrate` tasks, but this is easy to work around. If your PostgreSQL and PgBouncer are on the same host, it can be as simple as defining `DB_PORT=5432` together with `RAILS_ENV=production` when calling the task, for example: `RAILS_ENV=production DB_PORT=5432 bundle exec rails db:migrate` (you can specify `DB_HOST` too if it’s different, etc)## Administering PgBouncer

The easiest way to reboot is:

```
sudo systemctl restart pgbouncer

```
But if you’ve set up a PgBouncer admin user, you can also connect as the admin:

```
psql -p 6432 -U pgbouncer pgbouncer

```
And then do:

```
RELOAD;

```
Then use `\q` to quit.

## Separate Redis for cache

Redis is used widely throughout the application, but some uses are more important than others. Home feeds, list feeds, and Sidekiq queues as well as the streaming API are backed by Redis and that’s important data you wouldn’t want to lose (even though the loss can be survived, unlike the loss of the PostgreSQL database - never lose that!).

Redis is also used for volatile caching. If you are scaling up and you are concerned about Redis’s capacity to handle the load, you can allocate a separate Redis database specifically for caching. To do this, set `CACHE_REDIS_URL` in the environment, or define individual components such as `CACHE_REDIS_HOST`, `CACHE_REDIS_PORT`, etc.

Unspecified components will default to their values without the cache prefix.

When configuring the Redis database for caching, it is possible to disable background saving to disk, as data loss on restart is not critical in this context, and this can save some disk I/O. Additionally, consider setting a maximum memory limit and implementing a key eviction policy. For more details on these configurations, refer to this guide: [Using Redis as an LRU cache](https://redis.io/topics/lru-cache)

## Separate Redis for Sidekiq

Redis is used in Sidekiq to keep track of its locks and queue. Although in general the performance gain is not that big, some instances may benefit from having a separate Redis instance for Sidekiq.

In the environment file, you can specify `SIDEKIQ_REDIS_URL` or individual parts like `SIDEKIQ_REDIS_HOST`, `SIDEKIQ_REDIS_PORT` etc. Unspecified parts fallback to the same values as without the `SIDEKIQ_` prefix.

Creating a separate Redis instance for Sidekiq is relatively simple:

Start by making a copy of the default redis systemd service:

```
cp /etc/systemd/system/redis.service /etc/systemd/system/redis-sidekiq.service

```
In the `redis-sidekiq.service` file, change the following values:

```
ExecStart=/usr/bin/redis-server /etc/redis/redis-sidekiq.conf --supervised systemd --daemonize no
PIDFile=/run/redis/redis-server-sidekiq.pid
ReadWritePaths=-/var/lib/redis-sidekiq
Alias=redis-sidekiq.service

```
Make a copy of the Redis configuration file for the new Sidekiq Redis instance:

```
cp /etc/redis/redis.conf /etc/redis/redis-sidekiq.conf

```
In this `redis-sidekiq.conf` file, change the following values:

```
port 6479
pidfile /var/run/redis/redis-server-sidekiq.pid
logfile /var/log/redis/redis-server-sidekiq.log
dir /var/lib/redis-sidekiq

```
Before starting the new Redis instance, create a data directory:

```
mkdir /var/lib/redis-sidekiq
chown redis /var/lib/redis-sidekiq

```
Start the new Redis instance:

```
systemctl enable --now redis-sidekiq

```
Update your environment, and add the following line:

```
SIDEKIQ\_REDIS\_URL=redis://127.0.0.1:6479/

```
Restart Mastodon to use the new Redis instance. Ensure that you restart both web and Sidekiq (otherwise, one of them will still be working from the wrong instance):

```
systemctl restart mastodon-web.service
systemctl restart redis-sidekiq.service

```
## Redis Sentinel for High Availability

As mentioned, Redis is a critical part of a Mastodon instance’s operation. By default, your deployment will use a single Redis instance, or multiple if you’ve setup a cache. However if that instance goes down it can bring the entire Mastodon instance down as well. To alleviate this, Redis Sentinel can be used to track your Redis instances and automatically direct clients to a new primary if one goes down. You can specify `REDIS_SENTINELS`, which is a comma-delimited list of the IP:Port combinations of sentinels that Mastodon can talk with to determine the current master Redis node. You also need to specify the name of the master you would like to connect to in `REDIS_SENTINEL_MASTER`. By default Sentinel will set an instance as down and select a new master after a minute of the current master being unreachable, but this can be configured based on your setup.

All sentinel-related variables are also available prefixed with `CACHE_` and `SIDEKIQ_` in case you use more than one redis instance.

Learn more about Redis sentinel here: <https://redis.io/docs/latest/operate/oss_and_stack/management/sentinel/>

## Read-replicas

To reduce the load on your PostgreSQL server, you may wish to set up hot streaming replication (read replica). [See this guide for an example](https://cloud.google.com/community/tutorials/setting-up-postgres-hot-standby).

## Mastodon >= 4.2

Mastodon has built-in replica support starting with version 4.2. You can use the same configuration for every service (Sidekiq included), and some queries will be directed to your read-only replica, when possible, using Rails’s built-in replica support. If your replica is lagging behind for more than a few seconds, then the app will stop sending it queries until it catches up.

To configure it, use the following environment variables:

```
REPLICA_DB_HOST
REPLICA_DB_PORT
REPLICA_DB_NAME
REPLICA_DB_USER
REPLICA_DB_PASS
REPLICA_PREPARED_STATEMENTS
REPLICA_DB_TASKS

```
Alternatively, you can also use `REPLICA_DATABASE_URL` if you want to configure them all using the same variable.

`REPLICA_DB_TASKS=false` will connect to an replica database without any database mangement tasks such as schema management, migrations, seeds, etc. By default it is set to true.

`REPLICA_PREPARED_STATEMENTS` is an optional override for the `PREPARED_STATEMENTS` value. By default it is set to true if `PREPARED_STATEMENTS` is not set.

Once done, this is all good and you should start seeing requests against your replica server!

## Mastodon <= 4.1

For Mastodon versions before 4.2, you can make use of the replica in Mastodon in these ways:

* The streaming API server does not issue writes at all, so you can connect it straight to the replica (it is not querying the database very often anyway, so the impact of this is small).
* Use the Makara driver in the web and Sidekiq processes, so that writes go to the master database, while reads go to the replica. Let’s talk about that.

Read replicas are currently not supported for the Sidekiq processes, and using them will lead to failing jobs and data loss.You will have to use a separate `config/database.yml` file for the web processes, and edit it to replace the `production` section as follows:

```
production:
 <<: \*default
 adapter: postgresql\_makara
 prepared\_statements: false
 makara:
 id: postgres
 sticky: true
 connections:
 - role: master
 blacklist\_duration: 0
 url: postgresql://db\_user:db\_password@db\_host:db\_port/db\_name
 - role: slave
 url: postgresql://db\_user:db\_password@db\_host:db\_port/db\_name

```
Make sure that the URLs point to the correct locations for your PostgreSQL servers. You can add multiple replicas. You could have a locally-installed PgBouncer with a configuration to connect to two different servers based on the database name, e.g. “mastodon” going to the primary, “mastodon\_replica” going to the replica, so in the file above both URLs would point to the local PgBouncer with the same user, password, host and port, but different database name. There are many possibilities for how this could be set up. For more information on Makara, [see their documentation](https://github.com/taskrabbit/makara#databaseyml).

Make sure the sidekiq processes run with the stock `config/database.yml` to avoid failing jobs and data loss!## Using a web load balancer

Cloud providers like DigitalOcean, AWS, Hetzner, etc., offer virtual load balancing solutions that distribute network traffic across multiple servers, but provide a single public IP address.

Scaling your deployment to provision multiple web/Puma servers behind one of these virtual load balancers can help provide more consistent performance by reducing the risk that a single server may become overwhelmed by user traffic, and decrease downtime when performing maintenance or upgrades. You should consult your provider documentation on how to setup and configure a load balancer, but consider that you need to configure your load balancer to monitor the health of the backend web/Puma nodes, otherwise you may send traffic to a service that is not responsive.

The following endpoints are available to monitor for this purpose:

* **Web/Puma:** `/health`
* **Streaming API:** `/api/v1/streaming/health`

These endpoints should both return an HTTP status code of 200, and the text `OK` as a result.

You can also use these endpoints for health checks with a third-party monitoring/alerting utility.Last updated November 19, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/scaling.md)  
Also available in:
[简体中文](/zh-cn/admin/scaling/)

---


# Moderation actions

Source: https://docs.joinmastodon.org/admin/moderation/

# Moderation actions

Actions that can be taken against unwanted users or domains.

## Moderating individual users

Moderation in Mastodon is always applied locally, i.e. as seen from the particular server. An admin or moderator on one server cannot affect a user on another server, they can only affect the local copy on their own server.

As of v3.5.0, all default user moderation decisions will notify the affected user by email. The user can access an appeal page, where they can submit one appeal within 20 days of the decision. Moderators can approve or reject the appeal.

## Sensitive

When an account is marked as sensitive, all media that the user posts will be automatically [marked as sensitive](https://docs.joinmastodon.org/user/posting/#cw).

## Freeze

A Mastodon account can be frozen. This prevents the user from doing anything with the account, but all of the content is still there untouched. This limitation is reversible; the account can be unfrozen at any time. This limitation is only available for local users on your server.

When a user’s account is frozen, they are redirected to their **Account Settings** page, where the following message is displayed:

> You can no longer login to your account or use it in any other way, but your profile and other data remains intact.
> 
> 

When the user’s account is unfrozen, normal functionality resumes.

## Limit

Previously known as “silencing”. A limited account is hidden from all other users on that instance, except for its followers. All of the content is still there, and it can still be found via search, mentions, and following, but the content is invisible publicly.

At this moment, limit does not affect federation. A locally limited account is *not* limited automatically on other servers. Account limitations are reversible.

## Suspend

A Mastodon suspension means the account is effectively deleted. The account no longer appears in search, the profile page is gone, and all of the posts, uploads, followers, and all other data are removed publicly. However, all the data is available in the admin back-end for a period of 30 days from suspension. This is to give the user an opportunity to work with instance admins to resolve any potential issues and have the account re-instated.

If the account is reinstated within the 30-day period, the user’s profile and all posts become publicly accessible again. However, cross-server follow relationships may be broken upon suspension and will not be automatically restored when the account is reinstated. If the 30-day period lapses, **all** of the user’s data is permanently purged from the instance. Admins also have the option to immediately delete the user’s account data at any point during the 30-day period.

Once the data has been deleted, whether that is after the 30-day period, or if an admin has force deleted it, the account can still be un-suspended. However, the account will have no data (statuses, profile information, avatar or header image) associated with it.

For remote accounts, suspending will make them unfollow any local account. Those relationships are not restored in case the remote account is unsuspended, even within the 30-day time window.

## Moderating entire websites

Because individually moderating a large volume of users from a misbehaving server can be exhausting, it is possible to pre-emptively moderate against all users from that particular server using a so-called **domain block**, which comes with several different levels of severity.

## Reject media

With this option active, no files from the server will be processed locally. That includes avatars, headers, emojis and media attachments.

## Limit

Equivalent to [limiting](/admin/moderation/#limit-user) all past and future accounts from the server. Previously known as “silencing”.

## Suspend

Equivalent to [suspending](/admin/moderation/#suspend-user) all past and future accounts from the server. No content from the server will be stored locally except for usernames.

Suspending a server will remove all existing follow relationships between local accounts and accounts on the suspended server. They will not be restored in case the remote server is un-suspended later.

## Spam-fighting measures

There are a few baseline measures for preventing spam in Mastodon:

* Signing up requires confirming an e-mail address
* Signing up is rate-limited by IP

However, dedicated spammers will get through that. The other measure you can employ is **e-mail domain blacklisting**. During sign-up, Mastodon resolves the given e-mail address for an A or MX record, i.e. the IP address of the e-mail server, and checks that IP address against a dynamically stored blacklist.

## Blocking by e-mail server

Spammers will often use different e-mail domains so it looks like they are using a lot of different e-mail servers that would all be difficult to blacklist separately. However, sometimes all of those domains resolve to a single e-mail server IP. If you see a lot of spammers signing up at the same time, you can check for this, either using an online DNS lookup tool, or the Linux `dig` utility, e.g. `dig example.com` will return all DNS A records for that Domain. If you notice the IP is the same for all domains, you can add it to the e-mail domain blacklist.

## Blocking by IP

It is not possible to block visitors by IP address in Mastodon itself, and it is not a foolproof strategy. IPs are sometimes shared by a lot of different people and sometimes change hands. However, it is possible to block visitors by IP address in Linux using a firewall. Here is an example using `iptables` and `ipset`:

```
# Install ipset
sudo apt install ipset
# Create blacklist named "spambots"
sudo ipset create spambots nethash
# Add 1.2.3.4 to the blacklist
sudo ipset add spambots 1.2.3.4
# Add firewall rule based on the blacklist
sudo iptables -I INPUT 1 -m set --match-set spambots src -j DROP

```
Be careful not to lock yourself out of your machine.

## Webhooks for moderation-level events

Webhooks can be created to facilitate automation through the moderation API by notifying applications about system events in real-time. This also enables integrations with chat apps like Discord, IRC and Slack, helping moderator coordination.

The X-Hub-Signature header adopted from the WebSub spec can be optionally used to verify that the payloads are authentic.

Events currently supported:

* account.approved
* account.created
* account.updated
* report.created
* report.updated
* status.created
* status.updated

## Example payload:

```

{
 "event":"report.created",
 "created\_at":"2023-10-26T13:34:00.351Z",
 "object":{
 "id":"8437",
 "action\_taken":false,
 "action\_taken\_at":null,
 "category":"violation",
 "comment":"",
 "forwarded":true,
 "created\_at":"2023-10-26T13:34:00.348Z",
 "updated\_at":"2023-10-26T13:34:00.348Z",
 "account":{
 "id":"123456789",
 "username":"bobisaburger",
 "domain":null,
 "created\_at":"2023-07-13T04:39:22.493Z",
 "email":"bobisaburger@emailservice.com",
 "ip":"12.34.56.78",
 "confirmed":true,
 "suspended":false,
 "silenced":false,
 "sensitized":false,
 "disabled":false,
 "approved":true,
 "locale":"en",
 "invite\_request":"I would love to be a member of your instance!",
 "ips":[
 {
 "ip":"12.34.56.78",
 "used\_at":"2023-07-13T04:45:31.835Z"
 },
 {
 "ip":"98.76.54.32",
 "used\_at":"2023-07-13T04:39:22.722Z"
 }
 ],
 "account":{
 "id":"123456789",
 "username":"bobisaburger",
 "acct":"bobisaburger",
 "display\_name":"bobisaburger",
 "locked":false,
 "bot":false,
 "discoverable":null,
 "group":false,
 "created\_at":"2023-07-13T00:00:00.000Z",
 "note":"",
 "url":"https://mastodonwebsite/@bobisaburger",
 "uri":"https://mastodonwebsite/users/bobisaburger",
 "avatar":"https://locationofavatar.com/image.jpg",
 "avatar\_static":"https://locationofavatar.com/image.jpg",
 "header":"locationofheader.com/image.jpg",
 "header\_static":"locationofheader.com/image.jpg",
 "followers\_count":100,
 "following\_count":200,
 "statuses\_count":9,
 "last\_status\_at":"2023-08-05",
 "noindex":true,
 "emojis":[

 ],
 "roles":[

 ],
 "fields":[

 ]
 },
 "role":{
 "id":"-99",
 "name":"",
 "permissions":"65536",
 "color":"",
 "highlighted":false
 }
 },
 "target\_account":{
 "id":"123454321",
 "username":"cheeseperson",
 "domain":"someothermastodonsite.com",
 "created\_at":"2023-08-20T00:00:00.000Z",
 "email":null,
 "ip":null,
 "confirmed":null,
 "suspended":false,
 "silenced":false,
 "sensitized":false,
 "disabled":null,
 "approved":null,
 "locale":null,
 "invite\_request":null,
 "ips":null,
 "account":{
 "id":"123454321",
 "username":"cheeseperson",
 "acct":"cheeseperson@someothermastodonsite.com",
 "display\_name":"cheeseperson",
 "locked":false,
 "bot":false,
 "discoverable":false,
 "group":false,
 "created\_at":"2023-08-20T00:00:00.000Z",
 "note":"",
 "url":"https://someothermastodonsite.com/@cheeseperson",
 "uri":"https://someothermastodonsite.com/users/cheeseperson",
 "avatar":"https://someothermastadonsite.com/avatars/original/missing.png",
 "avatar\_static":"https://someothermastadonsite.com/avatars/original/missing.png",
 "header":"locationofheader.com/image.jpg",
 "header\_static":"locationofheader.com/image.jpg",
 "followers\_count":2,
 "following\_count":2,
 "statuses\_count":95,
 "last\_status\_at":"2023-10-26",
 "emojis":[

 ],
 "fields":[

 ]
 },
 "role":null
 },
 "assigned\_account":null,
 "action\_taken\_by\_account":null,
 "statuses":[
 {
 "id":"12345678987654321",
 "created\_at":"2023-10-26T11:29:13.000Z",
 "in\_reply\_to\_id":"1918282746465",
 "in\_reply\_to\_account\_id":"101010101010",
 "sensitive":false,
 "spoiler\_text":"",
 "visibility":"public",
 "language":"de",
 "uri":"https://someothermastodonsite.com/users/cheeseperson/statuses/111301083360371621",
 "url":"https://someothermastodonsite.com/@cheeseperson/111301083360371621",
 "replies\_count":0,
 "reblogs\_count":0,
 "favourites\_count":0,
 "edited\_at":"2023-10-26T11:30:31.000Z",
 "content":"<p>Here is some content</p>",
 "reblog":null,
 "account":{
 "id":"123454321",
 "username":"cheeseperson",
 "acct":"cheeseperson@someothermastodonsite.com",
 "display\_name":"cheeseperson",
 "locked":false,
 "bot":false,
 "discoverable":false,
 "group":false,
 "created\_at":"2023-08-20T00:00:00.000Z",
 "note":"",
 "url":"https://someothermastodonsite.com/@cheeseperson",
 "uri":"https://someothermastodonsite.com/users/cheeseperson",
 "avatar":"https://someothermastadonsite.com/avatars/original/missing.png",
 "avatar\_static":"https://someothermastadonsite.com/avatars/original/missing.png",
 "header":"locationofheader.com/image.jpg",
 "header\_static":"locationofheader.com/image.jpg",
 "followers\_count":2,
 "following\_count":2,
 "statuses\_count":95,
 "last\_status\_at":"2023-10-26",
 "emojis":[

 ],
 "fields":[

 ]
 },
 "media\_attachments":[

 ],
 "mentions":[
 {
 "id":"101010101010",
 "username":"thirdperson",
 "url":"https://thirdpersonsinstance.com/@thirdperson",
 "acct":"thirdperson@emailwebsite.com"
 }
 ],
 "tags":[

 ],
 "emojis":[

 ],
 "card":null,
 "poll":null
 }
 ],
 "rules":[
 {
 "id":"2",
 "text":"Don't be a meanie!"
 }
 ]
 }
}

```
Last updated March 20, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/moderation.md)  
Also available in:
[简体中文](/zh-cn/admin/moderation/)

---


# Troubleshooting errors

Source: https://docs.joinmastodon.org/admin/troubleshooting/

# Troubleshooting errors

## **I see an error page that says something went wrong. How do I find out what’s wrong?**

All error messages with stack traces are written to the system log. When using systemd, the logs of each systemd service can be browsed with `journalctl -u mastodon-web` (substitute with the correct service name). When using Docker, it’s similar: `docker logs mastodon_web_1` (substitute with the correct container name).

Specific details of server-side errors are *never* displayed to the public, as they can reveal what your setup looks like internally and give attackers clues on how to get in, or how to abuse the system more efficiently.

Each response from Mastodon’s web server carries a header with a unique request ID, which is also reflected in the logs. By inspecting the headers of the error page, you can easily find the corresponding stack trace in the log.

## **I’m not seeing much in my logs. How do I enable additional logging/debugging information?**

By default your logs will show `info` level logging. To see more debugging messages, you can your `.env.production` file to increase the level, for the relevant service:

* **Web/Sidekiq:** Set the value of `RAILS_LOG_LEVEL` to `debug` and then restart the service that you’re attempting to troubleshoot.
* **Streaming:** Set the value of `LOG_LEVEL` to `silly` and then restart the service that you’re attempting to troubleshoot.

More information on other logging levels for these option can be found on the [Configuring your environment](https://docs.joinmastodon.org/admin/config) page.

The `debug` or `silly` levels can be very verbose and you should take care to change the log level back to a lower level, once you have completed your troubleshooting.

## **After an upgrade to a newer version, some pages look weird, like they have unstyled elements. Why?**

Check that you have run `RAILS_ENV=production bin/rails assets:precompile` after the upgrade, and restarted Mastodon’s web process, because it looks like it’s serving outdated stylesheets and scripts. It’s also possible that the precompilation fails due to a lack of RAM, as webpack is unfortunately extremely memory-hungry. If that is the case, make sure you have some swap space assigned. Alternatively, it’s possible to precompile the assets on a different machine, then copy over the `public/packs` directory.

## **After an upgrade to a newer version, some requests fail and the logs show error messages about missing columns or tables. Why?**

Check that you have run `RAILS_ENV=production bin/rails db:migrate` after the upgrade, because it looks like Mastodon’s code is accessing a newer or older database schema. If you are using PgBouncer, make sure this one command connects directly to PostgreSQL, as PgBouncer does not support the kind of table locks that are used within migrations.

## **I am trying to run a `tootctl` or `rake`/`rails` command, but all I get is an error about uninitialized constants. What’s wrong?**

Check that you are specifying the correct environment with `RAILS_ENV=production` before the command. By default, the environment is assumed to be development, so the code tries to load development-related gems. However, in production environments, we avoid installing those gems, and that’s where the error comes from.

## **I encountered a compilation error while executing `RAILS_ENV=production bundle exec rails assets:precompile`, but no more information is given. How to fix it?**

Usually, it’s because your server ran out of memory while compiling assets. Use a swapfile or increase the swap space to increase the memory capacity. Run `RAILS_ENV=production bundle exec rake tmp:cache:clear` to clear cache, then execute `RAILS_ENV=production bundle exec rails assets:precompile` to compile again. Make sure you clear the cache after a compilation error, or it will show “Everything’s OK” but leave the assets unchanged.

## **I am getting this error: `Read-only file system @ dir_s_mkdir`. Why?**

By default, Mastodon makes use of [systemd’s sandboxing capabilities](https://www.freedesktop.org/software/systemd/man/systemd.exec.html#Sandboxing) in a way that disallows writing outside of `/home/mastodon`. If Mastodon is installed elsewhere, you may need to allow `mastodon-sidekiq` and `mastodon-web` to write to a custom directory:

1. Add parameter `ReadWritePaths` to files `/etc/systemd/system/mastodon-sidekiq.service` and `/etc/systemd/system/mastodon-web.service`. Example - `ReadWritePaths=/example/mastodon/live`.
2. run `systemctl stop mastodon-sidekiq mastodon-web`
3. run `systemctl daemon-reload`
4. run `systemctl start mastodon-sidekiq mastodon-web`

Last updated December 10, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/troubleshooting.md)  
Also available in:
[简体中文](/zh-cn/admin/troubleshooting/)

---


# Roles

Source: https://docs.joinmastodon.org/admin/roles/

# Roles

Management of roles from the admin dashboard.

# Roles

When the database is seeded, roles are derived from the values present in [`~/config/roles.yml`](https://github.com/mastodon/mastodon/blob/main/config/roles.yml).

[Role](/entities/Role/)The resultant [default roles](/admin/roles/#default-roles) are `Owner`, `Admin`, and `Moderator`.

A role and its attributes can be created using [Add role](/admin/roles/#add-role), present on the *Roles* (`/admin/roles`) page.

![](/assets/admin-roles-ui.png)

An existing role’s attributes can be changed using the [edit role](/admin/roles/#edit-role) feature.

## Default roles

## Base role (*Default permissions*)

Affects all users, including users without an assigned role.

The only permission flag that can be altered for this role is **Invite Users**. Enabling this permission allows all users to send invitations.

The base role has a priority of `0`, and this value cannot be altered.

## Owner

A role that is assigned the **Administrator** permission flag, bypassing all permissions. Users with the owner role have every [permission flag](/entities/Role/#permission-flags) enabled.

The role’s *Name*, *Badge color*, and *Display badge* attributes can be changed. No permissions can be edited / revoked from this role.

The owner role has the highest [priority](/admin/roles/#role-priority) of any role (`1000`). The owner can modify any other role attributes. No role can be created which supersedes the owner role, as [role priority](/admin/roles/#role-priority) for new and existing roles must be <= `999`.

## Admin

A role that is assigned all **Moderation** and **Administration** permission flags.

The **DevOps** permission flag for this role is disabled, but can be enabled by an **Owner** (or a custom role with a higher priority value).

The role’s *Name*, *Badge color*, and *Display badge* attributes can be changed.

The admin role has a priority of `100`.

## Moderator

A role that is assigned certain **Moderation** permission flags. These include…

* **View Dashboard**
* **View Audit Log**
* **Manage Users**
* **Manage Reports**
* **Manage Taxonomies**

The role’s *Name*, *Badge color*, and *Display badge* attributes can be changed.

The moderator role has a priority of `10`.

## Add Role

The `admin/roles/new` page allows for the creation of a custom role.

![](/assets/admin-roles-new-ui.png)

## Input Fields

[Name](/entities/Role/#name)Duplicate role names can exist. They are discerned in the database by their `id`, which cannot be set from the web interface.

[Badge color](/entities/Role/#color)## Priority

* Defaults to `0`
	+ Cannot be > `999`
	+ Can be any negative integer value
* Two roles can have the same priority value

> “Higher role decides conflict resolution in certain situations. Certain actions can only be performed on roles with a lower priority.”
> 
> 

[Display role as badge on user profiles](/entities/Role/#highlighted)[Permissions](/entities/Role/#permissions)## Edit role

![](/assets/admin-roles-edit-ui.png)

An existing role and its attributes can be edited using *Edit* in the role list. [Input fields](/admin/roles/#add-role-input-fields) can be changed and saved, just as they can when creating a new role. The role can also be deleted using this form.

![](/assets/admin-roles-edit-role-ui.png)

A logged in user with permission to **Manage Roles** will always be able to see every role, but cannot modify roles that exceed or are equal to their assigned role’s [priority](/admin/roles/#role-priority).

Last updated December 7, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/roles.md)

---


# Object storage

Source: https://docs.joinmastodon.org/admin/optional/object-storage/

# Object storage

Serving user-uploaded files in Mastodon using external object storage

User-uploaded files can be stored on the main server’s file system, or using an external object storage server, which can be required for scaling.

## Using the filesystem

The simplest way to store user uploads is by using the server’s file system. This is how it works by default and is suitable for small servers.

By default, Mastodon will store file uploads under `public/system` in its installation directory, but that can be overridden using the `PAPERCLIP_ROOT_PATH` environment variable.

By default, the files are served at `https://your-domain/system`, which can be overridden using `PAPERCLIP_ROOT_URL` and `CDN_HOST`.

While using the server’s file system is perfectly serviceable for small servers, using external object storage is more scalable.The web server must be configured to serve those files but not allow listing them (that is, `https://your-domain/system/` should not return a file list). This should be the case if you use the configuration files distributed with Mastodon, but it is worth double-checking.## S3-compatible object storage backends

Mastodon can use S3-compatible object storage backends. ACL support is recommended as it allows Mastodon to quickly make the content of temporarily suspended users unavailable, or marginally improve the security of private data.

Mastodon uses the S3 API (`S3_REGION`, `S3_ENDPOINT`, `S3_BUCKET`,
`AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, `S3_SIGNATURE_VERSION`,
`S3_OVERRIDE_PATH_STYLE`) for all write, delete, and
permissions-modification operations. This includes media uploads (from
the web interface, from Mastodon API clients, and from ActivityPub
servers), media deletion (when a post is edited or deleted), and
blocking access to media (when an account is suspended).

Mastodon sends URLs to the web interface, Mastodon API clients, and
ActivityPub servers for all ‘read’ operations. As a result those
operations are anonymous (no authentication or authorization needed)
and use plain HTTP GET methods, which means they can be routed through
reverse proxies and CDNs, and can be cached. It also means that those
URLs can contain host/domain names which are entirely different from
those used by the S3 storage provider itself, if desired. See the
detailed documentation below which describes how those URLs are
constructed and which environment variables are involved.

To enable S3 storage, set the `S3_ENABLED` environment variable to `true`.

## Environment variables for S3 API access

* `S3_REGION` (defaults to ‘us-east-1’, required if using AWS S3, may
not be required with other storage providers)
* `S3_ENDPOINT` (defaults to ‘https://s3.<S3\_REGION>.amazonaws.com’,
required if not using AWS S3)
* `S3_BUCKET=mastodata` (replacing `mastodata` with the name of your
bucket)
* `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` need to be set to
your credentials
* `S3_SIGNATURE_VERSION` (defaults to ‘v4’, should be compatible with
most storage providers)
* `S3_OVERRIDE_PATH_STYLE` (only used if `S3_ENDPOINT` is configured,
set this to `true` if the storage provider requires API operations
to be sent to ‘<S3\_BUCKET>.<S3\_ENDPOINT>` (domain-style))

## Environment variables for client access to media objects

* `S3_PROTOCOL` (defaults to `https`)
* `S3_HOSTNAME` (defaults to ‘s3-<S3\_REGION>.amazonaws.com’, required
if not using AWS S3 and `S3_ALIAS_HOST` is not set)
* `S3_ALIAS_HOST` (can be used instead of `S3_HOSTNAME` if you do not
want `S3_BUCKET` to be included in the media URLs, and requires that
you have provisioned a reverse proxy or CDN in front of the storage
provider)

As noted above, Mastodon will send URLs to clients when they need to
access media objects from the storage provider. The URLs are
constructed as follows:

* If `S3_ALIAS_HOST` is not set, then the URL will be
‘<S3\_PROTOCOL>://<S3\_HOSTNAME>/<S3\_BUCKET>/<object path>’
* If `S3_ALIAS_HOST` is set, then the URL will be
‘<S3\_PROTOCOL>://<S3\_ALIAS\_HOST>/<object path>’

It is important to note that when `S3_ALIAS_HOST` is set, the bucket
name is **not** included in the generated URL; this means the bucket
name must be included in `S3_ALIAS_HOST` (referred to as
‘domain-style’ object access), or that `S3_ALIAS_HOST` must point to a
reverse proxy or CDN which can include the bucket name in the URL it
uses to send the request onward to the storage provider. This type of
configuration allows you to ‘hide’ the usage of the storage provider
from the instance’s clients, which means you can change storage
providers without changing the resulting URLs.

In addition to hiding the usage of the storage provider, this can also
allow you to cache the media after retrieval from the storage
provider, reducing egress bandwidth costs from the storage
provider. This can be done in your own reverse proxy, or by using a
CDN.

[Proxying object storage through nginx](/admin/optional/object-storage-proxy/)You must serve the files with CORS headers, otherwise some functions of Mastodon’s web UI will not work. For example, `Access-Control-Allow-Origin: *`## Optional environment variables

## `S3_OPEN_TIMEOUT`

Default: 5 (seconds)

The number of seconds before the HTTP handler should timeout while trying to open a new HTTP session.

## `S3_READ_TIMEOUT`

Default: 5 (seconds)

The number of seconds before the HTTP handler should timeout while waiting for an HTTP response.

## `S3_FORCE_SINGLE_REQUEST`

Default: false

Set this to `true` if you run into trouble processing large files.

## `S3_ENABLE_CHECKSUM_MODE`

Default: false

Enables verification of object checksums when Mastodon is retrieving
an object from the storage provider. This feature is available in AWS
S3 but may not be available in other S3-compatible implementations.

## `S3_STORAGE_CLASS`

Default: none

When using AWS S3, this variable can be set to one of the [storage
class](https://docs.aws.amazon.com/AmazonS3/latest/userguide/storage-class-intro.html)
options which influence the storage selected for uploaded objects (and
thus their access times and costs). If no storage class is specified
then AWS S3 will use the `STANDARD` class, but options include
`REDUCED_REDUNDANCY`, `GLACIER`, and others.

## `S3_MULTIPART_THRESHOLD`

Default: 15 (megabytes)

Objects of this size and smaller will be uploaded in a single
operation, but larger objects will be uploaded using the multipart
chunking mechanism, which can improve transfer speeds and reliability.

## `S3_PERMISSION`

Default: `public-read`

Defines the S3 object ACL when uploading new files. Use caution when
using [S3 Block Public
Access](https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-block-public-access.html)
and turning on the `BlockPublicAcls` option, as uploading objects with
ACL `public-read` will fail (403). In that case, set `S3_PERMISSION`
to `private`.

Regardless of the ACL configuration, your
S3 bucket must be set up to ensure that all objects are publicly
readable but not writable or listable. At the same time, Mastodon
itself should have write access to the bucket. This configuration is
generally consistent across all S3 providers, and common ones are
highlighted below.## `S3_BATCH_DELETE_LIMIT`

Default: `1000`

The official [Amazon S3
API](https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteObjects.html)
can handle deleting 1,000 objects in one batch job, but some providers
may have issues handling this many in one request, or offer lower
limits.

## `S3_BATCH_DELETE_RETRY`

Default: 3

During batch delete operations, S3 providers may perodically fail or
timeout while processing deletion requests. Mastodon will back off and
retry the request up to this maximum number of times.

## MinIO

MinIO is an open-source implementation of an S3 object provider. This section does not cover how to install it, but how to configure a bucket for use in Mastodon.

You need to set a policy for anonymous access that allows read-only access to objects contained by the bucket without allowing listing them.

To do this, you need to set a custom policy (replace `mastodata` with the actual name of your S3 bucket):

```
{
 "Version": "2012-10-17",
 "Statement": [
 {
 "Effect": "Allow",
 "Principal": {
 "AWS": [
 "\*"
 ]
 },
 "Action": [
 "s3:GetObject"
 ],
 "Resource": [
 "arn:aws:s3:::mastodata/\*"
 ]
 }
 ]
}

```
Mastodon itself needs to be able to write to the bucket, so either use your admin MinIO account (discouraged) or an account specific to Mastodon (recommended) with the following policy attached (replace `mastodata` with the actual name of your S3 bucket):

```
{
 "Version": "2012-10-17",
 "Statement": [
 {
 "Effect": "Allow",
 "Action": "s3:\*",
 "Resource": "arn:aws:s3:::mastodata/\*"
 }
 ]
}

```
You can set those policies from the MinIO Console (web-based user interface) or the command-line client (`mcli` / `mc`).

## Using the MinIO Console

Connect to the MinIO Console web interface and create a new bucket (or navigate to your existing bucket):
![](/assets/object-storage/minio-bucket.png)

Then, configure the “Access Policy” to a custom one that allows read access (`s3:GetObject`) without write access or the ability to list objects (see above):
![](/assets/object-storage/minio-access-policy.png)

If the MinIO Console does not allow you to set a “Custom” policy, you will likely need to update MinIO. If you are using MinIO in *standalone* or *filesystem* mode, [`RELEASE.2022-10-24T18-35-07Z`](https://github.com/minio/minio/releases/tag/RELEASE.2022-10-24T18-35-07Z) should be a safe version to update to that does not require [an involved migration procedure](https://min.io/docs/minio/linux/operations/install-deploy-manage/migrate-fs-gateway.html#migrate-from-gateway-or-filesystem-mode).Create a new `mastodon-readwrite` policy (see above):
![](/assets/object-storage/minio-mastodon-readwrite.png)

Finally, create a new `mastodon` user with the `mastodon-readwrite` policy:
![](/assets/object-storage/minio-mastodon-user.png)

## Using the command-line utility

The same can be achieved using the [MinIO Client](https://min.io/docs/minio/linux/reference/minio-mc.html) command-line utility (which can be called `mc` or `mcli` depending on where it is installed from).

Create a new bucket:
`mc mb myminio/mastodata`

Save the anonymous access policy from above as `anonymous-readonly-policy.json` and the Mastodon user access policy as `mastodon-readwrite.json` (make sure to replace `mastodata` with the name of your newly-created bucket).

Set the anonymous access policy for your bucket:
`mc anonymous set-json anonymous-readonly-policy.json myminio/mastodata`

Add a `mastodon-readwrite` policy:
`mc admin policy add myminio mastodon-readwrite mastodon-readwrite.json`

Add the `mastodon` user (replace the password):
`mc admin user add myminio mastodon SECRET_PASSWORD`

Apply the `mastodon-readwrite` policy to the `mastodon` user:
`mc admin policy set myminio mastodon-readwrite user=mastodon`

## Wasabi Object Storage

Create a new bucket and define its policy to allow objects to be anonymously readable but not listable:

```
{
 "Version": "2012-10-17",
 "Statement": [
 {
 "Effect": "Allow",
 "Principal": {
 "AWS": "\*"
 },
 "Action": "s3:GetObject",
 "Resource": "arn:aws:s3:::mastodata/\*"
 }
 ]
}

```
![](/assets/object-storage/wasabi-access-policy.png)

If you are using an old bucket, ensure you are not giving “Everyone” read access to objects through Wasabi’s legacy Access Control settings, as that allows listing objects and take precedence over the IAM policy defined above.

![](/assets/object-storage/wasabi-access-control.png)

Then, create a `mastodon-readwrite` policy to grant read and write access to your bucket:

```
{
 "Version": "2012-10-17",
 "Statement": [
 {
 "Effect": "Allow",
 "Action": "s3:\*",
 "Resource": "arn:aws:s3:::mastodata/\*"
 }
 ]
}

```
![](/assets/object-storage/wasabi-mastodon-readwrite.png)

Finally, create a new `mastodon` user and don’t forget to enable the `mastodon-readwrite` policy:
![](/assets/object-storage/wasabi-mastodon-user.png)

On Mastodon’s side, you need to set `S3_FORCE_SINGLE_REQUEST=true` to properly handle large uploads.

## DigitalOcean Spaces

In your DigitalOcean Spaces Bucket, make sure that “File Listing” is “Restricted” to users with access keys.

![](/assets/object-storage/do-spaces.png)

## Scaleway

If you want to use Scaleway Object Storage, we strongly recommend you create a Scaleway project dedicated to your Mastodon instance assets and use a custom IAM policy.

First, create a new Scaleway project, in which you create your object storage bucket. You need to set your bucket visibility to “Private” to not allow objects to be listed.

![](/assets/object-storage/scaleway-bucket.png)

Now that your bucket is created, you need to create API keys to be used in your Mastodon instance configuration.

Head to the IAM settings (in your organization menu, top right of the screen), and create a new IAM policy (eg `mastodon-media-access`)

![](/assets/object-storage/scaleway-policy.jpg)

This policy needs to have one rule, allowing it to read, write and delete objects in the Scaleway project you created above (the scope).

![](/assets/object-storage/scaleway-policy-rules.jpg)

Then head to the IAM Applications page, and create a new one (eg `my-mastodon-instance`) and select the policy you created above.

Finally, click on the application you just created, then “API Keys”, and create a new API key to use in your instance configuration. You should use the “Yes, set up preferred Project” option and select the project you created above as the default project for this key.

![](/assets/object-storage/scaleway-api-key.png)

Copy the Access Key ID and Secret, and use them for your `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` Mastodon config variables.

## Exoscale

In Exoscale, your bucket should not have any read ACLs (Mastodon will set the ACLs on the object themselves as appropriate).

You need to create an API Key for the Mastodon app, restricted to the Object Storage (`sos`) service, restricted to your bucket, and with unrestricted operations.

![](/assets/object-storage/exoscale.png)

On Mastodon’s side, you need to set `S3_FORCE_SINGLE_REQUEST=true` to properly handle large uploads.

## Cloudflare R2

Cloudflare R2 does not support ACLs, so Mastodon needs to be instructed not to try setting them. To do that, set the `S3_PERMISSION` environment variable to an empty string.

Without support for ACLs, media files from temporarily-suspended users will remain accessible.To get credentials for use in Mastodon, select “Manage R2 API Tokens” and create a new API token with “Edit” permissions.

This section is currently under construction.Last updated February 21, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/optional/object-storage.md)

---


# Onion services

Source: https://docs.joinmastodon.org/admin/optional/tor/

# Onion services

Serving Mastodon through Tor onion services.

Mastodon can be served through Tor as an onion service. This will give you a `*.onion` address that can only be used while connected to the Tor network.

## Installing Tor

First Tor’s Debian archive needs to be added to apt.

```
deb https://deb.torproject.org/torproject.org stretch main
deb-src https://deb.torproject.org/torproject.org stretch main

```
Next add the gpg key.

```
curl https://deb.torproject.org/torproject.org/A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89.asc | gpg --import
gpg --export A3C4F0F979CAA22CDBA8F512EE8CBC9E886DDD89 | apt-key add -

```
Finally install the required packages.

```
apt install tor deb.torproject.org-keyring

```
## Configure Tor

Edit the file at `/etc/tor/torrc` and add the following configuration.

```
HiddenServiceDir /var/lib/tor/onion\_service/
HiddenServiceVersion 3
HiddenServicePort 80 127.0.0.1:80

```
Restart Tor.

```
sudo service tor restart

```
You can now find your Tor hostname in `/var/lib/tor/hidden_service/hostname`.

## Move your Mastodon configuration

We will need to tell Nginx about your Mastodon configuration twice. To keep things [“DRY”](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself) we need to move the Mastodon configuration into its own file that can we can refer to later.

Create a new file at `/etc/nginx/snippets/mastodon.conf`. Copy every Mastodon configuration parameter, apart from the `listen`, `server_name`, `include` directives, as well as all the SSL options. Include an `Onion-Location` header to let supporting browsers know that this service is also accessible from Tor. Your new file should look somewhat like this:

```
add\_header Referrer-Policy "same-origin";
add\_header Onion-Location mastodon.qKnFwnNH2oH4QhQ7CoRf7HYj8wCwpDwsa8ohJmcPG9JodMZvVA6psKq7qKnFwnNH2oH4QhQ7CoRf7HYj8wCwpDwsa8ohJmcPG9JodMZvVA6psKq7.onion$request\_uri;

keepalive\_timeout 70;
sendfile on;
client\_max\_body\_size 80m;

root /home/mastodon/live/public;

# …

error\_page 500 501 502 503 504 /500.html;

access\_log /var/log/nginx/mastodon\_access.log;
error\_log /var/log/nginx/mastodon\_error.log warn;

```
In the new configuration file, add an include directive in the place of where your Mastodon configurations were.

Your Nginx configuration file should now look a bit like this:

```
server {
 listen 80;
 server\_name mastodon.example.com;
 return 301 https://$server\_name$request\_uri;
}

map $http\_upgrade $connection\_upgrade {
 default upgrade;
 '' close;
}

server {
 listen 443 ssl http2;
 list [::]:443 ssl http2;
 server\_name mastodon.example.com;
 include /etc/nginx/snippets/mastodon.conf;

 ssl\_certificate /etc/letsencrypt/live/mastodon.example.com/fullchain.pem;
 ssl\_certificate\_key /etc/letsencrypt/live/mastodon.example.com/privkey.pem;
}

```
## Serve Tor over http

This section assumes that you want to expose your instance on both Tor and the public Internet *simultaneously*.

While it may be tempting to serve your Tor version of Mastodon over HTTPS, it isn’t always ideal. They are mostly useful for large companies that can produce their own certificates with their own company information. There is no Certificate Authority (CA) that provides them [for free](https://community.torproject.org/onion-services/advanced/https/), and there is also [a blog post from the Tor Project](https://blog.torproject.org/facebook-hidden-services-and-https-certs) explains why HTTPS certificates are not really beneficial for security. On the other hand, however, Mastodon uses a lot of redirects to the HTTPS version of your site, where the presence of a validated certificate may make it easier for your users to use your instance on Tor without having to manually remove the `https://` prefix in URLs.

In this section, we will go over how to serve your Mastodon instance over HTTP, but for Tor **only**. This can be added by prepending an additional configuration to your existing Nginx configuration.

```
server {
 listen 80;
 server\_name mastodon.qKnFwnNH2oH4QhQ7CoRf7HYj8wCwpDwsa8ohJmcPG9JodMZvVA6psKq7qKnFwnNH2oH4QhQ7CoRf7HYj8wCwpDwsa8ohJmcPG9JodMZvVA6psKq7.onion;
 include /etc/nginx/snippets/mastodon.conf;
}

server {
 listen 80;
 server\_name mastodon.example.com;
 return 301 https://$server\_name$request\_uri;
}

map $http\_upgrade $connection\_upgrade {
 default upgrade;
 '' close;
}

server {
 listen 443 ssl http2;
 list [::]:443 ssl http2;
 server\_name mastodon.example.com;
 include /etc/nginx/snippets/mastodon.conf;

 ssl\_certificate /etc/letsencrypt/live/mastodon.example.com/fullchain.pem;
 ssl\_certificate\_key /etc/letsencrypt/live/mastodon.example.com/privkey.pem;
}

```
Replace the long hash provided here with your Tor domain located in the file at `/var/lib/tor/hidden_service/hostname`. This should also be reflected in the `Onion-Location` header in the snippets file.

Note that the onion hostname has been prefixed with “mastodon.”. Your Tor address acts as a wildcard domain. All subdomains will be routed through, and you can configure Nginx to respond to any subdomain you wish. If you do not wish to host any other services on your tor address you can omit the subdomain, or choose a different subdomain.

Here you can see the payoff of moving your mastodon configurations to a different file. Without this, all of your configurations would have to be copied to both places. Any change to your configuration would have to be made in both places.

Restart your web server.

```
service nginx restart

```
## Gotchas

There are a few things you will need to be aware of.

* As mentioned earlier, certain URLs in the Mastodon frontend will force your users to a HTTPS URL. They will have to manually replace the URL with HTTP to continue.
* Various resources, such as images, will **still** be offered through your regular clearnet domain. This could possibly be a problem, depending on how cautious your users want, try or need to be.

Last updated January 25, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/optional/tor.md)  
Also available in:
[简体中文](/zh-cn/admin/optional/tor/)

---


# Captcha

Source: https://docs.joinmastodon.org/admin/optional/captcha/

# Captcha

Mitigating automated signup bots

As of Mastodon 4.2, using CAPTCHA technology is supported to help mitigate against bots signing up for new accounts.
With CAPTCHA enabled, new registrations will be required to complete a challenge response as part of the e-mail verification process.

![](/assets/captcha/user-view.png)

For some people, the use of a central CAPTCHA service may be a security and privacy concern.
In addition, CAPTCHA can make the registration process significantly less accessible, particularly for individuals with visual impairments, such as those who are blind or have low vision.Currently, hCaptcha is the only available provider supported by Mastodon.
Other providers may be added in the future.

## hCaptcha

* Create a free hCaptcha account at [hcaptcha.com](https://www.hcaptcha.com)
* After completing registration, use the hCaptcha dashboard to add a new site with your Mastodon server domain and obtain a Site Key
* From the Account Settings menu in hCaptcha, obtain your Secret Key
* Add the values to your Mastodon environment configuration as `HCAPTCHA_SITE_KEY` and `HCAPTCHA_SECRET_KEY`
* Restart the Mastodon services running on your server
* From the Mastodon web interface navigate to **Administration** > **Server settings** > **Registrations** and check the box labled “Require new users to solve a CAPTCHA to confirm their account”

![](/assets/captcha/admin-view.png)

Last updated March 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/optional/captcha.md)

---


# Single Sign On

Source: https://docs.joinmastodon.org/admin/optional/sso/

# Single Sign On

This page is under construction.

For the moment, please refer to [this pull request](https://github.com/mastodon/mastodon/pull/16221)

Last updated February 19, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/optional/sso.md)  
Also available in:
[简体中文](/zh-cn/admin/optional/sso/)

---


# Database index corruption

Source: https://docs.joinmastodon.org/admin/troubleshooting/index-corruption/

# Database index corruption

How to recover from database index corruption.

A somewhat common configuration issue can lead to index corruption throughout the database. This page attempts to explain why this may occur and how to fix it.

## Locale data and collation

Textual values in the database, such as usernames, or status identifiers, are compared using so-called collation rules defining how characters are ordered and how to change their case.
When setting up a database, Mastodon will use the database server’s default locale settings, including the default collation rules, which often is defined by the operating system’s settings.

Unfortunately, in late 2018, a `glibc` update changed the collation rules for many locales, which means databases using an affected locale would now order textual values differently.
Since the database indexes are algorithmic structures that rely on the ordering of the values they are indexing, some of them would become inconsistent.

More information: <https://wiki.postgresql.org/wiki/Locale_data_changes> <https://postgresql.verite.pro/blog/2018/08/27/glibc-upgrade.html>

## Am I affected by this issue?

If your database is not using `C` or `POSIX` for its collation setting (which you can check with `SELECT datcollate FROM pg_database WHERE datname = current_database();`),
your indexes might be inconsistent if you ever ran with a version of glibc prior to 2.28 and did not immediately reindex your databases after updating to glibc 2.28 or newer.

You may have found this page because of PgHero warnings about “Duplicate Indexes”. While such warnings can sometimes be indicative of an issue in deploying or updating Mastodon, **they are not related to database index corruption and are not indicative of any functional issue with your database**.You can check whether your indexes are consistent using [PostgreSQL’s `amcheck` module](https://www.postgresql.org/docs/10/amcheck.html): as the database server’s super user, connect to your Mastodon database and issue the following (this may take a while):

```
CREATE EXTENSION IF NOT EXISTS amcheck;
SELECT bt\_index\_check(c.oid)
FROM pg\_index i
JOIN pg\_class c ON i.indexrelid = c.oid
WHERE c.relname IN ('index\_account\_domain\_blocks\_on\_account\_id\_and\_domain',
 'index\_account\_proofs\_on\_account\_and\_provider\_and\_username',
 'index\_accounts\_on\_username\_and\_domain\_lower', 'index\_accounts\_on\_uri',
 'index\_accounts\_on\_url', 'index\_conversations\_on\_uri',
 'index\_custom\_emoji\_categories\_on\_name',
 'index\_custom\_emojis\_on\_shortcode\_and\_domain',
 'index\_devices\_on\_access\_token\_id', 'index\_domain\_allows\_on\_domain',
 'index\_domain\_blocks\_on\_domain', 'index\_email\_domain\_blocks\_on\_domain',
 'index\_invites\_on\_code', 'index\_markers\_on\_user\_id\_and\_timeline',
 'index\_media\_attachments\_on\_shortcode', 'index\_preview\_cards\_on\_url',
 'index\_statuses\_on\_uri', 'index\_tags\_on\_name\_lower',
 'index\_tombstones\_on\_uri', 'index\_unavailable\_domains\_on\_domain',
 'index\_users\_on\_email', 'index\_webauthn\_credentials\_on\_external\_id'
);

```
If this raises an error, your database is corrupted and needs fixing. If it does not, you may need to perform more involved checks to be sure.
Unlike the previous checks, those more involved checks will lock tables when running, thus interfering with the availability of your instance.

```
CREATE EXTENSION IF NOT EXISTS amcheck;
SELECT bt\_index\_parent\_check(c.oid)
FROM pg\_index i
JOIN pg\_class c ON i.indexrelid = c.oid
WHERE c.relname IN ('index\_account\_domain\_blocks\_on\_account\_id\_and\_domain',
 'index\_account\_proofs\_on\_account\_and\_provider\_and\_username',
 'index\_accounts\_on\_username\_and\_domain\_lower', 'index\_accounts\_on\_uri',
 'index\_accounts\_on\_url', 'index\_conversations\_on\_uri',
 'index\_custom\_emoji\_categories\_on\_name',
 'index\_custom\_emojis\_on\_shortcode\_and\_domain',
 'index\_devices\_on\_access\_token\_id', 'index\_domain\_allows\_on\_domain',
 'index\_domain\_blocks\_on\_domain', 'index\_email\_domain\_blocks\_on\_domain',
 'index\_invites\_on\_code', 'index\_markers\_on\_user\_id\_and\_timeline',
 'index\_media\_attachments\_on\_shortcode', 'index\_preview\_cards\_on\_url',
 'index\_statuses\_on\_uri', 'index\_tags\_on\_name\_lower',
 'index\_tombstones\_on\_uri', 'index\_unavailable\_domains\_on\_domain',
 'index\_users\_on\_email', 'index\_webauthn\_credentials\_on\_external\_id'
);

```
If this succeeds, without returning an error, your database should be consistent, and you can safely disregard the warning Mastodon emits when running `db:migrate`.

## Fixing the issue

Unless you take action, if you are affected, your database could get more and more inconsistent as time passes. Therefore, it is important to fix it as soon as possible.

Mastodon 3.2.2 and later come with a semi-interactive script to fix those corruptions as best as possible. If you’re on an earlier version, update to 3.2.2 first. It is possible that running the database migrations to 3.2.2 will fail because of those very corruptions, but the database should then be brought to a state that the maintenance tool bundled with Mastodon 3.2.2 can then recover from.

Before attempting to fix your database, **stop Mastodon and make a backup of your database**. Then, with **Mastodon still stopped**, run the maintenance script:

```
RAILS_ENV=production bin/tootctl maintenance fix-duplicates

```
The script will walk through the database to automatically find duplicates and fix them. In some cases, those operations are destructive. In the most destructive cases, you will be asked to choose which record to keep and which records to discard. In all cases, walking through the whole database in search of duplicates is an extremely long operation.

In some cases, duplicate records may have unreconcilable conflicts (such as two different local users sharing the same username). In these cases, the deduplication operation may be **partially destructive** and you will be asked which records to keep unchanged and which records will be changed.
This script is therefore semi-interactive. In all cases, walking through the whole database in search of duplicates is an extremely long operation.**Because the maintenance script will temporarily remove indexes, Mastodon has to be completely stopped during the whole process to prevent additional duplicates from occurring.**## Avoiding the issue

To avoid the issue, reindex your database immediately after any libc update.
The
[SQL command `REINDEX`](https://www.postgresql.org/docs/current/sql-reindex.html)
or the
[`reindexdb` command-line tool](https://www.postgresql.org/docs/current/app-reindexdb.html)
may be useful for this.

Last updated December 8, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/admin/troubleshooting/index-corruption.md)

---


# Playing with public data

Source: https://docs.joinmastodon.org/client/public/

# Playing with public data

Familiarizing yourself with endpoints and entities.

Now that you know how to construct HTTP requests using cURL or your favorite programming language’s HTTP utility or library, it is time to learn about endpoints and responses.

## Endpoints explained

All HTTP requests are made against a target URL. When you request data to or from a website, you do so by using a specific URL. Depending on the URL, your request will be interpreted by the HTTP server and the appropriate response will be returned to you.

Examples will be written using the fictional Mastodon website, mastodon.example, which is hosted at `https://mastodon.example`. The root of this website is `/`, and specific subdirectories and paths are known as endpoints. Mastodon’s API endpoints are nested under the `/api` namespace, and most methods currently have their endpoints under `/api/v1`. Requests will be listed by their HTTP method and their endpoint; for example, GET /api/v1/endpoint should be interpreted as a GET request made to that endpoint on your domain, or in other words, `https://mastodon.example/api/v1/endpoint`.

## Fetching public timelines

Let’s take a look at one of the most basic use cases for public data from Mastodon – the public timelines.

We can try to request [GET /api/v1/timelines/public](/methods/timelines/) like so:

```
curl https://mastodon.example/api/v1/timelines/public

```
Wow, that’s a lot of text in response! The public timeline returns 20 statuses by default.

Some Mastodon servers may disable public access to their timelines via the Admin Settings. If this is the case for your server, then you will receive an error response back.We can use the `limit` parameter to request less than that. Let’s try requesting the same endpoint, but with a limit of 2 this time:

```
curl https://mastodon.example/api/v1/timelines/public?limit=2

```
Our response should be more manageable this time. We can parse or beautify this JSON with our chosen utility, and we should see that the response looks something like this:

```
[
 {
 "id": "103206804533200177",
 "created\_at": "2019-11-26T23:27:31.000Z",
 // ...
 "visibility": "public",
 // ...
 },
 {
 "id": "103206804086086361",
 "created\_at": "2019-11-26T23:27:32.000Z",
 // ...
 "visibility": "public",
 // ...
 }
]

```
We can do similarly for hashtags by calling [GET /api/v1/timelines/tag/:hashtag](/methods/timelines/#tag) – here, the colon means that this part of the endpoint is a path parameter. In the case of :hashtag, this means we use the hashtag’s name (and once again, a limit of 2):

```
curl https://mastodon.example/api/v1/timelines/tag/cats?limit=2

```
We should once again see that 2 statuses have been returned in a JSON array of [Status](/entities/Status/) entities. We can parse the JSON by array, then by object. If we were using Python, our code might look something like this:

```
import requests
import json

response = requests.get("https://mastodon.example/api/v1/timelines/tag/cats?limit=2")
statuses = json.loads(response.text) # this converts the json to a python list of dictionary
assert statuses[0]["visibility"] == "public" # we are reading a public timeline
print(statuses[0]["content"]) # this prints the status text

```
Parsing JSON and using it in your program is outside of the scope of this tutorial, as it will be different depending on your choice of programming language and the design of your program. Look for other tutorials on how to work with JSON in your programming language of choice.[MastoVue](https://mastovue.glitch.me) is an example of an application that lets you browse public timelines.## Fetching public accounts and statuses

Now that we are familiar with how to make requests and how to handle responses, you can experiment with more public data. The following methods may be of interest:

* Once you know an account’s id, you can use [GET /api/v1/accounts/:id](/methods/accounts/) to view the [Account](/entities/Account/) entity.
	+ To view public statuses posted by that account, you can use [GET /api/v1/accounts/:id/statuses](/methods/statuses/) and parse the resulting array of [Status](/entities/Status/) entities.
* Once you know a status’s id, you can use [GET /api/v1/statuses/:id](/methods/statuses/#get-one) to view the Status entity.
	+ You can also use [GET /api/v1/statuses/:id/reblogged\_by](/methods/statuses/#boosted_by) to view who boosted that status,
	+ or [GET /api/v1/statuses/:id/favourited\_by](/methods/statuses/#favourited_by) to view who favourited that status.
	+ Requesting [GET /api/v1/statuses/:id/context](/methods/statuses/#context) will show you the ancestors and descendants of that status in the tree that is the conversational thread.
	+ If the status has a poll attached, you can use [GET /api/v1/polls/:id](/methods/polls/) to view the poll separately.

IDs of accounts and statuses are local to the Mastodon website’s database and will differ for each Mastodon website.

## Fetching public instance data

One last thing you can do with anonymous requests is to view information about the Mastodon website.

* View general information with [GET /api/v1/instance](/methods/instance/#fetch-instance),
	+ view its peers with [GET /api/v1/instance/peers](/methods/instance/#peers) or
	+ its weekly activity with [GET /api/v1/instance/activity](/methods/instance/#activity), or to
	+ list all custom emoji available with [GET /api/v1/custom\_emojis](/methods/custom_emojis/).
* See [GET /api/v1/directory](/methods/directory/) for a directory of all available profiles.
* See [GET /api/v1/trends](/methods/trends/) for currently trending hashtags.

For a practical example of what you can do with just instance data, see [emojos.in](https://emojos.in/), which lets you preview all custom emoji at a given instance.Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/client/public.md)

---


# Obtaining client app access

Source: https://docs.joinmastodon.org/client/token/

# Obtaining client app access

Getting accustomed to the basics of authentication and authorization.

## Authentication and authorization

Up until this point, we’ve been working with publicly available information, but not all information is public. Some information requires permission before viewing it, in order to audit who is requesting that information (and to potentially revoke or deny access).

This is where [OAuth](/spec/oauth/) comes in. OAuth is a mechanism for generating access tokens that can be used to *authenticate (verify)* that a request is coming from a specific client, and ensure that the requested action is *authorized (allowed)* by the server’s access control policies.

## Creating our application

The first thing we will need to do is to register an application, in order to be able to generate access tokens later. The application can be created like so:

```
curl -X POST \
 -F 'client\_name=Test Application' \
 -F 'redirect\_uris=urn:ietf:wg:oauth:2.0:oob' \
 -F 'scopes=read write push' \
 -F 'website=https://myapp.example' \
 https://mastodon.example/api/v1/apps

```
In the above example, we specify the client name and website, which will be shown on statuses if applicable. But more importantly, note the following two parameters:

* `redirect_uris` has been set to the “out of band” token generation, which means that any generated tokens will have to be copied and pasted manually. The parameter is called `redirect_uris` because it is possible to define more than one redirect URI, but when generating the token, we will need to provide a URI that is included within this list.
* `scopes` allow us to define what permissions we can request later. However, the requested scope later can be a subset of these registered scopes. See [OAuth Scopes](/api/oauth-scopes/) for more information.

You can also create applications by POSTing a JSON body to the same endpoint, as documented in [POST /api/v1/apps](/methods/apps/#create-request-example).

As of Mastodon 4.3.0, you can discover which `scopes` the server supports along with other information by making a request to the [`/.well-known/oauth-authorization-server`](/methods/oauth/#authorization-server-metadata) endpoint.We should see a [CredentialApplication](/entities/Application/#CredentialApplication) entity returned, but for now, we only care about `client_id` and `client_secret`.

The `client_id` and `client_secret` values will be used to generate access tokens, so they should be cached for later use. See [POST /api/v1/apps](/methods/apps/#create) for more details on registering applications.

Treat the `client_id` and `client_secret` properties as if they are passwords. We recommend you encrypt these when storing in your cache, to prevent accidental credential exposure.## Example authentication code flow

Now that we have an application, let’s obtain an access token that will authenticate our requests as that client application. To do so, use [POST /oauth/token](/methods/oauth/#token) like so:

```
curl -X POST \
 -F 'client\_id=your\_client\_id\_here' \
 -F 'client\_secret=your\_client\_secret\_here' \
 -F 'redirect\_uri=urn:ietf:wg:oauth:2.0:oob' \
 -F 'grant\_type=client\_credentials' \
 https://mastodon.example/oauth/token

```
Note the following:

* `client_id` and `client_secret` were provided in the response text when you registered your application.
* `redirect_uri` must be one of the URIs defined when registering the application.
* We are requesting a `grant_type` of `client_credentials`, which defaults to giving us the `read` scope.

The response of this method is a [Token](/entities/Token/) entity. We will need the `access_token` value. Once you have the access token, save it in your local cache.

Treat the `access_token` as if it were a password. We recommend you encrypt this value when storing in your cache, to prevent accidental credential exposure.To use it in requests, add the HTTP header `Authorization: Bearer <access_token>` to any API call that requires OAuth (i.e., one that is not publicly accessible).

Let’s verify that our obtained credentials are working by calling [GET /api/v1/apps/verify\_credentials](/methods/apps/#verify_credentials):

```
curl \
 -H 'Authorization: Bearer <access\_token>' \
 https://mastodon.example/api/v1/apps/verify\_credentials

```
If we’ve obtained our token and formatted our request correctly, we should see our details returned to us as an [Application](/entities/Application/) entity (without the `client_secret` property).

## What we can do with authentication

With our authenticated client application, we can view relations of an account with [GET /api/v1/accounts/:id/following](/methods/accounts/#following) and [GET /api/v1/accounts/:id/followers](/methods/accounts/#followers). Also, some instances may require authentication for methods that would otherwise be public, so if you encountered any authentication errors while playing around with public methods, then those methods should now work.

Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/client/token.md)

---


# Logging in with an account

Source: https://docs.joinmastodon.org/client/authorized/

# Logging in with an account

How to obtain authorization from a user and perform actions on their behalf.

## Scopes explained

When we register our app and when we authorize our user, we need to define what exactly our generated token will have permission to do. This is done through the use of [OAuth Scopes](/api/oauth-scopes/). Each API method has an associated scope, and can only be called if the token being used for authorization has been generated with the corresponding scope.

When authorizing a user, the `scope` query parameter must be a subset of those we specified when we created our app. In our ongoing example, we specified `read write push` as our scopes when we created our app, however it is a better idea to only request access to what your app will actually need through [granular scopes](/api/oauth-scopes/#granular-scopes).

See [OAuth Scopes](/api/oauth-scopes/) for a full list of scopes. Each API method’s documentation will also specify the OAuth [token type](/api/oauth-tokens/) and the scopes required to call it. If an endpoint specifies `read:statuses` and you have `read` access, then you will be able to use that endpoint, since scopes are hierarchial.

[OAuth Scopes](/api/oauth-scopes/)## **Example authorization code flow**

This is similar to the authentication flow from before, but this time, we need to obtain authorization from a user as well.

## Client ID and secret

First, if you have not already registered a client application, then see [Creating our application](/client/token/#creating-our-application) on the previous page or go directly to [POST /api/v1/apps](/methods/apps/#create) for the full documentation of that method. We will need the `client_id` and `client_secret` for our application.

## Authorize the user

To authorize a user, request [GET /oauth/authorize](/methods/oauth/#authorize) in a browser with the following query parameters:

```
https://mastodon.example/oauth/authorize
?client\_id=CLIENT\_ID
&scope=read+write+push
&redirect\_uri=urn:ietf:wg:oauth:2.0:oob
&response\_type=code

```
Note the following:

* `client_id` was obtained when registering our application.
* `scope` must be a subset of our app’s registered scopes. It is a good idea to only request what you need. See [OAuth Scopes](/api/oauth-scopes/) for more information.
* `redirect_uri` is one of the URIs we registered with our app.

We are still using “out of band” for this example, which means we will have to manually copy and paste the resulting code, but if you registered your application with a URI that you control, then the code will be returned as a query parameter `code` by your request handler for the redirect URI. See the response section of the API method documentation for more information on this.

Treat the `code` query parameter as if it were a password, you should ensure that it is not logged in request logs.## Obtain the token

Now that we have an authorization `code`, let’s obtain an access token that will authenticate our requests as the authorized user. To do so, use [POST /oauth/token](/methods/oauth/#token) like before, but pass the authorization code we just obtained:

```
curl -X POST \
 -F 'grant\_type=authorization\_code' \
 -F 'client\_id=your\_client\_id\_here' \
 -F 'client\_secret=your\_client\_secret\_here' \
 -F 'redirect\_uri=urn:ietf:wg:oauth:2.0:oob' \
 -F 'code=user\_authzcode\_here' \
 https://mastodon.example/oauth/token

```
Note the following:

* We are requesting a `grant_type` of `authorization_code`
* `client_id` and `client_secret` were provided in the response text when you registered your application.
* `redirect_uri` must be one of the URIs defined when registering the application.
* The `code` can only be used once. If you need to obtain a new token, you will need to have the user authorize again by repeating the above [Authorize the user](/client/authorized/#authorize-the-user) step.

The response of this method is a [Token](/entities/Token/) entity. We will need the `access_token` value. Once you have the access token, save it in your local cache.

The `scope` of resulting Access Token will be the scopes approved during the [Authorization Request](/client/authorized/#login)

Treat the `access_token` as if it were a password. We recommend you encrypt this value when storing in your cache, to prevent accidental credential exposure.To use it in requests, add the HTTP header `Authorization: Bearer <access_token>` to any API call that requires OAuth (i.e., one that is not publicly accessible).

Let’s verify that our obtained credentials are working by calling [GET /api/v1/accounts/verify\_credentials](/methods/accounts/#verify_credentials):

```
curl \
 -H 'Authorization: Bearer <access\_token>' \
 https://mastodon.example/api/v1/accounts/verify\_credentials

```
If we’ve obtained our token and formatted our request correctly, we should see our details returned to us as an [Account](/entities/Account/) entity, with the `source` parameter included.

## Performing actions as the authorized user

With our OAuth token for the authorized user, we can now perform any action as that user that is within our token’s scope.

## Publish and delete statuses

* See [POST /api/v1/statuses](/methods/statuses/#create) for how to create statuses.
	+ See [/api/v1/media](/methods/media/) for creating media attachments.
	+ See [/api/v1/scheduled\_statuses](/methods/scheduled_statuses/) for managing scheduled statuses.

## Interact with timelines

* See [/api/v1/timelines](/methods/timelines/) for accessing timelines.
* See [/api/v1/markers](/methods/markers/) for saving and loading positions in timelines.
* See [/api/v1/statuses](/methods/statuses/) for performing actions on statuses.
	+ See [/api/v1/polls](/methods/polls/) for viewing and voting on polls.
* See [/api/v1/lists](/methods/lists/) for obtaining list IDs to use with [GET /api/v1/timelines/list/:list\_id](/methods/timelines/#list).
* See [/api/v1/conversations](/methods/conversations/) for obtaining direct conversations.
* See [/api/v1/favourites](/methods/favourites/) for listing favourites.
* See [/api/v1/bookmarks](/methods/bookmarks/) for listing bookmarks.

## Interact with other users

* See [/api/v1/accounts](/methods/accounts/) for performing actions on other users.
* See [/api/v1/follow\_requests](/methods/follow_requests/) for handling follow requests.
* See [/api/v1/mutes](/methods/mutes/) for listing mutes.
* See [/api/v1/blocks](/methods/blocks/) for listing blocks.

## Receive notifications

* See [/api/v1/notifications](/methods/notifications/) for managing a user’s notifications.
* See [/api/v1/push](/methods/push/) for subscribing to push notifications.

## Discovery features

* See [/api/v2/search](/methods/search/#v2) for querying resources.
* See [/api/v1/suggestions](/methods/suggestions/) for suggested accounts to follow.

## User safety features

* See [/api/v1/filters](/methods/filters/) for managing filtered keywords.
* See [/api/v1/domain\_blocks](/methods/domain_blocks/) for managing blocked domains.
* See [/api/v1/reports](/methods/reports/) for creating reports.
* See [/api/v1/admin](/methods/admin/) for moderator actions.

## Manage account info

* See [/api/v1/endorsements](/methods/endorsements/) for managing a user profile’s featured accounts.
* See [/api/v1/featured\_tags](/methods/featured_tags/) for managing a user profile’s featured hashtags.
* See [/api/v1/preferences](/methods/preferences/) for reading user preferences.

Last updated March 10, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/client/authorized.md)

---


# Libraries and implementations

Source: https://docs.joinmastodon.org/client/libraries/

# Libraries and implementations

Code, libraries and SDKs for the Mastodon API in a range of programming languages.

Thank you to our awesome developer community, for supporting the project with a wide range of implementations of the API. If you have built a library or SDK for the Mastodon API, [let us know](https://github.com/mastodon/mastodon/discussions) about it, and it may be included below in a future update.

Remember to check how recently the library was updated, and whether it includes the API features you may want to use.

## Arduino / ESP32 / IoT

* [lyuba](https://github.com/ringtailsoftware/lyuba)

## C# (.NET Standard)

* [MastodonAPI](https://github.com/golf1052/MastodonAPI)
* [Mastodot](https://github.com/yamachu/Mastodot)
* [Mastonet](https://github.com/glacasa/Mastonet)
* [TootNet](https://github.com/cucmberium/TootNet)
* [mastodon-api-cs](https://github.com/pawotter/mastodon-api-cs)
* [Mastodon.Net](https://github.com/Tlaster/Mastodon.Net)

## C++

* [mastodonpp](https://schlomp.space/tastytea/mastodonpp)

## Common Lisp

* [mastodon-cl](https://github.com/compufox/mastodon-cl)
* [tooter](https://github.com/Shinmera/tooter)

## Crystal

* [mastodon-api-crystal](https://github.com/renatolond/mastodon-api-crystal)

## Dart

* [mastodon\_dart](https://pub.dev/packages/mastodon_dart)
* [mastodon-api](https://github.com/mastodon-dart/mastodon-api)
* [mastodon-oauth](https://github.com/mastodon-dart/mastodon-oauth2)
* [mastodon](https://github.com/mykdavies/Mastodon)
* [dartodon](https://github.com/darkcl/dartodon)
* [mastodon\_entities](https://github.com/MahanRahmati/mastodon-entities)

## Elixir

* [hunter](https://github.com/milmazz/hunter)

## Erlang

* [masterldon](https://github.com/igb/masterldon)

## Go

* [go-mastodon](https://github.com/mattn/go-mastodon)
* [madon](https://github.com/McKael/madon)
* [go-mastodon-api](https://github.com/aaronland/go-mastodon-api)

## Haskell

* [hastodon](https://github.com/syucream/hastodon)

## Java

* [BigBone](https://github.com/andregasser/bigbone)
* [Mastodon4J](https://github.com/Mastodon4J/Mastodon4J)
* [mastodon-jfx](https://github.com/wakingrufus/mastodon-jfx)

## JavaScript

* [megalodon](https://github.com/h3poteto/megalodon)
* [masto.js](https://github.com/neet/masto.js)
* [libodonjs](https://github.com/Zatnosk/libodonjs)

## JavaScript (Browser)

* [mastodon.js](https://github.com/Kirschn/mastodon.js)

## JavaScript (Node.js)

* [mastodon-api](https://github.com/vanita5/mastodon-api)

## Kotlin

* [BigBone](https://github.com/andregasser/bigbone)
* [mastodonk](https://github.com/outadoc/mastodonk)

## Nim

* [Mastonim](https://github.com/matrix07012/Mastonim)

## Objective-C

* [Cocotodon](https://github.com/shibafu528/Cocotodon)

## Perl

* [Mastodon::Client](https://metacpan.org/pod/Mastodon::Client)

## PHP

* [mastodon-api-client](https://github.com/vazaha-nl/mastodon-api-client)
* [Phediverse Mastodon REST Client](https://github.com/phediverse/mastodon-rest)
* [TootoPHP](https://framagit.org/MaxKoder/TootoPHP)
* [oauth2-mastodon](https://github.com/lrf141/oauth2-mastodon)
* [MastodonBotPHP](https://github.com/Eleirbag89/MastodonBotPHP)
* [mastodon-api-php-oauth](https://github.com/yks118/Mastodon-api-php-oauth)
* [mastodon-api-php](https://github.com/colorfield/mastodon-api-php)
* [Mastodon API for Laravel](https://github.com/kawax/laravel-mastodon-api)
* [Mastodon for Drupal](https://www.drupal.org/project/mastodon)
* [Mastodon for Socialite](https://github.com/kawax/socialite-mastodon)

## PowerShell

* [Mastodon](https://github.com/JB405/Mastodon)

## Python

* [Mastodon.py](https://github.com/halcy/Mastodon.py)
* [mastopy](https://gitlab.com/spla/mastopy)

## R

* [mastodon](https://github.com/ThomasChln/mastodon)
* [rtoot](https://github.com/schochastics/rtoot)

## Ruby

* [mastodon-api](https://github.com/mastodon/mastodon-api)

## Rust

* [megalodon-rs](https://github.com/h3poteto/megalodon-rs)
* [mastodon-async](https://github.com/dscottboggs/mastodon-async)

## Scala

* [scaladon](https://github.com/schwitzerm/scaladon)

## Scheme

## Guile

* [Guile-Mastodon](https://codeberg.org/WammKD/Guile-Mastodon)

## Swift

* [Mastodon.swift](https://github.com/Swiftodon/Mastodon.swift)
* [MastodonKit](https://github.com/MastodonKit/MastodonKit)
* [tootsdk](https://github.com/tootsdk/tootsdk)
* [MastodonAPI](https://github.com/li-bei/MastodonAPI)

## TypeScript

* [tsl-mastodon](https://github.com/typescriptlibs/tsl-mastodon-api)

Last updated May 21, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/client/libraries.md)

---


# Setting up a dev environment

Source: https://docs.joinmastodon.org/dev/setup/

# Setting up a dev environment

Instructions on how to start developing for Mastodon.

## Quick start with Vagrant

For convenience, the Mastodon repository includes a Vagrantfile for quickly setting up a development environment without manual configuration. To use this development environment, install [Vagrant](https://vagrantup.com) using a binary executable or through your package manager.

Once you have Vagrant installed, for convenience, it is recommended to install a plugin to automatically update your machine’s hosts file. This will allow you to access the dev environment at `http://mastodon.local` without manually editing the hosts file yourself. To do so:

```
vagrant plugin install vagrant-hostsupdater

```
The virtual machine can then be started:

```
vagrant up

```
Once the virtual machine has been started, you may launch the Foreman task executor to launch the various Mastodon processes:

```
vagrant ssh -c "cd /vagrant && foreman start"

```
Once the Mastodon processes have fully started up, you can load `http://mastodon.local` in your browser to access the Mastodon instance within the VM. You can log in as the default admin user with the username `admin@mastodon.local` and the password `mastodonadmin`.

Any changes to the source code will be reflected after saving your files.

To reset the VM to a fresh state, you can destroy it and bring it up again:

```
vagrant destroy
vagrant up

```
## Manual install from source

You can follow the [pre-requisites instructions from the production guide](/admin/install/), but do not create a `mastodon` user. You also don’t have to install `nginx`, `certbot` and `python-certbot-nginx` as the development environment brings its own webserver. Setting up and running a development environment has been proven successful over WSL2 as well if you are on Windows.

## Setup

Run the following commands in the project directory:

```
bundle install
yarn install

```
In the development environment, Mastodon will use PostgreSQL as the currently signed-in Linux user using the `ident` method. Ensure that you have created a PostgreSQL user and database for your current signed-in user:

```
sudo -u postgres createuser $YOUR\_USERNAME\_HERE --createdb

```
You can now create the databases `mastodon_development` and `mastodon_test`, load the schema into them, and create seed data defined in `db/seeds/` into `mastodon_development`.

```
rails db:setup

```
You can now launch `http://localhost:3000` in your browser and log in with the default admin user (`admin@localhost` / `mastodonadmin`).

By default, Mastodon will run on port 3000. If you configure a different port for it, the generated admin account will use that number as well.## Running

There are multiple processes that need to be run for the full set of Mastodon’s functionality, although they can be selectively omitted. To run all of them with just one command, you can install and use Foreman:

```
gem install foreman --no-document
foreman start

```
This will start processes defined in `Procfile.dev`, which will give you: A Rails server, a Webpack server, a streaming API server, and Sidekiq. Of course, you can run any of those things stand-alone depending on your needs.

## Working with emails in development

In development mode, Mastodon will use a gem called [Letter Opener](https://github.com/ryanb/letter_opener) for “sending” emails, which allows you to debug emails in your browser, without actually having to send emails via an SMTP server.

In order to work with emails, you’ll need Sidekiq, Redis and PostgreSQL running, and then emails can be viewed by visiting: `http://localhost:3000/letter_opener/`

If you’re developing in docker, you’ll need to set the `REMOTE_DEV=true` environment variable.

## Useful commands for testing

`rspec`Run the Ruby test suite`yarn run test`Run the JavaScript test suite`rubocop`Check the Ruby code for conformance with our code style## Updating your development instance

`bundle install`Update Ruby gems and install any new dependencies`yarn install`Update Javascript packages and install any new dependencies`RAILS_ENV=development rails db:migrate`Run new database migrations for your development instance’s databaseLast updated December 10, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/dev/setup.md)

---


# Code structure

Source: https://docs.joinmastodon.org/dev/code/

# Code structure

Where to find certain parts of the codebase.

## Code structure

The following overview should not be seen as complete or authoritative but as a rough guidance to help you find your way in the application.

## Ruby

`app/controllers`Code that binds business logic to templates`app/helpers`Code that can be used from views, i.e. common operations`app/lib`Code that doesn’t fit in the other categories`app/models`Representation of data entities and their associated methods`app/policies`Permission checks and other validations, before calling related methods`app/serializers`Code that generates JSON from models`app/services`Complex logical operations involving multiple models`app/views`Templates for generating HTML or other output`app/workers`Code that executes outside the request-response cycle`spec`Automated test suite## JavaScript

`app/javascript/mastodon`Code for the frontend React.js application`app/javascript/packs`Code for non-React.js pages## CSS and other assets

`app/javascript/images`Images`app/javascript/styles`Code that turns into CSS via Sass## Localizations

`config/locales`Server-side localizations in the YML format`app/javascript/mastodon/locales`Client-side localizations in the JSON formatAll locale files are normalized to ensure consistent formatting and key order, which minimizes changesets in version control.

* Run `bundle exec i18n-tasks normalize` to normalize server-side translations
* Run `yarn run i18n:extract` to extract and normalize client-side translations into `en.json`

Last updated December 7, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/dev/code.md)

---


# Routes

Source: https://docs.joinmastodon.org/dev/routes/

# Routes

How HTTP methods map to controllers and actions.

[config/routes.rb](https://github.com/mastodon/mastodon/blob/main/config/routes.rb)## Explanation of routes

Mastodon uses Ruby on Rails, which defines its router configuration at config/routes.rb. You may view the [Ruby on Rails routing guide](https://guides.rubyonrails.org/routing.html) for more detailed information, but this page will explain the basics of how Mastodon handles routing.

## How routes are constructed

`namespace` is a prefix for routes mapped to a certain controller directory. `resources` are mapped to controllers within that namespace directory. `scope` passes to the `module`’s controller. For example, consider the following abbreviated code:

```
namespace :api do
 namespace :v1 do
 resources :statuses, only [:create, :show, :destroy] do
 scope module: :statuses do
 resource :favourite, only: :create
 resource :unfavourite, to: 'favourites#destroy'
 member do
 get :context
 end
 end
 end
 end
end

```
config/routes.rb excerpt

The first available resource is :statuses, which is nested under the :api and :v1 namespaces. Thus, the resulting HTTP route will be /api/v1/statuses. The `only` defines certain allowed methods, which are to be defined in the controller at `app/controllers/api/v1/statuses_controller.rb`.

Within /api/v1/statuses, there is a scope for a module :statuses, where additional resources are defined. The controllers for these resources live in `app/controllers/api/v1/statuses/`. For example, :favourite will be handled by the #create action within `app/controllers/api/v1/statuses/favourites_controller.rb` and :unfavourite will be handled within the same controller, but by the #destroy action.

There is also a custom method defined for any `member` within this scope, or in other words, for any status to be controlled by `app/controllers/api/v1/statuses_controller.rb`, which is mapped to GET /api/v1/statuses/:id/context and handled by the :context action defined within that controller.

## Available methods

## :index

Maps to HTTP GET, for a list. Handled by the #index action in a controller.

## :show

Maps to HTTP GET, for a single view. Handled by the #show action in a controller.

## :create

Maps to HTTP POST. Handled by the #create action in a controller.

## :update

Maps to HTTP PUT. Handled by the #update action in a controller.

## :destroy

Maps to HTTP DELETE. Handled by the #destroy action in a controller.

## .well-known

## /.well-known/host-meta

Extensible Resource Descriptor (XRD). Advertises existence of Webfinger.

## /.well-known/nodeinfo

Maps to NodeInfo 2.0 endpoint at `/nodeinfo/2.0`, used for advertising software name and version, protocols, usage statistics, and whether registrations are open.

## /.well-known/webfinger

Used for discovering ActivityPub actor id. See [Spec compliance > WebFinger](/spec/webfinger/) for more information.

## /.well-known/change-password

Maps to account settings page.

## /.well-known/keybase-proof-config

Used for integration with Keybase, defining which usernames are acceptable and where proofs may be checked.

The sections below this point are under construction.## Public URIs

* `/users/username` = user URI
* `/users/username/remote_follow` = remote follow dialog
* `/users/username/statuses/id` = status URI
* `/@username` = “posts” tab
* `/@username/with_replies` = “posts and replies” tab
* `/@username/media` = “media” tab
* `/@username/tagged/:hashtag` = tagged statuses by user
* `/@username/:status_id` = status permalink
* `/@username/:status_id/embed` = embeddable version
* `/interact/:status_id` = remote interaction dialog
* `/explore` = profile directory
* `/explore/:hashtag` = profiles with this hashtag in bio
* `/public` = public timeline preview
* `/about` = landing page
* `/about/more` = extended description
* `/terms` = terms of service

## API

* /api/oembed
* /api/proofs
* /api/v1
	+ [statuses](/methods/statuses/) [create, show, destroy]
		- reblogged\_by [index]
		- favourited\_by [index]
		- reblog [create]
		- unreblog [POST reblog#destroy]
		- favourite [create]
		- unfavourite [POST favourites#destroy]
		- bookmark [create]
		- unbookmark [POST bookmarks#destroy]
		- mute [create]
		- unmute [POST mutes#destroy]
		- pin [create]
		- unpin [POST pins#destroy]
		- context [GET]
	+ [timelines](/methods/timelines/)
		- home [show]
		- public [show]
		- tag [show]
		- list [show]
	+ [streaming](/methods/streaming/) [index]
	+ [custom\_emojis](/methods/custom_emojis/) [index]
	+ [suggestions](/methods/suggestions/) [index, destroy]
	+ [scheduled\_statuses](/methods/scheduled_statuses/) [index, show, update, destroy]
	+ [preferences](/methods/preferences/) [index]
	+ [conversations](/methods/conversations/) [index, destroy]
		- read [POST]
	+ [media](/methods/media/) [create, update]
	+ [blocks](/methods/blocks/) [index]
	+ [mutes](/methods/mutes/) [index]
	+ [favourites](/methods/favourites/) [index]
	+ [bookmarks](/methods/bookmarks/) [index]
	+ [reports](/methods/reports/) [create]
	+ [trends](/methods/trends/) [index]
	+ [filters](/methods/filters/) [index, create, show, update, destroy]
	+ [endorsements](/methods/endorsements/) [index]
	+ [markers](/methods/markers/) [index, create]
	+ [apps](/methods/apps/) [create]
		- verify\_credentials [credentials#show]
	+ [instance](/methods/instance/) [show]
		- peers [index]
		- activity [show]
	+ [domain\_blocks](/methods/domain_blocks/) [show, create, destroy]
	+ [directory](/methods/directory/) [show]
	+ [follow\_requests](/methods/follow_requests/) [index]
		- authorize [POST]
		- reject [POST]
	+ [notifications](/methods/notifications/) [index, show]
		- clear [POST]
		- dismiss [POST]
	+ [accounts](/methods/accounts/)
		- verify\_credentials [GET credentials#show]
		- update\_credentials [PATCH credentials#update]
		- search [show (search#index)]
		- relationships [index]
	+ [accounts](/methods/accounts/) [create, show]
		- statuses [index accounts/statuses]
		- followers [index accounts/follower\_accounts]
		- following [index accounts/following\_accounts]
		- lists [index accounts/lists]
		- identity\_proofs [index accounts/identity\_proofs]
		- follow [POST]
		- unfollow [POST]
		- block [POST]
		- unblock [POST]
		- mute [POST]
		- unmute [POST]
		- pin [POST]
		- unpin [POST]
	+ [lists](/methods/lists/) [index, create, show, update, destroy]
		- accounts [POST accounts/pins#destroy]
	+ [featured\_tags](/methods/featured_tags/) [index, create, destroy]
		- suggestions [GET suggestions#index]
	+ [polls](/methods/polls/) [create, show]
		- votes [create polls/votes]
	+ [push](/methods/push/)
		- subscription [create, show, update, destroy]
	+ [admin](/methods/admin/)
		- accounts [index, show]
			* enable [POST]
			* unsilence [POST]
			* unsuspend [POST]
			* approve [POST]
			* reject [POST]
			* action [create account\_actions]
		- reports [index, show]
			* assign\_to\_self [POST]
			* unassign [POST]
			* reopen [POST]
			* resolve [POST]
* /api/v2
	+ [search](/methods/search/) [GET search#index]

Last updated March 8, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/dev/routes.md)

---


# Bug bounties and responsible disclosure

Source: https://docs.joinmastodon.org/dev/disclosure/

# Bug bounties and responsible disclosure

What to do if you found a serious bug

If you believe you’ve identified a security vulnerability in Mastodon (a bug that allows something to happen that shouldn’t be possible), you should send the report to **[security@joinmastodon.org](mailto:security@joinmastodon.org)**. We will gladly reward such reports in proportion to the severity of the issue through our OpenCollective fund.

You should *not* report such issues on GitHub or in other public spaces to give us time to publish a fix for the issue without exposing Mastodon’s users to increased risk.

A “vulnerability in Mastodon” is a vulnerability in the code distributed through our main source code repository on GitHub. Vulnerabilities that are specific to a given installation (e.g. misconfiguration) should be reported to the owner of that installation and not us.Last updated May 25, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/dev/disclosure.md)

---


# WebFinger

Source: https://docs.joinmastodon.org/spec/webfinger/

# WebFinger

Translate `user@domain` mentions to actor profile URIs.

## What is WebFinger, and why is it used?

On Mastodon, user profiles can be hosted either locally on the same website as yours, or remotely on a completely different website. The same username may be used on a different domain. Therefore, a Mastodon user’s full mention consists of both the username and the domain, in the form `@username@domain`. In practical terms, `@user@example.com` is not the same as `@user@example.org`. If the domain is not included, Mastodon will try to find a local user named `@username`. However, in order to deliver to someone over ActivityPub, the `@username@domain` mention is not enough – **mentions must be translated to an HTTPS URI first**, so that the remote actor’s inbox and outbox can be found.

Enter WebFinger. WebFinger as described in [RFC 7033](https://tools.ietf.org/html/rfc7033) is a spec that defines **a method for resolving links to a resource**, given only a URI on a particular server. This allows anyone to look up where a resource is located without having to know its exact location beforehand; for example, by email or phone number. This lookup is directed at the endpoint `/.well-known/webfinger`, and a `resource` query parameter is passed along with the lookup. The resource URI used with Mastodon is the `acct:` URI as described in [RFC 7565](https://tools.ietf.org/html/rfc7565), with the username of a profile that is hosted on a particular domain.

**Because Mastodon heavily relies on mentions for addressing other profiles, WebFinger is required for fully interoperating with Mastodon.** Users can generally load profiles by searching for the direct HTTPS URI if they know it, or for the `username@domain` address, but Mastodon’s internal logic depends almost completely on `acct`: URIs or `username@domain` representations. Searching for any objects or profiles from an ActivityPub implementation without WebFinger will fail because the author cannot be converted to a user in the local database.## Sample WebFinger flow

Suppose we want to lookup the user `@Gargron` hosted on the `mastodon.social` website.

Just make a request to that domain’s `/.well-known/webfinger` endpoint, with the `resource` query parameter set to an `acct:` URI.

```
{
 "subject": "acct:Gargron@mastodon.social",
 "aliases": [
 "https://mastodon.social/@Gargron",
 "https://mastodon.social/users/Gargron"
 ],
 "links": [
 {
 "rel": "http://webfinger.net/rel/profile-page",
 "type": "text/html",
 "href": "https://mastodon.social/@Gargron"
 },
 {
 "rel": "self",
 "type": "application/activity+json",
 "href": "https://mastodon.social/users/Gargron"
 },
 {
 "rel": "http://ostatus.org/schema/1.0/subscribe",
 "template": "https://mastodon.social/authorize\_interaction?uri={uri}"
 }
 ]
}

```
<https://mastodon.social/.well-known/webfinger?resource=acct:gargron@mastodon.social>

You can parse this JSON response to find a link with your desired type. For ActivityPub `id`, we are interested in finding `application/activity+json` specifically.

This way, we have translated `@Gargron@mastodon.social` to `https://mastodon.social/users/Gargron` and we can now interact over ActivityPub by referring to this URI as `id` where appropriate.

```
{
"id": "https://social.example/activities/1",
"type": "Create",
"actor": "https://social.example/actors/1",
"object": {
 "id": "https://social.example/objects/1",
 "type": "Note",
 "content": "Hello, Gargron!"
},
"to": "https://mastodon.social/users/Gargron"
}

```
Sample activity

Note in the above example that `social.example` does not use the same URI structure as Mastodon. Thus, we cannot guess the actor `id` given only the username and domain. However, if `social.example` supports WebFinger, then we can get this `id` by requesting `https://social.example/.well-known/webfinger?resource=acct:username@social.example`and parsing the response for a link with the `application/ld+json; profile="https://www.w3.org/ns/activitystreams"` or `application/activity+json` type. This link should also have the link relation `rel="self"`.

## Mastodon’s requirements for WebFinger

When given an account in the form `username@domain` or `@username@domain`, Mastodon will do the following:

* Construct an `acct:` URI using that username and domain
* Make a WebFinger request for that `resource`

Using that WebFinger response, Mastodon will check the following:

* The `subject` is present
* The `links` array contains a link with `rel` of `self` and `type` of either `application/ld+json; profile="https://www.w3.org/ns/activitystreams"` or `application/activity+json`
	+ The `href` for this link resolves to an ActivityPub actor

Using that ActivityPub actor representation (which may be provided directly, without the initial WebFinger request), Mastodon will do the following:

* Take `preferredUsername` and the hostname of the actor’s server
* Construct an `acct:` URI using that username and domain
* Make a Webfinger request for that `resource`

If the `subject` matches the `resource`, then the process stops here. Otherwise, if the `subject` contains a different canonical account URI, then Mastodon will perform an additional Webfinger request for that canonical account URI in order to ensure that this new `resource` links to the same ActivityPub actor with the same criteria being checked.

In other words, the following cases are valid:

* Asking `example.com` for the resource `acct:alice@example.com` yields a link to an actor on the domain `example.com` with a `preferredUsername` of `alice`, and the `subject` matches the requested resource `acct:alice@example.com`
* Asking `example.com` for the resource `acct:alice@example.com` yields a link to an actor on the domain `ap.example.com` with a `preferredUsername` of `alice`
	+ …then, asking `ap.example.com` for the resource `acct:alice@ap.example.com` yields a `subject` of `acct:alice@example.com` and a link to the same actor

## See also

[app/services/activitypub/fetch\_remote\_actor\_service.rb](https://github.com/mastodon/mastodon/blob/main/app/services/activitypub/fetch_remote_actor_service.rb)[app/services/resolve\_account\_service.rb](https://github.com/mastodon/mastodon/blob/main/app/services/resolve_account_service.rb)[app/lib/webfinger.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/webfinger.rb)Last updated February 6, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/spec/webfinger.md)

---


# Security

Source: https://docs.joinmastodon.org/spec/security/

# Security

Public key cryptography and supported signature schemes over HTTP and JSON-LD.

## HTTP Signatures

[app/lib/request.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/request.rb)[HTTP Signatures](https://datatracker.ietf.org/doc/html/draft-cavage-http-signatures) is a specification for signing HTTP messages by using a `Signature:` header with your HTTP request. Mastodon requires the use of HTTP Signatures in order to validate that any activity received was authored by the actor generating it. When secure mode is enabled, all GET requests require HTTP signatures as well.

For any HTTP request incoming to Mastodon, the Signature header should be attached:

```
Signature: keyId="https://my.example.com/actor#main-key",headers="(request-target) host date",signature="Y2FiYW...IxNGRiZDk4ZA=="

```
The three parts of the `Signature:` header can be broken down like so:

```
Signature:
 keyId="https://my.example.com/actor#main-key",
 headers="(request-target) host date",
 signature="Y2FiYW...IxNGRiZDk4ZA=="

```
The `keyId` should correspond to the actor and the key being used to generate the `signature`, whose value is equal to all parameters in `headers` concatenated together and signed by the key, then Base64-encoded. See [ActivityPub > Public key](/spec/activitypub/#publicKey) for more information on actor keys. An example key looks like this:

```
"publicKey": {
 "id": "https://my.example.com/actor#main-key",
 "owner": "https://my.example.com/actor",
 "publicKeyPem": "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvXc4vkECU2/CeuSo1wtn\nFoim94Ne1jBMYxTZ9wm2YTdJq1oiZKif06I2fOqDzY/4q/S9uccrE9Bkajv1dnkO\nVm31QjWlhVpSKynVxEWjVBO5Ienue8gND0xvHIuXf87o61poqjEoepvsQFElA5ym\novljWGSA/jpj7ozygUZhCXtaS2W5AD5tnBQUpcO0lhItYPYTjnmzcc4y2NbJV8hz\n2s2G8qKv8fyimE23gY1XrPJg+cRF+g4PqFXujjlJ7MihD9oqtLGxbu7o1cifTn3x\nBfIdPythWu5b4cujNsB3m3awJjVmx+MHQ9SugkSIYXV0Ina77cTNS0M2PYiH1PFR\nTwIDAQAB\n-----END PUBLIC KEY-----\n"
 },

```
See also: <https://blog.joinmastodon.org/2018/07/how-to-make-friends-and-verify-requests/>

## Creating HTTP signatures

To create an HTTP signature, you will have to define which headers are being hashed and signed. For example, consider the following GET request:

```
GET /users/username/outbox HTTP/1.1
Host: mastodon.example
Date: 18 Dec 2019 10:08:46 GMT
Accept: application/ld+json; profile="https://www.w3.org/ns/activitystreams"

```
The signature string is constructed using the values of the HTTP headers defined in `headers`, joined by newlines. Typically, you will want to include the request target, as well as the host and the date. Mastodon assumes `Date:` header if none are provided. For the above GET request, to generate a `Signature:` with `headers="(request-target) host date"` we would generate the following string:

```
(request-target): get /users/username/outbox
host: mastodon.example
date: 18 Dec 2019 10:08:46 GMT

```
Note that we don’t care about the `Accept:` header because we won’t be specifying it in `headers`.

The signature string is then hashed with RSA-SHA256 (RSASSA-PKCS1-v1\_5 with SHA-256) and signed with the actor’s private key. The resulting value is attached as `signature` within the `Signature:` header. The final request looks like this:

```
GET /users/username/inbox HTTP/1.1
Host: mastodon.example
Date: 18 Dec 2019 10:08:46 GMT
Accept: application/ld+json; profile="https://www.w3.org/ns/activitystreams"
Signature: keyId="https://my.example.com/actor#main-key",headers="(request-target) host date",signature="Y2FiYW...IxNGRiZDk4ZA=="

```
This request is functionally equivalent to saying that `https://my.example.com/actor` is requesting `https://mastodon.example/users/username/inbox` and is proving that they sent this request by signing `(request-target)`, `Host:`, and `Date:` with their private key linked at `keyId`, resulting in the provided `signature`.

## Signing POST requests and the Digest header

When making a POST request to Mastodon, you must calculate the RSA-SHA256 digest hash of your request’s body and include this hash (in base64 encoding) within the `Digest:` header. The `Digest:` header must also be included within the `headers` parameter of the `Signature:` header. For example:

```
POST /users/username/inbox HTTP/1.1
HOST: mastodon.example
Date: 18 Dec 2019 10:08:46 GMT
Digest: sha-256=hcK0GZB1BM4R0eenYrj9clYBuyXs/lemt5iWRYmIX0A=
Signature: keyId="https://my.example.com/actor#main-key",headers="(request-target) host date digest",signature="Y2FiYW...IxNGRiZDk4ZA=="
Content-Type: application/ld+json; profile="https://www.w3.org/ns/activitystreams"

{
 "@context": "https://www.w3.org/ns/activitystreams",
 "actor": "https://my.example.com/actor",
 "type": "Create",
 "object": {
 "type": "Note",
 "content": "Hello!"
 },
 "to": "https://mastodon.example/users/username"
}

```
## Verifying HTTP signatures

[app/controllers/concerns/signature\_verification.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/concerns/signature_verification.rb)Consider the following request:

```
POST /users/username/inbox HTTP/1.1
Host: mastodon.example
Date: 18 Dec 2019 10:08:46 GMT
Digest: e37e179c75071a291f90a5fd4f848da87b491f1282f7bb8509ef2115b81ee0f4
Signature: keyId="https://my.example.com/actor#main-key",headers="(request-target) host date digest",signature="Y2FiYW...IxNGRiZDk4ZA=="
Content-Type: application/ld+json; profile="https://www.w3.org/ns/activitystreams"

{
 "@context": "https://www.w3.org/ns/activitystreams",
 "actor": "https://my.example.com/actor",
 "type": "Create",
 "object": {
 "type": "Note",
 "content": "Hello!"
 }
 "to": "https://mastodon.example/users/username"
}

```
Mastodon verifies the signature using the following algorithm:

* Split `Signature:` into its separate parameters.
* Construct the signature string from the value of `headers`.
* Fetch the `keyId` and resolve to an actor’s `publicKey`.
* RSA-SHA256 hash the signature string and compare to the Base64-decoded `signature` as decrypted by `publicKey[publicKeyPem]`.
* Use the `Date:` header to check that the signed request was made within the past 12 hours.

## Linked Data Signatures

[app/lib/activitypub/linked\_data\_signature.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/activitypub/linked_data_signature.rb)Mastodon’s current implementation of LD Signatures is outdated due to a change in the JSON-LD `@context` between the drafting stage and finalization stage of the specification. Mastodon expects a `type` of `RsaSignature2017` while later drafts instead define `RsaSignature2018` via the namespace `https://w3id.org/security/v2`. Furthermore, the LD Signatures specification as a whole has been superseded by the [Verifiable Credential Data Integrity 1.0](https://w3c.github.io/vc-data-integrity/) specification, which is largely incompatible with the earlier LD Signature spec. For this reason, it is not advised to implement support for LD Signatures.[Linked Data Signatures 1.0](https://web.archive.org/web/20170923124140/https://w3c-dvcg.github.io/ld-signatures/) was a draft specification for attaching cryptographic signatures to JSON-LD documents. LD Signatures are not used widely within Mastodon, but they are used in the following situations:

* When running a [self-destruct](/admin/tootctl/#tootctl-self-destruct) sequence to send Delete activities to all known peers, the payload will use LD Signatures because HTTP Signatures will not be available. Receiving servers will process the signature by validating it against the locally cached actor key, since the HTTP server will no longer be hosting old actor information.
* When accepting activities from a relay. Public activities can optionally be sent to a relay with LD Signatures, and any server subscribing to a relay does not have to manually refetch the activity from the origin. This prevents having potentially infinite servers attempt to load the status from your instance.

## Creating LD signatures

To create a signature, Mastodon uses the keypair attached to an actor at `https://mastodon.example/users/username#main-key`. It then creates an RSA-SHA256 hash of the document, signs it with the keypair, and Base64-strict-encodes the resulting output to derive a `signatureValue`. The following hash is merged into the JSON-LD document:

```
"signature": {
 "type": "RsaSignature2017",
 "creator": "https://mastodon.example/users/username#main-key",
 "created": "2019-12-08T03:48:33.901Z",
 "signatureValue": "s69F3mfddd99dGjmvjdjjs81e12jn121Gkm1"
}

```
## Verifying LD signatures

To verify a signature, Mastodon uses the following algorithm:

* Make sure that a `signature` exists and is a hash.
* Make sure that `signature[type]` is `RsaSignature2017`.
* Fetch the `signature[creator]` URI. Make sure the creator exists.
* Strip `type`, `id`, and `signatureValue` from the `signature`, leaving only `signature[creator]` and `signature[created]`.
* Base64-decode the `signatureValue` and verify it against the public key in `signature[creator]`.

Last updated January 11, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/spec/security.md)

---


# Microformats

Source: https://docs.joinmastodon.org/spec/microformats/

# Microformats

An open data format using CSS classes to structure your already-existing HTML.

As of v4.0.0, HTML permalinks for statuses and profiles have been deprecated and removed from Mastodon. As a result, Microformats are currently not used within nor generated by Mastodon.## What are microformats?

[Microformats 2.0](https://microformats.io/) is a standard used to embed metadata directly within an HTML document. Rather than needing to use an API for read-only purposes, a web page can be parsed for certain CSS classes in order to extract information that you have already fetched just by viewing the page, rather than having to separately request that same information from an API. The use of microformats classes allows for semantic parsing of data within a given web page, and can be used to generate feeds, cards, or representations of that data.

## Microformats classes

All microformats classes use a prefix. The prefix indicates the type of the element, independent of hierarchy. These are the microformats classes as used in Mastodon’s codebase.

## Root elements (`h-*`)

## `h-feed`

Represents a stream of entries. Attached to a profile’s statuses. Also attached to the parent thread within detailed status views.

## `h-entry`

Represents episodic or date stamped online content. Attached to a status.

## `h-cite`

Represents a reference to another online publication. Attached to a boost. Also attached to other statuses in the thread within detailed status views.

## `h-card`

Represents a person or organization. Attached to the container of display name, username, and avatar. Also attached to mentions.

## Plain-text properties (`p-*`)

## `p-author`

Within `h-entry` or `h-cite`, represents the author of the entry, and is attached to the container of display name, username, and avatar.

## `p-name`

Within `h-feed`, represents the title of the feed. Attached to `data` element with `value` attribute.
Within `h-entry` or `h-cite`, represents the title of the entry. Unused in Mastodon.
Within `h-card`, represents the plain-text name of a person or organization. Attached to display name.

## `p-in-reply-to`

Within `h-entry` of a detailed status, represents the status that is the direct parent.

## `p-repost-of`

Within h-entry of a detailed status, represents a post that is a reblog and also a direct parent. Currently unused, since reblogs cannot be replied to.

## `p-comment`

Within `h-entry` of a detailed status, represents statuses that are direct children.

## URL properties (`u-*`)

## `u-photo`

Within `h-card`, represents the profile picture. Attached to the avatar image.

## `u-uid`

Within `h-entry` or `h-cite`, represents a universally unique identifier. Attached to timestamp link.

## `u-url`

Within `h-entry` or `h-cite`, represents the status permalink. Attached to timestamp link.
Within `h-card`, represents the profile permalink. Attached to display name link.

## Datetime properties (`dt-*`)

## `dt-published`

Within `h-entry` or `h-cite`, represents the date and time at which the status was published. Attached to `data` element with `value` attribute.

## Element tree (`e-*`)

## `e-content`

Within `h-entry` or `h-cite`, represents the content of the status. Attached to status content.

## Additional classes

These elements are attached by Mastodon for parsing metadata, but are not technically part of the Microformats vocabulary.

## `mention`

Indicates that the link should be opened in-app with the associated mention data from the API.

## `hashtag`

Indicates that the link should be opened in-app with the associated hashtag data from the API.

Last updated February 6, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/spec/microformats.md)

---


# OAuth

Source: https://docs.joinmastodon.org/spec/oauth/

# OAuth

An open standard for token-based authentication and authorization on the Internet

## What is OAuth?

The Mastodon API has many methods that require authentication from a client or authorization from a user. This is accomplished with OAuth 2.0, an authorization framework described in [RFC 6749](https://tools.ietf.org/html/rfc6749) that allows third-party applications to obtain limited access to an HTTP service on behalf of a resource owner, through the use of a standardized authorization flow that generates a client access token to be used with HTTP requests.

To obtain an OAuth token for a Mastodon website, make sure that you allow your users to specify the domain they want to connect to before login. Use that domain to [acquire a client id/secret](/methods/apps/#create) and then [proceed with normal OAuth 2](/methods/oauth/).

## OAuth 2 client types

OAuth 2 defines two client types: `confidential` and `public`, based on their ability to authenticate securely with the authorization server (i.e., ability to maintain the confidentiality of their client credentials). Confidential clients are allowed to use the [client credentials grant flow](/client/token/#flow), where as public clients cannot.

At present Mastodon only supports confidential clients, however [work is underway](https://github.com/mastodon/mastodon/pull/30329) to add support for public clients.

## OAuth 2 endpoints implemented

The following descriptions are taken from the [Doorkeeper documentation](https://github.com/doorkeeper-gem/doorkeeper/wiki/API-endpoint-descriptions-and-examples). Mastodon uses Doorkeeper to implement OAuth 2. For more information on how to use these endpoints, see the [API documentation for OAuth.](/methods/oauth/)

[Doorkeeper config initializer](https://github.com/mastodon/mastodon/blob/main/config/initializers/doorkeeper.rb)## Authorization Server Metadata endpoint ([RFC 8414](https://www.rfc-editor.org/rfc/rfc8414.html))

Returns a JSON document representing the configuration of the OAuth 2 server in Mastodon. Information includes `scopes` available for use when [registering Applications](/methods/apps/#create) or requesting [access tokens](/methods/oauth/#token), `grant_types_supported` which are can be used when requesting access tokens, and various endpoints for interacting with the Mastodon OAuth server, such as `authorization_endpoint` and `token_endpoint`.

**Version history:**  
4.3.0 - added

[GET /.well-known/oauth-authorization-server](/methods/oauth/#authorization-server-metadata)## Dynamic Client Registration endpoint ([RFC 7591](https://www.rfc-editor.org/rfc/rfc7591.html))

At present, Mastodon does not support the Dynamic Client Registration protocol, however it does support a proprietary endpoint for registering an OAuth Application.

[POST /api/v1/apps](/methods/apps/#create)## Authorization endpoint ([RFC 6749 Section 3.1](https://www.rfc-editor.org/rfc/rfc6749.html#section-3.1))

Displays an authorization form to the user. If approved, it will create and return an authorization code, then redirect to the desired `redirect_uri`, or show the authorization code if `urn:ietf:wg:oauth:2.0:oob` was requested.

[GET /oauth/authorize](/methods/oauth/#authorize)## Token endpoint ([RFC 6749 Section 3.2](https://www.rfc-editor.org/rfc/rfc6749.html#section-3.2))

Obtain an access token. Mastodon supports the following OAuth 2 flows:

Authorization code flowFor end-usersClient credentials flowFor applications that do not act on behalf of usersMastodon has historically supported the Password Grant flow, however, usage is [not recommended](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics#name-resource-owner-password-cre) by the OAuth 2 Specification authors due to security issues, and has subsequently been removed from future versions of Mastodon. Instead, it is recommended that you create an OAuth Application for that user, and use the generated Access Token for interacting with the API.

[POST /oauth/token](/methods/oauth/#token)## Token revocation endpoint ([RFC 7009 Section 2](https://www.rfc-editor.org/rfc/rfc7009.html#section-2))

Post here with client credentials to revoke an access token.

[POST /oauth/revoke](/methods/oauth/#revoke)## OAuth 2 Security Considerations

## Proof Key for Code Exchange (PKCE)

When performing an OAuth 2 authorization code flow, there is an additional security mechanism that you can employ to increase the security of the authorization code when the user is redirected back to your application. This is known as Proof Key for Code Exchange, or PKCE (pronounced pixie), and is supported by Mastodon 4.3.0 and above.

We recommend, inline with [OAuth 2 Security Best Current Practices](https://www.ietf.org/archive/id/draft-ietf-oauth-security-topics-27.html#name-pkce), to use PKCE with the Authorization Code flow for both confidential clients and public clients.

[Learn more about PKCE on the OAuth.net website](https://oauth.net/2/pkce/)## State Parameter

When performing an OAuth 2 authorization code flow, you can use the [`state` parameter](https://datatracker.ietf.org/doc/html/rfc6749#section-4.1.1) of the Authorization endpoint to prevent mix-up and cross site request forgery attacks. This parameter is returned back to your server unchanged via the redirect URI upon completion of the OAuth Authorization Code flow.

It is also possible to use this parameter to passthrough arbitrary information to your server via the Authorization Code flow. If you use the `state` parameter, it is recommended that you compare or validate the state value before finishing the authorization code flow (i.e., exchanging the authorization code for an access token).

## Common gotchas

* When registering an application using Mastodon’s REST API, there is a `scopes` parameter. When interfacing with OAuth endpoints, you must use the `scope` parameter instead, and this parameter’s value must be a subset of the `scopes` registered with the app. You cannot include anything that wasn’t in the original set.
* When registering an application using Mastodon’s REST API, there is a `redirect_uris` parameter. When interfacing with OAuth endpoints, you must use the `redirect_uri` parameter instead, and this parameter’s value must be one of the `redirect_uris` registered with the app.

Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/spec/oauth.md)

---


# Bearcaps

Source: https://docs.joinmastodon.org/spec/bearcaps/

# Bearcaps

A URI scheme combining URLs with a Bearer token needed to access them.

## What are bearcaps?

In certain cases, resources may not be publically available and may require a token to successfully fetch them. This is typically done by using an HTTP `Authorization` header containing a `Bearer` token, like so:

```
GET https://example.com/foo
Authorization: Bearer <token>

```
Bearcaps allow for a way to link to a resource with the token included, like so:

```
bear:?t=<token>&u=https://example.com/foo'

```
To translate a bearcap to an HTTP request, make a request to the `u` parameter and attach the `t` parameter as a `Bearer` token in the `Authorization` header.

## How are bearcaps used in Mastodon?

As of v3.3.0, Mastodon supports dereferencing bearcaps in a received Activity. Bearcaps are not used for sending any Activity yet.

Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/spec/bearcaps.md)

---


# Guidelines and best practices

Source: https://docs.joinmastodon.org/api/guidelines/

# Guidelines and best practices

Things to keep in mind when implementing a Mastodon app.

## Login

**The user must be able to log in to any Mastodon server from the app**. This means you must ask for the server’s domain and use the app registrations API to dynamically obtain OAuth2 credentials.

[Logging in with an account](/client/authorized/)[OAuth methods](/methods/oauth/)[OAuth scopes](/api/oauth-scopes/)## Usernames

**Decentralization must be transparent to the user**. It should be possible to see that a given user is from another server, for example, by displaying their `acct` somewhere. Note that `acct` is equal to `username` for local users and equal to `username@domain` for remote users.

## Handling and sorting IDs

Vanilla Mastodon entity IDs are generated as integers and cast to string. However, this does not mean that IDs *are* integers, nor should they be cast to integers! Doing so can lead to broken client apps due to integer overflow, so **always treat IDs as strings.**

With that said, because IDs are string representations of numbers, they can still be sorted chronologically very easily by doing the following:

1. Sort by size. Newer statuses will have longer IDs.
2. Sort lexically. Newer statuses will have at least one digit that is higher when compared positionally.

## Paginating through API responses

Many API methods allow you to paginate for more information, using parameters such as `limit`, `max_id`, `min_id`, and `since_id`.

limitThe maximum number of results to return. Usually, there is a default limit and a maximum limit; these will vary according to the API method.max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward. (Available since v2.6.0.)For example, we might fetch `https://mastodon.example/api/v1/accounts/1/statuses` with certain parameters, and we will get the following results in the following cases:

* Setting `?max_id=1` will return no statuses since there are no statuses with an ID earlier than `1`.
* Setting `?since_id=1` will return the latest statuses since there have been many statuses since `1`.
* Setting `?min_id=1` will return the oldest statuses, as `min_id` sets the cursor.

Some API methods operate on entity IDs that are not publicly exposed in the API response and are only known to the backend and the database. (This is usually the case for entities that reference other entities, such as Follow entities which reference Accounts, or Favourite entities which reference Statuses, etc.)

To get around this, Mastodon may return links to a “prev” and “next” page. These links are made available via the HTTP `Link` header on the response. Consider the following fictitious API call:

```
GET https://mastodon.example/api/v1/endpoint HTTP/1.1
Authorization: Bearer <access\_token>

Link: <https://mastodon.example/api/v1/endpoint?max\_id=7163058>; rel="next", <https://mastodon.example/api/v1/endpoint?min\_id=7275607>; rel="prev"
[
 {
 // some Entity
 },
 // more Entities in an Array
]

```
In this case, you may retrieve the `Link` header and parse it for links to the older or newer page. Keep in mind the following rules:

* The links will be returned all via one `Link` header, separated by a comma and a space (`,` )
* Each link consists of a URL and a link relation, separated by a semicolon and a space (`;` )
* The URL will be surrounded by angle brackets (`<>`), and the link relation will be surrounded by double quotes (`""`) and prefixed with `rel=`.
* The value of the link relation will be either `prev` or `next`.

Following the `next` link should show you older results. Following the `prev` link should show you newer results.

## Deprecations

Mastodon rarely removes APIs, but that can still happen from time to time. Therefore, it is recommended to keep up with Mastodon releases and keep an eye out for deprecated APIs.

Furthermore, to help implementers with spotting use of deprecated APIs, Mastodon 4.4.0 makes use of the `Deprecation` header defined in [RFC9745](https://datatracker.ietf.org/doc/html/rfc9745). It is recommended that library and application developers look for this header and display warnings in their development environments so they can spot these deprecated APIs before they get retired.

## Formatting

Plain text is not available for content from remote servers, and plain text syntax rules may vary wildly between Mastodon and other fediverse applications. For certain attributes, such as the content of statuses, **Mastodon provides sanitized HTML**. See [HTML Sanitization](/spec/activitypub/#sanitization) for more details. You may expect these tags to appear in the content:

* `<p>`
* `<br>`
* `<span>`
* `<a>`

[ActivityPub > HTML Sanitization](/spec/activitypub/#sanitization)## Mentions, hashtags, and custom emoji

Mentions and hashtags are `<a>` tags. Custom emojis remain in their plain text shortcode form. To give those entities their semantic meaning and add special handling, such as opening a mentioned profile within your app instead of as a web page, metadata is included with the [Status](/entities/Status/), which can be matched to a particular tag.

[Status entity](/entities/Status/)[Status#mentions](/entities/Status/#mentions)[Status#tags](/entities/Status/#tags)[Status#emojis](/entities/Status/#emojis)## Link shortening

Links in Mastodon are not shortened using URL shorteners, and the usage of URL shorteners is heavily discouraged. URLs in text always count for 23 characters and are intended to be shortened visually. For that purpose, a link is marked up like this:

```
<a href="https://example.com/page/that/is/very/long">
 <span class="invisible">https://</span>
 <span class="ellipsis">example.com/page</span>
 <span class="invisible">/that/is/very/long</span>
</a>

```
The spans with the `invisible` class can be hidden. The middle span is intended to remain visible. It may have no class if the URL is not very long; otherwise, it will have an `ellipsis` class. No ellipsis (`…`) character is inserted in the markup; instead, you are expected to insert it yourself if you need it in your app.

## Filters

## Server-side filtering (v2, Mastodon 4.0 and above)

If a filter applies to a Status, a corresponding FilterResult will be included in the `filtered` attribute. Clients should check this attribute for any matches and use them to apply the intended filter action.

However, client implementations may still want to perform their own rule matching client-side, as this would allow retroactively applying filter changes without re-fetching posts from the server. When doing so, they should take care to not ignore `filtered` entries for which there are other attributes than `keyword_matches`, so as to handle extensions of the filtering system (e.g. `status_matches`).

Matched filters need to be filtered based on context (`home`, `notifications`, `public`, `thread` or `profile`) and expiration date.

When at least one active matched filter has `hide` for `filter_action`, the post should not be shown at all. Otherwise, if at least one active matched filter has `warn` for `filter_action`, the post should be hidden with a warning, and the user should be able to reveal the post after being informed of which filters matched (identified by `title` rather than the exact matched keywords).

For extension purposes, unknown values for `filter_action` should be treated as `warn`.

## Client-side filtering (v1, prior to Mastodon 4.0)

Clients must do their own text filtering based on filters returned from the API. The server will apply `irreversible` filters for `home` and `notifications` contexts, but **anything else is still up to the client to filter**! If a status is somehow not removed by an `irreversible` filter, the client should still filter it.

Expired filters are not deleted by the server. They should no longer be applied, but they are still stored by the server, as users may update the expiry time to re-enable the filter. It is up to users to delete those filters eventually, if they wish to do so.

If `whole_word` is true, the client app should do the following:

* Define ‘word constituent characters’ for your app. In the official implementation, it’s `[A-Za-z0-9_]` in JavaScript, and `[[:word:]]` in Ruby. Ruby uses the POSIX character class (Letter | Mark | Decimal\_Number | Connector\_Punctuation).
* If the phrase starts with a word character, and if the previous character before the matched range is a word character, its matched range should be treated to not match.
* If the phrase ends with a word character, and if the next character after the matched range is a word character, its matched range should be treated to not match.

Please check `app/javascript/mastodon/selectors/index.js` and `app/lib/feed_manager.rb` in the Mastodon source code for more details.

[app/javascript/mastodon/selectors/index.js](https://github.com/mastodon/mastodon/blob/main/app/javascript/mastodon/selectors/index.js)[app/lib/feed\_manager.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/feed_manager.rb)## Focal points for cropping media thumbnails

Server-side preview images are never cropped, to support a variety of apps and user interfaces. Therefore, the cropping must be done by those apps. To crop intelligently, focal points can be used to ensure a certain section of the image is always within the cropped viewport. See this [guide on how focal points are defined](https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point). In summary, floating points range from -1.0 to 1.0, left-to-right or bottom-to-top. (0,0) is the center of the image. (0.5, 0.5) would be in the center of the upper-right quadrant. (-0.5, -0.5) would be in the center of the lower-left quadrant. For reference, thumbnails in the Mastodon front end are most commonly 16:9.

![A demonstration of various focal points and their coordinates.](/assets/focal-points.jpg)A demonstration of various focal points and their coordinates.

Last updated March 27, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/api/guidelines.md)

---


# OAuth Tokens

Source: https://docs.joinmastodon.org/api/oauth-tokens/

# OAuth Tokens

Defining what token types are used throughout this documentation

## OAuth Tokens

Mastodon supports two different types of OAuth Tokens: App tokens and User tokens. Throughout this documentation you will see these token types referenced in the `OAuth` field for API endpoints.

The `OAuth` field also references Public, in which case no OAuth access token needs to be supplied to access the API endpoint.

## App tokens

In order to receive an App token, you must perform a [client credentials grant flow](/client/token/#flow), which gives you a token that can be used to interact with the API on behalf of the OAuth Application. Currently the only API endpoints that accepts this token type are:

* [`GET /api/v1/apps/verify_credentials`](/methods/apps/#verify_credentials)
* [`POST /api/v1/accounts`](/methods/accounts/#create)

## User tokens

In order to create a User token, you must perform a [authorization code grant flow](/client/authorized/#flow), which gives you an access token that is associated with the user who approves the access grant request.

Many Mastodon APIs require User tokens and specific scopes to access them.

Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/api/oauth-tokens.md)

---


# OAuth Scopes

Source: https://docs.joinmastodon.org/api/oauth-scopes/

# OAuth Scopes

Defining what you have permission to do with the API

## OAuth Scopes

The API access is divided up into several OAuth scopes, these limit what an API client can do, based on the registered and requested scopes for the [Access Token](/api/oauth-tokens/). The scopes in Mastodon are hierarchical, for example, if you request the `read` scope, you automatically have access to `read:accounts`, however **we recommend that you request the most limited scopes as possible for your application**, i.e., if you only need read access to lists and the current user profile, then you should use `profile read:lists` as your scopes instead of `read`.

To just retrieve the details of the currently authenticated user, use the `profile` scope, which can only access the [`GET /api/v1/accounts/verify_credentials`](/methods/accounts/#verify_credentials) endpoint.  
This scope was added in Mastodon 4.3, so we recommend using the “Discovering OAuth Scopes supported by a given Mastodon Server” guidance below when using this scope.## Discovering OAuth Scopes supported by a given Mastodon Server

As of Mastodon 4.3.0, support for [RFC 8414](https://tools.ietf.org/html/rfc8414)’s `GET /.well-known/oauth-authorization-server` endpoint was added, allowing you to discover the scopes supported by the Mastodon server (as well as other OAuth related information such as the endpoints and grant flows).

We recommended using this endpoint in order to support multiple versions of Mastodon for your OAuth Application.

If you make a request to the `GET /.well-known/oauth-authorization-server` endpoint, and it returns a 404, then you can assume that the Mastodon server is running a version older than 4.3, in which case you’ll need to look at the specific scopes your application needs and what the lowest common scopes are for the version range of Mastodon that you wish to support.

**Example:** You want to use the `profile` scope, but also want to support older Mastodon servers that don’t have that scope and would need `read:accounts` instead. You could discover whether a server supports that scope by making a request this endpoint.[GET /.well-known/oauth-authorization-server](/methods/oauth/#authorization-server-metadata)## Multiple scopes can be requested at the same time

During application creation you can specify multiple space-separated scopes with the `scopes` parameter. During the authorization phase you can do the same with the `scope` query parameter.

The set of scopes saved during application creation must include all the scopes that you will request in the authorization request, otherwise, authorization will fail.Mind the `scope` vs `scopes` difference. This is because `scope` is a standard OAuth parameter name, so it is used in the OAuth methods. Mastodon’s own REST API uses the more appropriate `scopes` name instead.If you do not specify `scope` in your authorization request, or `scopes` in your application creation request, the resulting access token/app will be assigned the default scope. This is currently `read` as of Mastodon 4.3, but is subject to change in the future.

[POST /api/v1/apps](/methods/apps/#create)## Version history

* 0.9.0 - Added read, write, follow scopes
* 2.4.0 - Added push scope for push notifications
* 2.4.3 - Added granular scopes [#7929](https://github.com/mastodon/mastodon/pull/7929)
* 2.6.0 - Deprecated `read:reports` (unused stub) [#8736/adcf23f](https://github.com/mastodon/mastodon/pull/8736/commits/adcf23f1d00c8ff6877ca2ee2af258f326ae4e1f)
* 2.6.0 - Added `write:conversations` [#9009](https://github.com/mastodon/mastodon/pull/9009)
* 2.9.1 - Added administrative and moderation scopes [#9387](https://github.com/mastodon/mastodon/pull/9387)
* 3.1.0 - Added bookmark scopes [#7107](https://github.com/mastodon/mastodon/pull/7107)
* 3.5.0 - Deprecated `follow` scope in favour of granular scopes [#17678](https://github.com/mastodon/mastodon/pull/17678)
* 4.1.0 - Added admin scopes for blocks and allows [#20918](https://github.com/mastodon/mastodon/pull/20918)
* 4.3.0 - Added `profile` scope to obtain only information about the currently authenticated user [#29087](https://github.com/mastodon/mastodon/pull/29087), [#30357](https://github.com/mastodon/mastodon/pull/30357)

## List of high-level scopes

We recommend that you use the [granular scopes](/api/oauth-scopes/#granular-scopes) shown in the right column of the table below, instead of using the following scopes:

* `read`
* `write`
* `follow` deprecated
* `admin:read`
* `admin:write`

When only the information about the currently authenticated user is required, use the `profile` scope.

## `profile`

Grants access only to the [`GET /api/v1/accounts/verify_credentials`](/methods/accounts/#verify_credentials) endpoint. Allowing you to retrieve information about only the currently authenticated user.

## `read`

Grants access to read data, including other users. Requesting `read` will also grant [granular scopes](/api/oauth-scopes/#granular-scopes) shown in the right column of the table below.

## `write`

Grants access to write data. Requesting `write` will also grant [granular scopes](/api/oauth-scopes/#granular-scopes) shown in the right column of the table below.

## `push`

Grants access to [Web Push API subscriptions.](/methods/push/) Added in Mastodon 2.4.0.

## `follow`

**Deprecated**  
This scope has been deprecated in 3.5.0 and newer. You should instead request the [granular scopes](/#granular-scopes) individually, or request `read`/`write` scopes as needed.Grants access to manage relationships. Requesting `follow` will also grant [granular scopes](/api/oauth-scopes/#granular-scopes) shown in the right column of the table below.

## `admin:read` and `admin:write`

Used for administrative and moderation APIs. Added in Mastodon 2.9.1.

Requesting `admin:read` or `admin:write` will also grant [granular scopes](/api/oauth-scopes/#granular-scopes) shown in the right column of the table below.

Note that there is no singular `admin` scope available.## Granular scopes

It is recommended that you make use of granular scopes, unless you really need full access to everything by using a `scope` of `read write follow push`.

| Scope | Granular Scopes |
| --- | --- |
| `profile` |  |
| `push` |  |
| `read` |  |
|  | `read:accounts` |
|  | `read:blocks` |
|  | `read:bookmarks` |
|  | `read:favourites` |
|  | `read:filters` |
|  | `read:follows` |
|  | `read:lists` |
|  | `read:mutes` |
|  | `read:notifications` |
|  | `read:search` |
|  | `read:statuses` |
| `write` |  |
|  | `write:accounts` |
|  | `write:blocks` |
|  | `write:bookmarks` |
|  | `write:conversations` |
|  | `write:favourites` |
|  | `write:filters` |
|  | `write:follows` |
|  | `write:lists` |
|  | `write:media` |
|  | `write:mutes` |
|  | `write:notifications` |
|  | `write:reports` |
|  | `write:statuses` |
| `follow` deprecated |  |
|  | `read:follows` |
|  | `write:follows` |
|  | `read:blocks` |
|  | `write:blocks` |
|  | `read:mutes` |
|  | `write:mutes` |
| `admin:read` |  |
|  | `admin:read:accounts` |
|  | `admin:read:reports` |
|  | `admin:read:domain_allows` |
|  | `admin:read:domain_blocks` |
|  | `admin:read:ip_blocks` |
|  | `admin:read:email_domain_blocks` |
|  | `admin:read:canonical_email_blocks` |
| `admin:write` |  |
|  | `admin:write:accounts` |
|  | `admin:write:reports` |
|  | `admin:write:domain_allows` |
|  | `admin:write:domain_blocks` |
|  | `admin:write:ip_blocks` |
|  | `admin:write:email_domain_blocks` |
|  | `admin:write:canonical_email_blocks` |

## Removed scopes

* Mastodon versions from 3.2.0 to 4.3.0 did support a `crypto` scope for end-to-end encryption APIs, however, this functionality was never documented nor fully implemented, and has been removed as of version 4.3.0. Any applications registered with that scope will have the scope removed when the server is upgraded to 4.3.0 and above.

Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/api/oauth-scopes.md)

---


# Rate limits

Source: https://docs.joinmastodon.org/api/rate-limits/

# Rate limits

Defining how often you can call the REST API

## Headers

Rate limit information is returned in the response headers:

`X-RateLimit-Limit`Number of requests permitted per time period`X-RateLimit-Remaining`Number of requests you can still make`X-RateLimit-Reset`Timestamp when your rate limit will resetAn API method can be subject to multiple overlapping rate limits. The headers return information about the one you are closest to exceeding.## Limits

By default, the following limits are hardcoded:

## Per account

All endpoints and methods can be called 300 times within 5 minutes.

## Uploading media

`POST /api/v1/media` can be called 30 times within 30 minutes.

## Deleting statuses

Either `DELETE /api/v1/statuses/:id` or `POST /api/v1/statuses/:id/unreblog` can be called 30 times within 30 minutes.

## Per IP

All endpoints and methods can be called 300 times within 5 minutes.

## Creating accounts

`POST /api/v1/accounts` can be called 5 times within 30 minutes.

Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/api/rate-limits.md)

---


# accounts API methods

Source: https://docs.joinmastodon.org/methods/accounts/

# accounts API methods

Methods concerning accounts and profiles.

## Register an account

```
POST /api/v1/accounts HTTP/1.1

```
Creates a user and account records. Returns an account access token for the app that initiated the request. The app should save this token for later, and should wait for the user to confirm their account by clicking a link in their email inbox.

A relationship between the OAuth Application and created user account is stored.

**Returns:** [Token](/entities/Token/)  
**OAuth:** App token + `write:accounts`  
**Version history:**  
2.7.0 - added  
3.0.0 - added `reason` parameter  
3.4.0 - added `details` to failure response  
4.4.0 - added `date_of_birth` parameter

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <app_token>` to gain authorized access to this API method.## Form data parameters

usernamerequired String. The desired username for the accountemailrequired String. The email address to be used for loginpasswordrequired String. The password to be used for loginagreementrequired Boolean. Whether the user agrees to the local rules, terms, and policies. These should be presented to the user in order to allow them to consent before setting this parameter to TRUE.localerequired String. The language of the confirmation email that will be sent.reasonString. If registrations require manual approval, this text will be reviewed by moderators.date\_of\_birthString ([Date](/api/datetime-format/#date)), required if the server has a minimum age requirement.## Response

## 200: OK

## 401: Unauthorized

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

The `details` parameter contains all detected errors. Its structure is a Hash with the key being the erroneous parameter, and its value being an array of all errors found.

Example error response:

```
{
 "error": "Validation failed: Password can't be blank, Username must contain only letters, numbers and underscores, Agreement must be accepted",
 "details": {
 "password": [
 {
 "error": "ERR\_BLANK",
 "description": "can't be blank"
 }
 ],
 "username": [
 {
 "error": "ERR\_INVALID",
 "description": "must contain only letters, numbers and underscores"
 }
 ],
 "agreement": [
 {
 "error": "ERR\_ACCEPTED",
 "description": "must be accepted"
 }
 ]
 }
}

```
You may expect the following errors:

ERR\_BLOCKEDWhen e-mail provider is not allowedERR\_UNREACHABLEWhen e-mail address does not resolve to any IP via DNS (MX, A, AAAA)ERR\_TAKENWhen username or e-mail are already takenERR\_RESERVEDWhen a username is reserved, e.g. “webmaster” or “admin”ERR\_ACCEPTEDWhen agreement has not been acceptedERR\_BLANKWhen a required attribute is blankERR\_INVALIDWhen an attribute is malformed, e.g. wrong characters or invalid e-mail addressERR\_TOO\_LONGWhen an attribute is over the character limitERR\_TOO\_SHORTWhen an attribute is under the character requirementERR\_INCLUSIONWhen an attribute is not one of the allowed values, e.g. unsupported locale## 429: Rate limited

```
{
 "error": "Too many requests"
}

```

---

## Verify account credentials

```
GET /api/v1/accounts/verify\_credentials HTTP/1.1

```
Test to make sure that the user token works.

**Returns:** [CredentialAccount](/entities/Account/#CredentialAccount)  
**OAuth:** User token + `profile` or `read:accounts`  
**Version history:**  
0.0.0 - added
4.3.0 - added `profile` scope

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Note the extra `source` property, which is not visible on accounts other than your own. Also note that plain-text is used within `source` and HTML is used for their corresponding properties such as `note` and `fields`.

```
{
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 "locked": false,
 "bot": false,
 "created\_at": "2016-11-24T10:02:12.085Z",
 "note": "<p>i have approximate knowledge of many things. perpetual student. (nb/ace/they)</p><p>xmpp/email: a@trwnh.com<br /><a href=\"https://trwnh.com\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a><br />help me live: <a href=\"https://liberapay.com/at\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/at</span><span class=\"invisible\"></span></a> or <a href=\"https://paypal.me/trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">paypal.me/trwnh</span><span class=\"invisible\"></span></a></p><p>- my triggers are moths and glitter<br />- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise<br />- dm me if i did something wrong, so i can improve<br />- purest person on fedi, do not lewd in my presence<br />- #1 ami cole fan account</p><p>:fatyoshi:</p>",
 "url": "https://mastodon.social/@trwnh",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/014/715/original/34aa222f4ae2e0a9.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/014/715/original/34aa222f4ae2e0a9.png",
 "header": "https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg",
 "followers\_count": 821,
 "following\_count": 178,
 "statuses\_count": 33120,
 "last\_status\_at": "2019-11-24T15:49:42.251Z",
 "source": {
 "privacy": "public",
 "sensitive": false,
 "language": "",
 "note": "i have approximate knowledge of many things. perpetual student. (nb/ace/they)\r\n\r\nxmpp/email: a@trwnh.com\r\nhttps://trwnh.com\r\nhelp me live: https://liberapay.com/at or https://paypal.me/trwnh\r\n\r\n- my triggers are moths and glitter\r\n- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise\r\n- dm me if i did something wrong, so i can improve\r\n- purest person on fedi, do not lewd in my presence\r\n- #1 ami cole fan account\r\n\r\n:fatyoshi:",
 "fields": [
 {
 "name": "Website",
 "value": "https://trwnh.com",
 "verified\_at": "2019-08-29T04:14:55.571+00:00"
 },
 {
 "name": "Sponsor",
 "value": "https://liberapay.com/at",
 "verified\_at": "2019-11-15T10:06:15.557+00:00"
 },
 {
 "name": "Fan of:",
 "value": "Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo's Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)",
 "verified\_at": null
 },
 {
 "name": "Main topics:",
 "value": "systemic analysis, design patterns, anticapitalism, info/tech freedom, theory and philosophy, and otherwise being a genuine and decent wholesome poster. i'm just here to hang out and talk to cool people!",
 "verified\_at": null
 }
 ],
 "follow\_requests\_count": 0
 },
 "emojis": [
 {
 "shortcode": "fatyoshi",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/023/920/original/e57ecb623faa0dc9.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/023/920/static/e57ecb623faa0dc9.png",
 "visible\_in\_picker": true
 }
 ],
 "fields": [
 {
 "name": "Website",
 "value": "<a href=\"https://trwnh.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-08-29T04:14:55.571+00:00"
 },
 {
 "name": "Sponsor",
 "value": "<a href=\"https://liberapay.com/at\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/at</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-11-15T10:06:15.557+00:00"
 },
 {
 "name": "Fan of:",
 "value": "Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo&apos;s Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)",
 "verified\_at": null
 },
 {
 "name": "Main topics:",
 "value": "systemic analysis, design patterns, anticapitalism, info/tech freedom, theory and philosophy, and otherwise being a genuine and decent wholesome poster. i&apos;m just here to hang out and talk to cool people!",
 "verified\_at": null
 }
 ]
}

```
## 401: Unauthorized

Your credential verification will fail if the token is invalid or incorrect.

```
{
 "error": "The access token is invalid"
}

```
## 403: Forbidden

Your user account is currently disabled, missing a confirmed email address, or pending approval.

```
{
 "error": "Your login is currently disabled"
}

```

```
{
 "error": "Your login is missing a confirmed e-mail address"
}

```

```
{
 "error": "Your login is currently pending approval"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Update account credentials

```
PATCH /api/v1/accounts/update\_credentials HTTP/1.1

```
Update the user’s display and preferences.

**Returns:** the user’s own [Account](/entities/Account/) with [`source`](/entities/Account/#source) attribute  
**OAuth:** User token + `write:accounts`  
**Version history:**  
1.1.1 - added  
2.3.0 - added `locked` parameter  
2.4.0 - added `source[privacy,sensitive]` parameters  
2.4.2 - added `source[language]` parameter  
2.7.0 - added `discoverable` parameter  
4.1.0 - added `hide_collections` parameter  
4.2.0 - added `indexable` parameter  
4.4.0 (`mastodon` [API version](/entities/Instance/#api-versions) 3) - added `attribution_domains` parameter

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

display\_nameString. The display name to use for the profile.noteString. The account bio.avatarAvatar image encoded using `multipart/form-data`headerHeader image encoded using `multipart/form-data`lockedBoolean. Whether manual approval of follow requests is required.botBoolean. Whether the account has a bot flag.discoverableBoolean. Whether the account should be shown in the profile directory.hide\_collectionsBoolean. Whether to hide followers and followed accounts.indexableBoolean. Whether public posts should be searchable to anyone.attribution\_domains[]Array of String. Domains of websites allowed to credit the account.fields\_attributesHash. The profile fields to be set. Inside this hash, the key is an integer cast to a string (although the exact integer does not matter), and the value is another hash including `name` and `value`. By default, max 4 fields.fields\_attributes[:index][name]String. The name of the profile field. By default, max 255 characters.fields\_attributes[:index][value]String. The value of the profile field. By default, max 255 characters.source[privacy]String. Default post privacy for authored statuses. Can be `public`, `unlisted`, or `private`.source[sensitive]Boolean. Whether to mark authored statuses as sensitive by default.source[language]String. Default language to use for authored statuses (ISO 6391)## Response

## 200: OK

To update account fields, you will need to construct your hash like so for example:

```
{
 "fields\_attributes": {
 "0": {
 "name": "Website",
 "value": "https://trwnh.com"
 },
 "1": {
 "name": "Sponsor",
 "value": "https://liberapay.com/at"
 },
 // ...
 }
}

```
As query parameters, your request may look something like this:

```
PATCH https://mastodon.example/api/v1/accounts/update\_credentials
?fields\_attributes[0][name]=Website
&fields\_attributes[0][value]=https://trwnh.com
&fields\_attributes[1][name]=Sponsor
&fields\_attributes[1][value]=https://liberapay.com/at
&...

```
Note that the integer index does not actually matter – fields will be populated by the order in which they are provided. For example:

```
{
 "fields\_attributes": {
 "420": {
 "name": "1st",
 "value": "field"
 },
 "69": {
 "name": "2nd",
 "value": "field"
 },
 "1312": {
 "name": "3rd",
 "value": "field"
 },
 "-99999999999999999999999999999999": {
 "name": "4th",
 "value": "field"
 },
 }
}

```
You should use accounts/verify\_credentials to first obtain plaintext representations from within the `source` parameter, then allow the user to edit these plaintext representations before submitting them through this API. The server will generate the corresponding HTML.

```
{
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 "locked": false,
 "bot": false,
 "created\_at": "2016-11-24T10:02:12.085Z",
 "note": "<p>i have approximate knowledge of many things. perpetual student. (nb/ace/they)</p><p>xmpp/email: a@trwnh.com<br /><a href=\"https://trwnh.com\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a><br />help me live: <a href=\"https://liberapay.com/at\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/at</span><span class=\"invisible\"></span></a> or <a href=\"https://paypal.me/trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">paypal.me/trwnh</span><span class=\"invisible\"></span></a></p><p>- my triggers are moths and glitter<br />- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise<br />- dm me if i did something wrong, so i can improve<br />- purest person on fedi, do not lewd in my presence<br />- #1 ami cole fan account</p><p>:fatyoshi:</p>",
 "url": "https://mastodon.social/@trwnh",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/014/715/original/34aa222f4ae2e0a9.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/014/715/original/34aa222f4ae2e0a9.png",
 "header": "https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg",
 "followers\_count": 834,
 "following\_count": 182,
 "statuses\_count": 33760,
 "last\_status\_at": "2019-12-01T00:12:08.731Z",
 "source": {
 "privacy": "public",
 "sensitive": false,
 "language": "",
 "note": "i have approximate knowledge of many things. perpetual student. (nb/ace/they)\r\n\r\nxmpp/email: a@trwnh.com\r\nhttps://trwnh.com\r\nhelp me live: https://liberapay.com/at or https://paypal.me/trwnh\r\n\r\n- my triggers are moths and glitter\r\n- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise\r\n- dm me if i did something wrong, so i can improve\r\n- purest person on fedi, do not lewd in my presence\r\n- #1 ami cole fan account\r\n\r\n:fatyoshi:",
 "fields": [
 {
 "name": "Website",
 "value": "https://trwnh.com",
 "verified\_at": "2019-08-29T04:14:55.571+00:00"
 },
 {
 "name": "Sponsor",
 "value": "https://liberapay.com/at",
 "verified\_at": "2019-11-15T10:06:15.557+00:00"
 },
 {
 "name": "Fan of:",
 "value": "Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo's Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)",
 "verified\_at": null
 },
 {
 "name": "Main topics:",
 "value": "systemic analysis, design patterns, anticapitalism, info/tech freedom, theory and philosophy, and otherwise being a genuine and decent wholesome poster. i'm just here to hang out and talk to cool people!",
 "verified\_at": null
 }
 ],
 "follow\_requests\_count": 0
 },
 "emojis": [
 {
 "shortcode": "fatyoshi",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/023/920/original/e57ecb623faa0dc9.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/023/920/static/e57ecb623faa0dc9.png",
 "visible\_in\_picker": true
 }
 ],
 "fields": [
 {
 "name": "Website",
 "value": "<a href=\"https://trwnh.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-08-29T04:14:55.571+00:00"
 },
 {
 "name": "Sponsor",
 "value": "<a href=\"https://liberapay.com/at\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/at</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-11-15T10:06:15.557+00:00"
 },
 {
 "name": "Fan of:",
 "value": "Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo&apos;s Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)",
 "verified\_at": null
 },
 {
 "name": "Main topics:",
 "value": "systemic analysis, design patterns, anticapitalism, info/tech freedom, theory and philosophy, and otherwise being a genuine and decent wholesome poster. i&apos;m just here to hang out and talk to cool people!",
 "verified\_at": null
 }
 ]
}

```
## 401: Unauthorized

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Get account

```
GET /api/v1/accounts/:id HTTP/1.1

```
View information about a profile.

**Returns:** [Account](/entities/Account/)  
**OAuth:** Public  
**Version history:**  
0.0.0 - added  
2.4.0 - returns 410 if account is suspended  
3.3.0 - returns an Account with `suspended: true` instead of 410

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The Account record will be returned. Note that `acct` of local users does not include the domain name.

## Local user

```
{
 "id": "1",
 "username": "Gargron",
 "acct": "Gargron",
 "display\_name": "Eugen",
 "locked": false,
 "bot": false,
 "created\_at": "2016-03-16T14:34:26.392Z",
 "note": "<p>Developer of Mastodon and administrator of mastodon.social. I post service announcements, development updates, and personal stuff.</p>",
 "url": "https://mastodon.social/@Gargron",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "header": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "followers\_count": 318699,
 "following\_count": 453,
 "statuses\_count": 61013,
 "last\_status\_at": "2019-11-30T20:02:08.277Z",
 "emojis": [],
 "fields": [
 {
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span></a>",
 "verified\_at": null
 },
 {
 "name": "Homepage",
 "value": "<a href=\"https://zeonfederated.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">zeonfederated.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-07-15T18:29:57.191+00:00"
 }
 ]
}

```
## Remote user

```
{
 "id": "23634",
 "username": "noiob",
 "acct": "noiob@awoo.space",
 "display\_name": "shork",
 "locked": false,
 "bot": false,
 "created\_at": "2017-02-08T02:00:53.274Z",
 "note": "<p>:ms\_rainbow\_flag:​ :ms\_bisexual\_flag:​ :ms\_nonbinary\_flag:​ <a href=\"https://awoo.space/tags/awoo\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>awoo</span></a>.space <a href=\"https://awoo.space/tags/admin\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>admin</span></a> ~ <a href=\"https://awoo.space/tags/bi\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>bi</span></a> ~ <a href=\"https://awoo.space/tags/nonbinary\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>nonbinary</span></a> ~ compsci student ~ likes video <a href=\"https://awoo.space/tags/games\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>games</span></a> and weird/ old electronics and will post obsessively about both ~ avatar by <span class=\"h-card\"><a href=\"https://weirder.earth/@dzuk\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>dzuk</span></a></span></p>",
 "url": "https://awoo.space/@noiob",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/023/634/original/6ca8804dc46800ad.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/023/634/original/6ca8804dc46800ad.png",
 "header": "https://files.mastodon.social/accounts/headers/000/023/634/original/256eb8d7ac40f49a.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/023/634/original/256eb8d7ac40f49a.png",
 "followers\_count": 553,
 "following\_count": 405,
 "statuses\_count": 28982,
 "last\_status\_at": "2019-12-01T00:39:57.264Z",
 "emojis": [
 {
 "shortcode": "ms\_rainbow\_flag",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/028/691/original/6de008d6281f4f59.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/028/691/static/6de008d6281f4f59.png",
 "visible\_in\_picker": true
 },
 {
 "shortcode": "ms\_bisexual\_flag",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/050/744/original/02f94a5fca7eaf78.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/050/744/static/02f94a5fca7eaf78.png",
 "visible\_in\_picker": true
 },
 {
 "shortcode": "ms\_nonbinary\_flag",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/105/099/original/8106088bd4782072.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/105/099/static/8106088bd4782072.png",
 "visible\_in\_picker": true
 }
 ],
 "fields": [
 {
 "name": "Pronouns",
 "value": "they/them",
 "verified\_at": null
 },
 {
 "name": "Alt",
 "value": "<span class=\"h-card\"><a href=\"https://cybre.space/@noiob\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>noiob</span></a></span>",
 "verified\_at": null
 },
 {
 "name": "Bots",
 "value": "<span class=\"h-card\"><a href=\"https://botsin.space/@darksouls\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>darksouls</span></a></span>, <span class=\"h-card\"><a href=\"https://botsin.space/@nierautomata\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>nierautomata</span></a></span>, code for <span class=\"h-card\"><a href=\"https://botsin.space/@awoobot\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>awoobot</span></a></span>",
 "verified\_at": null
 },
 {
 "name": "Website",
 "value": "<a href=\"http://shork.xyz\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">http://</span><span class=\"\">shork.xyz</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-11-23T20:25:47.907+00:00"
 }
 ]
}

```
## Suspended user

```
{
 "id": "14",
 "username": "stigatle",
 "acct": "stigatle@quitter.no",
 "display\_name": "",
 "locked": false,
 "bot": false,
 "discoverable": false,
 "group": false,
 "created\_at": "2016-03-18T10:04:51.700Z",
 "note": "",
 "url": "https://quitter.no/stigatle",
 "avatar": "https://mastodon.social/avatars/original/missing.png",
 "avatar\_static": "https://mastodon.social/avatars/original/missing.png",
 "header": "https://mastodon.social/headers/original/missing.png",
 "header\_static": "https://mastodon.social/headers/original/missing.png",
 "followers\_count": 0,
 "following\_count": 0,
 "statuses\_count": 0,
 "last\_status\_at": null,
 "suspended": true,
 "emojis": [],
 "fields": []
}

```
## 401: Unauthorized

If the instance is in whitelist mode and the Authorization header is missing or invalid

```
{
 "error": "This API requires an authenticated user"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```
## 410: Gone

Account is suspended (since 2.4.0 and until 3.3.0)

---

## Get multiple accounts

```
GET /api/v1/accounts HTTP/1.1

```
View information about multiple profiles.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** Public  
**Version history:**  
4.3.0 - added

## Request

## Headers

## Query parameters

id[]Array of String. The IDs of the Accounts in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

[Account](/entities/Account/) records for the requested confirmed and approved accounts will be returned. There can be fewer records than requested if the accounts do not exist or are not confirmed.

Sample call with `id[]=1&id[]=2` when no account with `id=2` exists:

```
[
 {
 "id": "1",
 "username": "Gargron",
 "acct": "Gargron",
 "display\_name": "Eugen",
 "locked": false,
 "bot": false,
 "created\_at": "2016-03-16T14:34:26.392Z",
 "note": "<p>Developer of Mastodon and administrator of mastodon.social. I post service announcements, development updates, and personal stuff.</p>",
 "url": "https://mastodon.social/@Gargron",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "header": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "followers\_count": 318699,
 "following\_count": 453,
 "statuses\_count": 61013,
 "last\_status\_at": "2019-11-30T20:02:08.277Z",
 "emojis": [],
 "fields": [
 {
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span></a>",
 "verified\_at": null
 },
 {
 "name": "Homepage",
 "value": "<a href=\"https://zeonfederated.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">zeonfederated.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-07-15T18:29:57.191+00:00"
 }
 ]
 }
]

```
## 401: Unauthorized

If the instance is in whitelist mode and the Authorization header is missing or invalid

```
{
 "error": "This API requires an authenticated user"
}

```

---

## Get account’s statuses

```
GET /api/v1/accounts/:id/statuses HTTP/1.1

```
Statuses posted to the given account.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** Public (for public statuses only), or user token + `read:statuses` (for private statuses the user is authorized to see)  
**Version history:**  
0.0.0 - added  
1.4.2 - add `only_media` and `exclude_replies`  
1.6.0 - add `pinned`  
2.6.0 - add `min_id`  
2.7.0 - add `exclude_reblogs` and allow unauthed use  
2.8.0 - add `tagged` parameter  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.only\_mediaBoolean. Filter out statuses without attachments.exclude\_repliesBoolean. Filter out statuses in reply to a different account.exclude\_reblogsBoolean. Filter out boosts from the response.pinnedBoolean. Filter for pinned statuses only. Defaults to false, which includes all statuses. Pinned statuses do not receive special priority in the order of the returned results.taggedString. Filter for statuses using a specific hashtag.## Response

## 200: OK

```
[
 {
 "id": "108880211901672326",
 "created\_at": "2022-08-24T22:29:46.493Z",
 "in\_reply\_to\_id": "108880209317577809",
 "in\_reply\_to\_account\_id": "103641",
 "sensitive": false,
 // ...
 },
 // ...
]

```
## 401: Unauthorized

If the instance is in whitelist mode and the Authorization header is missing or invalid

Sample response for whitelist mode:

```
{
 "error": "This API requires an authenticated user"
}

```
Sample response before 2.7.0:

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```
## 410: Gone

Account is suspended (since 2.4.0 and until 3.3.0)

---

## Get account’s followers

```
GET /api/v1/accounts/:id/followers HTTP/1.1

```
Accounts which follow the given account, if network is not hidden by the account owner.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** Public  
**Version history:**  
0.0.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now  
4.0.0 - no longer requires an app token + `read:accounts`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

Sample output with limit=2.

```
[
 {
 "id": "1020382",
 "username": "atul13061987",
 "acct": "atul13061987",
 "display\_name": "",
 // ...
 },
 {
 "id": "1020381",
 "username": "linuxliner",
 "acct": "linuxliner",
 "display\_name": "",
 // ...
 }
]

```
Because Follow IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/accounts/14715/followers?limit=2&max\_id=7486869>; rel="next", <https://mastodon.example/api/v1/accounts/14715/followers?limit=2&since\_id=7489740>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header, or instance is in whitelist mode and your token is not authorized with a user

Sample response for whitelist mode:

```
{
 "error": "This API requires an authenticated user"
}

```
Sample response with missing header or invalid token:

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```
## 410: Gone

Account is suspended (since 2.4.0 and until 3.3.0)

---

## Get account’s following

```
GET /api/v1/accounts/:id/following HTTP/1.1

```
Accounts which the given account is following, if network is not hidden by the account owner.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** Public  
**Version history:**  
0.0.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now  
4.0.0 - no longer requires an app token + `read:accounts`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

Sample output with limit=2.

```
[
 {
 "id": "963410",
 "username": "gautambhatia",
 "acct": "gautambhatia",
 "display\_name": "Gautam Bhatia",
 // ...
 },
 {
 "id": "1007400",
 "username": "seafrog",
 "acct": "seafrog@glitterkitten.co.uk",
 "display\_name": "🐓🦃 Heck Partridge 🤠 🦆",
 // ...
]

```
Because Follow IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/accounts/1/followers?limit=2&max\_id=7628164>; rel="next", <https://mastodon.example/api/v1/accounts/1/followers?limit=2&since\_id=7628165>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header, or instance is in whitelist mode and your token is not authorized with a user

Sample response for whitelist mode:

```
{
 "error": "This API requires an authenticated user"
}

```
Sample response with missing header or invalid token:

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```
## 410: Gone

Account is suspended (since 2.4.0 and until 3.3.0)

---

## Get account’s featured tags

```
GET /api/v1/accounts/:id/featured\_tags HTTP/1.1

```
Tags featured by this account.

**Returns:** Array of [FeaturedTag](/entities/FeaturedTag/)  
**OAuth:** Public  
**Version history:**  
3.3.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "id": "627",
 "name": "nowplaying",
 "statuses\_count": 36,
 "last\_status\_at": "2019-11-15T07:14:43.524Z"
 }
]

```

---

## Get lists containing this account

```
GET /api/v1/accounts/:id/lists HTTP/1.1

```
User lists that you have added this account to.

**Returns:** Array of [List](/entities/List/)  
**OAuth:** User token + `read:lists`  
**Version history:**  
2.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

If the account is part of any lists, those entities will be returned. If the account is not part of any of your lists, then an empty array will be returned.

```
[
 {
 "id": "13694",
 "title": "dev"
 }
]

```

```
[]

```
## 401: Unauthorized

Invalid or missing Authorization header, or instance is in whitelist mode and your token is not authorized with a user

Sample response for whitelist mode:

```
{
 "error": "This API requires an authenticated user"
}

```
Sample response with missing header or invalid token:

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```
## 410: Gone

Account is suspended (since 2.4.0 and until 3.3.0)

## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Follow account

```
POST /api/v1/accounts/:id/follow HTTP/1.1

```
Follow the given account. Can also be used to update whether to show reblogs or enable notifications.

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:follows`  
**Version history:**  
0.0.0 - added  
3.3.0 - added `notify`  
3.5.0 - deprecated `follow` scope. now additionally accepts `write`  
4.0.0 - added `languages`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

reblogsBoolean. Receive this account’s reblogs in home timeline? Defaults to true.notifyBoolean. Receive notifications when this account posts a status? Defaults to false.languages[]Array of String (ISO 639-1 language two-letter code). Filter received statuses for these languages. If not provided, you will receive this account’s posts in all languages.## Response

## 200: OK

Successfully followed, or account was already followed

```
{
 "id": "3",
 "following": true,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 403: Forbidden

Trying to follow someone that you block or that blocks you

```
{
 "error": "This action is not allowed"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Unfollow account

```
POST /api/v1/accounts/:id/unfollow HTTP/1.1

```
Unfollow the given account.

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:follows`  
**Version history:**  
0.0.0 - added  
3.5.0 - deprecated `follow` scope. now additionally accepts `write`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Successfully unfollowed, or account was already not followed

```
{
 "id": "3",
 "following": false,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Remove account from followers

```
POST /api/v1/accounts/:id/remove\_from\_followers HTTP/1.1

```
Remove the given account from your followers.

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:follows`  
**Version history:**  
3.5.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Successfully removed from followers, or account was already not following you

```
{
 "id": "3",
 "following": false,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Block account

```
POST /api/v1/accounts/:id/block HTTP/1.1

```
Block the given account. Clients should filter statuses from this account if received (e.g. due to a boost in the Home timeline)

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:blocks`  
**Version history:**  
0.0.0 - added  
3.5.0 - deprecated `follow` scope. now additionally accepts `write`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Successfully blocked, or account was already blocked

```
{
 "id": "3",
 "following": false,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": true,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Unblock account

```
POST /api/v1/accounts/:id/unblock HTTP/1.1

```
Unblock the given account.

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:blocks`  
**Version history:**  
0.0.0 - added  
3.5.0 - deprecated `follow` scope. now additionally accepts `write`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Successfully unblocked, or account was already not blocked

```
{
 "id": "3",
 "following": false,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Mute account

```
POST /api/v1/accounts/:id/mute HTTP/1.1

```
Mute the given account. Clients should filter statuses and notifications from this account, if received (e.g. due to a boost in the Home timeline).

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:mutes`  
**Version history:**  
0.0.0 - added  
3.3.0 - added `duration`  
3.5.0 - deprecated `follow` scope. now additionally accepts `write`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

notificationsBoolean. Mute notifications in addition to statuses? Defaults to true.durationNumber. How long the mute should last, in seconds. Defaults to 0 (indefinite).## Response

## 200: OK

Successfully muted, or account was already muted. Note that you can call this API method again with notifications=false to update the relationship so that only statuses are muted.

```
{
 "id": "3",
 "following": false,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": false,
 "blocked\_by": false,
 "muting": true,
 "muting\_notifications": true,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Unmute account

```
POST /api/v1/accounts/:id/unmute HTTP/1.1

```
Unmute the given account.

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:mutes`  
**Version history:**  
0.0.0 - added  
3.5.0 - deprecated `follow` scope. now additionally accepts `write`

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Successfully unmuted, or account was already unmuted

```
{
 "id": "3",
 "following": false,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Feature account on your profile

```
POST /api/v1/accounts/:id/pin HTTP/1.1

```
Add the given account to the user’s featured profiles. (Featured profiles are currently shown on the user’s own public profile.)

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:accounts`  
**Version history:**  
2.5.0 - added  
4.0.0 - calling this method is now idempotent

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Successfully endorsed, or was already endorsing.

```
{
 "id": "1",
 "following": true,
 "showing\_reblogs": true,
 "notifying": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": true
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 403: Forbidden

Token is missing a required scope

```
{
 "error": "This action is outside the authorized scopes"
}

```
## 422: Unprocessable entity

You are not following this account

```
{
 "error": "Validation failed: You must be already following the person you want to endorse"
}

```
Alternatively, the token is not authorized with a user

```
{
 "error": "This method requires an authenticated user"
}

```
Alternatively (prior to 4.0), the account may already be endorsed

```
{
 "error": "Duplicate record"
}

```
## 500: Server error

Can sometimes be returned if the account already endorsed.

---

## Unfeature account from profile

```
POST /api/v1/accounts/:id/unpin HTTP/1.1

```
Remove the given account from the user’s featured profiles.

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User + `write:accounts`  
**Version history:**  
2.5.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Successfully unendorsed, or account was already not endorsed

```
{
 "id": "1",
 "following": true,
 "showing\_reblogs": true,
 "notifying": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Set private note on profile

```
POST /api/v1/accounts/:id/note HTTP/1.1

```
Sets a private note on a user.

**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User + `write:accounts`  
**Version history:**  
3.2.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

commentString. The comment to be set on that user. Provide an empty string or leave out this parameter to clear the currently set note.## Response

## 200: OK

Successfully updated profile note

```
{
 "id": "1",
 "following": true,
 "showing\_reblogs": true,
 "notifying": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false,
 "note": "this is a comment"
}

```
Successfully removed profile note

```
{
 "id": "1",
 "following": true,
 "showing\_reblogs": true,
 "notifying": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false,
 "note": ""
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Check relationships to other accounts

```
GET /api/v1/accounts/relationships HTTP/1.1

```
Find out whether a given account is followed, blocked, muted, etc.

**Returns:** Array of [Relationship](/entities/Relationship/)  
**OAuth:** User token + `read:follows`  
**Version history:**  
0.0.0 - added  
4.3.0 - added `with_suspended` parameter

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

id[]Array of String. Check relationships for the provided account IDs.with\_suspendedBoolean. Whether relationships should be returned for suspended users, defaults to false.## Response

## 200: OK

Sample call with `id[]=1&id[]=2`

```
[
 {
 "id": "1",
 "following": true,
 "showing\_reblogs": true,
 "notifying": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
 },
 {
 "id": "2",
 "following": false,
 "showing\_reblogs": false,
 "notifying": false,
 "followed\_by": false,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Find familiar followers

```
GET /api/v1/accounts/familiar\_followers HTTP/1.1

```
Obtain a list of all accounts that follow a given account, filtered for accounts you follow.

**Returns:** Array of [FamiliarFollowers](/entities/FamiliarFollowers/)  
**OAuth:** User token + `read:follows`  
**Version history:**  
3.5.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

id[]Array of String. Find familiar followers for the provided account IDs.## Response

## 200: OK

Sample call with `id[]=1&id[]=2`

```
[
 {
 "id":"1",
 "accounts":[
 {
 "id":"1087990",
 "username":"moss",
 "acct":"moss@goblin.camp",
 // ...
 },
 {
 "id":"1092723",
 "username":"vivianrose",
 "acct":"vivianrose",
 // ...
 },
 // ...
 ]
 },
 {
 "id":"2",
 "accounts":[]
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## Search for matching accounts

```
GET /api/v1/accounts/search HTTP/1.1

```
Search for matching accounts by username or display name.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `read:accounts`  
**Version history:**  
0.0.0 - added  
2.8.0 - add `limit`, `offset` and `following`

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

qrequired String. Search query for accounts.limitInteger. Maximum number of results. Defaults to 40 accounts. Max 80 accounts.offsetInteger. Skip the first n results.resolveBoolean. Attempt WebFinger lookup. Defaults to false. Use this when `q` is an exact address.followingBoolean. Limit the search to users you are following. Defaults to false.## Response

## 200: OK

Accounts matching “trwnh” in username or display name

```
[
 {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 {
 "id": "418714",
 "username": "trwnh",
 "acct": "trwnh@pixelfed.social",
 "display\_name": "Abdullah Tarawneh",
 // ...
 },
 {
 "id": "419674",
 "username": "trwnh",
 "acct": "trwnh@write.as",
 "display\_name": "trwnh",
 // ...
 },
 // ...
]

```
## 503: Service Unavailable

resolve=true, but the domain part of the user@domain address is not a currently live website

```
{
 "error": "Remote data could not be fetched"
}

```

---

## Lookup account ID from Webfinger address

```
GET /api/v1/accounts/lookup HTTP/1.1

```
Quickly lookup a username to see if it is available, skipping WebFinger resolution.

**Returns:** [Account](/entities/Account/)  
**OAuth:** Public  
**Version history:**  
3.4.0 - added

## Request

## Query parameters

acctrequired String. The username or Webfinger address to lookup.## Response

## 200: OK

Sample call with `?acct=trwnh`

```
{
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 "locked": false,
 // ...
}

```
Sample call with `?acct=trwnh@pixelfed.social`

```
{
 "id": "418714",
 "username": "trwnh",
 "acct": "trwnh@pixelfed.social",
 "display\_name": "Abdullah Tarawneh",
 "locked": false,
 // ...
}

```
## 404: Not found

Username or address does not map to an account

```
{
 "error": "Record not found"
}

```

---

## Identity proofs deprecated

```
GET /api/v1/accounts/:id/identity\_proofs HTTP/1.1

```
**Returns:** Array of [IdentityProof](/entities/IdentityProof/)  
**OAuth:** User token  
**Version history:**  
2.8.0 - added  
3.5.0 - deprecated. now returns an empty array.

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Response

## 200: OK

```
[
 {
 "provider": "Keybase",
 "provider\_username": "gargron",
 "updated\_at": "2019-07-21T20:14:39.596Z",
 "proof\_url": "https://keybase.io/gargron/sigchain#5cfc20c7018f2beefb42a68836da59a792e55daa4d118498c9b1898de7e845690f",
 "profile\_url": "https://keybase.io/gargron"
 }
]

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```
## 410: Gone

Account is suspended (since 2.4.0 and until 3.3.0)

## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```

---

## See also

[app/controllers/api/v1/accounts\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts_controller.rb)[app/controllers/api/v1/accounts/credentials\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/credentials_controller.rb)[app/controllers/api/v1/accounts/familiar\_followers\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/familiar_followers_controller.rb)[app/controllers/api/v1/accounts/featured\_tags\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/featured_tags_controller.rb)[app/controllers/api/v1/accounts/follower\_accounts\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/follower_accounts_controller.rb)[app/controllers/api/v1/accounts/following\_accounts\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/following_accounts_controller.rb)[app/controllers/api/v1/accounts/identity\_proofs\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/identity_proofs_controller.rb)[app/controllers/api/v1/accounts/lists\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/lists_controller.rb)[app/controllers/api/v1/accounts/lookup\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/lookup_controller.rb)[app/controllers/api/v1/accounts/notes\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/notes_controller.rb)[app/controllers/api/v1/accounts/pins\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/pins_controller.rb)[app/controllers/api/v1/accounts/relationships\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/relationships_controller.rb)[app/controllers/api/v1/accounts/search\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/search_controller.rb)[app/controllers/api/v1/accounts/statuses\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/accounts/statuses_controller.rb)[app/models/account\_statuses\_filter.rb](https://github.com/mastodon/mastodon/blob/main/app/models/account_statuses_filter.rb)Last updated March 17, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/accounts.md)

---


# profile API methods

Source: https://docs.joinmastodon.org/methods/profile/

# profile API methods

Methods concerning profiles.

## Delete profile avatar

```
DELETE /api/v1/profile/avatar HTTP/1.1

```
**Returns:** [CredentialAccount](/entities/Account/#CredentialAccount)  
**OAuth:** User token + `write:accounts`  
**Version history:**  
4.2.0 - added

Deletes the avatar associated with the user’s profile.

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Path parameters

## Response

## 200: OK

The avatar was successfully deleted from the user’s profile. If there were no avatar associated with the profile, the response will still indicate a successful deletion.

```
{
 "id": "110357222516183152",
 "username": "rob",
 "acct": "rob",
 "display\_name": "",
 "locked": false,
 "bot": false,
 "discoverable": false,
 "group": false,
 "created\_at": "2023-05-12T00:00:00.000Z",
 "note": "",
 "url": "http://localhost:3000/@rob",
 "uri": "http://localhost:3000/users/rob",
 "avatar": "http://localhost:3000/avatars/original/missing.png",
 "avatar\_static": "http://localhost:3000/avatars/original/missing.png",
 "header": "http://localhost:3000/system/accounts/headers/110/357/222/516/183/152/original/0cd99648c23005ed.png",
 "header\_static": "http://localhost:3000/system/accounts/headers/110/357/222/516/183/152/original/0cd99648c23005ed.png",
 "followers\_count": 14,
 "following\_count": 2,
 "statuses\_count": 10,
 "last\_status\_at": "2023-06-26",
 "noindex": false,
 "source": {
 "privacy": "public",
 "sensitive": false,
 "language": null,
 "note": "",
 "fields": [],
 "follow\_requests\_count": 0
 },
 "emojis": [],
 "roles": [],
 "fields": [],
 "role": {
 "id": "-99",
 "name": "",
 "permissions": "65536",
 "color": "",
 "highlighted": false
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## Delete profile header

```
DELETE /api/v1/profile/header HTTP/1.1

```
**Returns:** [CredentialAccount](/entities/Account/#CredentialAccount)  
**OAuth:** User token + `write:accounts`  
**Version history:**  
4.2.0 - added

Deletes the header image associated with the user’s profile.

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Path parameters

## Response

## 200: OK

The header was successfully deleted from the user’s profile. If there were no header associated with the profile, the response will still indicate a successful deletion.

```
{
 "id": "110357222516183152",
 "username": "rob",
 "acct": "rob",
 "display\_name": "",
 "locked": false,
 "bot": false,
 "discoverable": false,
 "group": false,
 "created\_at": "2023-05-12T00:00:00.000Z",
 "note": "",
 "url": "http://localhost:3000/@rob",
 "uri": "http://localhost:3000/users/rob",
 "avatar": "http://localhost:3000/avatars/original/missing.png",
 "avatar\_static": "http://localhost:3000/avatars/original/missing.png",
 "header": "http://localhost:3000/headers/original/missing.png",
 "header\_static": "http://localhost:3000/headers/original/missing.png",
 "followers\_count": 14,
 "following\_count": 2,
 "statuses\_count": 10,
 "last\_status\_at": "2023-06-26",
 "noindex": false,
 "source": {
 "privacy": "public",
 "sensitive": false,
 "language": null,
 "note": "",
 "fields": [],
 "follow\_requests\_count": 0
 },
 "emojis": [],
 "roles": [],
 "fields": [],
 "role": {
 "id": "-99",
 "name": "",
 "permissions": "65536",
 "color": "",
 "highlighted": false
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/profile.md)

---


# statuses API methods

Source: https://docs.joinmastodon.org/methods/statuses/

# statuses API methods

Publish, interact, and view information about statuses.

## Post a new status

```
POST /api/v1/statuses HTTP/1.1

```
Publish a status with the given parameters.

**Returns:** [Status](/entities/Status/). When `scheduled_at` is present, [ScheduledStatus](/entities/ScheduledStatus/) is returned instead.  
**OAuth:** User + `write:statuses`  
**Version history:**  
0.0.0 - added  
2.7.0 - `scheduled_at` added  
2.8.0 - `poll` added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.Idempotency-KeyProvide this header with any arbitrary string to prevent duplicate submissions of the same status. Consider using a hash or UUID generated client-side. Idempotency keys are stored for up to 1 hour.## Form data parameters

statusrequired String. The text content of the status. If `media_ids` is provided, this becomes optional. Attaching a `poll` is optional while `status` is provided.media\_ids[]required Array of String. Include Attachment IDs to be attached as media. If provided, `status` becomes optional, and `poll` cannot be used.poll[options][]required Array of String. Possible answers to the poll. If provided, `media_ids` cannot be used, and `poll[expires_in]` must be provided.poll[expires\_in]required Integer. Duration that the poll should be open, in seconds. If provided, `media_ids` cannot be used, and `poll[options]` must be provided.poll[multiple]Boolean. Allow multiple choices? Defaults to false.poll[hide\_totals]Boolean. Hide vote counts until the poll ends? Defaults to false.in\_reply\_to\_idString. ID of the status being replied to, if status is a reply.sensitiveBoolean. Mark status and attached media as sensitive? Defaults to false.spoiler\_textString. Text to be shown as a warning or subject before the actual content. Statuses are generally collapsed behind this field.visibilityString. Sets the visibility of the posted status to `public`, `unlisted`, `private`, `direct`.languageString. ISO 639 language code for this status.scheduled\_atString. [Datetime](/api/datetime-format/#datetime) at which to schedule a status. Providing this parameter will cause ScheduledStatus to be returned instead of Status. Must be at least 5 minutes in the future.## Response

## 200: OK

Status will be posted with chosen parameters:

```
{
 "id": "103254962155278888",
 "created\_at": "2019-12-05T11:34:47.196Z",
 // ...
 "content": "<p>test content</p>",
 // ...
 "application": {
 "name": "test app",
 "website": null
 },
 // ...
}

```
If scheduled\_at is provided, then a ScheduledStatus will be returned instead:

```
{
 "id": "3221",
 "scheduled\_at": "2019-12-05T12:33:01.000Z",
 "params": {
 "text": "test content",
 "media\_ids": null,
 "sensitive": null,
 "spoiler\_text": null,
 "visibility": null,
 "scheduled\_at": null,
 "poll": null,
 "idempotency": null,
 "in\_reply\_to\_id": null,
 "application\_id": 596551
 },
 "media\_attachments": []
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

```
{
 "error": "Validation failed: Text can't be blank"
}

```

---

## View a single status

```
GET /api/v1/statuses/:id HTTP/1.1

```
Obtain information about a status.

**Returns:** [Status](/entities/Status/)  
**OAuth:** Public for public statuses, user token + `read:statuses` for private statuses  
**Version history:**  
0.0.0 - added  
2.7.0 - public statuses no longer require token

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "1",
 "created\_at": "2016-03-16T14:44:31.580Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 "language": "en",
 "uri": "https://mastodon.social/users/Gargron/statuses/1",
 "url": "https://mastodon.social/@Gargron/1",
 "replies\_count": 7,
 "reblogs\_count": 98,
 "favourites\_count": 112,
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "content": "<p>Hello world</p>",
 "reblog": null,
 "application": null,
 "account": {
 "id": "1",
 "username": "Gargron",
 "acct": "Gargron",
 "display\_name": "Eugen",
 "locked": false,
 "bot": false,
 "created\_at": "2016-03-16T14:34:26.392Z",
 "note": "<p>Developer of Mastodon and administrator of mastodon.social. I post service announcements, development updates, and personal stuff.</p>",
 "url": "https://mastodon.social/@Gargron",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "header": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "followers\_count": 320472,
 "following\_count": 453,
 "statuses\_count": 61163,
 "last\_status\_at": "2019-12-05T03:03:02.595Z",
 "emojis": [],
 "fields": [
 {
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span></a>",
 "verified\_at": null
 },
 {
 "name": "Homepage",
 "value": "<a href=\"https://zeonfederated.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">zeonfederated.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-07-15T18:29:57.191+00:00"
 }
 ]
 },
 "media\_attachments": [],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": null,
 "poll": null
}

```
## 401: Unauthorized

Instance is in authorized-fetch mode.

```
{
 "error": "This API requires an authenticated user"
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## View multiple statuses

```
GET /api/v1/statuses HTTP/1.1

```
Obtain information about multiple statuses.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** Public for public statuses, user token + `read:statuses` for private statuses  
**Version history:**  
4.3.0 - added

## Request

## Query parameters

id[]Array of String. The IDs of the Statuses in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

[Status](/entities/Status/) records for the requested statuses will be returned. There can be fewer records than requested if the requested statuses do not exist or cannot be accessed given the current credentials.
Sample call with `id[]=1&id[]=2` when no status with `id=2` exists:

```
[
 {
 "id": "1",
 "created\_at": "2016-03-16T14:44:31.580Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 "language": "en",
 "uri": "https://mastodon.social/users/Gargron/statuses/1",
 "url": "https://mastodon.social/@Gargron/1",
 "replies\_count": 7,
 "reblogs\_count": 98,
 "favourites\_count": 112,
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "content": "<p>Hello world</p>",
 "reblog": null,
 "application": null,
 "account": {
 "id": "1",
 "username": "Gargron",
 "acct": "Gargron",
 "display\_name": "Eugen",
 "locked": false,
 "bot": false,
 "created\_at": "2016-03-16T14:34:26.392Z",
 "note": "<p>Developer of Mastodon and administrator of mastodon.social. I post service announcements, development updates, and personal stuff.</p>",
 "url": "https://mastodon.social/@Gargron",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "header": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "followers\_count": 320472,
 "following\_count": 453,
 "statuses\_count": 61163,
 "last\_status\_at": "2019-12-05T03:03:02.595Z",
 "emojis": [],
 "fields": [
 {
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span></a>",
 "verified\_at": null
 },
 {
 "name": "Homepage",
 "value": "<a href=\"https://zeonfederated.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">zeonfederated.com</span><span class=\"invisible\"></span></a>",
 "verified\_at": "2019-07-15T18:29:57.191+00:00"
 }
 ]
 },
 "media\_attachments": [],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": null,
 "poll": null
 }
]

```
## 401: Unauthorized

Instance is in authorized-fetch mode.

```
{
 "error": "This API requires an authenticated user"
}

```

---

## Delete a status

```
DELETE /api/v1/statuses/:id HTTP/1.1

```
Delete one of your own statuses.

**Returns:** [Status](/entities/Status/) with source `text` and `poll` or `media_attachments`  
**OAuth:** User token + `write:statuses`  
**Version history:**  
0.0.0 - added  
2.9.0 - return source properties, for use with delete and redraft  
4.4.0 (`mastodon` [API version](/entities/Instance/#api-versions) 4) - added `delete_media` optional parameter

## Request

## Query parameters

delete\_mediaBoolean. Whether to immediately delete the post’s media attachments. If omitted or `false`, media attachments may be kept for approximately 24 hours so they can be re-used in a new post.## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Note the special properties `text` and `poll` or `media_attachments` which may be used to repost the status, e.g. in case of delete-and-redraft functionality. With [POST /api/v1/statuses](/methods/statuses/#create), use `text` as the value for `status` parameter, `media_attachments[n]["id"]` for the `media_ids` array parameter, and `poll` properties with the corresponding parameters (e.g. `poll[multiple]` and `poll[options]`, with a new `poll[expires_in]` and `poll[hide_totals]` per user input.

Example of deleting a media post:

```
{
 "id": "103254193998341330",
 "created\_at": "2019-12-05T08:19:26.052Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 "language": "en",
 "uri": "https://mastodon.social/users/trwnh/statuses/103254193998341330",
 "url": "https://mastodon.social/@trwnh/103254193998341330",
 "replies\_count": 0,
 "reblogs\_count": 0,
 "favourites\_count": 0,
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 "text": "test",
 "reblog": null,
 "application": {
 "name": "Web",
 "website": null
 },
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [
 {
 "id": "22345792",
 "type": "image",
 "url": "https://files.mastodon.social/media\_attachments/files/022/345/792/original/57859aede991da25.jpeg",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/345/792/small/57859aede991da25.jpeg",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/2N4uvkuUtPVrkZGysms",
 "meta": {
 "original": {
 "width": 640,
 "height": 480,
 "size": "640x480",
 "aspect": 1.3333333333333333
 },
 "small": {
 "width": 461,
 "height": 346,
 "size": "461x346",
 "aspect": 1.3323699421965318
 },
 "focus": {
 "x": -0.27,
 "y": 0.51
 }
 },
 "description": "test media description",
 "blurhash": "UFBWY:8\_0Jxv4mx]t8t64.%M-:IUWGWAt6M}"
 }
 ],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": null,
 "poll": null
}

```
Example of deleting a poll:

```
{
 "id": "103254222827484720",
 "created\_at": "2019-12-05T08:26:45.958Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 "language": "en",
 "uri": "https://mastodon.social/users/trwnh/statuses/103254222827484720",
 "url": "https://mastodon.social/@trwnh/103254222827484720",
 "replies\_count": 0,
 "reblogs\_count": 0,
 "favourites\_count": 0,
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 "text": "test",
 "reblog": null,
 "application": {
 "name": "Web",
 "website": null
 },
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": null,
 "poll": {
 "id": "34858",
 "expires\_at": "2019-12-06T08:26:45.945Z",
 "expired": false,
 "multiple": false,
 "votes\_count": 1,
 "voters\_count": 1,
 "voted": true,
 "own\_votes": [],
 "options": [
 {
 "title": "test 1",
 "votes\_count": 1
 },
 {
 "title": "test 2",
 "votes\_count": 0
 }
 ],
 "emojis": []
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## Get parent and child statuses in context

```
GET /api/v1/statuses/:id/context HTTP/1.1

```
View statuses above and below this status in the thread.

**Returns:** [Context](/entities/Context/)  
**OAuth:** Public for public statuses limited to 40 ancestors and 60 descendants with a maximum depth of 20. User token + `read:statuses` for up to 4,096 ancestors, 4,096 descendants, unlimited depth, and private statuses.  
**Version history:**  
0.0.0 - added
4.0.0 - limit unauthenticated requests

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "ancestors": [
 {
 "id": "103188938570975982",
 "created\_at": "2019-11-23T19:44:00.124Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 // ...
 },
 {
 "id": "103188971072973252",
 "created\_at": "2019-11-23T19:52:23.398Z",
 "in\_reply\_to\_id": "103188938570975982",
 "in\_reply\_to\_account\_id": "634458",
 // ...
 },
 {
 "id": "103188982235527758",
 "created\_at": "2019-11-23T19:55:08.208Z",
 "in\_reply\_to\_id": "103188971072973252",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 }
 ],
 "descendants": [
 {
 "id": "103189026958574542",
 "created\_at": "2019-11-23T20:06:36.011Z",
 "in\_reply\_to\_id": "103189005915505698",
 "in\_reply\_to\_account\_id": "634458",
 // ...
 }
 ]
}

```
## 404: Not found

Status is private or does not exist

```
{
 "error": "Record not found"
}

```

---

## Translate a status

```
POST /api/v1/statuses/:id/translate HTTP/1.1

```
Translate the status content into some language.

**Returns:** [Translation](/entities/Translation/)  
**OAuth:** App token + `read:statuses`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Form data parameters

langString (ISO 639 language code). The status content will be translated into this language. Defaults to the user’s current locale.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Translating a status in Spanish with content warning and media into English

```
{
 "content": "<p>Hello world</p>",
 "spoiler\_text": "Greatings ahead",
 "media\_attachments": [
 {
 "id": 22345792,
 "description": "Status author waving at the camera"
 }
 ],
 "poll": null,
 "detected\_source\_language": "es",
 "provider": "DeepL.com"
}

```
Translating a status with poll into English

```
{
 "content": "<p>Should I stay or should I go?</p>",
 "spoiler\_text": null,
 "media\_attachments": [],
 "poll": [
 {
 "id": 34858,
 "options": [
 {
 "title": "Stay"
 },
 {
 "title": "Go"
 }
 ]
 }
 ],
 "detected\_source\_language": "ja",
 "provider": "DeepL.com"
}

```
## 404: Not found

Status is private or does not exist

```
{
 "error": "Record not found"
}

```
## 503: Service unavailable

The translation request failed

```
{
 "error": "Service Unavailable"
}

```

---

## See who boosted a status

```
GET /api/v1/statuses/:id/reblogged\_by HTTP/1.1

```
View who boosted a given status.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** Public for public statuses. User token + `read:statuses` for private statuses.
**Version history:**  
0.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

A list of accounts that boosted the status

```
[
 {
 "id": "711345",
 "username": "Norman\_Doors",
 "acct": "Norman\_Doors@witches.live",
 // ...
 },
 // ...
]

```
Because reblogged Status IDs are generally not known ahead of time, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/statuses/109404970108594430/reblogged\_by?limit=2&max\_id=109406336446186031>; rel="next", <https://mastodon.example/api/v1/statuses/109404970108594430/reblogged\_by?limit=2&since\_id=109408462939099398>; rel="prev"

```
## 404: Not found

Status does not exist or is private

```
{
 "error": "Record not found"
}

```

---

## See who favourited a status

```
GET /api/v1/statuses/:id/favourited\_by HTTP/1.1

```
View who favourited a given status.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** Public for public statuses. User token + `read:statuses` for private statuses.  
**Version history:**  
0.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

A list of accounts who favourited the status

```
[
 {
 "id": "828600",
 "username": "fructose\_dealer",
 "acct": "fructose\_dealer@radical.town",
 // ...
 },
 // ...
]

```
Because Favourite IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/statuses/109419880690343548/favourited\_by?limit=1&max\_id=53286827>; rel="next", <https://mastodon.example/api/v1/statuses/109419880690343548/favourited\_by?limit=1&since\_id=53286827>; rel="prev"

```
## 404: Not found

Status does not exist or is private

```
{
 "error": "Record not found"
}

```

---

## Favourite a status

```
POST /api/v1/statuses/:id/favourite HTTP/1.1

```
Add a status to your favourites list.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:favourites`  
**Version history:**  
0.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status favourited or was already favourited

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": true,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private

```
{
 "error": "Record not found"
}

```

---

## Undo favourite of a status

```
POST /api/v1/statuses/:id/unfavourite HTTP/1.1

```
Remove a status from your favourites list.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:favourites`  
**Version history:**  
0.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status unfavourited or was already not favourited

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private

```
{
 "error": "Record not found"
}

```

---

## Boost a status

```
POST /api/v1/statuses/:id/reblog HTTP/1.1

```
Reshare a status on your own profile.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:statuses`  
**Version history:**  
0.0.0 - added  
2.8.0 - add `visibility` parameter

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

visibilityString. Any visibility except `limited` or `direct` (i.e. `public`, `unlisted`, `private`). Defaults to public. Currently unused in UI.## Response

## 200: OK

Status has been reblogged. Note that the top-level id has changed. The id of the boosted status is now inside the `reblog` property. The top-level id is the id of the reblog itself. Also note that reblogs cannot be pinned.

```
{
 "id": "103254401326800919",
 "created\_at": "2019-12-05T09:12:09.625Z",
 // ...
 "favourited": false,
 "reblogged": true,
 "muted": false,
 "bookmarked": false,
 // ...
 "reblog": {
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": true,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 // ...
 },
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private

```
{
 "error": "Record not found"
}

```

---

## Undo boost of a status

```
POST /api/v1/statuses/:id/unreblog HTTP/1.1

```
Undo a reshare of a status.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:statuses`  
**Version history:**  
0.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status unboosted or was already not boosted

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private

```
{
 "error": "Record not found"
}

```

---

## Bookmark a status

```
POST /api/v1/statuses/:id/bookmark HTTP/1.1

```
Privately bookmark a status.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:bookmarks`  
**Version history:**  
3.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status bookmarked or was already bookmarked

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": true,
 "pinned": false,
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Undo bookmark of a status

```
POST /api/v1/statuses/:id/unbookmark HTTP/1.1

```
Remove a status from your private bookmarks.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:bookmarks`  
**Version history:**  
3.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status was unbookmarked or was already not bookmarked

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## Mute a conversation

```
POST /api/v1/statuses/:id/mute HTTP/1.1

```
Do not receive notifications for the thread that this status is part of. Must be a thread in which you are a participant.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:mutes`  
**Version history:**  
1.4.2 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status’s conversation muted, or was already muted

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": true,
 "bookmarked": false,
 "pinned": false,
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## Unmute a conversation

```
POST /api/v1/statuses/:id/unmute HTTP/1.1

```
Start receiving notifications again for the thread that this status is part of.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:mutes`  
**Version history:**  
1.4.2 - added

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status’s conversation unmuted, or was already unmuted

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## Pin status to profile

```
POST /api/v1/statuses/:id/pin HTTP/1.1

```
Feature one of your own public statuses at the top of your profile.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:accounts`  
**Version history:**  
1.6.0 - added  
3.5.0 - you can now pin private posts

## Request

## Path parameters

:idrequired String. The local ID of the Status in the database. The status should be authored by the authorized account.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status pinned. Note the status is not a reblog and its authoring account is your own.

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": true,
 // ...
 "reblog": null,
 // ...
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 // ...
 },
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

Status is not owned by you:

```
{
 "error": "Validation failed: Someone else's post cannot be pinned"
}

```
Prior to 3.5.0, you could not pin one of your private statuses because private statuses could not be fetched from remote sites, and must have been delivered. (3.5.0 added a mechanism to fetch statuses on behalf of an account.)

```
{
 "error": "Validation failed: Non-public toot cannot be pinned"
}

```

---

## Unpin status from profile

```
POST /api/v1/statuses/:id/unpin HTTP/1.1

```
Unfeature a status from the top of your profile.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:accounts`  
**Version history:**  
1.6.0 - added

## Request

## Path parameters

:idrequired String. The local ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Status unpinned, or was already not pinned

```
{
 "id": "99734435964706331",
 "created\_at": "2018-03-23T17:38:40.700Z",
 // ...
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 // ...
 "reblog": null,
 // ...
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 // ...
 },
 // ...
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## Edit a status

```
PUT /api/v1/statuses/:id HTTP/1.1

```
Edit a given status to change its text, sensitivity, media attachments, or poll. Note that editing a poll’s options will reset the votes.

**Returns:** [Status](/entities/Status/)  
**OAuth:** User token + `write:statuses`  
**Version history:**  
3.5.0 - added  
4.0.0 - add `language`

## Request

## Path parameters

:idrequired String. The ID of the Status in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

statusString. The plain text content of the status.spoiler\_textString. The plain text subject or content warning of the status.sensitiveBoolean. Whether the status should be marked as sensitive.languageString. ISO 639 language code for the status.media\_ids[]Array of String. Include Attachment IDs to be attached as media. If provided, `status` becomes optional, and `poll` cannot be used.media\_attributes[][]Array of String. Each array includes id, description, and focus.poll[options][]Array of String. Possible answers to the poll. If provided, `media_ids` cannot be used, and `poll[expires_in]` must be provided.poll[expires\_in]Integer. Duration that the poll should be open, in seconds. If provided, `media_ids` cannot be used, and `poll[options]` must be provided.poll[multiple]Boolean. Allow multiple choices? Defaults to false.poll[hide\_totals]Boolean. Hide vote counts until the poll ends? Defaults to false.## Response

## 200: OK

Status has been successfully edited.

```
{
 "id": "108942703571991143",
 "created\_at": "2022-09-04T23:22:13.704Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 "language": "en",
 "uri": "https://mastodon.social/users/trwnh/statuses/108942703571991143",
 "url": "https://mastodon.social/@trwnh/108942703571991143",
 "replies\_count": 3,
 "reblogs\_count": 1,
 "favourites\_count": 6,
 "edited\_at": "2022-09-05T00:33:20.309Z",
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "pinned": false,
 "content": "<p>this is a status that has been edited multiple times to change the text, add a poll, and change poll options.</p>",
 "filtered": [],
 "reblog": null,
 "application": {
 "name": "SubwayTooter",
 "website": null
 },
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": null,
 "poll": null
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist, is private, or is not owned by you.

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

```
{
 "error": "Validation failed: Text can't be blank"
}

```

---

## View edit history of a status

```
GET /api/v1/statuses/:id/history HTTP/1.1

```
Get all known versions of a status, including the initial and current states.

**Returns:** Array of [StatusEdit](/entities/StatusEdit/)  
**OAuth:** Public for public statuses, user token + `read:statuses` for private statuses  
**Version history:**  
3.5.0 - added

## Request

## Path parameters

:idrequired String. The local ID of the Status in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "content": "<p>this is a status that will be edited</p>",
 "spoiler\_text": "",
 "sensitive": false,
 "created\_at": "2022-09-04T23:22:13.704Z",
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "emojis": []
 },
 {
 "content": "<p>this is a status that has been edited</p>",
 "spoiler\_text": "",
 "sensitive": false,
 "created\_at": "2022-09-04T23:22:42.555Z",
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "emojis": []
 },
 {
 "content": "<p>this is a status that has been edited twice</p>",
 "spoiler\_text": "",
 "sensitive": false,
 "created\_at": "2022-09-04T23:22:55.956Z",
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "emojis": []
 },
 {
 "content": "<p>this is a status that has been edited three times. this time a poll has been added.</p>",
 "spoiler\_text": "",
 "sensitive": false,
 "created\_at": "2022-09-05T00:01:48.160Z",
 "poll": {
 "options": [
 {
 "title": "cool"
 },
 {
 "title": "uncool"
 },
 {
 "title": "spiderman"
 }
 ]
 },
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "emojis": []
 },
 {
 "content": "<p>this is a status that has been edited three times. this time a poll has been added.</p>",
 "spoiler\_text": "",
 "sensitive": false,
 "created\_at": "2022-09-05T00:03:32.480Z",
 "poll": {
 "options": [
 {
 "title": "cool"
 },
 {
 "title": "uncool"
 },
 {
 "title": "spiderman (this option has been changed)"
 }
 ]
 },
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "emojis": []
 }
]

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## View status source

```
GET /api/v1/statuses/:id/source HTTP/1.1

```
Obtain the source properties for a status so that it can be edited.

**Returns:** [StatusSource](/entities/StatusSource/)  
**OAuth:** App token + `read:statuses`  
**Version history:**  
3.5.0 - added

## Request

## Path parameters

:idrequired String. The local ID of the Status in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "108942703571991143",
 "text": "this is a status that will be edited",
 "spoiler\_text": ""
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## Fetch preview card deprecated

```
GET /api/v1/statuses/:id/card HTTP/1.1

```
**Returns:** [PreviewCard](/entities/PreviewCard/)  
**OAuth:** Public for public statuses, user token + `read:statuses` for private statuses  
**Version history:**  
0.0.0 - added  
2.6.0 - deprecated in favor of card property inlined on Status entity  
3.0.0 - removed

## Request

## Path parameters

:idrequired String. The local ID of the Status in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "url": "https://www.youtube.com/watch?v=OMv\_EPMED8Y",
 "title": "♪ Brand New Friend (Christmas Song!)",
 "description": "",
 "type": "video",
 "author\_name": "YOGSCAST Lewis & Simon",
 "author\_url": "https://www.youtube.com/user/BlueXephos",
 "provider\_name": "YouTube",
 "provider\_url": "https://www.youtube.com/",
 "html": "<iframe width=\"480\" height=\"270\" src=\"https://www.youtube.com/embed/OMv\_EPMED8Y?feature=oembed\" frameborder=\"0\" allowfullscreen=\"\"></iframe>",
 "width": 480,
 "height": 270,
 "image": "https://files.mastodon.social/preview\_cards/images/014/179/145/original/9cf4b7cf5567b569.jpeg",
 "embed\_url": ""
}

```
## 404: Not found

Status does not exist or is private.

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/statuses\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses_controller.rb)[app/controllers/api/v1/statuses/bookmarks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/bookmarks_controller.rb)[app/controllers/api/v1/statuses/favourited\_by\_accounts\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/favourited_by_accounts_controller.rb)[app/controllers/api/v1/statuses/favourites\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/favourites_controller.rb)[app/controllers/api/v1/statuses/histories\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/histories_controller.rb)[app/controllers/api/v1/statuses/mutes\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/mutes_controller.rb)[app/controllers/api/v1/statuses/pins\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/pins_controller.rb)[app/controllers/api/v1/statuses/reblogged\_by\_accounts\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/reblogged_by_accounts_controller.rb)[app/controllers/api/v1/statuses/reblogs\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/reblogs_controller.rb)[app/controllers/api/v1/statuses/sources\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/statuses/sources_controller.rb)Last updated March 4, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/statuses.md)

---


# timelines API methods

Source: https://docs.joinmastodon.org/methods/timelines/

# timelines API methods

Read and view timelines of statuses.

## View public timeline

```
GET /api/v1/timelines/public HTTP/1.1

```
View public statuses.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** Public. Requires app token + `read:statuses` if the instance has disabled public preview.  
**Version history:**  
0.0.0 - added  
2.3.0 - added `only_media`  
2.6.0 - add `min_id`  
3.0.0 - auth is required if public preview is disabled  
3.1.4 - added `remote`  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

localBoolean. Show only local statuses? Defaults to false.remoteBoolean. Show only remote statuses? Defaults to false.only\_mediaBoolean. Show only statuses with media attached? Defaults to false.max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

Sample API call with limit=2

```
[
 {
 "id": "103206804533200177",
 "created\_at": "2019-11-26T23:27:31.000Z",
 // ...
 "visibility": "public",
 // ...
 },
 {
 "id": "103206804086086361",
 "created\_at": "2019-11-26T23:27:32.000Z",
 // ...
 "visibility": "public",
 // ...
 }
]

```

---

## View hashtag timeline

```
GET /api/v1/timelines/tag/:hashtag HTTP/1.1

```
View public statuses containing the given hashtag.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** Public. Requires app token + `read:statuses` if the instance has disabled public preview.  
**Version history:**  
0.0.0 - added  
2.3.0 - added `only_media`  
2.6.0 - add `min_id`  
2.7.0 - add `any[]`, `all[]`, `none[]` for additional tags  
3.0.0 - auth is required if public preview is disabled  
3.3.0 - both `min_id` and `max_id` can be used at the same time now. add `remote`

## Request

## Path parameters

:hashtagrequired String. The name of the hashtag (not including the # symbol).## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

any[]Array of String. Return statuses that contain any of these additional tags.all[]Array of String. Return statuses that contain all of these additional tags.none[]Array of String. Return statuses that contain none of these additional tags.localBoolean. Return only local statuses? Defaults to false.remoteBoolean. Return only remote statuses? Defaults to false.only\_mediaBoolean. Return only statuses with media attachments? Defaults to false.max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

Sample timeline for the hashtag #cats and limit=2

```
[
 {
 "id": "103206185588894565",
 "created\_at": "2019-11-26T20:50:15.866Z",
 // ...
 "visibility": "public",
 // ...
 "content": "<p><a href=\"https://mastodon.social/tags/cats\" class=\"mention hashtag\" rel=\"tag\">#<span>cats</span></a></p>",
 // ...
 "tags": [
 {
 "name": "cats",
 "url": "https://mastodon.social/tags/cats"
 }
 ],
 // ...
 },
 {
 "id": "103203659567597966",
 "created\_at": "2019-11-26T10:07:49.000Z",
 // ...
 "visibility": "public",
 // ...
 "content": "<p>Caught on the hop. 😺 </p><p><a href=\"https://chaos.social/tags/Qualit%C3%A4tskatzen\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>Qualitätskatzen</span></a> <a href=\"https://chaos.social/tags/cats\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>cats</span></a> <a href=\"https://chaos.social/tags/mastocats\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>mastocats</span></a> <a href=\"https://chaos.social/tags/catsofmastodon\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>catsofmastodon</span></a> <a href=\"https://chaos.social/tags/Greece\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>Greece</span></a> <a href=\"https://chaos.social/tags/Agistri\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>Agistri</span></a><br>(photo: <span class=\"h-card\"><a href=\"https://chaos.social/@kernpanik\" class=\"u-url mention\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>kernpanik</span></a></span> | license: CC BY-NC-SA 4.0)</p>",
 // ...
 "tags": [
 {
 "name": "qualitätskatzen",
 "url": "https://mastodon.social/tags/qualit%C3%A4tskatzen"
 },
 {
 "name": "cats",
 "url": "https://mastodon.social/tags/cats"
 },
 {
 "name": "mastocats",
 "url": "https://mastodon.social/tags/mastocats"
 },
 {
 "name": "catsofmastodon",
 "url": "https://mastodon.social/tags/catsofmastodon"
 },
 {
 "name": "greece",
 "url": "https://mastodon.social/tags/greece"
 },
 {
 "name": "agistri",
 "url": "https://mastodon.social/tags/agistri"
 }
 ],
 // ...
 }
]

```
## 404: Not found

Hashtag does not exist

```
{
 "error": "Record not found"
}

```

---

## View home timeline

```
GET /api/v1/timelines/home HTTP/1.1

```
View statuses from followed users and hashtags.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** User + `read:statuses`  
**Version history:**  
0.0.0 - added  
2.6.0 - add `min_id`  
3.3.0 - both `min_id` and `max_id` can be used at the same time now
4.0.0 - as users can now follow hashtags, statuses from non-followed users may appear in the timeline

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

Statuses in your home timeline will be returned

```
[
 {
 "id": "103206791453397862",
 "created\_at": "2019-11-26T23:24:13.113Z",
 // ...
 },
 // ...
]

```
## 206: Partial content

Home feed is regenerating

## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## View link timeline

```
GET /api/v1/timelines/link?url=:url HTTP/1.1

```
View public statuses containing a link to the specified currently-trending article. This only lists statuses from people who have opted in to discoverability features.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** Public. Requires app token + `read:statuses` if the instance has disabled public preview.  
**Version history:**  
4.3.0 - added

## Request

## Headers

AuthorizationProvide this header with `Bearer <user token>` to gain authorized access to this API method.## Query parameters

urlrequired String. The URL of the trending article.max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

## 404: Not found

The provided URL is not currently trending.

```
{
 "error": "Record not found"
}

```

---

## View list timeline

```
GET /api/v1/timelines/list/:list\_id HTTP/1.1

```
View statuses in the given list timeline.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** User token + `read:lists`  
**Version history:**  
2.1.0 - added  
2.6.0 - add `min_id`  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Path parameters

:list\_idrequired String. Local ID of the List in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

Statuses in this list will be returned.

```
[
 {
 "id": "103206791453397862",
 "created\_at": "2019-11-26T23:24:13.113Z",
 // ...
 },
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

List is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## View direct timeline deprecated

```
GET /api/v1/timelines/direct HTTP/1.1

```
View statuses with a “direct” privacy, from your account or in your notifications.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** User token + `read:statuses`  
**Version history:**  
x.x.x - added  
2.6.0 - add `min_id`. deprecated in favor of [Conversations API](/methods/conversations/)  
3.0.0 - removed

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

Statuses with direct visibility, authored by you or mentioning you. Statuses are not grouped by conversation, but are returned in chronological order.

```
[
 {
 "id": "103206185588894565",
 "created\_at": "2019-11-26T20:50:15.866Z",
 // ...
 "visibility": "direct",
 // ...
 },
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[app/controllers/api/v1/timelines/home\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/timelines/home_controller.rb)[app/controllers/api/v1/timelines/list\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/timelines/list_controller.rb)[app/controllers/api/v1/timelines/public\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/timelines/public_controller.rb)[app/controllers/api/v1/timelines/tag\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/timelines/tag_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/timelines.md)

---


# Grouped notifications API methods

Source: https://docs.joinmastodon.org/methods/grouped_notifications/

# Grouped notifications API methods

Receive grouped notifications for activity on your account or statuses.

This page is about grouped notifications, which we implemented server-side so that:

* grouping is consistent across clients
* clients do not run into the issue of going through entire pages that do not contribute to any new group; instead, notifications are already deduplicated server-side

The API shape is a bit different from the non-grouped notifications, because large notification groups usually tend to involve the same accounts, and moving accounts to a root key can avoid a lot of duplication, resulting in less server-side work and smaller network payloads.

## Get all grouped notifications

```
GET /api/v2/notifications HTTP/1.1

```
Return grouped notifications concerning the user. This API returns Link headers containing links to the next/previous page. However, the links can also be constructed dynamically using query params and `id` values.

Notifications of type `favourite`, `follow`, `reblog` or `admin.sign_up` with the same type and the same target made in a similar timeframe are given a same `group_key` by the server, and querying this endpoint will return aggregated notifications, with only one object per `group_key`. Other notification types may be grouped in the future. The `grouped_types` parameter should be used by the client to explictely list the types it supports showing grouped notifications for.

Types to filter include:

* `mention` = Someone mentioned you in their status
* `status` = Someone you enabled notifications for has posted a status
* `reblog` = Someone boosted one of your statuses
* `follow` = Someone followed you
* `follow_request` = Someone requested to follow you
* `favourite` = Someone favourited one of your statuses
* `poll` = A poll you have voted in or created has ended
* `update` = A status you boosted with has been edited
* `admin.sign_up` = Someone signed up (optionally sent to admins)
* `admin.report` = A new report has been filed

**Returns:** [GroupedNotificationsResults](/methods/grouped_notifications/#GroupedNotificationsResults)  
**OAuth:** User token + `read:notifications`  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added  
4.4.0 - added `admin.sign_up` to grouped notification types

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be about notifications strictly older than this notification ID. In effect, sets an upper bound on results.since\_idString. All results returned will be about notifications strictly newer than this notification ID. In effect, sets a lower bound on results.min\_idString. Returns results about notifications immediately newer than this notification ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 40 notifications. Max 80 notification groups.types[]Array of String. Types to include in the result.exclude\_types[]Array of String. Types to exclude from the results.account\_idString. Return only notifications received from the specified account.expand\_accountsString. One of `full` (default) or `partial_avatars`. When set to `partial_avatars`, some accounts will not be rendered in full in the returned `accounts` list but will be instead returned in stripped-down form in the `partial_accounts` list. The most recent account in a notification group is always rendered in full in the `accounts` attribute.grouped\_types[]Array of String. Restrict which notification types can be grouped. Use this if there are notification types for which your client does not support grouping. If omitted, the server will group notifications of all types it supports (currently, `favourite`, `follow`, `reblog` and `admin.sign_up`). If you do not want any notification grouping, use [GET `/api/v1/notifications`](/methods/notifications/#get) instead. Notifications that would be grouped if not for this parameter will instead be returned as individual single-notification groups with a unique `group_key` that can be assumed to be of the form `ungrouped-{notification_id}`. Please note that neither the streaming API nor the individual notification APIs are aware of this parameter and will always include a “proper” `group_key` that can be different from what is returned here, meaning that you may have to ignore `group_key` for such notifications that you do not want grouped and use `ungrouped-{notification_id}` instead for consistency.include\_filteredBoolean. Whether to include notifications filtered by the user’s [NotificationPolicy](/entities/NotificationPolicy/). Defaults to false.## Response

Sample call with limit=2.

```
GET https://mastodon.social/api/v2/notifications?limit=2 HTTP/1.1
Authorization: Bearer xxx

```
## 200: OK

The response body contains one page of grouped notifications. You can use the HTTP Link header for further pagination.

```
Link: <https://mastodon.social/api/v2/notifications?limit=2&max\_id=196012>; rel="next", <https://mastodon.social/api/v2/notifications?limit=2&min\_id=196014>; rel="prev";

```

```
{
 "accounts": [
 {
 "id": "16",
 "username": "eve",
 "acct": "eve",
 // …
 },
 {
 "id": "3547",
 "username": "alice",
 "acct": "alice",
 // …
 },
 {
 "id": "31460",
 "username": "bob",
 "acct": "bob",
 // …
 },
 {
 "id": "36509",
 "username": "mallory",
 "acct": "mallory",
 // …
 }
 ],
 "statuses": [
 {
 "id": "113010503322889311",
 "created\_at": "2024-08-23T08:57:12.057Z",
 "account": {
 "id": "55911",
 "username": "user",
 "acct": "user",
 // …
 },
 // …
 },
 {
 "id": "113006771938929950",
 "created\_at": "2024-08-22T17:08:15.654Z",
 "account": {
 "id": "55911",
 "username": "user",
 "acct": "user",
 // …
 },
 // …
 }
 ],
 "notification\_groups": [
 {
 "group\_key": "favourite-113010503322889311-479000",
 "notifications\_count": 2,
 "type": "favourite",
 "most\_recent\_notification\_id": 196014,
 "page\_min\_id": "196013",
 "page\_max\_id": "196014",
 "latest\_page\_notification\_at": "2024-08-23T08:59:56.743Z",
 "sample\_account\_ids": [
 "16",
 "3547"
 ],
 "status\_id": "113010503322889311"
 },
 {
 "group\_key": "favourite-113006771938929950-478999",
 "notifications\_count": 2,
 "type": "favourite",
 "most\_recent\_notification\_id": 196012,
 "page\_min\_id": "196012",
 "page\_max\_id": "196012",
 "latest\_page\_notification\_at": "2024-08-23T08:16:32.112Z",
 "sample\_account\_ids": [
 "31460",
 "36509"
 ],
 "status\_id": "113006771938929950"
 }
 ]
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get a single notification group

```
GET /api/v2/notifications/:group\_key HTTP/1.1

```
View information about a specific notification group with a given group key.

**Returns:** [GroupedNotificationsResults](/methods/grouped_notifications/#GroupedNotificationsResults)  
**OAuth:** User token + `read:notifications`  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## Request

## Path parameters

:group\_keyrequired String. The group key of the notification group.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

On success, returns a [GroupedNotificationsResults](/methods/grouped_notifications/#GroupedNotificationsResults) with a single notification group.

```
{
 "accounts": [
 {
 "id": "16",
 "username": "eve",
 "acct": "eve",
 // …
 },
 {
 "id": "3547",
 "username": "alice",
 "acct": "alice",
 // …
 }
 ],
 "statuses": [
 {
 "id": "113010503322889311",
 "created\_at": "2024-08-23T08:57:12.057Z",
 "account": {
 "id": "55911",
 "username": "user",
 "acct": "user",
 // …
 },
 // …
 }
 ],
 "notification\_groups": [
 {
 "group\_key": "favourite-113010503322889311-479000",
 "notifications\_count": 2,
 "type": "favourite",
 "most\_recent\_notification\_id": 196014,
 "sample\_account\_ids": [
 "16",
 "3547"
 ],
 "status\_id": "113010503322889311"
 }
 ]
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Dismiss a single notification group

```
POST /api/v2/notifications/:group\_key/dismiss HTTP/1.1

```
Dismiss a single notification group from the server.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## Request

## Path parameters

:group\_keyrequired String. The group key of the notifications to discard.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

Upon a successful request, notifications with the given group key are successfully dismissed.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get accounts of all notifications in a notification group

```
GET /api/v2/notifications/:group\_key/accounts HTTP/1.1

```
**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `write:notifications`  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## Request

## Path parameters

:group\_keyrequired String. The group key of the notifications to get accounts from.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "id": "16",
 "username": "eve",
 "acct": "eve"
 // …
 },
 {
 "id": "3547",
 "username": "alice",
 "acct": "alice"
 // …
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get the number of unread notifications

```
GET /api/v2/notifications/unread\_count HTTP/1.1

```
Get the (capped) number of unread notification groups for the current user.
A notification is considered unread if it is more recent than the [notifications read marker](/methods/markers/).
Because the count is dependant on the parameters, it is computed every time and is thus a relatively slow operation (although faster than getting the full corresponding notifications), therefore the number of returned notifications is capped.

**Returns:** Hash with a single key of `count`  
**OAuth:** User token + `read:notifications`  
**Version history**:  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Query parameters

limitInteger. Maximum number of results to return. Defaults to 100 notifications. Max 1000 notifications.types[]Array of String. Types of notifications that should count towards unread notifications.exclude\_types[]Array of String. Types of notifications that should not count towards unread notifications.account\_idString. Only count unread notifications received from the specified account.grouped\_types[]Array of String. Restrict which notification types can be grouped. Use this if there are notification types for which your client does not support grouping. If omitted, the server will group notifications of all types it supports (currently, `favourite`, `follow` and `reblog`). If you do not want any notification grouping, use [GET `/api/v1/notifications/unread_count`](/methods/notifications/#unread-count) instead.## Response

## 200: OK

The response body contains the capped count of unread notifications.

```
{
 "count": 42,
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## `GroupedNotificationsResults` entity

## Attributes

## `accounts`

**Description:** Accounts referenced by grouped notifications.  
**Type:** Array of [Account](/entities/Account/)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `partial_accounts` optional

**Description:** Partial accounts referenced by grouped notifications. Those are only returned when requesting grouped notifications with `expand_accounts=partial_avatars`.
**Type:** Array of [PartialAccountWithAvatar](/methods/grouped_notifications/#PartialAccountWithAvatar)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `statuses`

**Description:** Statuses referenced by grouped notifications.  
**Type:** Array of [Status](/entities/Status/}  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `notification_groups`

**Description:** The grouped notifications themselves.
**Type:** [NotificationGroup](/methods/grouped_notifications/#NotificationGroup)  
**Version history:**
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## Examples

TODO

---

## `PartialAccountWithAvatar` entity

These are stripped-down versions of [Account](/entities/Account/) that only contain what is necessary to display a list of avatars, as well as a few other useful properties. The aim is to cut back on expensive server-side serialization and reduce the network payload size of notification groups.

## Attributes

## `id`

**Description:** The account id.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.3.0 - added

## `acct`

**Description:** The Webfinger account URI. Equal to `username` for local users, or `username@domain` for remote users.  
**Type:** String  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `url`

**Description:** The location of the user’s profile page.  
**Type:** String (URL)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `avatar`

**Description:** An image icon that is shown next to statuses and in the profile.  
**Type:** String (URL)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `avatar_static`

**Description:** A static version of the avatar. Equal to `avatar` if its value is a static image; different if `avatar` is an animated GIF.  
**Type:** String (URL)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `locked`

**Description:** Whether the account manually approves follow requests.  
**Type:** Boolean  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `bot`

**Description:** Indicates that the account may perform automated actions, may not be monitored, or identifies as a robot.  
**Type:** Boolean  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## Examples

TODO

–

## `NotificationGroup` entity

## Attributes

## `group_key`

**Description:** Group key identifying the grouped notifications. Should be treated as an opaque value.  
**Type:** String  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `notifications_count`

**Description:** Total number of individual notifications that are part of this notification group.  
**Type:** Integer\
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `type`

**Description:** The type of event that resulted in the notifications in this group.  
**Type:** String (Enumerable oneOf)  
`mention` = Someone mentioned you in their status  
`status` = Someone you enabled notifications for has posted a status  
`reblog` = Someone boosted one of your statuses  
`follow` = Someone followed you  
`follow_request` = Someone requested to follow you  
`favourite` = Someone favourited one of your statuses  
`poll` = A poll you have voted in or created has ended  
`update` = A status you interacted with has been edited  
`admin.sign_up` = Someone signed up (optionally sent to admins)  
`admin.report` = A new report has been filed  
`severed_relationships` = Some of your follow relationships have been severed as a result of a moderation or block event  
`moderation_warning` = A moderator has taken action against your account or has sent you a warning  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `most_recent_notification_id`

**Description:** ID of the most recent notification in the group.  
**Type:** String  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `page_min_id` optional

**Description:** ID of the oldest notification from this group represented within the current page. This is only returned when paginating through notification groups. Useful when polling new notifications.  
**Type:** String  
**Version history:**
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `page_max_id` optional

**Description:** ID of the newest notification from this group represented within the current page. This is only returned when paginating through notification groups. Useful when polling new notifications.  
**Type:** String  
**Version history:**
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `latest_page_notification_at` optional

**Description:** Date at which the most recent notification from this group within the current page has been created. This is only returned when paginating through notification groups.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `sample_account_ids`

**Description:** IDs of some of the accounts who most recently triggered notifications in this group.  
**Type:** Array of String  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `status_id` optional

**Description:** ID of the [Status](/entities/Status/) that was the object of the notification. Attached when `type` of the notification is `favourite`, `reblog`, `status`, `mention`, `poll`, or `update`.  
**Type:** String  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `report` optional

**Description:** Report that was the object of the notification. Attached when `type` of the notification is `admin.report`.  
**Type:** [Report](/entities/Report/)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `event` optional

**Description:** Summary of the event that caused follow relationships to be severed. Attached when `type` of the notification is `severed_relationships`.  
**Type:** [RelationshipSeveranceEvent](/entities/RelationshipSeveranceEvent/)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## `moderation_warning` optional

**Description:** Moderation warning that caused the notification. Attached when `type` of the notification is `moderation_warning`.  
**Type:** [AccountWarning](/entities/AccountWarning/)  
**Version history:**  
4.3.0 (`mastodon` [API version](/entities/Instance/#api-versions) 2) - added

## Examples

TODO

---

## See also

[Individual notification API methods](/methods/notifications/)[app/controllers/api/v2/notifications\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v2/notifications_controller.rb)Last updated March 28, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/grouped_notifications.md)

---


# notifications API methods

Source: https://docs.joinmastodon.org/methods/notifications/

# notifications API methods

Receive notifications for activity on your account or statuses.

## Get all notifications

```
GET /api/v1/notifications HTTP/1.1

```
Notifications concerning the user. This API returns Link headers containing links to the next/previous page. However, the links can also be constructed dynamically using query params and `id` values.

Types to filter include:

* `mention` = Someone mentioned you in their status
* `status` = Someone you enabled notifications for has posted a status
* `reblog` = Someone boosted one of your statuses
* `follow` = Someone followed you
* `follow_request` = Someone requested to follow you
* `favourite` = Someone favourited one of your statuses
* `poll` = A poll you have voted in or created has ended
* `update` = A status you boosted with has been edited
* `admin.sign_up` = Someone signed up (optionally sent to admins)
* `admin.report` = A new report has been filed

**Returns:** Array of [Notification](/entities/Notification/)  
**OAuth:** User token + `read:notifications`  
**Version history:**  
0.0.0 - added  
2.6.0 - added `min_id`  
2.9.0 - added `account_id`  
3.1.0 - added `follow_request` type  
3.3.0 - added `status` type; both `min_id` and `max_id` can be used at the same time now  
3.5.0 - added `types`; add `update` and `admin.sign_up` types  
4.0.0 - added `admin.report` type  
4.1.0 - notification limit changed from 15 (max 30) to 40 (max 80)  
4.3.0 - added `include_filtered` parameter

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 40 notifications. Max 80 notifications.types[]Array of String. Types to include in the result.exclude\_types[]Array of String. Types to exclude from the results.account\_idString. Return only notifications received from the specified account.include\_filteredBoolean. Whether to include notifications filtered by the user’s [NotificationPolicy](/entities/NotificationPolicy/). Defaults to false.## Response

Sample call with limit=2.

```
GET https://mastodon.social/api/v1/notifications?limit=2 HTTP/1.1
Authorization: Bearer <user\_token>

```
## 200: OK

The response body contains one page of notifications. You can use the HTTP Link header for further pagination.

```
Link: <https://mastodon.example/api/v1/notifications?max\_id=34975535>; rel="next", <https://mastodon.example/api/v1/notifications?min\_id=34975861>;

```

```
[
 {
 "id": "34975861",
 "type": "mention",
 "created\_at": "2019-11-23T07:49:02.064Z",
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 "status": {
 "id": "103186126728896492",
 "created\_at": "2019-11-23T07:49:01.940Z",
 "in\_reply\_to\_id": "103186038209478945",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 "content": "<p><span class=\"h-card\"><a href=\"https://mastodon.social/@trwnh\" class=\"u-url mention\">@<span>trwnh</span></a></span> sup!</p>",
 // ...
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 // ...
 "mentions": [
 {
 "id": "14715",
 "username": "trwnh",
 "url": "https://mastodon.social/@trwnh",
 "acct": "trwnh"
 }
 ],
 // ...
 }
 },
 {
 "id": "34975535",
 "type": "favourite",
 "created\_at": "2019-11-23T07:29:18.903Z",
 "account": {
 "id": "297420",
 "username": "haskal",
 "acct": "haskal@cybre.space",
 // ...
 },
 "status": {
 "id": "103186046267791694",
 "created\_at": "2019-11-23T07:28:34.210Z",
 "in\_reply\_to\_id": "103186044372624124",
 "in\_reply\_to\_account\_id": "297420",
 // ...
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 // ...
 }
 }
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get a single notification

```
GET /api/v1/notifications/:id HTTP/1.1

```
View information about a notification with a given ID.

**Returns:** [Notification](/entities/Notification/)  
**OAuth:** User token + `read:notifications`  
**Version history:**  
0.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Notification in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

A single Notification

```
{
 "id": "34975861",
 "type": "mention",
 "created\_at": "2019-11-23T07:49:02.064Z",
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 "status": {
 "id": "103186126728896492",
 "created\_at": "2019-11-23T07:49:01.940Z",
 "in\_reply\_to\_id": "103186038209478945",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 "content": "<p><span class=\"h-card\"><a href=\"https://mastodon.social/@trwnh\" class=\"u-url mention\">@<span>trwnh</span></a></span> sup!</p>",
 // ...
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 // ...
 "mentions": [
 {
 "id": "14715",
 "username": "trwnh",
 "url": "https://mastodon.social/@trwnh",
 "acct": "trwnh"
 }
 ],
 // ...
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Dismiss all notifications

```
POST /api/v1/notifications/clear HTTP/1.1

```
Clear all notifications from the server.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history:**  
0.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Notifications successfully cleared.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Dismiss a single notification

```
POST /api/v1/notifications/:id/dismiss HTTP/1.1

```
Dismiss a single notification from the server.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history:**  
1.3.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Notification in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Notification with given ID successfully dismissed

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Dismiss a single notification removed

```
POST /api/v1/notifications/dismiss HTTP/1.1

```
Dismiss a single notification from the server.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history**:  
0.0.0 - available  
1.3.0 - deprecated in favor of [notifications/:id/dismiss](/methods/notifications/#dismiss)
3.0.0 - removed

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

idrequired String. The ID of the notification in the database.## Response

## 200: OK

Notification with given ID successfully dismissed

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get the number of unread notifications

```
GET /api/v1/notifications/unread\_count HTTP/1.1

```
Get the (capped) number of unread notifications for the current user.
A notification is considered unread if it is more recent than the [notifications read marker](/methods/markers/).
Because the count is dependant on the parameters, it is computed every time and is thus a relatively slow operation (although faster than getting the full corresponding notifications), therefore the number of returned notifications is capped.

**Returns:** Hash with a single key of `count`  
**OAuth:** User token + `read:notifications`  
**Version history**:  
4.3.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Query parameters

limitInteger. Maximum number of results to return. Defaults to 100 notifications. Max 1000 notifications.types[]Array of String. Types of notifications that should count towards unread notifications.exclude\_types[]Array of String. Types of notifications that should not count towards unread notifications.account\_idString. Only count unread notifications received from the specified account.## Response

## 200: OK

The response body contains the capped count of unread notifications.

```
{
 "count": 42,
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get the filtering policy for notifications

```
GET /api/v2/notifications/policy HTTP/1.1

```
Notifications filtering policy for the user.

**Returns:** [NotificationPolicy](/entities/NotificationPolicy/)  
**OAuth:** User token + `read:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

The response body contains the current notifications filtering policy for the user.

```
{
 "for\_not\_following": "accept",
 "for\_not\_followers": "accept",
 "for\_new\_accounts": "accept",
 "for\_private\_mentions": "drop",
 "for\_limited\_accounts": "filter",
 "summary": {
 "pending\_requests\_count": 0,
 "pending\_notifications\_count": 0
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## Update the filtering policy for notifications

```
PATCH /api/v2/notifications/policy HTTP/1.1

```
Update the user’s notifications filtering policy.

**Returns:** [NotificationPolicy](/entities/NotificationPolicy/)  
**OAuth:** User token + `write:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Form data parameters

for\_not\_followingString. Whether to `accept`, `filter` or `drop` notifications from accounts the user is not following. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.for\_not\_followersString. Whether to `accept`, `filter` or `drop` notifications from accounts that are not following the user. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.for\_new\_accountsString. Whether to `accept`, `filter` or `drop` notifications from accounts created in the past 30 days. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.for\_private\_mentionsString. Whether to `accept`, `filter` or `drop` notifications from private mentions. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing. Replies to private mentions initiated by the user, as well as accounts the user follows, are always allowed, regardless of this value.for\_limited\_accountsString. Whether to `accept`, `filter` or `drop` notifications from accounts that were limited by a moderator. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.## Response

## 200: OK

The response body contains the updated notifications filtering policy for the user.

```
{
 "filter\_not\_following": false,
 "filter\_not\_followers": false,
 "filter\_new\_accounts": false,
 "filter\_private\_mentions": true,
 "summary": {
 "pending\_requests\_count": 0,
 "pending\_notifications\_count": 0
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get all notification requests

```
GET /api/v1/notifications/requests HTTP/1.1

```
Notification requests for notifications filtered by the user’s policy. This API returns Link headers containing links to the next/previous page.

**Returns:** Array of [NotificationRequest](/entities/NotificationRequest/)  
**OAuth:** User token + `read:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 40 notification requests. Max 80 notification requests.## Response

## 200: OK

The response body contains one page of notification requests. You can use the HTTP Link header for further pagination.

```
Link: <https://mastodon.example/api/v1/notifications/requests?max\_id=112456967201894256>; rel="next", <https://mastodon.example/api/v1/notifications/requests?min\_id=112456967201894256>; rel="prev"

```

```
[
 {
 "id": "112456967201894256",
 "created\_at": "2024-05-17T14:45:41.171Z",
 "updated\_at": "2024-05-17T14:45:41.171Z",
 "notifications\_count": "1",
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 "last\_status": {
 "id": "103186126728896492",
 "created\_at": "2019-11-23T07:49:01.940Z",
 "in\_reply\_to\_id": "103186038209478945",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 "content": "<p><span class=\"h-card\"><a href=\"https://mastodon.social/@trwnh\" class=\"u-url mention\">@<span>trwnh</span></a></span> sup!</p>",
 // ...
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 // ...
 "mentions": [
 {
 "id": "14715",
 "username": "trwnh",
 "url": "https://mastodon.social/@trwnh",
 "acct": "trwnh"
 }
 ],
 // ...
 }
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get a single notification request

```
GET /api/v1/notifications/requests/:id HTTP/1.1

```
View information about a notification request with a given ID.

**Returns:** [NotificationRequest](/entities/NotificationRequest/)  
**OAuth:** User token + `read:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Notification in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

A single notification request.

```
 {
 "id": "112456967201894256",
 "created\_at": "2024-05-17T14:45:41.171Z",
 "updated\_at": "2024-05-17T14:45:41.171Z",
 "notifications\_count": "1",
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 "last\_status": {
 "id": "103186126728896492",
 "created\_at": "2019-11-23T07:49:01.940Z",
 "in\_reply\_to\_id": "103186038209478945",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 "content": "<p><span class=\"h-card\"><a href=\"https://mastodon.social/@trwnh\" class=\"u-url mention\">@<span>trwnh</span></a></span> sup!</p>",
 // ...
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 // ...
 "mentions": [
 {
 "id": "14715",
 "username": "trwnh",
 "url": "https://mastodon.social/@trwnh",
 "acct": "trwnh"
 }
 ],
 // ...
 }
 }

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Accept a single notification request

```
POST /api/v1/notifications/requests/:id/accept HTTP/1.1

```
Accept a notification request, which merges the filtered notifications from that user back into the main notification and accepts any future notification from them.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Notification in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

A successful call will return an empty object.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Dismiss a single notification request

```
POST /api/v1/notifications/requests/:id/dismiss HTTP/1.1

```
Dismiss a notification request, which hides it and prevent it from contributing to the pending notification requests count.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Notification in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

A successful call will return an empty object.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Accept multiple notification requests

```
POST /api/v1/notifications/requests/accept HTTP/1.1

```
Accepts multiple notification requests, which merges the filtered notifications from those users back into the main notifications and accepts any future notification from them.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Form data parameters

:id[]required Array of String. The IDs of the notification requests in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

A successful call will return an empty object.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Dismiss multiple notification requests

```
POST /api/v1/notifications/requests/dismiss HTTP/1.1

```
Dismiss multiple notification requests, which hides them and prevent them from contributing to the pending notification requests count.

**Returns:** Empty  
**OAuth:** User token + `write:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Form data parameters

:id[]required Array of String. The IDs of the notification requests in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

A successful call will return an empty object.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Check if accepted notification requests have been merged

```
GET /api/v1/notifications/requests/merged

```
Check whether accepted notification requests have been merged.
Accepting notification requests schedules a background job to merge the filtered notifications back into the normal notification list. When that process has finished, the client should refresh the notifications list at its earliest convenience. This is communicated by the `notifications_merged` streaming event but can also be polled using this endpoint.

\***Returns:** Hash with a single boolean attribute `merged`  
**OAuth:** User token + `read:notifications`  
**Version history:**  
4.3.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user token>` to gain authorized access to this API method.## Response

## 200: OK

A successful call returns whether the notifications have been merged and are ready for being loaded.

```
{
 "merged": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[push API methods](/methods/push/)[app/controllers/api/v1/notifications\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/notifications_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/notifications.md)

---


# search API methods

Source: https://docs.joinmastodon.org/methods/search/

# search API methods

Search for content in accounts, statuses and hashtags.

## Perform a search

```
GET /api/v2/search HTTP/1.1

```
**Returns:** [Search](/entities/Search/)  
**OAuth:** Public (without `resolve` or `offset`), or User token + `read:search`  
**Version history:**  
2.4.1 - added, limit hardcoded to 5  
2.8.0 - add `type`, `limit`, `offset`, `min_id`, `max_id`, `account_id`  
3.0.0 - add `exclude_unreviewed` param  
3.3.0 - `min_id` and `max_id` can be used together  
4.0.0 - no longer requires a user token. Without a valid user token, you cannot use the `resolve` or `offset` parameters.

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

qrequired String. The search query.typeString. Specify whether to search for only `accounts`, `hashtags`, `statuses`resolveBoolean. Only relevant if `type` includes `accounts`. If `true` and (a) the search query is for a remote account (e.g., `someaccount@someother.server`) and (b) the local server does not know about the account, [WebFinger](/spec/webfinger/) is used to try and resolve the account at `someother.server`. This provides the best recall at higher latency. If `false` only accounts the server knows about are returned.followingBoolean. Only include accounts that the user is following? Defaults to false.account\_idString. If provided, will only return statuses authored by this account.exclude\_unreviewedBoolean. Filter out unreviewed tags? Defaults to false. Use true when trying to find trending tags.max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return, per type. Defaults to 20 results per category. Max 40 results per category.offsetInteger. Skip the first n results.## Response

## 200: OK

Truncated results of a sample search for “cats” with limit=2.

```
{
 "accounts": [
 {
 "id": "180744",
 "username": "catstar",
 "acct": "catstar@catgram.jp",
 "display\_name": "catstar",
 // ...
 },
 {
 "id": "214293",
 "username": "catsareweird",
 "acct": "catsareweird",
 "display\_name": "Cats Are Weird",
 // ...
 }
 ],
 "statuses": [
 {
 "id": "103085519055545958",
 "created\_at": "2019-11-05T13:23:09.000Z",
 // ...
 "content": "<p>cats<br>cats never change</p>",
 // ...
 },
 {
 "id": "101068121469614510",
 "created\_at": "2018-11-14T06:31:48.000Z",
 // ...
 "spoiler\_text": "Cats",
 // ...
 "content": "<p>Cats are inherently good at self-care. </p><p><a href=\"https://mspsocial.net/tags/cats\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>cats</span></a></p>",
 // ...
 ],
 "hashtags": [
 {
 "name": "cats",
 "url": "https://mastodon.social/tags/cats",
 "history": [
 {
 "day": "1574553600",
 "uses": "10",
 "accounts": "9"
 },
 // ...
 ]
 },
 {
 "name": "catsofmastodon",
 "url": "https://mastodon.social/tags/catsofmastodon",
 "history": [
 {
 "day": "1574553600",
 "uses": "6",
 "accounts": "5"
 },
 // ...
 ]
 }
 ]
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Perform a search (v1) removed

```
GET /api/v1/search HTTP/1.1

```
**Returns:** [Search](/entities/Search/), but `hashtags` is an array of strings instead of an array of Tag.  
**OAuth:** User token + `read:search`  
**Version history:**  
1.1 - added, limit hardcoded to 5  
1.5.0 - now requires authentication  
2.4.1 - deprecated in favor of [v2 search](/methods/search/#v2)  
2.8.0 - added `limit`, pagination, and account options  
3.0.0 - removed; use [v2 search](/methods/search/#v2) instead

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

qrequired String. The search query.typeString. Specify whether to search for only `accounts`, `hashtags`, `statuses`resolveBoolean. Attempt WebFinger lookup? Defaults to false.account\_idString. If provided, will only return statuses authored by this account.max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return, per type. Defaults to 20 results per category. Max 40 results per category.offsetInteger. Offset in search results, used for pagination. Defaults to 0.## Response

## 200: OK

v1 search was deprecated because hashtags were returned as strings instead of as Tag entities.

```
{
 "accounts": [...],
 "statuses": [...],
 "hashtags": ["cats","catsofmastodon"]
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[GET /api/v1/accounts/search](/methods/accounts/#search)[GET /api/v1/accounts/lookup](/methods/accounts/#lookup)[app/controllers/api/v2/search\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v2/search_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/search.md)

---


# instance API methods

Source: https://docs.joinmastodon.org/methods/instance/

# instance API methods

Discover information about a Mastodon website.

## View server information

```
GET /api/v2/instance

```
Obtain general information about the server.

**Returns:** [Instance](/entities/Instance/)  
**OAuth:** Public  
**Version history:**  
4.0.0 - added  
4.3.0 - added `configuration.vapid.public_key`

## Response

## 200: OK

```
{
 "domain": "mastodon.social",
 "title": "Mastodon",
 "version": "4.0.0rc1",
 "source\_url": "https://github.com/mastodon/mastodon",
 "description": "The original server operated by the Mastodon gGmbH non-profit",
 "usage": {
 "users": {
 "active\_month": 123122
 }
 },
 "thumbnail": {
 "url": "https://files.mastodon.social/site\_uploads/files/000/000/001/@1x/57c12f441d083cde.png",
 "blurhash": "UeKUpFxuo~R%0nW;WCnhF6RjaJt757oJodS$",
 "versions": {
 "@1x": "https://files.mastodon.social/site\_uploads/files/000/000/001/@1x/57c12f441d083cde.png",
 "@2x": "https://files.mastodon.social/site\_uploads/files/000/000/001/@2x/57c12f441d083cde.png"
 }
 },
 "icon": [
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/36/accf17b0104f18e5.png",
 "size": "36x36"
 },
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/72/accf17b0104f18e5.png",
 "size": "72x72"
 },
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/192/accf17b0104f18e5.png",
 "size": "192x192"
 },
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/512/accf17b0104f18e5.png",
 "size": "512x512"
 }
 ],
 "languages": [
 "en"
 ],
 "configuration": {
 "urls": {
 "streaming": "wss://mastodon.social"
 },
 "vapid": {
 "public\_key": "BCkMmVdKDnKYwzVCDC99Iuc9GvId-x7-kKtuHnLgfF98ENiZp\_aj-UNthbCdI70DqN1zUVis-x0Wrot2sBagkMc="
 },
 "accounts": {
 "max\_featured\_tags": 10,
 "max\_pinned\_statuses": 4
 },
 "statuses": {
 "max\_characters": 500,
 "max\_media\_attachments": 4,
 "characters\_reserved\_per\_url": 23
 },
 "media\_attachments": {
 "supported\_mime\_types": [
 "image/jpeg",
 "image/png",
 "image/gif",
 "image/heic",
 "image/heif",
 "image/webp",
 "video/webm",
 "video/mp4",
 "video/quicktime",
 "video/ogg",
 "audio/wave",
 "audio/wav",
 "audio/x-wav",
 "audio/x-pn-wave",
 "audio/vnd.wave",
 "audio/ogg",
 "audio/vorbis",
 "audio/mpeg",
 "audio/mp3",
 "audio/webm",
 "audio/flac",
 "audio/aac",
 "audio/m4a",
 "audio/x-m4a",
 "audio/mp4",
 "audio/3gpp",
 "video/x-ms-asf"
 ],
 "description\_limit": 1500,
 "image\_size\_limit": 10485760,
 "image\_matrix\_limit": 16777216,
 "video\_size\_limit": 41943040,
 "video\_frame\_rate\_limit": 60,
 "video\_matrix\_limit": 2304000
 },
 "polls": {
 "max\_options": 4,
 "max\_characters\_per\_option": 50,
 "min\_expiration": 300,
 "max\_expiration": 2629746
 },
 "translation": {
 "enabled": true
 }
 },
 "registrations": {
 "enabled": false,
 "approval\_required": false,
 "message": null
 },
 "contact": {
 "email": "staff@mastodon.social",
 "account": {
 "id": "1",
 "username": "Gargron",
 "acct": "Gargron",
 "display\_name": "Eugen 💀",
 "locked": false,
 "bot": false,
 "discoverable": true,
 "group": false,
 "created\_at": "2016-03-16T00:00:00.000Z",
 "note": "<p>Founder, CEO and lead developer <span class=\"h-card\"><a href=\"https://mastodon.social/@Mastodon\" class=\"u-url mention\">@<span>Mastodon</span></a></span>, Germany.</p>",
 "url": "https://mastodon.social/@Gargron",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "header": "https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "followers\_count": 133026,
 "following\_count": 311,
 "statuses\_count": 72605,
 "last\_status\_at": "2022-10-31",
 "noindex": false,
 "emojis": [],
 "fields": [
 {
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span></a>",
 "verified\_at": null
 }
 ]
 }
 },
 "rules": [
 {
 "id": "1",
 "text": "Sexually explicit or violent media must be marked as sensitive when posting"
 },
 {
 "id": "2",
 "text": "No racism, sexism, homophobia, transphobia, xenophobia, or casteism"
 },
 {
 "id": "3",
 "text": "No incitement of violence or promotion of violent ideologies"
 },
 {
 "id": "4",
 "text": "No harassment, dogpiling or doxxing of other users"
 },
 {
 "id": "5",
 "text": "No content illegal in Germany"
 },
 {
 "id": "7",
 "text": "Do not share intentionally false or misleading information"
 }
 ]
}

```

---

## List of connected domains

```
GET /api/v1/instance/peers HTTP/1.1

```
Domains that this instance is aware of.

**Returns:** Array of String  
**OAuth:** Public  
**Version history:**  
2.1.2 - added  
3.0.0 - requires user token if instance is in whitelist mode

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
["tilde.zone","mspsocial.net",...,"conf.tube"]

```
## 401: Unauthorized

If the instance is in whitelist mode and the Authorization header is missing or invalid

```
{
 "error": "This API requires an authenticated user"
}

```

---

## Weekly activity

```
GET /api/v1/instance/activity HTTP/1.1

```
Instance activity over the last 3 months, binned weekly.

**Returns:** Array of Hash  
**OAuth:** Public  
**Version history:**  
2.1.2 - added  
3.0.0 - requires user token if instance is in whitelist mode

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Each hash in the array will contain the following attributes:

weekString (UNIX Timestamp). Midnight at the first day of the week.statusesString (cast from an integer). The number of Statuses created since the week began.loginsString (cast from an integer). The number of user logins since the week began.registrationsString (cast from an integer). The number of user registrations since the week began.
```
[
 {
 "week": "1574640000",
 "statuses": "37125",
 "logins": "14239",
 "registrations": "542"
 },
 {
 "week": "1574035200",
 "statuses": "244447",
 "logins": "28820",
 "registrations": "4425"
 },
 {
 "week": "1573430400",
 "statuses": "270615",
 "logins": "35388",
 "registrations": "8781"
 },
 {
 "week": "1572825600",
 "statuses": "309722",
 "logins": "44433",
 "registrations": "26165"
 },
 {
 "week": "1572220800",
 "statuses": "116227",
 "logins": "19739",
 "registrations": "2926"
 },
 {
 "week": "1571616000",
 "statuses": "119932",
 "logins": "19247",
 "registrations": "3188"
 },
 {
 "week": "1571011200",
 "statuses": "117892",
 "logins": "19164",
 "registrations": "3107"
 },
 {
 "week": "1570406400",
 "statuses": "109092",
 "logins": "18763",
 "registrations": "2986"
 },
 {
 "week": "1569801600",
 "statuses": "107554",
 "logins": "19614",
 "registrations": "2904"
 },
 {
 "week": "1569196800",
 "statuses": "118067",
 "logins": "19703",
 "registrations": "3295"
 },
 {
 "week": "1568592000",
 "statuses": "110199",
 "logins": "19791",
 "registrations": "3026"
 },
 {
 "week": "1567987200",
 "statuses": "106029",
 "logins": "19089",
 "registrations": "2769"
 }
]

```
## 401: Unauthorized

If the instance is in whitelist mode and the Authorization header is missing or invalid

```
{
 "error": "This API requires an authenticated user"
}

```

---

## List of rules

```
GET /api/v1/instance/rules HTTP/1.1

```
Rules that the users of this service should follow.

**Returns:** Array of [Rule](/entities/Rule/)  
**OAuth:** Public  
**Version history:**  
3.4.0 - added

## Response

## 200: OK

```
[
 {
 "id": "1",
 "text": "Sexually explicit or violent media must be marked as sensitive when posting"
 },
 {
 "id": "2",
 "text": "No racism, sexism, homophobia, transphobia, xenophobia, or casteism"
 },
 {
 "id": "3",
 "text": "No incitement of violence or promotion of violent ideologies"
 },
 {
 "id": "4",
 "text": "No harassment, dogpiling or doxxing of other users"
 },
 {
 "id": "5",
 "text": "No content illegal in Germany"
 },
 {
 "id": "7",
 "text": "Do not share intentionally false or misleading information"
 }
]

```

---

## View moderated servers

```
GET /api/v1/instance/domain\_blocks HTTP/1.1

```
Obtain a list of domains that have been blocked.

**Returns:** Array of [DomainBlock](/entities/DomainBlock/)  
**OAuth:** Public, or User token if limited to users  
**Version history:**  
4.0.0 - added

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The complete list of domains blocked by this instance

```
[
 {
 "domain": "birb.elfenban.de",
 "digest": "5d2c6e02a0cced8fb05f32626437e3d23096480b47efbba659b6d9e80c85d280",
 "severity": "suspend",
 "comment": "Third-party bots"
 },
 {
 "domain": "birdbots.leptonics.com",
 "digest": "ce019d8d32cce8e369ac4367f4dc232103e6f489fbdd247fb99f9c8a646078a4",
 "severity": "suspend",
 "comment": "Third-party bots"
 }
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header, if the admin has chosen to show domain blocks to users.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

The admin has chosen to show domain blocks to no one. The response body is empty; only the HTTP 404 error code is relevant.

---

## View extended description

```
GET /api/v1/instance/extended\_description HTTP/1.1

```
Obtain an extended description of this server

**Returns:** [ExtendedDescription](/entities/ExtendedDescription/)  
**OAuth:** Public  
**Version history:**  
4.0.0 - added

## Response

## 200: OK

```
{
 "updated\_at": "2022-11-03T04:09:07Z",
 "content": "<p>For inquiries not related specifically to the operation of this server, such as press inquiries, please contact <a href=\"mailto:press@joinmastodon.org\">press@joinmastodon.org</a>.</p>\n\n<h2>Funding</h2>\n\n<p>This server is crowdfunded by <a href=\"https://patreon.com/mastodon\">Patreon donations</a>. For a list of sponsors, see <a href=\"https://joinmastodon.org/sponsors\">joinmastodon.org</a>.</p>\n\n<h2>Reporting and moderation</h2>\n\n<p>When reporting accounts, please make sure to include at least a few posts that show rule-breaking behaviour, when applicable. If there is any additional context that might help make a decision, please also include it in the comment. This is especially important when the content is in a language nobody on the moderation team speaks.</p>\n\n<p>We usually handle reports within 24 hours. Please mind that you are not notified when a report you have made has led to a punitive action, and that not all punitive actions are externally visible. For first time offenses, we may opt to delete offending content, escalating to harsher measures on repeat offenses.</p>\n\n<h2>Impressum</h2>\n\n<p>Mastodon gGmbH<br>\nMühlenstraße 8a<br>\n14167 Berlin<br>\nGermany</p>\n\n<p>E-Mail-Adresse: hello@joinmastodon.org</p>\n\n<p>Vertretungsberechtigt: Eugen Rochko (Geschäftsführer)</p>\n\n<p>Umsatzsteuer Identifikationsnummer (USt-ID): DE344258260</p>\n\n<p>Handelsregister<br>\nGeführt bei: Amtsgericht Charlottenburg<br>\nNummer: HRB 230086 B</p>\n"
}

```

---

## View privacy policy

```
GET /api/v1/instance/privacy\_policy HTTP/1.1

```
Obtain the contents of this server’s privacy policy.

**Returns:** [PrivacyPolicy](/entities/PrivacyPolicy/)  
**OAuth:** Public  
**Version history:**  
4.0.0 - added

## Response

## 200: OK

```
{
 "updated\_at": "2022-10-07T00:00:00+00:00",
 "content": "<p>This privacy policy describes how example.com (&quot;example.com&quot;, &quot;we&quot;, &quot;us&quot;) collects,\nprotects and uses the personally identifiable information you may provide\nthrough the example.com website or its API.</p>\n\n<h1>What information do we collect?</h1>\n\n<ul>\n<li><strong>Basic account information</strong>: If you register on this server, you may be\nasked to enter a username, an e-mail address and a password.</li>\n<li><strong>Posts, following and other public information</strong>: The list of people you\nfollow is listed publicly, the same is true for your followers.</li>\n<li><strong>Direct and followers-only posts</strong>: All posts are stored and processed on the\nserver. You may\ntoggle an option to approve and reject new followers manually in the settings.\n<strong>Please keep in mind that the operators of the server and any receiving\nserver may view such messages</strong>, and that recipients may screenshot, copy or\notherwise re-share them. <strong>Do not share any sensitive information over\nMastodon.</strong></li>\n<li><strong>IPs and other metadata</strong>: When you log in, we record the IP address you log\nin from, as well as the name of your browser application.</li>\n</ul>\n\n<hr>\n\n<p>This document is CC-BY-SA. Originally adapted from the <a href=\"https://github.com/discourse/discourse\">Discourse privacy\npolicy</a>.</p>\n"
}

```

---

## View terms of service

```
GET /api/v1/instance/terms\_of\_service HTTP/1.1

```
Obtain the contents of this server’s terms of service, if configured.

**Returns:** [PrivacyPolicy](/entities/PrivacyPolicy/)  
**OAuth:** Public  
**Version history:**  
4.4.0 - added

## Response

## 200: OK

## 404: Not Found

No terms of service have been configured for this instance.

```
{
 "error": "Record not found"
}

```

---

## View translation languages

```
GET /api/v1/instance/translation\_languages HTTP/1.1

```
Translation language pairs supported by the translation engine used by the server.

**Returns:** Object with source language codes as keys and arrays of target language codes as values.  
**OAuth:** Public  
**Version history:**  
4.2.0 - added

## Response

## 200: OK

All source and target language pairs supported by the server.

In the following sample response showing support for translating a status written in English (`en`) into German (`de`) or Spanish (`es`). The source language code `und` indicates that the server supports auto-detection the language of statuses with an empty `language` attribute and translating these into either British English (`en-GB`), German or Spanish.

```
{
 "en": ["de", "es"],
 // [...]
 "und": ["en-GB", "de", "es"]
}

```

---

## View server information (v1) deprecated

```
GET /api/v1/instance HTTP/1.1

```
Obtain general information about the server. See [api/v2/instance](/methods/instance/#v2) instead.

**Returns:** [V1::Instance](/entities/V1_Instance/)  
**OAuth:** Public  
**Version history:**  
1.1.0 - added  
3.0.0 - requires user token if instance is in whitelist mode  
3.1.4 - added `invites_enabled` to response  
3.4.0 - added `rules`  
3.4.2 - added `configuration`  
4.0.0 - deprecated. added `configuration[accounts]`.

## Response

## 200: OK

```
{
 "uri": "mastodon.social",
 "title": "Mastodon",
 "short\_description": "The original server operated by the Mastodon gGmbH non-profit",
 "description": "",
 "email": "staff@mastodon.social",
 "version": "3.5.3",
 "urls": {
 "streaming\_api": "wss://mastodon.social"
 },
 "stats": {
 "user\_count": 812303,
 "status\_count": 38151616,
 "domain\_count": 25255
 },
 "thumbnail": "https://files.mastodon.social/site\_uploads/files/000/000/001/original/vlcsnap-2018-08-27-16h43m11s127.png",
 "languages": ["en"],
 "registrations": false,
 "approval\_required": false,
 "invites\_enabled": true,
 "configuration": {
 "statuses": {
 "max\_characters": 500,
 "max\_media\_attachments": 4,
 "characters\_reserved\_per\_url": 23
 },
 "media\_attachments": {
 "supported\_mime\_types": [
 "image/jpeg",
 "image/png",
 "image/gif",
 "image/webp",
 "video/webm",
 "video/mp4",
 "video/quicktime",
 "video/ogg",
 "audio/wave",
 "audio/wav",
 "audio/x-wav",
 "audio/x-pn-wave",
 "audio/vnd.wave",
 "audio/ogg",
 "audio/vorbis",
 "audio/mpeg",
 "audio/mp3",
 "audio/webm",
 "audio/flac",
 "audio/aac",
 "audio/m4a",
 "audio/x-m4a",
 "audio/mp4",
 "audio/3gpp",
 "video/x-ms-asf"
 ],
 "image\_size\_limit": 10485760,
 "image\_matrix\_limit": 16777216,
 "video\_size\_limit": 41943040,
 "video\_frame\_rate\_limit": 60,
 "video\_matrix\_limit": 2304000
 },
 "polls": {
 "max\_options": 4,
 "max\_characters\_per\_option": 50,
 "min\_expiration": 300,
 "max\_expiration": 2629746
 }
 },
 "contact\_account":{
 "id":"1",
 "username":"Gargron",
 "acct":"Gargron",
 "display\_name":"Eugen",
 "locked":false,
 "bot":false,
 "discoverable":true,
 "group":false,
 "created\_at":"2016-03-16T00:00:00.000Z",
 "note":"\u003cp\u003eFounder, CEO and lead developer \u003cspan class=\"h-card\"\u003e\u003ca href=\"https://mastodon.social/@Mastodon\" class=\"u-url mention\"\u003e@\u003cspan\u003eMastodon\u003c/span\u003e\u003c/a\u003e\u003c/span\u003e, Germany.\u003c/p\u003e",
 "url":"https://mastodon.social/@Gargron",
 "avatar":"https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "avatar\_static":"https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "header":"https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "header\_static":"https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "followers\_count":118944,
 "following\_count":305,
 "statuses\_count":72309,
 "last\_status\_at":"2022-08-24",
 "emojis":[

 ],
 "fields":[
 {
 "name": "Patreon",
 "value": "\u003ca href=\"https://www.patreon.com/mastodon\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"\u003e\u003cspan class=\"invisible\"\u003ehttps://www.\u003c/span\u003e\u003cspan class=\"\"\u003epatreon.com/mastodon\u003c/span\u003e\u003cspan class=\"invisible\"\u003e\u003c/span\u003e\u003c/a\u003e",
 "verified\_at": null
 }
 ]
 },
 "rules": [
 {
 "id": "1",
 "text": "Sexually explicit or violent media must be marked as sensitive when posting"
 },
 {
 "id": "2",
 "text": "No racism, sexism, homophobia, transphobia, xenophobia, or casteism"
 },
 {
 "id": "3",
 "text": "No incitement of violence or promotion of violent ideologies"
 },
 {
 "id": "4",
 "text": "No harassment, dogpiling or doxxing of other users"
 },
 {
 "id": "5",
 "text": "No content illegal in Germany"
 },
 {
 "id": "7",
 "text": "Do not share intentionally false or misleading information"
 }
 ]
}

```

---

## See also

[app/controllers/api/v1/instances\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/instances_controller.rb)[app/controllers/api/v1/instances/activity\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/instances/activity_controller.rb)[app/controllers/api/v1/instances/peers\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/instances/peers_controller.rb)[app/controllers/api/v1/instances/rules\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/instances/rules_controller.rb)[app/controllers/api/v1/instances/privacy\_policies\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/instances/privacy_policies_controller.rb)[app/controllers/api/v1/instances/terms\_of\_services\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/instances/terms_of_services_controller.rb)Last updated February 5, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/instance.md)

---


# admin API methods

Source: https://docs.joinmastodon.org/methods/admin/

* [admin/accounts API methods](/methods/admin/accounts/)
* [admin/domain\_blocks API methods](/methods/admin/domain_blocks/)
* [admin/reports API methods](/methods/admin/reports/)
* [admin/trends API methods](/methods/admin/trends/)
* [canonical\_email\_blocks API methods](/methods/admin/canonical_email_blocks/)
* [dimensions API methods](/methods/admin/dimensions/)
* [domain\_allows API methods](/methods/admin/domain_allows/)
* [email\_domain\_blocks API methods](/methods/admin/email_domain_blocks/)
* [ip\_blocks API methods](/methods/admin/ip_blocks/)
* [measures API methods](/methods/admin/measures/)
* [retention API methods](/methods/admin/retention/)

---


# proofs API methods

Source: https://docs.joinmastodon.org/methods/proofs/

# proofs API methods

For use by identity providers.

**Deprecated**  
Identity proofs have been deprecated in 3.5.0 and newer. Previously, the only proof provider was Keybase, but development on Keybase has stalled entirely since it was acquired by Zoom.## View identity proofs removed

```
GET /api/proofs HTTP/1.1

```
**Returns:** custom response defined by provider  
**OAuth:** Public  
**Version history:**  
2.8.0 - added

## Request

## Query parameters

providerString. The identity provider to be looked up. Currently only supports `keybase` (case-sensitive).usernameString. The username on the selected identity provider.## Response

## 200: OK

Looking up the `username` “gargron” via the “keybase” `provider`

```
{
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "signatures": [
 {
 "sig\_hash": "5cfc20c7018f2beefb42a68836da59a792e55daa4d118498c9b1898de7e845690f",
 "kb\_username": "gargron"
 }
 ]
}

```
## 404: Not found

No identity proof found for `username` on `provider`

```
{
 "error": "Record not found"
}

```

---

## See also

[Remove Keybase integration (#17045)](https://github.com/mastodon/mastodon/pull/17045)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/proofs.md)

---


# oembed API methods

Source: https://docs.joinmastodon.org/methods/oembed/

# oembed API methods

For generating OEmbed previews.

## Get OEmbed info as JSON

```
GET /api/oembed HTTP/1.1

```
**Returns:** OEmbed metadata  
**OAuth:** Public  
**Version history:**  
1.0.0 - added

## Request

## Query parameters

urlrequired String. URL of a status.maxwidthNumber. Width of the iframe. Defaults to 400maxheightNumber. Height of the iframe. Defaults to null## Response

## 200: OK

Represents OEmbed “rich” preview, with associated iframe and metadata.

```
{
 "type": "rich",
 "version": "1.0",
 "title": "New status by trwnh",
 "author\_name": "infinite love ⴳ",
 "author\_url": "https://mastodon.social/@trwnh",
 "provider\_name": "mastodon.social",
 "provider\_url": "https://mastodon.social/",
 "cache\_age": 86400,
 "html": "<iframe src=\"https://mastodon.social/@trwnh/99664077509711321/embed\" class=\"mastodon-embed\" style=\"max-width: 100%; border: 0\" width=\"400\" allowfullscreen=\"allowfullscreen\"></iframe><script src=\"https://mastodon.social/embed.js\" async=\"async\"></script>",
 "width": 400,
 "height": null
}

```
## 404: Not found

Status not found for given URL

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/oembed\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/oembed_controller.rb)Last updated December 14, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/oembed.md)

---


# OAuth API methods

Source: https://docs.joinmastodon.org/methods/oauth/

# OAuth API methods

Generate and manage OAuth tokens.

## Authorize a user

```
GET /oauth/authorize HTTP/1.1

```
Displays an authorization form to the user. If approved, it will create and return an authorization code, then redirect to the desired `redirect_uri`, or show the authorization code if `urn:ietf:wg:oauth:2.0:oob` was requested. The authorization code can be used while requesting a token to obtain access to user-level methods.

**Returns:** String (URL) or HTML response  
**OAuth:** Public  
**Version history:**  
0.1.0 - added  
2.6.0 - added `force_login`  
3.5.0 - added `lang`
4.3.0 - added support for PKCE parameters

## Request

## Query parameters

response\_typerequired String. Should be set equal to `code`.client\_idrequired String. The client ID, obtained during app registration.redirect\_urirequired String. Set a URI to redirect the user to. If this parameter is set to `urn:ietf:wg:oauth:2.0:oob` then the authorization code will be shown instead. Must match one of the `redirect_uris` declared during app registration.scopeString. List of requested [OAuth scopes](/api/oauth-scopes/), separated by spaces (or by pluses, if using query parameters). Must be a subset of `scopes` declared during app registration. If not provided, defaults to `read`.stateString. Arbitrary value to passthrough to your server when the user authorizes or rejects the authorization request.code\_challengeString. The [PKCE code challenge](/spec/oauth/#pkce) for the authorization request.code\_challenge\_methodString. Must be `S256`, as this is the only code challenge method that is supported by Mastodon for PKCE.force\_loginBoolean. Forces the user to re-login, which is necessary for authorizing with multiple accounts from the same instance.langString. The ISO 639-1 two-letter language code to use while rendering the authorization form.## Response

## 200: OK

The authorization code will be returned as a query parameter named `code`.

Treat the `code` query parameter as if it were a password, you should ensure that it is not logged in request logs.
```
redirect\_uri?code=qDFUEaYrRK5c-HNmTCJbAzazwLRInJ7VHFat0wcMgCU

```
If the state parameter was used, then this will also be present in the URI when the client is redirected.

```
redirect\_uri?code=qDFUEaYrRK5c-HNmTCJbAzazwLRInJ7VHFat0wcMgCU&state=example

```
## 400: Client error

If the authorization code is incorrect or has been used already, the request will fail.

```
{
 "error": "invalid\_grant",
 "error\_description": "The provided authorization grant is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client."
}

```

---

## Obtain a token

```
POST /oauth/token HTTP/1.1

```
Obtain an access token, to be used during API calls that are not public.

**Returns:** [Token](/entities/Token/)  
**OAuth:** Public  
**Version history:**  
0.1.0 - added
4.3.0 - added support for PKCE parameter

## Request

## Form data parameters

grant\_typerequired String. Set equal to `authorization_code` if `code` is provided in order to gain user-level access. Otherwise, set equal to `client_credentials` to obtain app-level access only.coderequired String. A user authorization code, obtained from the redirect after an [Authorization request](/methods/oauth/#authorize) is approved. May alternatively be displayed to the user if `urn:ietf:wg:oauth:2.0:oob` is used as the `redirect_uri`.client\_idrequired String. The client ID, obtained during app registration.client\_secretrequired String. The client secret, obtained during app registration.redirect\_urirequired String. Must match the `redirect_uri` used during the [Authorization request](/methods/oauth/#authorize).code\_verifierString. Required if [PKCE](/spec/oauth/#pkce) is used during the authorization request. This is the code verifier which was used to create the `code_challenge` using the `code_challenge_method` for the authorization request.scopeString. When `grant_type` is set to `client_credentials`, the list of requested OAuth scopes, separated by spaces (or pluses, if using query parameters). Must be a subset of the scopes requested at the time the application was created. If omitted, it defaults to `read`. Has no effect when `grant_type` is `authorization_code`.## Response

## 200: OK

Store this `access_token` for later use with methods that require authentication. The token should be passed as an HTTP `Authorization` header when making API calls, with the value `Bearer <access_token>`

Treat the `access_token` as if it were a password. We recommend you encrypt this value when storing in your cache, to prevent credential exposure.  
  
Additionally, you should ensure that the `code` parameter is not logged.
```
{
 "access\_token": "ZA-Yj3aBD8U8Cm7lKUp-lm9O9BmDgdhHzDeqsY8tlL0",
 "token\_type": "Bearer",
 "scope": "read write follow push",
 "created\_at": 1573979017
}

```
## 400: Client error

If you try to request a scope that was not included when registering the app, the request will fail.

```
{
 "error": "invalid\_scope",
 "error\_description": "The requested scope is invalid, unknown, or malformed."
}

```
## 401: Unauthorized

If client\_id and client\_secret do not match or are invalid, the request will fail.

```
{
 "error": "invalid\_client",
 "error\_description": "Client authentication failed due to unknown client, no client authentication included, or unsupported authentication method."
}

```

---

## Revoke a token

```
POST /oauth/revoke HTTP/1.1

```
Revoke an access token to make it no longer valid for use.

**Returns:** Empty  
**OAuth:** Public  
**Version history:**  
0.1.0 - added

## Request

## Form data parameters

client\_idrequired String. The client ID, obtained during app registration.client\_secretrequired String. The client secret, obtained during app registration.tokenrequired String. The previously obtained token, to be invalidated.## Response

## 200: OK

If you own the provided token, the API call will provide an empty response. This operation is idempotent, so calling this API multiple times will still return OK.

```
{}

```
## 403: Forbidden

If you provide a token you do not own, or no token at all, the API call will return a 403 error.

```
{
 "error": "unauthorized\_client",
 "error\_description": "You are not authorized to revoke this token"
}

```

---

## Discover OAuth Server Configuration

```
GET /.well-known/oauth-authorization-server HTTP/1.1

```
Returns the OAuth 2 Authorization Server Metadata for the Mastodon server, as defined by [RFC 8414](https://datatracker.ietf.org/doc/html/rfc8414#section-3.2).

We include the additional non-standard property of `app_registration_endpoint` which refers to the POST /api/v1/apps endpoint, since we don’t currently support the standard `registration_endpoint` endpoint for [Dynamic Client Registration](https://oauth.net/2/dynamic-client-registration/).

The properties exposed by this endpoint can help you better integrate with the Mastodon API, such as allowing for negotiation of `scopes` across different versions of Mastodon.

**Example:** You want to use the `profile` scope, but also want to support older Mastodon servers that don’t have that scope and would need `read:accounts` instead. You could discover whether a server supports that scope by making a request to this endpoint.**Returns:** JSON as per the above description  
**OAuth:** Public  
**Version history:**  
4.3.0 - added

## Response

## 200: OK

```
{
 "issuer": "https://social.example/",
 "service\_documentation": "https://docs.joinmastodon.org/",
 "authorization\_endpoint": "https://social.example/oauth/authorize",
 "token\_endpoint": "https://social.example/oauth/token",
 "app\_registration\_endpoint": "https://social.example/api/v1/apps",
 "revocation\_endpoint": "https://social.example/oauth/revoke",
 "scopes\_supported": [
 "read",
 "write",
 "write:accounts",
 "write:blocks",
 "write:bookmarks",
 "write:conversations",
 "write:favourites",
 "write:filters",
 "write:follows",
 "write:lists",
 "write:media",
 "write:mutes",
 "write:notifications",
 "write:reports",
 "write:statuses",
 "read:accounts",
 "read:blocks",
 "read:bookmarks",
 "read:favourites",
 "read:filters",
 "read:follows",
 "read:lists",
 "read:mutes",
 "read:notifications",
 "read:search",
 "read:statuses",
 "follow",
 "push",
 "profile",
 "admin:read",
 "admin:read:accounts",
 "admin:read:reports",
 "admin:read:domain\_allows",
 "admin:read:domain\_blocks",
 "admin:read:ip\_blocks",
 "admin:read:email\_domain\_blocks",
 "admin:read:canonical\_email\_blocks",
 "admin:write",
 "admin:write:accounts",
 "admin:write:reports",
 "admin:write:domain\_allows",
 "admin:write:domain\_blocks",
 "admin:write:ip\_blocks",
 "admin:write:email\_domain\_blocks",
 "admin:write:canonical\_email\_blocks"
 ],
 "response\_types\_supported": ["code"],
 "response\_modes\_supported": ["query", "fragment", "form\_post"],
 "code\_challenge\_methods\_supported": [
 "S256"
 ],
 "grant\_types\_supported": [
 "authorization\_code",
 "client\_credentials"
 ],
 "token\_endpoint\_auth\_methods\_supported": [
 "client\_secret\_basic",
 "client\_secret\_post"
 ]
}

```
## Older Mastodon Versions – 404: Not Found

On Mastodon versions before 4.3.0, requesting this endpoint will result in a `404 Not Found` error.

Instead, you will need to “guess” what that server supports, instead of discovering supported OAuth 2 endpoints, grant flows & scopes dynamically.

You may want to fallback to the Instance Metadata endpoint to try to discover what Mastodon version the server is running by parsing the `version` field; however, this is very brittle and not recommended.

---

## See also

[POST /api/v1/apps](/methods/apps/#create)[app/controllers/oauth/authorizations\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/oauth/authorizations_controller.rb)[app/controllers/oauth/authorized\_applications\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/oauth/authorized_applications_controller.rb)[app/controllers/oauth/tokens\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/oauth/tokens_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/oauth.md)

---


# emails API methods

Source: https://docs.joinmastodon.org/methods/emails/

# emails API methods

Request a new confirmation email, potentially to a new email address.

## Resend confirmation email

```
POST /api/v1/emails/confirmations HTTP/1.1

```
Resend a new confirmation email. If an email is provided, updates the unconfirmed user’s email before resending the confirmation email.

**Returns:** Empty  
**OAuth:** User token issued to the client that created the unconfirmed user  
**Version history:**  
3.4.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

emailString. If provided, updates the unconfirmed user’s email before resending the confirmation email.## Response

## 200: OK

```
{}

```
## 403: Forbidden

The client associated with the token does not own the unconfirmed user.

```
{
 "error": "This method is only available to the application the user originally signed-up with"
}

```
Alternatively, the user has already confirmed their email.

```
{
 "error": "This method is only available while the e-mail is awaiting confirmation"
}

```

---

## See also

[POST /api/v1/apps](/methods/apps/#create)[POST /api/v1/accounts](/methods/accounts/#create)[app/controllers/api/v1/emails/confirmations\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/emails/confirmations_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/emails.md)

---


# bookmarks API methods

Source: https://docs.joinmastodon.org/methods/bookmarks/

# bookmarks API methods

View your bookmarks. See also statuses/:id/{bookmark,unbookmark}

## View bookmarked statuses

```
GET /api/v1/bookmarks HTTP/1.1

```
Statuses the user has bookmarked.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** User token + `read:bookmarks`  
**Version history:**  
3.1.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

```
[
 {
 "id": "108724195870225687",
 "created\_at": "2022-07-28T09:12:47.000Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 // ...
 },
 {
 "id": "108200780982641655",
 "created\_at": "2022-04-26T22:41:28.492Z",
 "in\_reply\_to\_id": "108200775562138405",
 "in\_reply\_to\_account\_id": "806143",
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 // ...
 },
 // ...
]

```
Because Bookmark IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/bookmarks?max\_id=23771>; rel="next", <https://mastodon.example/api/v1/bookmarks?min\_id=370065>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[POST /api/v1/statuses/:id/bookmark](/methods/statuses/#bookmark)[POST /api/v1/statuses/:id/unbookmark](/methods/statuses/#unbookmark)[app/controllers/api/v1/bookmarks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/bookmarks_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/bookmarks.md)

---


# favourites API methods

Source: https://docs.joinmastodon.org/methods/favourites/

# favourites API methods

View your favourites. See also statuses/:id/{favourite,unfavourite}

## View favourited statuses

```
GET /api/v1/favourites HTTP/1.1

```
Statuses the user has favourited.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** User token + `read:favourites`  
**Version:**  
0.0.0 - added  
2.6.0 - `min_id` added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

An example call with limit=2.

```
[
 {
 "id": "103186075217296344",
 "created\_at": "2019-11-23T07:35:52.000Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "unlisted",
 "language": "enCy",
 "uri": "https://cybre.space/users/haskal/statuses/103186075002013902",
 "url": "https://cybre.space/@haskal/103186075002013902",
 "replies\_count": 0,
 "reblogs\_count": 1,
 "favourites\_count": 1,
 "favourited": true,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "content": "<p>the pirate gay</p>",
 "reblog": null,
 "account": {
 "id": "297420",
 "username": "haskal",
 "acct": "haskal@cybre.space",
 "display\_name": "soft nb friend :blobcatsleep:",
 // ...
 },
 "media\_attachments": [],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": null,
 "poll": null
 },
 {
 "id": "103186044372624124",
 "created\_at": "2019-11-23T07:28:03.000Z",
 // ...
 "content": "<p>cute,,,</p>",
 "reblog": null,
 "account": {
 "id": "297420",
 "username": "haskal",
 "acct": "haskal@cybre.space",
 "display\_name": "soft nb friend :blobcatsleep:",
 "locked": false,
 "bot": false,
 // ...
 },
 // ...
 }
]

```
Because Favourite IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/favourites?limit=2&max\_id=23716836>; rel="next", <https://mastodon.example/api/v1/favourites?limit=2&min\_id=23716978>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[POST /api/v1/statuses/:id/favourite](/methods/statuses/#favourite)[POST /api/v1/statuses/:id/unfavourite](/methods/statuses/#unfavourite)[app/controllers/api/v1/favourites\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/favourites_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/favourites.md)

---


# mutes API methods

Source: https://docs.joinmastodon.org/methods/mutes/

# mutes API methods

View your mutes. See also accounts/:id/{mute,unmute}

## View muted accounts

```
GET /api/v1/mutes HTTP/1.1

```
Accounts the user has muted.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `read:mutes` or `follow`  
**Version history:**  
0.0.0 - added  
3.3.0 - added `mute_expires_at`

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

Sample response with limit=2.

```
[
 {
 "id": "963076",
 "username": "Simia91",
 "acct": "Simia91",
 "display\_name": "",
 // ...
 },
 {
 "id": "1001524",
 "username": "hakogamae",
 "acct": "hakogamae",
 "display\_name": "Hakogamae 🔞",
 // ...
 }
]

```
Because Mute IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/mutes?limit=2&max\_id=317646>; rel="next", <https://mastodon.example/api/v1/mutes?limit=2&since\_id=317647>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[POST /api/v1/accounts/:id/mute](/methods/accounts/#mute)[POST /api/v1/accounts/:id/unmute](/methods/accounts/#unmute)[app/controllers/api/v1/mutes\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/mutes_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/mutes.md)

---


# blocks API methods

Source: https://docs.joinmastodon.org/methods/blocks/

# blocks API methods

View your blocks. See also accounts/:id/{block,unblock}

## View blocked users

```
GET /api/v1/blocks HTTP/1.1

```
**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `read:blocks`  
**Version history:**  
0.0.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

Sample call with limit=2.

```
[
 {
 "id": "585315",
 "username": "admin",
 "acct": "admin@happylittle.cloudns.cc",
 "display\_name": "☁️ ⛅ Happy Little Clouds ⛅ ☁️",
 // ...
 },
 {
 "id": "650568",
 "username": "Nikolai\_Kingsley",
 "acct": "Nikolai\_Kingsley@dobbs.town",
 "display\_name": "Rev.Dr. Nikolai Kingsley",
 // ...
 }
]

```
Because Block IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/blocks?limit=2&max\_id=441449>; rel="next", <https://mastodon.example/api/v1/blocks?limit=2&since\_id=444808>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[POST /api/v1/accounts/:id/block](/methods/accounts/#block)[POST /api/v1/accounts/:id/unblock](/methods/accounts/#unblock)[app/controllers/api/v1/blocks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/blocks_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/blocks.md)

---


# domain_blocks API methods

Source: https://docs.joinmastodon.org/methods/domain_blocks/

# domain\_blocks API methods

Manage a user's blocked domains.

## Get domain blocks

```
GET /api/v1/domain\_blocks HTTP/1.1

```
View domains the user has blocked.

**Returns:** Array of String  
**OAuth:** User token + `read:blocks` or `follow`  
**Version:**  
1.4.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 domain blocks. Max 200 domain blocks.## Response

## 200: OK

Sample call with limit=2.

```
["nsfw.social","artalley.social"]

```
Because AccountDomainBlock IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/domain\_blocks?limit=2&max\_id=16194>; rel="next", <https://mastodon.example/api/v1/domain\_blocks?limit=2&since\_id=16337>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Block a domain

```
POST /api/v1/domain\_blocks HTTP/1.1

```
Block a domain to:

* hide all public posts from it
* hide all notifications from it
* remove all followers from it
* prevent following new users from it (but does not remove existing follows)

**Returns:** Empty  
**OAuth:** User token + `write:blocks` or `follow`  
**Version:**  
1.4.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

domainrequired String. Domain to block.## Response

## 200: OK

If the call was successful, an empty object will be returned. Note that the call will be successful even if the domain is already blocked, or if the domain does not exist, or if the domain is not a domain.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

If `domain` is not provided, the request will fail.

```
{
 "error": "Validation failed: Domain can't be blank"
}

```
If `domain` contains spaces, the request will fail.

```
{
 "error": "Validation failed: Domain is not a valid domain name"
}

```

---

## Unblock a domain

```
DELETE /api/v1/domain\_blocks HTTP/1.1

```
Remove a domain block, if it exists in the user’s array of blocked domains.

**Returns:** Empty  
**OAuth:** User token + `write:blocks` or `follow`  
**Version history:**  
1.4.0 - added

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

domainrequired String. Domain to unblock.## Response

## 200: OK

If the call was successful, an empty object will be returned. Note that the call will be successful even if the domain was not previously blocked.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

If `domain` is not provided, the request will fail.

```
{
 "error": "Validation failed: Domain can't be blank"
}

```
If `domain` contains spaces, the request will fail.

```
{
 "error": "Validation failed: Domain is not a valid domain name"
}

```

---

## See also

[app/controllers/api/v1/domain\_blocks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/domain_blocks_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/domain_blocks.md)

---


# filters API methods

Source: https://docs.joinmastodon.org/methods/filters/

# filters API methods

Create and manage filters.

## Server-side (v2) methods

Since Mastodon 4.0, filters can contain multiple keywords and are matched server-side. Clients apply the filter action based on [the status’s `filtered` attribute](/entities/Status/#filtered).

---

## View all filters

```
GET /api/v2/filters HTTP/1.1

```
Obtain a list of all filter groups for the current user.

**Returns:** Array of [Filter](/entities/Filter/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "id": "20060",
 "title": "Remove Twitter crossposts from public timeline",
 "context": [
 "public"
 ],
 "expires\_at": null,
 "filter\_action": "hide",
 "keywords": [
 {
 "id": "1311",
 "keyword": "from birdsite",
 "whole\_word": true
 },
 {
 "id": "1324",
 "keyword": "@twitter.com",
 "whole\_word": false
 },
 {
 "id": "1325",
 "keyword": "https://t.co/",
 "whole\_word": false
 }
 ],
 "statuses": []
 },
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## View a specific filter

```
GET /api/v2/filters/:id HTTP/1.1

```
Obtain a single filter group owned by the current user.

**Returns:** [Filter](/entities/Filter/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "20060",
 "title": "Remove Twitter crossposts from public timeline",
 "context": [
 "public"
 ],
 "expires\_at": null,
 "filter\_action": "hide",
 "keywords": [
 {
 "id": "1311",
 "keyword": "from birdsite",
 "whole\_word": true
 },
 {
 "id": "1324",
 "keyword": "@twitter.com",
 "whole\_word": false
 },
 {
 "id": "1325",
 "keyword": "https://t.co/",
 "whole\_word": false
 }
 ],
 "statuses": []
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## Create a filter

```
POST /api/v2/filters HTTP/1.1

```
Create a filter group with the given parameters.

**Returns:** [Filter](/entities/Filter/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added  
4.4.0 (`mastodon` [API version](/entities/Instance/#api-versions) 5) - added `blur` value to `filter_action` attribute

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

titlerequired String. The name of the filter group.context[]required Array of String. Where the filter should be applied. Specify at least one of `home`, `notifications`, `public`, `thread`, `account`.filter\_actionString. The policy to be applied when the filter is matched. Specify `warn`, `hide` or `blur`.expires\_inInteger. How many seconds from now should the filter expire?keywords\_attributes[][keyword]String. A keyword to be added to the newly-created filter group.keywords\_attributes[][whole\_word]Boolean. Whether the keyword should consider word boundaries.## Response

## 200: OK

Sample of a Filter created by the call:

```
POST https://mastodon.example/api/v2/filters
?title=test
&context[]=public
&keywords\_attributes[][keyword]=foo
&keywords\_attributes[][whole\_word]=false
&keywords\_attributes[][keyword]=bar
&keywords\_attributes[][whole\_word]=true

```

```
{
 "id": "25933",
 "title": "test",
 "context": [
 "public"
 ],
 "expires\_at": null,
 "filter\_action": "warn",
 "keywords": [
 {
 "id": "34978",
 "keyword": "foo",
 "whole\_word": false
 },
 {
 "id": "34979",
 "keyword": "bar",
 "whole\_word": true
 }
 ],
 "statuses": []
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter keyword ID was specified

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

```
{
 "error": "Validation failed: Title can't be blank, Context can't be blank, Context None or invalid context supplied"
}

```

---

## Update a filter

```
PUT /api/v2/filters/:id HTTP/1.1

```
Update a filter group with the given parameters.

**Returns:** [Filter](/entities/Filter/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added  
4.4.0 (`mastodon` [API version](/entities/Instance/#api-versions) 5) - added `blur` value to `filter_action` attribute

## Request

## Path parameters

:idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

titleString. The name of the filter group.context[]Array of String. Where the filter should be applied. Specify at least one of `home`, `notifications`, `public`, `thread`, `account`.filter\_actionString. The policy to be applied when the filter is matched. Specify `warn`, `hide` or `blur`.expires\_inInteger. How many seconds from now should the filter expire?keywords\_attributes[][keyword]String. A keyword to be added to the newly-created filter group.keywords\_attributes[][whole\_word]Boolean. Whether the keyword should consider word boundaries.keywords\_attributes[][id]String. Provide the ID of an existing keyword to modify it, instead of creating a new keyword.keywords\_attributes[][\_destroy]Boolean. If true, will remove the keyword with the given ID.## Response

## 200: OK

Sample call:

```
PUT /api/v2/filters/25933
?keywords_attributes[][id]=34978
&keywords_attributes[][_destroy]=true
&keywords_attributes[][id]=34979
&keywords_attributes[][keyword]=baz

```
This will remove keyword 34978 (“foo”) and will replace keyword 34979 (“bar”) with a new keyword (“baz”)

```
{
 "id": "25933",
 "title": "test",
 "context": [
 "public"
 ],
 "expires\_at": null,
 "filter\_action": "warn",
 "keywords": [
 {
 "id": "34979",
 "keyword": "baz",
 "whole\_word": true
 }
 ],
 "statuses": []
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you or does not exist. Alternatively, `keywords_attributes[][id]` was provided, there is no keyword with given id within this Filter.

```
{
 "error": "Record not found"
}

```

---

## Delete a filter

```
DELETE /api/v2/filters/:id HTTP/1.1

```
Delete a filter group with the given id.

**Returns:** Empty  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added

## Path parameters

:idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Filter successfully deleted

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## View keywords added to a filter

```
GET /api/v2/filters/:filter\_id/keywords HTTP/1.1

```
List all keywords attached to the current filter group.

**Returns:** Array of [FilterKeyword](/entities/FilterKeyword/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:filter\_idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "id": "34979",
 "keyword": "baz",
 "whole\_word": true
 },
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you, or does not exist

```
{
 "error": "Record not found"
}

```

---

## Add a keyword to a filter

```
POST /api/v2/filters/:filter\_id/keywords HTTP/1.1

```
Add the given keyword to the specified filter group

**Returns:** [FilterKeyword](/entities/FilterKeyword/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:filter\_idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

keywordrequired String. The keyword to be added to the filter group.whole\_wordBoolean. Whether the keyword should consider word boundaries.## Response

## 200: OK

```
{
 "id": "35583",
 "keyword": "some",
 "whole\_word": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you, or does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

No keyword was provided

```
{
 "error": "Validation failed: Keyword can't be blank"
}

```

---

## View a single keyword

```
GET /api/v2/filters/keywords/:id HTTP/1.1

```
Get one filter keyword by the given id.

**Returns:** [FilterKeyword](/entities/FilterKeyword/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the FilterKeyword in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "34979",
 "keyword": "baz",
 "whole\_word": true
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you, or the filter or filter keyword does not exist

```
{
 "error": "Record not found"
}

```

---

## Edit a keyword within a filter

```
PUT /api/v2/filters/keywords/:id HTTP/1.1

```
Update the given filter keyword.

**Returns:** [FilterKeyword](/entities/FilterKeyword/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the FilterKeyword in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

keywordrequired String. The keyword to be added to the filter group.whole\_wordBoolean. Whether the keyword should consider word boundaries.## Response

## 200: OK

The keyword “some” was updated to the keyword “other”

```
{
 "id": "35583",
 "keyword": "other",
 "whole\_word": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

FilterKeyword is not owned by you, or does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

No keyword was provided

```
{
 "error": "Validation failed: Keyword can't be blank"
}

```

---

## Remove keywords from a filter

```
DELETE /api/v2/filters/keywords/:id HTTP/1.1

```
Deletes the given filter keyword.

**Returns:** Empty  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the FilterKeyword in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

FilterKeyword was deleted successfully

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

FilterKeyword is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## View all status filters

```
GET /api/v2/filters/:filter\_id/statuses HTTP/1.1

```
Obtain a list of all status filters within this filter group.

**Returns:** Array of [FilterStatus](/entities/FilterStatus/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:filter\_idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "id": "897",
 "status\_id": "109416512469928632"
 },
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## Add a status to a filter group

```
POST /api/v2/filters/:filter\_id/statuses HTTP/1.1

```
Add a status filter to the current filter group.

**Returns:** [FilterStatus](/entities/FilterStatus/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:filter\_idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

status\_idrequired String. The status ID to be added to the filter group.## Response

## 200: OK

FilterStatus created successfully within the current Filter

```
{
 "id": "897",
 "status\_id": "109416512469928632"
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## View a single status filter

```
GET /api/v2/filters/statuses/:id HTTP/1.1

```
Obtain a single status filter.

**Returns:** [FilterStatus](/entities/FilterStatus/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the FilterStatus in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "897",
 "status\_id": "109416512469928632"
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

FilterStatus is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## Remove a status from a filter group

```
DELETE /api/v2/filters/statuses/:id HTTP/1.1

```
Remove a status filter from the current filter group.

**Returns:** [FilterStatus](/entities/FilterStatus/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the FilterStatus in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

FilterStatus deleted successfully

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

FilterStatus is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## Client-side (v1) methods

Prior to Mastodon 4.0, matching filters was done client-size and filters could only contain one phrase to filter against.

---

## View your filters deprecated

```
GET /api/v1/filters HTTP/1.1

```
**Returns:** List of [V1::Filter](/entities/V1_Filter/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
2.4.3 - added  
4.0.0 - deprecated. For compatibility purposes, now returns a List of V1::Filter, with each V1::Filter representing one FilterKeyword (with the `keyword` being presented in the `phrase` attribute)

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Excerpts of various filters in different contexts.

```
[
 {
 "id": "6191",
 "phrase": ":eurovision2019:",
 "context": [
 "home"
 ],
 "whole\_word": true,
 "expires\_at": "2019-05-21T13:47:31.333Z",
 "irreversible": false
 },
 // ...
 {
 "id": "5580",
 "phrase": "@twitter.com",
 "context": [
 "home",
 "notifications",
 "public",
 "thread"
 ],
 "whole\_word": false,
 "expires\_at": null,
 "irreversible": true
 },
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## View a single filter deprecated

```
GET /api/v1/filters/:id HTTP/1.1

```
**Returns:** [V1::Filter](/entities/V1_Filter/)  
**OAuth:** User token + `read:filters`  
**Version history:**  
2.4.3 - added  
4.0.0 - deprecated. For compatibility purposes, now returns a V1::Filter representing one FilterKeyword (with the `keyword` being presented in the `phrase` attribute)

## Request

## Path parameters

:idrequired String. The ID of the FilterKeyword in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "8449",
 "phrase": "test",
 "context": [
 "home",
 "notifications",
 "public",
 "thread"
 ],
 "whole\_word": false,
 "expires\_at": "2019-11-26T09:08:06.254Z",
 "irreversible": true
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter ID does not exist, or is not owned by you

```
{
 "error": "Record not found"
}

```

---

## Create a filter deprecated

```
POST /api/v1/filters HTTP/1.1

```
**Returns:** [V1::Filter](/entities/V1_Filter/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
2.4.3 - added  
3.1.0 - added `account` context to filter in profile views  
4.0.0 - deprecated. For compatibility purposes, now returns a V1::Filter representing one FilterKeyword (with the `keyword` being presented in the `phrase` attribute). This method will create a Filter that contains only one FilterKeyword. The `title` of the Filter and the `keyword` of the FilterKeyword will be set equal to the `phrase` provided.

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

phraserequired String. The text to be filtered.context[]required Array of String. Where the filter should be applied. Specify at least one of `home`, `notifications`, `public`, `thread`, `account`.irreversibleBoolean. Should the server irreversibly drop matching entities from home and notifications? Defaults to false.whole\_wordBoolean. Should the filter consider word boundaries for this keyword? Defaults to false.expires\_inInteger. Number of seconds from now that the filter should expire. Otherwise, `null` for a filter that doesn’t expire.## Response

## 200: OK

The newly-created filter will be returned.

```
{
 "id": "8449",
 "phrase": "test",
 "context": [
 "home",
 "notifications",
 "public",
 "thread"
 ],
 "whole\_word": false,
 "expires\_at": "2019-11-26T09:08:06.254Z",
 "irreversible": true
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

If phrase is not provided properly:

```
{
 "error": "Validation failed: Phrase can't be blank"
}

```
If context is not provided properly:

```
{
 "error": "Validation failed: Context can't be blank, Context None or invalid context supplied"
}

```

---

## Update a filter deprecated

```
PUT /api/v1/filters/:id HTTP/1.1

```
Replaces a filter’s parameters in-place.

**Returns:** [V1::Filter](/entities/V1_Filter/)  
**OAuth:** User token + `write:filters`  
**Version history:**  
2.4.3 - added  
3.1.0 - added `account` context to filter in profile views  
4.0.0 - deprecated. For compatibility purposes, now returns a V1::Filter representing one FilterKeyword (with the `keyword` being presented in the `phrase` attribute). This method will return an error if you attempt to change `expires_in`, `irreversible`, or `context` for a filter with multiple keywords. Changing `phrase` and `whole_word` is always safe.

## Request

## Path parameters

:idrequired String. The ID of the FilterKeyword in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

phraserequired String. The text to be filtered.context[]required Array of String. Specify at least one of `home`, `notifications`, `public`, `thread`, `account`.irreversibleBoolean. Should the server irreversibly drop matching entities from home and notifications? Defaults to false.whole\_wordBoolean. Should the filter consider word boundaries? Defaults to false.expires\_inInteger. Number of seconds from now that the filter should expire. Otherwise, `null` for a filter that doesn’t expire.## Response

## 200: OK

Filter updated

```
{
 "id": "8449",
 "phrase": "test",
 "context": [
 "home",
 "notifications",
 "public",
 "thread"
 ],
 "whole\_word": false,
 "expires\_at": null,
 "irreversible": true
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter does not exist or is not owned by you

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

If phrase is not provided properly:

```
{
 "error": "Validation failed: Phrase can't be blank"
}

```
If context is not provided properly:

```
{
 "error": "Validation failed: Context can't be blank, Context None or invalid context supplied"
}

```

---

## Remove a filter deprecated

```
DELETE /api/v1/filters/:id HTTP/1.1

```
**Returns:** Empty  
**OAuth:** User token + `write:filters`  
**Version history:**  
2.4.3 - added  
4.0.0 - deprecated. This method will delete only the FilterKeyword from its parent Filter. To delete the parent Filter, you must use the v2 filters API.

## Request

## Path parameters

:idrequired String. The ID of the Filter in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The filter has been deleted successfully, so an empty object will be returned.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Filter does not exist or is not owned by you

```
{
 "error": "Record not found"
}

```

---

## See also

[Implementation guidelines for filters](/api/guidelines/#filters)[app/controllers/api/v2/filters\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v2/filters_controller.rb)[app/controllers/api/v1/filters/keywords\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/filters/keywords_controller.rb)[app/controllers/api/v1/filters/statuses\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/filters/statuses_controller.rb)[app/controllers/api/v1/filters\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/filters_controller.rb)Last updated March 26, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/filters.md)

---


# reports API methods

Source: https://docs.joinmastodon.org/methods/reports/

# reports API methods

Report problematic users to your moderators.

## File a report

```
POST /api/v1/reports HTTP/1.1

```
**Returns:** [Report](/entities/Report/)  
**OAuth:** User token + `write:reports`  
**Version history:**  
1.1 - added  
2.3.0 - add `forward` parameter  
3.5.0 - add `category` and `rule_ids` parameters  
4.0.0 - `category` is now optional if `rule_ids` is provided  
4.2.0 - add `legal` category

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

account\_idrequired String. ID of the account to report.status\_ids[]Array of String. You can attach statuses to the report to provide additional context.commentString. The reason for the report. Default maximum of 1000 characters.forwardBoolean. If the account is remote, should the report be forwarded to the remote admin? Defaults to false.categoryString. Specify if the report is due to `spam`, `legal` (illegal content), `violation` of enumerated instance rules, or some `other` reason. Defaults to `other`. Will be set to `violation` if `rule_ids[]` is provided (regardless of any category value you provide).rule\_ids[]Array of String. For `violation` category reports, specify the ID of the exact rules broken. Rules and their IDs are available via [GET /api/v1/instance/rules](/methods/instance/#rules) and [GET /api/v1/instance](/methods/instance/#get). See [Handling and sorting IDs](/api/guidelines/#id) for more information.## Response

## 200: OK

Sample call with one status ID provided and a category of `spam` with a comment

```
{
 "id": "48914",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "spam",
 "comment": "Spam account",
 "forwarded": false,
 "created\_at": "2022-08-25T09:56:16.763Z",
 "status\_ids": [
 "108882889550545820"
 ],
 "rule\_ids": null,
 "target\_account": {
 "id": "108366849347798387",
 "username": "Baluke",
 "acct": "Baluke",
 "display\_name": "Baluke Dental Studios",
 "locked": false,
 "bot": false,
 "discoverable": false,
 "group": false,
 "created\_at": "2022-05-26T00:00:00.000Z",
 "note": "<p>Baluke Dental Studios is a full service dental lab offering fabrication, staining, and digital services. Advanced technologies and a meticulous process ensure reduced chair time, lower costs, and better patient outcomes with beautiful smiles. Talk to a representative today.</p><p><a href=\"https://baluke.com/\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">baluke.com/</span><span class=\"invisible\"></span></a></p>",
 "url": "https://mastodon.social/@Baluke",
 "avatar": "https://files.mastodon.social/accounts/avatars/108/366/849/347/798/387/original/dbcfe99ed5def0f4.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/108/366/849/347/798/387/original/dbcfe99ed5def0f4.png",
 "header": "https://static-cdn.mastodon.social/headers/original/missing.png",
 "header\_static": "https://static-cdn.mastodon.social/headers/original/missing.png",
 "followers\_count": 0,
 "following\_count": 0,
 "statuses\_count": 38,
 "last\_status\_at": "2022-08-25",
 "emojis": [],
 "fields": []
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Report not filed.

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

Token does not have an authorized user

```
{
 "error": "This method requires an authenticated user"
}

```
Alternatively, the `category` was set to `violation` but invalid or missing `rule_ids` were provided

```
{
 "error": "Validation failed: Rule ids does not reference valid rules"
}

```
Alternatively (Mastodon 3.5), the `category` was set to something other than `violation` but some `rule_ids` were provided

```
{
 "error": "Validation failed: Rule ids must be blank"
}

```

---

## See also

[app/controllers/api/v1/reports\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/reports_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/reports.md)

---


# follow_requests API methods

Source: https://docs.joinmastodon.org/methods/follow_requests/

# follow\_requests API methods

View and manage follow requests.

## View pending follow requests

```
GET /api/v1/follow\_requests HTTP/1.1

```
**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `read:follows` or `follow`  
**Version history:**  
0.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

Sample call for Accounts that are requesting a follow, with limit=2

```
[
 {
 "id":"108119793981152178",
 "username":"spcpro3022",
 "acct":"spcpro3022@shitposter.club",
 "display\_name":"spcpro3022",
 // ...
 },
 {
 "id":"106780475844882270",
 "username":"EricStoner",
 "acct":"EricStoner@freeatlantis.com",
 "display\_name":"EricStoner",
 // ...
 }
]

```
Because FollowRequest IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/follow\_requests?limit=2&max\_id=7163058>; rel="next", <https://mastodon.example/api/v1/follow\_requests?limit=2&since\_id=7275607>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Accept follow request

```
POST /api/v1/follow\_requests/:account\_id/authorize HTTP/1.1

```
**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:follows` or `follow`  
**Version history:**  
0.0.0 - added  
3.0.0 - now returns Relationship instead of nothing

## Request

## Path parameters

:account\_idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Your Relationship with this account should be updated so that you are `followed_by` this account.

```
{
 "id": "8889777",
 "following": false,
 "showing\_reblogs": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

No pending follow request from that account ID

```
{
 "error": "Record not found"
}

```

---

## Reject follow request

```
POST /api/v1/follow\_requests/:account\_id/reject HTTP/1.1

```
**Returns:** [Relationship](/entities/Relationship/)  
**OAuth:** User token + `write:follows` or `follow`  
**Version history:**  
0.0.0 - added  
3.0.0 - now returns Relationship instead of nothing

## Request

## Path parameters

:account\_idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Your Relationship with this account should be unchanged.

```
{
 "id": "8889777",
 "following": false,
 "showing\_reblogs": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "domain\_blocking": false,
 "endorsed": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

No pending follow request from that account ID

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/follow\_requests\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/follow_requests_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/follow_requests.md)

---


# endorsements API methods

Source: https://docs.joinmastodon.org/methods/endorsements/

# endorsements API methods

Feature other profiles on your own profile. See also accounts/:id/{pin,unpin}

## View currently featured profiles

```
GET /api/v1/endorsements HTTP/1.1

```
Accounts that the user is currently featuring on their profile.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `read:accounts`  
**Version history:**  
2.5.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

Sample call with limit=2.

```
[
 {
 "id": "952529",
 "username": "alayna",
 "acct": "alayna@desvox.es",
 "display\_name": "Alayna Desirae",
 "locked": true,
 "bot": false,
 "created\_at": "2019-10-26T23:12:06.570Z",
 "note": "experiencing \_\_\_\_\_\_\_\_ difficulties<br>22y/o INFP in Oklahoma",
 "url": "https://desvox.es/users/alayna",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/952/529/original/6534122046d050d5.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/952/529/original/6534122046d050d5.png",
 "header": "https://files.mastodon.social/accounts/headers/000/952/529/original/496f1f817e042ade.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/952/529/original/496f1f817e042ade.png",
 "followers\_count": 0,
 "following\_count": 0,
 "statuses\_count": 955,
 "last\_status\_at": "2019-11-23T07:05:50.682Z",
 "emojis": [],
 "fields": []
 },
 {
 "id": "832844",
 "username": "a9",
 "acct": "a9@broadcast.wolfgirl.engineering",
 "display\_name": "vivienne :collar: ",
 "locked": true,
 "bot": false,
 "created\_at": "2019-06-12T18:55:12.053Z",
 "note": "borderline nsfw, considered a schedule I drug by nixon<br>waiting for the year of the illumos desktop",
 "url": "https://broadcast.wolfgirl.engineering/users/a9",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/832/844/original/ae1de0b8fb63d1c6.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/832/844/original/ae1de0b8fb63d1c6.png",
 "header": "https://files.mastodon.social/accounts/headers/000/832/844/original/5088e4a16e6d8736.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/832/844/original/5088e4a16e6d8736.png",
 "followers\_count": 43,
 "following\_count": 67,
 "statuses\_count": 5906,
 "last\_status\_at": "2019-11-23T05:23:47.911Z",
 "emojis": [
 {
 "shortcode": "collar",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/106/920/original/80953b9cd96ec4dc.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/106/920/static/80953b9cd96ec4dc.png",
 "visible\_in\_picker": true
 }
 ],
 "fields": []
 }
]

```
Because AccountPin IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/endorsements?limit=2&max\_id=832844>; rel="next", <https://mastodon.example/api/v1/endorsements?limit=2&since\_id=952529>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[POST /api/v1/accounts/:id/pin](/methods/accounts/#pin)[POST /api/v1/accounts/:id/unpin](/methods/accounts/#unpin)[app/controllers/api/v1/endorsements\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/endorsements_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/endorsements.md)

---


# featured_tags API methods

Source: https://docs.joinmastodon.org/methods/featured_tags/

# featured\_tags API methods

Feature tags that you use frequently on your profile.

## View your featured tags

```
GET /api/v1/featured\_tags HTTP/1.1

```
List all hashtags featured on your profile.

**Returns:** Array of [FeaturedTag](/entities/FeaturedTag/)  
**OAuth:** User token + `read:accounts`  
**Version history:**  
3.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "id": "627",
 "name": "nowplaying",
 "url": "https://mastodon.social/@trwnh/tagged/nowplaying",
 "statuses\_count": 70,
 "last\_status\_at": "2022-08-29T12:03:35.061Z"
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Feature a tag

```
POST /api/v1/featured\_tags HTTP/1.1

```
Promote a hashtag on your profile.

**Returns:** [FeaturedTag](/entities/FeaturedTag/)  
**OAuth:** User token + `write:accounts`  
**Version history:**  
3.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

namerequired String. The hashtag to be featured, without the hash sign.## Response

## 200: OK

A FeaturedTag will be created with the specified `name`.

```
{
 "id": "13174",
 "name": "circasurvive",
 "url": "https://mastodon.social/@trwnh/tagged/circasurvive",
 "statuses\_count": 23,
 "last\_status\_at": "2021-10-22T14:47:35.357Z"
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

If `name` is not a valid hashtag, e.g. contains illegal characters or only numbers

```
{
 "error": "Validation failed: Tag is invalid"
}

```

---

## Unfeature a tag

```
DELETE /api/v1/featured\_tags/:id HTTP/1.1

```
Stop promoting a hashtag on your profile.

**Returns:** Empty  
**OAuth:** User token + `write:accounts`  
**Version history:**  
3.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the FeaturedTag in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The tag was unfeatured.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

FeaturedTag is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## View suggested tags to feature

```
GET /api/v1/featured\_tags/suggestions HTTP/1.1

```
Shows up to 10 recently-used tags.

**Returns:** Array of [Tag](/entities/Tag/)  
**OAuth:** User token + `read:accounts`  
**Version history:**  
3.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Truncated results to first and last tag.

```
[
 {
 "name": "nowplaying",
 "url": "https://mastodon.social/tags/nowplaying",
 "history": [
 {
 "day": "1574553600",
 "uses": "200",
 "accounts": "31"
 },
 {
 "day": "1574467200",
 "uses": "272",
 "accounts": "39"
 },
 {
 "day": "1574380800",
 "uses": "345",
 "accounts": "40"
 },
 {
 "day": "1574294400",
 "uses": "366",
 "accounts": "46"
 },
 {
 "day": "1574208000",
 "uses": "226",
 "accounts": "32"
 },
 {
 "day": "1574121600",
 "uses": "217",
 "accounts": "42"
 },
 {
 "day": "1574035200",
 "uses": "214",
 "accounts": "34"
 }
 ]
 },
 // ...
 {
 "name": "mastothemes",
 "url": "https://mastodon.social/tags/mastothemes",
 "history": [
 {
 "day": "1574553600",
 "uses": "0",
 "accounts": "0"
 },
 {
 "day": "1574467200",
 "uses": "0",
 "accounts": "0"
 },
 {
 "day": "1574380800",
 "uses": "0",
 "accounts": "0"
 },
 {
 "day": "1574294400",
 "uses": "0",
 "accounts": "0"
 },
 {
 "day": "1574208000",
 "uses": "0",
 "accounts": "0"
 },
 {
 "day": "1574121600",
 "uses": "0",
 "accounts": "0"
 },
 {
 "day": "1574035200",
 "uses": "0",
 "accounts": "0"
 }
 ]
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[app/controllers/api/v1/featured\_tags\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/featured_tags_controller.rb)[app/controllers/api/v1/featured\_tags/suggestions\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/featured_tags/suggestions_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/featured_tags.md)

---


# preferences API methods

Source: https://docs.joinmastodon.org/methods/preferences/

# preferences API methods

Preferred common behaviors to be shared across clients.

## View user preferences

```
GET /api/v1/preferences HTTP/1.1

```
Preferences defined by the user in their account settings.

**Returns:** Preferences by key and value  
**OAuth:** User token + `read:accounts`  
**Version history:**  
2.8.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "posting:default:visibility": "public",
 "posting:default:sensitive": false,
 "posting:default:language": null,
 "reading:expand:media": "default",
 "reading:expand:spoilers": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[app/controllers/api/v1/preferences\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/preferences_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/preferences.md)

---


# followed_tags API methods

Source: https://docs.joinmastodon.org/methods/followed_tags/

# followed\_tags API methods

View your followed hashtags.

## View all followed tags

```
GET /api/v1/followed\_tags HTTP/1.1

```
List your followed hashtags.

**Returns:** Array of [Tag](/entities/Tag/)  
**OAuth:** User token + `read:follows`  
**Version history:**  
4.0.0 - added  
4.1.0 - add pagination headers

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 tags. Max 200 tags.## Response

## 200: OK

List of followed hashtags

```
[
 {
 "name": "Test",
 "url": "http://mastodon.example/tags/test",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "1",
 "uses": "1"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ],
 "following": true
 },
 // ...
]

```
Because TagFollow IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <http://mastodon.example/api/v1/followed\_tags?limit=1&max\_id=2>; rel="next", <http://mastodon.example/api/v1/followed\_tags?limit=1&since\_id=2>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[POST /api/v1/tags/:id/follow](/methods/tags/#follow)[POST /api/v1/tags/:id/unfollow](/methods/tags/#unfollow)[app/controllers/api/v1/followed\_tags\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/followed_tags_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/followed_tags.md)

---


# suggestions API methods

Source: https://docs.joinmastodon.org/methods/suggestions/

# suggestions API methods

Server-generated suggestions on who to follow, based on previous positive interactions.

## View follow suggestions (v2)

```
GET /api/v2/suggestions HTTP/1.1

```
Accounts that are promoted by staff, or that the user has had past positive interactions with, but is not yet following.

**Returns:** Array of [Suggestion](/entities/Suggestion/)  
**OAuth:** User token + `read`  
**Version history:**  
3.4.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

```
[
 {
 "source": "past\_interactions",
 "account": {
 "id": "784058",
 "username": "katie",
 "acct": "katie@pleroma.voidlurker.net",
 // ...
 },
 // ...
 {
 "source": "global",
 "account": {
 "id": "108194863260762493",
 "username": "thunderbird",
 "acct": "thunderbird@mastodon.online",
 // ...
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Remove a suggestion

```
DELETE /api/v1/suggestions/:account\_id HTTP/1.1

```
Remove an account from follow suggestions.

**Returns:** Empty  
**OAuth:** User token + `read`  
**Version history:**  
2.4.3 - added

## Request

## Path parameters

:account\_idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

A successful call will return an empty object. Note the call will be successful even if the account id provided is invalid or is not a suggested account.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## View follow suggestions (v1) deprecated

```
GET /api/v1/suggestions HTTP/1.1

```
Accounts the user has had past positive interactions with, but is not yet following.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `read`  
**Version history:**  
2.4.3 - added  
3.4.0 - deprecated

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

limitInteger. Maximum number of results to return. Defaults to 40 accounts. Max 80 accounts.## Response

## 200: OK

```
[
 {
 "id": "332766",
 "username": "kaniini",
 "acct": "kaniini@pleroma.site",
 // ...
 },
 {
 "id": "689455",
 "username": "interneteh",
 "acct": "interneteh@sunbeam.city",
 // ...
 },
 {
 "id": "764276",
 "username": "Dee",
 "acct": "Dee@fedi.underscore.world",
 // ...
 },
 // ...
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[POST /api/v1/accounts/:id/follow](/methods/accounts/#follow)[app/controllers/api/v2/suggestions\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v2/suggestions_controller.rb)[app/controllers/api/v1/suggestions\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/suggestions_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/suggestions.md)

---


# tags API methods

Source: https://docs.joinmastodon.org/methods/tags/

# tags API methods

View information about or follow/unfollow hashtags.

## View information about a single tag

```
GET /api/v1/tags/:id HTTP/1.1

```
Show a hashtag and its associated information

**Returns:** [Tag](/entities/Tag/)  
**OAuth:** Public, or User token  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The name of the hashtag.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "name": "Test",
 "url": "http://mastodon.example/tags/test",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "1",
 "uses": "1"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ],
 "following": false
}

```

---

## Follow a hashtag

```
POST /api/v1/tags/:id/follow HTTP/1.1

```
Follow a hashtag. Posts containing a followed hashtag will be inserted into your home timeline.

**Returns:** [Tag](/entities/Tag/)  
**OAuth:** User token + `write:follows`  
**Version history:**  
4.0.0 - added  
4.1.0 - this action is now idempotent

## Request

## Path parameters

:idrequired String. The name of the hashtag.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Tag has been successfully followed

```
{
 "name": "Test",
 "url": "http://mastodon.example/tags/test",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "1",
 "uses": "1"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ],
 "following": true
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

Prior to 4.1.0: Tag was already followed

```
{
 "error": "Duplicate record"
}

```

---

## Unfollow a hashtag

```
POST /api/v1/tags/:id/unfollow HTTP/1.1

```
Unfollow a hashtag. Posts containing this hashtag will no longer be inserted into your home timeline.

**Returns:** [Tag](/entities/Tag/)  
**OAuth:** User token + `write:follows`  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The name of the hashtag.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Tag has been successfully unfollowed, or was already unfollowed

```
{
 "name": "Test",
 "url": "http://mastodon.example/tags/test",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "1",
 "uses": "1"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ],
 "following": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[GET /api/v1/followed\_tags](/methods/followed_tags/#get)[app/controllers/api/v1/tags\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/tags_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/tags.md)

---


# media API methods

Source: https://docs.joinmastodon.org/methods/media/

# media API methods

Attach media to authored statuses. See Using Mastodon > Posting toots > Attachments for more information about size and format limits.

## Upload media as an attachment (async)

```
POST /api/v2/media HTTP/1.1

```
Creates a media attachment to be used with a new status. The full sized media will be processed asynchronously in the background for large uploads.

**Returns:** [MediaAttachment](/entities/MediaAttachment/), but without a URL  
**OAuth:** User token + `write:media`  
**Version history:**  
3.1.3 - added  
3.2.0 - add `thumbnail` parameter  
4.0.0 - Smaller media formats (image) will be processed synchronously and return 200 instead of 202. Larger media formats (video, gifv, audio) will continue to be processed asynchronously and return 202.

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

filerequired Object. The file to be attached, encoded using multipart form data. The file must have a MIME type.thumbnailObject. The custom thumbnail of the media to be attached, encoded using multipart form data.descriptionString. A plain-text description of the media, for accessibility purposes.focusString. Two floating points (x,y), comma-delimited, ranging from -1.0 to 1.0. See [Focal points for cropping media thumbnails](/api/guidelines/#focal-points) for more information.## Response

## 200: OK

MediaAttachment was created successfully, and the full-size file was processed synchronously.

```
{
 "id": "22348641",
 "type": "image",
 "url": "https://files.mastodon.social/media\_attachments/files/022/348/641/original/e96382f26c72a29c.jpeg",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/348/641/small/e96382f26c72a29c.jpeg",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/4Zj6ewxzzzDi0g8JnZQ",
 "meta": {
 "focus": {
 "x": -0.42,
 "y": 0.69
 },
 "original": {
 "width": 640,
 "height": 480,
 "size": "640x480",
 "aspect": 1.3333333333333333
 },
 "small": {
 "width": 461,
 "height": 346,
 "size": "461x346",
 "aspect": 1.3323699421965318
 }
 },
 "description": "test uploaded via api",
 "blurhash": "UFBWY:8\_0Jxv4mx]t8t64.%M-:IUWGWAt6M}"
}

```
## 202: Accepted

MediaAttachment was created successfully, but the full-size file is still processing. Note that the MediaAttachment’s `url` will still be null, as the media is still being processed in the background. However, the `preview_url` should be available. Use [`GET /api/v1/media/:id`](/methods/media/#get) to check the status of the media attachment.

```
{
 "id": "22348641",
 "type": "image",
 "url": null,
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/348/641/small/cebc6d51be03e509.jpeg",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/4Zj6ewxzzzDi0g8JnZQ",
 "meta": {
 "focus": {
 "x": -0.69,
 "y": 0.42
 },
 "original": {
 "width": 640,
 "height": 480,
 "size": "640x480",
 "aspect": 1.3333333333333333
 },
 "small": {
 "width": 461,
 "height": 346,
 "size": "461x346",
 "aspect": 1.3323699421965318
 }
 },
 "description": "test uploaded via api",
 "blurhash": "UFBWY:8\_0Jxv4mx]t8t64.%M-:IUWGWAt6M}"
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

File or file type is unsupported or invalid

```
{
 "error": "Validation failed: File content type is invalid, File is invalid"
}

```
## 500: Server error

Could not generate a thumbnail for the attachment

```
{
 "error": "Error processing thumbnail for uploaded media"
}

```

---

## Get media attachment

```
GET /api/v1/media/:id HTTP/1.1

```
Get a media attachment, before it is attached to a status and posted, but after it is accepted for processing. Use this method to check that the full-sized media has finished processing.

**Returns:** [MediaAttachment](/entities/MediaAttachment/)  
**OAuth:** User token + `write:media`  
**Version history:**  
3.1.3 - added

## Request

## Path parameters

:idrequired String. The ID of the MediaAttachment in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The media file was processed, and a `url` to the processed media is available.

```
{
 "id": "22348641",
 "type": "image",
 "url": "https://files.mastodon.social/media\_attachments/files/022/348/641/original/e96382f26c72a29c.jpeg",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/348/641/small/e96382f26c72a29c.jpeg",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/4Zj6ewxzzzDi0g8JnZQ",
 "meta": {
 "focus": {
 "x": -0.42,
 "y": 0.69
 },
 "original": {
 "width": 640,
 "height": 480,
 "size": "640x480",
 "aspect": 1.3333333333333333
 },
 "small": {
 "width": 461,
 "height": 346,
 "size": "461x346",
 "aspect": 1.3323699421965318
 }
 },
 "description": "test uploaded via api, but updated",
 "blurhash": "UFBWY:8\_0Jxv4mx]t8t64.%M-:IUWGWAt6M}"
}

```
## 206: Partial content

The media attachment is still being processed

## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

MediaAttachment is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

There was an error processing the media attachment

```
{
 "error": "Validation failed: File content type is invalid, File is invalid"
}

```

---

## Delete media attachment

```
DELETE /api/v1/media/:id

```
Delete a media attachment that is not currently attached to a status.

**Returns:** Empty  
**OAuth:** User token + `write:media`  
**Version history:**\

* 4.4.0 (`mastodon` [API version](/entities/Instance/#api-versions) 4) - added

## Request

## Path parameters

:idrequired String. The ID of the MediaAttachment in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Update media attachment

```
PUT /api/v1/media/:id HTTP/1.1

```
Update a MediaAttachment’s parameters, before it is attached to a status and posted.

**Returns:** [MediaAttachment](/entities/MediaAttachment/)  
**OAuth:** User token + `write:media`  
**Version history:**  
0.0.0 - added  
2.3.0 - add `focus` parameter  
3.2.0 - added `thumbnail`

## Request

## Path parameters

:idrequired String. The ID of the MediaAttachment in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

thumbnailObject. The custom thumbnail of the media to be attached, encoded using multipart form data.descriptionString. A plain-text description of the media, for accessibility purposes.focusString. Two floating points (x,y), comma-delimited, ranging from -1.0 to 1.0. See [Focal points for cropping media thumbnails](/api/guidelines/#focal-points) for more information.## Response

## 200: OK

Attachment with an updated `description`

```
{
 "id": "22348641",
 "type": "image",
 "url": "https://files.mastodon.social/media\_attachments/files/022/348/641/original/e96382f26c72a29c.jpeg",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/348/641/small/e96382f26c72a29c.jpeg",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/4Zj6ewxzzzDi0g8JnZQ",
 "meta": {
 "focus": {
 "x": -0.42,
 "y": 0.69
 },
 "original": {
 "width": 640,
 "height": 480,
 "size": "640x480",
 "aspect": 1.3333333333333333
 },
 "small": {
 "width": 461,
 "height": 346,
 "size": "461x346",
 "aspect": 1.3323699421965318
 }
 },
 "description": "test uploaded via api, but updated",
 "blurhash": "UFBWY:8\_0Jxv4mx]t8t64.%M-:IUWGWAt6M}"
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Attachment is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

```
{
 "error": "Validation failed: File content type is invalid, File is invalid"
}

```

---

## Upload media as an attachment (v1) deprecated

```
POST /api/v1/media HTTP/1.1

```
Creates an attachment to be used with a new status. This method will return after the full sized media is done processing.

**Returns:** [MediaAttachment](/entities/MediaAttachment/)  
**OAuth:** User token + `write:media`  
**Version history:**  
0.0.0 - added  
2.3.0 - add `focus` parameter  
3.1.3 - deprecated in favor of [POST /api/v2/media](/methods/media/#v2), which is equal to v1 in all aspects, except it returns HTTP 202, and the returned JSON object has a url of null. This is because while the thumbnail is prepared synchronously, the full version of the media attachment will be processed in the background.  
3.2.0 - add `thumbnail` parameter

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

filerequired Object. The file to be attached, encoded using multipart form data. The file must have a MIME type.thumbnailObject. The custom thumbnail of the media to be attached, encoded using multipart form data.descriptionString. A plain-text description of the media, for accessibility purposes.focusString. Two floating points (x,y), comma-delimited, ranging from -1.0 to 1.0. See [Focal points for cropping media thumbnails](/api/guidelines/#focal-points) for more information.## Response

## 200: OK

Attachment created successfully. Note that the MediaAttachment will be created even if the file is not understood correctly due to failed processing.

Sample response for a correct file:

```
{
 "id": "22348641",
 "type": "image",
 "url": "https://files.mastodon.social/media\_attachments/files/022/348/641/original/cebc6d51be03e509.jpeg",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/348/641/small/cebc6d51be03e509.jpeg",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/4Zj6ewxzzzDi0g8JnZQ",
 "meta": {
 "focus": {
 "x": -0.69,
 "y": 0.42
 },
 "original": {
 "width": 640,
 "height": 480,
 "size": "640x480",
 "aspect": 1.3333333333333333
 },
 "small": {
 "width": 461,
 "height": 346,
 "size": "461x346",
 "aspect": 1.3323699421965318
 }
 },
 "description": "test uploaded via api",
 "blurhash": "UFBWY:8\_0Jxv4mx]t8t64.%M-:IUWGWAt6M}"
}

```
Sample response for an incorrect file, which results in a “missing” url:

```
{
 "id": "22348456",
 "type": "unknown",
 "url": "https://mastodon.social/files/original/missing.png",
 "preview\_url": "https://mastodon.social/files/small/missing.png",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/Ao2nvQoQNHROpKgEyoA",
 "meta": {
 "focus": {
 "x": -0.69,
 "y": 0.42
 }
 },
 "description": "test uploaded via api",
 "blurhash": null
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

File or file type is unsupported or invalid

```
{
 "error": "Validation failed: File content type is invalid, File is invalid"
}

```

---

## See also

[GET /api/v2/instance (for obtaining configuration limits)](/methods/instance/)[Instance#configuration[media\_attachments]](/entities/Instance/#media_attachments)[Focal points for cropping media thumbnails](/api/guidelines/#focal-points)[app/controllers/api/v1/media\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/media_controller.rb)[app/controllers/api/v2/media\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v2/media_controller.rb)Last updated March 4, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/media.md)

---


# polls API methods

Source: https://docs.joinmastodon.org/methods/polls/

# polls API methods

View and vote on polls attached to statuses. To discover poll ID, you will need to GET a Status first and then check for a `poll` property.

## View a poll

```
GET /api/v1/polls/:id HTTP/1.1

```
View a poll attached to a status.

**Returns:** [Poll](/entities/Poll/)  
**OAuth:** Public if parent status is public. User token + `read:statuses` if parent status is private.  
**Version history:**  
2.8.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Poll in the database.## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "34830",
 "expires\_at": "2019-12-05T04:05:08.302Z",
 "expired": true,
 "multiple": false,
 "votes\_count": 10,
 "voters\_count": null,
 "voted": true,
 "own\_votes": [
 1
 ],
 "options": [
 {
 "title": "accept",
 "votes\_count": 6
 },
 {
 "title": "deny",
 "votes\_count": 4
 }
 ],
 "emojis": []
}

```
## 404: Not found

Poll does not exist, or poll’s parent status is private

```
{
 "error": "Record not found"
}

```

---

## Vote on a poll

```
POST /api/v1/polls/:id/votes HTTP/1.1

```
Vote on a poll attached to a status.

**Returns:** [Poll](/entities/Poll/)  
**OAuth:** User token + `write:statuses`  
**Version history:**  
2.8.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Poll in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

choices[]required Array of Integer. Provide your own votes as an index for each option (starting from 0).## Response

## 200: OK

Poll was voted on

```
{
 "id": "34873",
 "expires\_at": "2019-12-05T11:16:17.426Z",
 "expired": false,
 "multiple": true,
 "votes\_count": 5,
 "voters\_count": null,
 "voted": true,
 "own\_votes": [
 0,
 2,
 4,
 9,
 6
 ],
 "options": [
 {
 "title": "option 0",
 "votes\_count": 1
 },
 {
 "title": "option 1",
 "votes\_count": 0
 },
 {
 "title": "option 2",
 "votes\_count": 1
 },
 {
 "title": "option 3",
 "votes\_count": 0
 },
 {
 "title": "option 4",
 "votes\_count": 1
 },
 {
 "title": "option 5",
 "votes\_count": 0
 },
 {
 "title": "option 6",
 "votes\_count": 1
 },
 {
 "title": "option 7",
 "votes\_count": 0
 },
 {
 "title": "option 8",
 "votes\_count": 0
 },
 {
 "title": "option 9",
 "votes\_count": 1
 }
 ],
 "emojis": []
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Poll does not exist, or poll’s parent status is private

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

The poll has expired

```
{
 "error": "Validation failed: The poll has already ended"
}

```
Alternatively, you have already voted

```
{
 "error": "Validation failed: You have already voted on this poll"
}

```

---

## See also

[POST /api/v1/statuses (`poll` parameter)](/methods/statuses/#create)[app/controllers/api/v1/polls\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/polls_controller.rb)[app/controllers/api/v1/polls/votes\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/polls/votes_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/polls.md)

---


# scheduled_statuses API methods

Source: https://docs.joinmastodon.org/methods/scheduled_statuses/

# scheduled\_statuses API methods

Manage statuses that were scheduled to be published at a future date.

## View scheduled statuses

```
GET /api/v1/scheduled\_statuses HTTP/1.1

```
**Returns:** Array of [ScheduledStatus](/entities/ScheduledStatus/)  
**OAuth:** User token + `read:statuses`  
**Version history:**  
2.7.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.## Response

## 200: OK

```
[
 {
 "id": "3221",
 "scheduled\_at": "2019-12-05T12:33:01.000Z",
 "params": {
 "poll": null,
 "text": "test content",
 "media\_ids": null,
 "sensitive": null,
 "visibility": null,
 "idempotency": null,
 "scheduled\_at": null,
 "spoiler\_text": null,
 "application\_id": 596551,
 "in\_reply\_to\_id": null
 },
 "media\_attachments": []
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## View a single scheduled status

```
GET /api/v1/scheduled\_statuses/:id HTTP/1.1

```
**Returns:** [ScheduledStatus](/entities/ScheduledStatus/)  
**OAuth:** User token + `read:statuses`  
**Version history:**  
2.7.0 - added

## Request

## Path parameters

:idrequired String. The ID of the ScheduledStatus in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "3221",
 "scheduled\_at": "2019-12-05T12:33:01.000Z",
 "params": {
 "poll": null,
 "text": "test content",
 "media\_ids": null,
 "sensitive": null,
 "visibility": null,
 "idempotency": null,
 "scheduled\_at": null,
 "spoiler\_text": null,
 "application\_id": 596551,
 "in\_reply\_to\_id": null
 },
 "media\_attachments": []
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

ScheduledStatus is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## Update a scheduled status’s publishing date

```
PUT /api/v1/scheduled\_statuses/:id HTTP/1.1

```
**Returns:** [ScheduledStatus](/entities/ScheduledStatus/)  
**OAuth:** User token + `write:statuses`  
**Version history:**  
2.7.0 - added

## Request

## Path parameters

:idrequired String. The ID of the ScheduledStatus in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

scheduled\_atString. [Datetime](/api/datetime-format/#datetime) at which the status will be published. Must be at least 5 minutes into the future.## Response

## 200: OK

```
{
 "id": "3221",
 "scheduled\_at": "2019-12-05T13:33:01.000Z",
 "params": {
 "poll": null,
 "text": "test content",
 "media\_ids": null,
 "sensitive": null,
 "visibility": null,
 "idempotency": null,
 "scheduled\_at": null,
 "spoiler\_text": null,
 "application\_id": 596551,
 "in\_reply\_to\_id": null
 },
 "media\_attachments": []
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

ScheduledStatus is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

```
{
 "error": "Validation failed: Scheduled at The scheduled date must be in the future"
}

```

---

## Cancel a scheduled status

```
DELETE /api/v1/scheduled\_statuses/:id HTTP/1.1

```
**Returns:** Empty  
**OAuth:** User token + `write:statuses`  
**Version history:**  
2.7.0 - added

## Request

## Path parameters

:idrequired String. The ID of the ScheduledStatus in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

ScheduledStatus is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## See also

[POST /api/v1/statuses (`scheduled_at` parameter)](/methods/statuses/#create)[app/controllers/api/v1/scheduled\_statuses\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/scheduled_statuses_controller.rb)Last updated January 9, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/scheduled_statuses.md)

---


# conversations API methods

Source: https://docs.joinmastodon.org/methods/conversations/

# conversations API methods

Direct conversations with other participants. (Currently, just threads containing a post with "direct" visibility.)

## View all conversations

```
GET /api/v1/conversations HTTP/1.1

```
**Returns:** Array of [Conversation](/entities/Conversation/)  
**OAuth:** User token + `read:statuses`  
**Version history:**  
2.6.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 20 conversations. Max 40 conversations.## Response

## 200: OK

Truncated sample results of an API call with limit=2

```
[
 {
 "id": "418450",
 "unread": true,
 "accounts": [
 {
 "id": "482403",
 "username": "amic",
 "acct": "amic@nulled.red",
 // ...
 }
 ],
 "last\_status": {
 "id": "103196583826321184",
 "created\_at": "2019-11-25T04:08:24.000Z",
 "in\_reply\_to\_id": "103196540587943467",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 }
 },
 {
 "id": "418374",
 "unread": false,
 "accounts": [
 {
 "id": "464472",
 "username": "freon",
 "acct": "freon@letsalllovela.in",
 // ...
 }
 ],
 "last\_status": {
 "id": "103195253010396431",
 "created\_at": "2019-11-24T22:29:56.331Z",
 "in\_reply\_to\_id": "103195239650546339",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 }
 }
]

```
Because AccountConversation IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/conversations?limit=2&max\_id=108835003356700379>; rel="next", <https://mastodon.example/api/v1/conversations?limit=2&min\_id=108888782724768580>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Remove a conversation

```
DELETE /api/v1/conversations/:id HTTP/1.1

```
Removes a conversation from your list of conversations.

**Returns:** Empty  
**OAuth:** User token + `write:conversations`  
**Version history:**  
2.6.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Conversation in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

The conversation does not exist, or is not owned by you.

```
{
 "error": "Record not found"
}

```

---

## Mark a conversation as read

```
POST /api/v1/conversations/:id/read HTTP/1.1

```
**Returns:** [Conversation](/entities/Conversation/)  
**OAuth:** User token + `write:conversations`  
**Version history:**  
2.6.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Conversation in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The value of `unread` has been changed to false.

```
{
 "id": "418450",
 "unread": false,
 "accounts": [
 {
 "id": "482403",
 // ...
 }
 ],
 "last\_status": {
 "id": "103196583826321184",
 // ...
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

The conversation does not exist, or is not owned by you.

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/conversations\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/conversations_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/conversations.md)

---


# lists API methods

Source: https://docs.joinmastodon.org/methods/lists/

# lists API methods

View and manage lists. See also: /api/v1/timelines/list/id for loading a list timeline.

## View your lists

```
GET /api/v1/lists HTTP/1.1

```
Fetch all lists that the user owns.

**Returns:** Array of [List](/entities/List/)  
**OAuth:** User token + `read:lists`  
**Version history:**  
2.1.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Use `id` as a parameter for related API calls.

```
[
 {
 "id": "12249",
 "title": "Friends",
 "replies\_policy": "followed",
 "exclusive": false
 },
 {
 "id": "13585",
 "title": "test",
 "replies\_policy": "list",
 "exclusive": true
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Show a single list

```
GET /api/v1/lists/:id HTTP/1.1

```
Fetch the list with the given ID. Used for verifying the title of a list, and which replies to show within that list.

**Returns:** [List](/entities/List/)  
**OAuth:** User token + `read:lists`  
**Version history:**  
2.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the List in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The list 12249 exists and is owned by you

```
{
 "id": "12249",
 "title": "Friends",
 "replies\_policy": "followed",
 "exclusive": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

List does not exist or is not owned by you

```
{
 "error": "Record not found"
}

```

---

## Create a list

```
POST /api/v1/lists HTTP/1.1

```
Create a new list.

**Returns:** [List](/entities/List/)  
**OAuth:** User token + `write:lists`  
**Version history:**  
2.1.0 - added  
3.3.0 - added `replies_policy`  
4.2.0 - added `exclusive`

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

titlerequired String. The title of the list to be created.replies\_policyString. One of `followed`, `list`, or `none`. Defaults to `list`.exclusiveBoolean. Whether members of this list need to get removed from the “Home” feed## Response

## 200: OK

A sample list was created with a `title` of “test”.

```
{
 "id": "13585",
 "title": "test",
 "replies\_policy": "list",
 "exclusive": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

If the title is missing:

```
{
 "error": "Validation failed: Title can't be blank"
}

```
If the replies\_policy is not understood:

```
{
 "error": "'some' is not a valid replies\_policy"
}

```
–>

---

## Update a list

```
PUT /api/v1/lists/:id HTTP/1.1

```
Change the title of a list, or which replies to show.

**Returns:** [List](/entities/List/)  
**OAuth:** User token + `write:lists`  
**Version history:**  
2.1.0 - added  
3.3.0 - added `replies_policy`

## Request

## Path parameters

:idrequired String. The ID of the List in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

titlerequired String. The title of the list to be created.replies\_policyString. One of `followed`, `list`, or `none`. Defaults to `list`.exclusiveBoolean. Whether members of this list need to get removed from the “Home” feed## Response

## 200: OK

The `title` of list 13585 was successfully updated to “testing”

```
{
 "id": "13585",
 "title": "test",
 "replies\_policy": "list",
 "exclusive": false
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 422: Unprocessable entity

If the `title` is missing:

```
{
 "error": "Validation failed: Title can't be blank"
}

```
If the `replies_policy` is not understood:

```
{
 "error": "'some' is not a valid replies\_policy"
}

```

---

## Delete a list

```
DELETE /api/v1/lists/:id HTTP/1.1

```
**Returns:** Empty  
**OAuth:** User token + `write:lists`  
**Version history:**  
2.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the List in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

List was successfully deleted

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

List does not exist or is not owned by you

```
{
 "error": "Record not found"
}

```

---

## View accounts in a list

```
GET /api/v1/lists/:id/accounts HTTP/1.1

```
**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** User token + `read:lists`  
**Version history:**  
2.1.0 - added  
3.3.0 - both `min_id` and `max_id` can be used at the same time now

## Request

## Path parameters

:idrequired String. The ID of the List in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results. Defaults to 40 accounts. Max 80 accounts. Set to 0 in order to get all accounts without pagination.## Response

## 200: OK

```
[
 {
 "id": "952529",
 "username": "alayna",
 "acct": "alayna@desvox.es",
 // ...
 },
 {
 "id": "917388",
 "username": "cole",
 "acct": "cole@be.cutewith.me",
 // ...
 },
 {
 "id": "869022",
 "username": "alayna",
 "acct": "alayna@be.cutewith.me",
 // ...
 },
 {
 "id": "832844",
 "username": "a9",
 "acct": "a9@broadcast.wolfgirl.engineering",
 // ...
 },
 {
 "id": "482403",
 "username": "amic",
 "acct": "amic@nulled.red",
 // ...
 }
]

```
Because you do not know beforehand which Accounts are included in a List, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <https://mastodon.example/api/v1/lists/12249/accounts?max\_id=106931203247163945>; rel="next", <https://mastodon.example/api/v1/lists/12249/accounts?since\_id=108632085572655915>; rel="prev"

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

List does not exist or is not owned by you.

```
{
 "error": "Record not found"
}

```

---

## Add accounts to a list

```
POST /api/v1/lists/:id/accounts HTTP/1.1

```
Add accounts to the given list. Note that the user must be following these accounts.

**Returns:** Empty  
**OAuth:** User token + `write:lists`  
**Version history:**  
2.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the List in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

account\_ids[]required Array of String. The accounts that should be added to the list.## Response

## 200: OK

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

You are not following a given account ID, or you do not own the list ID, or list/account ID does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

An Account with one of the provided IDs is already in the list

```
{
 "error": "Validation failed: Account has already been taken"
}

```

---

## Remove accounts from list

```
DELETE /api/v1/lists/:id/accounts HTTP/1.1

```
Remove accounts from the given list.

**Returns:** Empty  
**OAuth:** User token + `write:lists`  
**Version history:**  
2.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the List in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

account\_ids[]required Array of String. The accounts that should be removed from the list.## Response

## 200: OK

Account was successfully removed from the list, or it was already not in the list.

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

List is not owned by you or does not exist

```
{
 "error": "Record not found"
}

```

---

## See also

[GET /api/v1/accounts/:id/lists](/methods/accounts/#lists)[app/controllers/api/v1/lists\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/lists_controller.rb)[app/controllers/api/v1/lists/accounts\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/lists/accounts_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/lists.md)

---


# markers API methods

Source: https://docs.joinmastodon.org/methods/markers/

# markers API methods

Save and restore your position in timelines.

## Get saved timeline positions

```
GET /api/v1/markers HTTP/1.1

```
Get current positions in timelines.

**Returns:** Hash of timeline key and associated [Marker](/entities/Marker/)  
**OAuth:** User token + `read:statuses`  
**Version history:**  
3.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

timeline[]Array of String. Specify the timeline(s) for which markers should be fetched. Possible values: `home`, `notifications`. If not provided, an empty object will be returned.## Response

## 200: OK

A request with `?timeline[]=home&timeline[]=notifications`

```
{
 "notifications": {
 "last\_read\_id": "35098814",
 "version": 361,
 "updated\_at": "2019-11-26T22:37:25.239Z"
 },
 "home": {
 "last\_read\_id": "103206604258487607",
 "version": 468,
 "updated\_at": "2019-11-26T22:37:25.235Z"
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Save your position in a timeline

```
POST /api/v1/markers HTTP/1.1

```
Save current position in timeline.

**Returns:** [Marker](/entities/Marker/)  
**OAuth:** User token + `write:statuses`  
**Version history:**  
3.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

home[last\_read\_id]String. ID of the last status read in the home timeline.notifications[last\_read\_id]String. ID of the last notification read.## Response

## 200: OK

Calling this API with home[last\_read\_id] causes a marker to be created for the home timeline.

```
{
 "home": {
 "last\_read\_id": "103194548672408537",
 "version": 462,
 "updated\_at": "2019-11-24T19:39:39.337Z"
 }
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 409: Conflict

If object is stale while being updated, an error will occur.

```
{
 "error": "Conflict during update, please try again"
}

```

---

## See also

[GET /api/v1/timelines/home (with `min_id` or `since_id` parameter)](/methods/timelines/#home)[GET /api/v1/notifications (with `min_id` or `since_id` parameter)](/methods/notifications/#get)[app/controllers/api/v1/markers\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/markers_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/markers.md)

---


# streaming API methods

Source: https://docs.joinmastodon.org/methods/streaming/

# streaming API methods

Subscribe to server-sent events for real-time updates via a long-lived HTTP connection or via WebSocket.

## Event types and payloads

`update`A new Status has appeared. Payload contains a [Status](/entities/Status/) cast to a string. Available since v1.0.0`delete`A status has been deleted. Payload contains the String ID of the deleted Status. Available since v1.0.0`notification`A new notification has appeared. Payload contains a [Notification](/entities/Notification/) cast to a string. Available since v1.4.2`filters_changed`Keyword filters have been changed. Either does not contain a payload (for WebSocket connections), or contains an undefined payload (for HTTP connections). Available since v2.4.3`conversation`A direct conversation has been updated. Payload contains a [Conversation](/entities/Conversation/) cast to a string. Available since v2.6.0`announcement`An announcement has been published. Payload contains an [Announcement](/entities/Announcement/) cast to a string. Available since v3.1.0`announcement.reaction`An announcement has received an emoji reaction. Payload contains a Hash (with `name`, `count`, and `announcement_id`) cast to a string. Available since v3.1.0`announcement.delete`An announcement has been deleted. Payload contains the String ID of the deleted Announcement. Available since v3.1.0`status.update`A Status has been edited. Payload contains a [Status](/entities/Status/) cast to a string. Available since v3.5.0`encrypted_message`An encrypted message has been received. Implemented in v3.2.0 but currently unused`notifications_merged`Accepted notification requests have finished merging, and the notifications list should be refreshed. Payload can be ignored. Available since v4.3.0## Streaming timelines/categories

`public`All public posts known to the server. Analogous to the federated timeline. Available since v1.0.0`public:media`All public posts known to the server, filtered for media attachments. Analogous to the federated timeline with “only media” enabled. Available since v2.4.0`public:local`All public posts originating from this server. Analogous to the local timeline. Available since v1.1`public:local:media`All public posts originating from this server, filtered for media attachments. Analogous to the local timeline with “only media” enabled. Available since v2.4.0`public:remote`All public posts originating from other servers. Available since v3.1.4`public:remote:media`All public posts originating from other servers, filtered for media attachments. Available since v3.1.4`hashtag`All public posts using a certain hashtag. Available since v1.0.0`hashtag:local`All public posts using a certain hashtag, originating from this server. Available since v1.1`user`Events related to the current user, such as home feed updates and notifications. Available since v1.0.0`user:notification`Notifications for the current user. Available since v1.4.2`list`Updates to a specific list. Available since v2.1.0`direct`Updates to direct conversations. Available since v2.4.0

---

## About HTTP server-sent events

Your application can use a [server-sent events](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events) endpoint to receive updates in real-time. Server-sent events is an incredibly simple transport method that relies entirely on chunked-encoding transfer; in other words, the HTTP connection is kept open and receives new data periodically.

The stream will contain events as well as heartbeat comments. Lines that begin with a colon (`:`) can be ignored by parsers. For example, the connection may be kept alive with a heartbeat comment:

```
:thump

```
Generally, events have this structure:

```
event: <name>
data: <payload>

```

---

## Check if the server is alive

```
GET /api/v1/streaming/health HTTP/1.1

```
Verify that the streaming service is alive before connecting to it

**Returns:** String  
**OAuth:** Public  
**Version history:**  
2.5.0 - added

## Response

## 200: OK

The streaming service is alive

```
OK

```

---

## Watch your home timeline and notifications

```
GET /api/v1/streaming/user HTTP/1.1

```
Returns events that are relevant to the authorized user, i.e. home timeline and notifications

**Returns:** `update`, `delete`, `notification`, `filters_changed`, `announcement`, `announcement.reaction`, `announcement.delete`, `status.update`  
**OAuth:** User token + `read:statuses` + `read:notifications`  
**Version history:**  
1.0.0 - added  
1.4.2 - now returns `notification`  
2.4.3 - now returns `filters_changed`  
3.1.0 - now returns `announcement`, `announcement.reaction`, `announcement.delete`  
3.5.0 - now returns `status.update`

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Events

An example update to the home timeline:

```
event: update
data: {"id":"108914327388663283","created\_at":"2022-08-30T23:05:46.839Z","in\_reply\_to\_id":"108914298452377720","in\_reply\_to\_account\_id":"107946650784398271","sensitive":false,"spoiler\_text":"","visibility":"unlisted","language":null,"uri":"https://letsalllovela.in/objects/e9cebb0c-7c75-414f-9608-20b5628e52d7","url":"https://letsalllovela.in/objects/e9cebb0c-7c75-414f-9608-20b5628e52d7","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"content":"<span class=\"h-card\"><a class=\"u-url mention\" href=\"https://pl.nulled.red/users/disarray\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>disarray</span></a></span> glad i was able to help","filtered":[],"reblog":null,"account":{"id":"464472","username":"freon","acct":"freon@letsalllovela.in","display\_name":"freon","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2018-08-18T00:00:00.000Z","note":"tech archaeologist, unix weenie<br><a class=\"hashtag\" href=\"https://letsalllovela.in/tag/nobot\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#nobot</a>","url":"https://letsalllovela.in/users/freon","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/464/472/original/bfc518d70cf6f13a.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/464/472/original/bfc518d70cf6f13a.png","header":"https://files.mastodon.social/cache/accounts/headers/000/464/472/original/2e94bd33745f86a6.gif","header\_static":"https://files.mastodon.social/cache/accounts/headers/000/464/472/static/2e94bd33745f86a6.png","followers\_count":37,"following\_count":41,"statuses\_count":18442,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"pronouns","value":"emacs/xemacs (or he/they)","verified\_at":null},{"name":"age","value":"23.66667","verified\_at":null}]},"media\_attachments":[],"mentions":[{"id":"107946650784398271","username":"disarray","url":"https://pl.nulled.red/users/disarray","acct":"disarray@pl.nulled.red"}],"tags":[],"emojis":[],"card":null,"poll":null}

```
An example notification:

```
event: notification
data: {"id":"68739215","type":"mention","created\_at":"2022-08-30T23:09:54.070Z","account":{"id":"108892712797543112","username":"a","acct":"a@pl.nulled.red","display\_name":"a","locked":false,"bot":true,"discoverable":false,"group":false,"created\_at":"2022-08-27T00:00:00.000Z","note":"a (pleroma edition)","url":"https://pl.nulled.red/users/a","avatar":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","header":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","header\_static":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","followers\_count":0,"following\_count":0,"statuses\_count":12,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"mastodon","value":"<a href=\"https://mastodon.social/@trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@trwnh@mastodon.social</a>","verified\_at":null}]},"status":{"id":"108914343542683797","created\_at":"2022-08-30T23:09:52.359Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"unlisted","language":null,"uri":"https://pl.nulled.red/objects/64b196c6-3bc5-44d5-8ffb-f760235ee6ca","url":"https://pl.nulled.red/objects/64b196c6-3bc5-44d5-8ffb-f760235ee6ca","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"content":"<span class=\"h-card\"><a class=\"u-url mention\" href=\"https://mastodon.social/@trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>trwnh</span></a></span> test","filtered":[],"reblog":null,"account":{"id":"108892712797543112","username":"a","acct":"a@pl.nulled.red","display\_name":"a","locked":false,"bot":true,"discoverable":false,"group":false,"created\_at":"2022-08-27T00:00:00.000Z","note":"a (pleroma edition)","url":"https://pl.nulled.red/users/a","avatar":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","header":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","header\_static":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","followers\_count":0,"following\_count":0,"statuses\_count":12,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"mastodon","value":"<a href=\"https://mastodon.social/@trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@trwnh@mastodon.social</a>","verified\_at":null}]},"media\_attachments":[],"mentions":[{"id":"14715","username":"trwnh","url":"https://mastodon.social/@trwnh","acct":"trwnh"}],"tags":[],"emojis":[],"card":null,"poll":null}}

```
An example filter change:

```
event: filters\_changed
data: undefined

```
An example announcement:

```
event: announcement
data: {"id":"1","content":"<p>test</p>","starts\_at":null,"ends\_at":null,"all\_day":true,"published\_at":"2022-11-15T15:55:22.452Z","updated\_at":"2022-11-15T15:55:22.528Z","mentions":[],"statuses":[],"tags":[],"emojis":[],"reactions":[]}

```
An example announcement reaction:

```
event: announcement.reaction
data: {"name":"🤔","count":1,"announcement\_id":"1"}

```
An example announcement delete:

```
event: announcement.delete
data: 1

```
An example status edit:

```
event: status.update
data: {"id":"109348677773283527","created\_at":"2022-11-15T16:06:48.410Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"http://mastodon.local/users/admin/statuses/109348677773283527","url":"http://mastodon.local/@admin/109348677773283527","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":"2022-11-15T16:07:29.023Z","content":"<p>edited</p>","reblog":null,"application":{"name":"Web","website":null},"account":{"id":"109334860508022726","username":"admin","acct":"admin","display\_name":"","locked":false,"bot":false,"discoverable":null,"group":false,"created\_at":"2022-11-13T00:00:00.000Z","note":"","url":"http://mastodon.local/@admin","avatar":"http://mastodon.local/avatars/original/missing.png","avatar\_static":"http://mastodon.local/avatars/original/missing.png","header":"http://mastodon.local/headers/original/missing.png","header\_static":"http://mastodon.local/headers/original/missing.png","followers\_count":0,"following\_count":0,"statuses\_count":4,"last\_status\_at":"2022-11-15","noindex":false,"emojis":[],"fields":[]},"media\_attachments":[],"mentions":[],"tags":[],"emojis":[],"card":null,"poll":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"pinned":false,"filtered":[]}

```

---

## Watch your notifications

```
GET /api/v1/streaming/user/notification HTTP/1.1

```
Returns events for received notifications

**Returns:** `notification`  
**OAuth:** User token + `read:statuses` + `read:notifications`  
**Version history:**  
1.4.2 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Events

An example notification:

```
event: notification
data: {"id":"68739215","type":"mention","created\_at":"2022-08-30T23:09:54.070Z","account":{"id":"108892712797543112","username":"a","acct":"a@pl.nulled.red","display\_name":"a","locked":false,"bot":true,"discoverable":false,"group":false,"created\_at":"2022-08-27T00:00:00.000Z","note":"a (pleroma edition)","url":"https://pl.nulled.red/users/a","avatar":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","header":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","header\_static":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","followers\_count":0,"following\_count":0,"statuses\_count":12,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"mastodon","value":"<a href=\"https://mastodon.social/@trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@trwnh@mastodon.social</a>","verified\_at":null}]},"status":{"id":"108914343542683797","created\_at":"2022-08-30T23:09:52.359Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"unlisted","language":null,"uri":"https://pl.nulled.red/objects/64b196c6-3bc5-44d5-8ffb-f760235ee6ca","url":"https://pl.nulled.red/objects/64b196c6-3bc5-44d5-8ffb-f760235ee6ca","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"content":"<span class=\"h-card\"><a class=\"u-url mention\" href=\"https://mastodon.social/@trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>trwnh</span></a></span> test","filtered":[],"reblog":null,"account":{"id":"108892712797543112","username":"a","acct":"a@pl.nulled.red","display\_name":"a","locked":false,"bot":true,"discoverable":false,"group":false,"created\_at":"2022-08-27T00:00:00.000Z","note":"a (pleroma edition)","url":"https://pl.nulled.red/users/a","avatar":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/5396d516ae170bb0.png","header":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","header\_static":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","followers\_count":0,"following\_count":0,"statuses\_count":12,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"mastodon","value":"<a href=\"https://mastodon.social/@trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@trwnh@mastodon.social</a>","verified\_at":null}]},"media\_attachments":[],"mentions":[{"id":"14715","username":"trwnh","url":"https://mastodon.social/@trwnh","acct":"trwnh"}],"tags":[],"emojis":[],"card":null,"poll":null}}

```

---

## Watch the federated timeline

```
GET /api/v1/streaming/public HTTP/1.1

```
Returns all public statuses

**Returns:** `update`, `delete`, `status.update`  
**OAuth:** User token + `read:statuses`  
**Version history:**  
1.0.0 - added  
2.4.0 - add `only_media` parameter  
3.5.0 - now returns `status.update`
4.2.0 - changed to require a User token, removing Public and App token access [#23989](https://github.com/mastodon/mastodon/pull/23989)

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

only\_mediaBoolean. If true, return only statuses with media attachments.## Events

An example update to the federated timeline:

```
event: update
data: {"id":"108914354907984653","created\_at":"2022-08-30T23:12:47.000Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://mstdn.jp/users/aiueohisama/statuses/108914354891945610","url":"https://mstdn.jp/@aiueohisama/108914354891945610","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"content":"<p>処女の子が「処女だからキモい絡み方しちゃうかもだけど許して🥺」なんて言ってるのわたしは見たことない、童貞の甘えだよそれは 嫌われたくないなら最低限のマナーくらい身につけた方がいい</p>","reblog":null,"account":{"id":"272619","username":"aiueohisama","acct":"aiueohisama@mstdn.jp","display\_name":"💎🌻陽菜💙💛","locked":false,"bot":false,"discoverable":false,"group":false,"created\_at":"2017-04-15T00:00:00.000Z","note":"<p>とっても素直で真面目なOLでし！</p>","url":"https://mstdn.jp/@aiueohisama","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/272/619/original/573669a325c87b8b.jpeg","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/272/619/original/573669a325c87b8b.jpeg","header":"https://files.mastodon.social/cache/accounts/headers/000/272/619/original/5d5dad59a9fd1531.jpeg","header\_static":"https://files.mastodon.social/cache/accounts/headers/000/272/619/original/5d5dad59a9fd1531.jpeg","followers\_count":182,"following\_count":20,"statuses\_count":1128,"last\_status\_at":"2022-08-30","emojis":[],"fields":[]},"media\_attachments":[],"mentions":[],"tags":[],"emojis":[],"card":null,"poll":null,"filter\_results":[]}

```
An example delete:

```
event: delete
data: 107214471804101576

```
An example status edit:

```
event: status.update
data: {"id":"109348684737626801","created\_at":"2022-11-15T16:08:30.000Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://ruby.social/users/chrismo/statuses/109348684454557541","url":"https://ruby.social/@chrismo/109348684454557541","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":"2022-11-15T16:10:43.000Z","content":"<p><a href=\"https://ruby.social/tags/musicTuesday\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>musicTuesday</span></a> </p><p>Here's a solo <a href=\"https://ruby.social/tags/piano\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>piano</span></a> track of mine called Gravity Assist</p><p><a href=\"https://ruby.social/tags/neoclassical\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>neoclassical</span></a> (<a href=\"https://ruby.social/tags/jazz\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>jazz</span></a> ish)</p><p><a href=\"https://cstudios.bandcamp.com/track/celestia-gravity-assist-no-19-var-2\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"ellipsis\">cstudios.bandcamp.com/track/ce</span><span class=\"invisible\">lestia-gravity-assist-no-19-var-2</span></a></p>","reblog":null,"account":{"id":"795442","username":"chrismo","acct":"chrismo@ruby.social","display\_name":"chrismo","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2019-04-25T00:00:00.000Z","note":"<p>i mash keys</p>","url":"https://ruby.social/@chrismo","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/795/442/original/12084217a7eb7513.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/795/442/original/12084217a7eb7513.png","header":"https://static-cdn.mastodon.social/headers/original/missing.png","header\_static":"https://static-cdn.mastodon.social/headers/original/missing.png","followers\_count":40,"following\_count":62,"statuses\_count":42,"last\_status\_at":"2022-11-15","emojis":[],"fields":[{"name":"web","value":"clabs.org","verified\_at":null},{"name":"github","value":"github.com/chrismo","verified\_at":null},{"name":"twitter","value":"twitter.com/the\_chrismo","verified\_at":null},{"name":"bandcamp","value":"cstudios.bandcamp.com","verified\_at":null}]},"media\_attachments":[],"mentions":[],"tags":[{"name":"MUSICTUESDAY","url":"https://mastodon.social/tags/MUSICTUESDAY"},{"name":"piano","url":"https://mastodon.social/tags/piano"},{"name":"neoclassical","url":"https://mastodon.social/tags/neoclassical"},{"name":"jazz","url":"https://mastodon.social/tags/jazz"}],"emojis":[],"card":null,"poll":null}

```

---

## Watch the local timeline

```
GET /api/v1/streaming/public/local HTTP/1.1

```
Returns all local public statuses

**Returns:** `update`, `delete`, `status.update`  
**OAuth:** User token + `read:statuses`  
**Version history:**  
1.1.0 - added  
2.4.0 - add `only_media` parameter  
3.5.0 - now returns `status.update`
4.2.0 - changed to require a User token, removing Public and App token access [#23989](https://github.com/mastodon/mastodon/pull/23989)

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

only\_mediaBoolean. If true, return only statuses with media attachments.## Events

An example update to the local timeline:

```
event: update
data: {"id":"108914398911648589","created\_at":"2022-08-30T23:23:58.863Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://mastodon.social/users/trwnh/statuses/108914398911648589","url":"https://mastodon.social/@trwnh/108914398911648589","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"content":"<p>test</p>","reblog":null,"application":{"name":"Web","website":null},"account":{"id":"14715","username":"trwnh","acct":"trwnh","display\_name":"infinite love ⴳ","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2016-11-24T00:00:00.000Z","note":"<p>i have approximate knowledge of many things. perpetual student. (nb/ace/they)</p><p>xmpp/email: a@trwnh.com<br /><a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a><br />help me live: <a href=\"https://liberapay.com/trwnh\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/trwnh</span><span class=\"invisible\"></span></a> or paypal</p><p>- my triggers are moths and glitter<br />- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise<br />- dm me if i did something wrong, so i can improve<br />- purest person on fedi, do not lewd in my presence</p>","url":"https://mastodon.social/@trwnh","avatar":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","avatar\_static":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","header":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","header\_static":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","followers\_count":2520,"following\_count":266,"statuses\_count":59817,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"Website","value":"<a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2019-08-29T04:14:55.571+00:00"},{"name":"Portfolio","value":"<a href=\"https://abdullahtarawneh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">abdullahtarawneh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2021-02-11T20:34:13.574+00:00"},{"name":"Fan of:","value":"Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo&#39;s Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)","verified\_at":null},{"name":"What to expect:","value":"talking about various things i find interesting, and otherwise being a genuine and decent wholesome poster. i&#39;m just here to hang out and talk to cool people! and to spill my thoughts.","verified\_at":null}]},"media\_attachments":[],"mentions":[],"tags":[],"emojis":[],"card":null,"poll":null}

```
An example delete:

```
event: delete
data: 108914398911648589

```
An example status edit:

```
event: status.update
data: {"id":"109348699525106378","created_at":"2022-11-15T16:12:20.310Z","in_reply_to_id":"109348674754176227","in_reply_to_account_id":"30437","sensitive":false,"spoiler_text":"","visibility":"public","language":"en","uri":"https://mastodon.social/users/gregpak/statuses/109348699525106378","url":"https://mastodon.social/@gregpak/109348699525106378","replies_count":0,"reblogs_count":0,"favourites_count":0,"edited_at":"2022-11-15T16:12:41.694Z","content":"<p>By default, in Feedly it just shows a thumbnail of the images in a post, though. And NetNewsWire doesn&#39;t show any image, boo! Gotta find an RSS reader that&#39;ll show a full sized image automatically without requiring a clickthrough... any suggestions would be very welcome, thanks!</p>","reblog":null,"account":{"id":"30437","username":"gregpak","acct":"gregpak","display_name":"Greg Pak","locked":false,"bot":false,"discoverable":false,"group":false,"created_at":"2017-04-02T00:00:00.000Z","note":"<p>Comic book writer &amp; filmmaker. Mech Cadet Yu, Planet Hulk, Darth Vader, Ronin Island, Princess Who Saved. Get vaxxed, get out the vote. He/Him.<br /><a href=\"https://mastodon.social/tags/Comics\" class=\"mention hashtag\" rel=\"tag\">#<span>Comics</span></a> <a href=\"https://mastodon.social/tags/ComicBooks\" class=\"mention hashtag\" rel=\"tag\">#<span>ComicBooks</span></a> <a href=\"https://mastodon.social/tags/writing\" class=\"mention hashtag\" rel=\"tag\">#<span>writing</span></a> <a href=\"https://mastodon.social/tags/AmWriting\" class=\"mention hashtag\" rel=\"tag\">#<span>AmWriting</span></a> <a href=\"https://mastodon.social/tags/photography\" class=\"mention hashtag\" rel=\"tag\">#<span>photography</span></a>  <a href=\"https://mastodon.social/tags/BelieveInFilm\" class=\"mention hashtag\" rel=\"tag\">#<span>BelieveInFilm</span></a></p>","url":"https://mastodon.social/@gregpak","avatar":"https://files.mastodon.social/accounts/avatars/000/030/437/original/9a71f06d6e285f32.jpg","avatar_static":"https://files.mastodon.social/accounts/avatars/000/030/437/original/9a71f06d6e285f32.jpg","header":"https://files.mastodon.social/accounts/headers/000/030/437/original/1f589d01e13340bc.jpg","header_static":"https://files.mastodon.social/accounts/headers/000/030/437/original/1f589d01e13340bc.jpg","followers_count":2307,"following_count":279,"statuses_count":818,"last_status_at":"2022-11-15","noindex":false,"emojis":[],"fields":[{"name":"Website/Blog","value":"<a href=\"https://gregpak.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">gregpak.com/</span><span class=\"invisible\"></span></a>","verified_at":"2022-11-04T19:59:52.817+00:00"},{"name":"Newsletter","value":"<a href=\"https://gregpak.com/newsletter\" target=\"_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">gregpak.com/newsletter</span><span class=\"invisible\"></span></a>","verified_at":"2022-11-04T19:59:58.287+00:00"},{"name":"Shop","value":"<a href=\"https://gregpakshop.com/pages/about-us\" target=\"_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">gregpakshop.com/pages/about-us</span><span class=\"invisible\"></span></a>","verified_at":"2022-11-07T05:50:02.310+00:00"}]},"media_attachments":[],"mentions":[],"tags":[],"emojis":[],"card":null,"poll":null}

```

---

## Watch for remote statuses

```
GET /api/v1/streaming/public/remote HTTP/1.1

```
Returns all public statuses from remote servers.

**Returns:** `update`, `delete`, `status.update`  
**OAuth:** User token + `read:statuses`  
**Version history:**  
3.1.4 - added  
3.5.0 - now returns `status.update`
4.2.0 - changed to require a User token, removing Public and App token access [#23989](https://github.com/mastodon/mastodon/pull/23989)

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

only\_mediaBoolean. If true, return only statuses with media attachments.## Events

An example update:

```
event: update
data: {"id":"108914354907984653","created\_at":"2022-08-30T23:12:47.000Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://mstdn.jp/users/aiueohisama/statuses/108914354891945610","url":"https://mstdn.jp/@aiueohisama/108914354891945610","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"content":"<p>処女の子が「処女だからキモい絡み方しちゃうかもだけど許して🥺」なんて言ってるのわたしは見たことない、童貞の甘えだよそれは 嫌われたくないなら最低限のマナーくらい身につけた方がいい</p>","reblog":null,"account":{"id":"272619","username":"aiueohisama","acct":"aiueohisama@mstdn.jp","display\_name":"💎🌻陽菜💙💛","locked":false,"bot":false,"discoverable":false,"group":false,"created\_at":"2017-04-15T00:00:00.000Z","note":"<p>とっても素直で真面目なOLでし！</p>","url":"https://mstdn.jp/@aiueohisama","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/272/619/original/573669a325c87b8b.jpeg","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/272/619/original/573669a325c87b8b.jpeg","header":"https://files.mastodon.social/cache/accounts/headers/000/272/619/original/5d5dad59a9fd1531.jpeg","header\_static":"https://files.mastodon.social/cache/accounts/headers/000/272/619/original/5d5dad59a9fd1531.jpeg","followers\_count":182,"following\_count":20,"statuses\_count":1128,"last\_status\_at":"2022-08-30","emojis":[],"fields":[]},"media\_attachments":[],"mentions":[],"tags":[],"emojis":[],"card":null,"poll":null,"filter\_results":[]}

```
An example delete:

```
event: delete
data: 107214471804101576

```
An example status edit:

```
event: status.update
data: {"id":"109348684737626801","created\_at":"2022-11-15T16:08:30.000Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://ruby.social/users/chrismo/statuses/109348684454557541","url":"https://ruby.social/@chrismo/109348684454557541","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":"2022-11-15T16:10:43.000Z","content":"<p><a href=\"https://ruby.social/tags/musicTuesday\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>musicTuesday</span></a> </p><p>Here's a solo <a href=\"https://ruby.social/tags/piano\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>piano</span></a> track of mine called Gravity Assist</p><p><a href=\"https://ruby.social/tags/neoclassical\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>neoclassical</span></a> (<a href=\"https://ruby.social/tags/jazz\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>jazz</span></a> ish)</p><p><a href=\"https://cstudios.bandcamp.com/track/celestia-gravity-assist-no-19-var-2\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"ellipsis\">cstudios.bandcamp.com/track/ce</span><span class=\"invisible\">lestia-gravity-assist-no-19-var-2</span></a></p>","reblog":null,"account":{"id":"795442","username":"chrismo","acct":"chrismo@ruby.social","display\_name":"chrismo","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2019-04-25T00:00:00.000Z","note":"<p>i mash keys</p>","url":"https://ruby.social/@chrismo","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/795/442/original/12084217a7eb7513.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/795/442/original/12084217a7eb7513.png","header":"https://static-cdn.mastodon.social/headers/original/missing.png","header\_static":"https://static-cdn.mastodon.social/headers/original/missing.png","followers\_count":40,"following\_count":62,"statuses\_count":42,"last\_status\_at":"2022-11-15","emojis":[],"fields":[{"name":"web","value":"clabs.org","verified\_at":null},{"name":"github","value":"github.com/chrismo","verified\_at":null},{"name":"twitter","value":"twitter.com/the\_chrismo","verified\_at":null},{"name":"bandcamp","value":"cstudios.bandcamp.com","verified\_at":null}]},"media\_attachments":[],"mentions":[],"tags":[{"name":"MUSICTUESDAY","url":"https://mastodon.social/tags/MUSICTUESDAY"},{"name":"piano","url":"https://mastodon.social/tags/piano"},{"name":"neoclassical","url":"https://mastodon.social/tags/neoclassical"},{"name":"jazz","url":"https://mastodon.social/tags/jazz"}],"emojis":[],"card":null,"poll":null}

```

---

## Watch the public timeline for a hashtag

```
GET /api/v1/streaming/hashtag HTTP/1.1

```
Returns all public statuses for a particular hashtag

**Returns:** `update`, `delete`, `status.update`  
**OAuth:** User token + `read:statuses`  
**Version history:**  
1.0.0 - added  
3.5.0 - now returns `status.update`
4.2.0 - changed to require a User token, removing Public and App token access [#23989](https://github.com/mastodon/mastodon/pull/23989)

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

tagrequired String. The name of the hashtag to watch.## Events

An example update to the hashtag timeline:

```
event: update
data: {"id":"108914430312582020","created\_at":"2022-08-30T23:31:58.006Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://mastodon.social/users/trwnh/statuses/108914430312582020","url":"https://mastodon.social/@trwnh/108914430312582020","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"content":"<p><a href=\"https://mastodon.social/tags/test\" class=\"mention hashtag\" rel=\"tag\">#<span>test</span></a></p>","reblog":null,"application":{"name":"Web","website":null},"account":{"id":"14715","username":"trwnh","acct":"trwnh","display\_name":"infinite love ⴳ","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2016-11-24T00:00:00.000Z","note":"<p>i have approximate knowledge of many things. perpetual student. (nb/ace/they)</p><p>xmpp/email: a@trwnh.com<br /><a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a><br />help me live: <a href=\"https://liberapay.com/trwnh\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/trwnh</span><span class=\"invisible\"></span></a> or paypal</p><p>- my triggers are moths and glitter<br />- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise<br />- dm me if i did something wrong, so i can improve<br />- purest person on fedi, do not lewd in my presence</p>","url":"https://mastodon.social/@trwnh","avatar":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","avatar\_static":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","header":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","header\_static":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","followers\_count":2520,"following\_count":266,"statuses\_count":59817,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"Website","value":"<a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2019-08-29T04:14:55.571+00:00"},{"name":"Portfolio","value":"<a href=\"https://abdullahtarawneh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">abdullahtarawneh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2021-02-11T20:34:13.574+00:00"},{"name":"Fan of:","value":"Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo&#39;s Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)","verified\_at":null},{"name":"What to expect:","value":"talking about various things i find interesting, and otherwise being a genuine and decent wholesome poster. i&#39;m just here to hang out and talk to cool people! and to spill my thoughts.","verified\_at":null}]},"media\_attachments":[],"mentions":[],"tags":[{"name":"test","url":"https://mastodon.social/tags/test"}],"emojis":[],"card":null,"poll":null}

```
An example delete:

```
event: delete
data: 108914430312582020

```
An example status edit:

```
event: status.update
data: {"id":"109348684737626801","created\_at":"2022-11-15T16:08:30.000Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://ruby.social/users/chrismo/statuses/109348684454557541","url":"https://ruby.social/@chrismo/109348684454557541","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":"2022-11-15T16:10:43.000Z","content":"<p><a href=\"https://ruby.social/tags/musicTuesday\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>musicTuesday</span></a> </p><p>Here's a solo <a href=\"https://ruby.social/tags/piano\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>piano</span></a> track of mine called Gravity Assist</p><p><a href=\"https://ruby.social/tags/neoclassical\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>neoclassical</span></a> (<a href=\"https://ruby.social/tags/jazz\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>jazz</span></a> ish)</p><p><a href=\"https://cstudios.bandcamp.com/track/celestia-gravity-assist-no-19-var-2\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"ellipsis\">cstudios.bandcamp.com/track/ce</span><span class=\"invisible\">lestia-gravity-assist-no-19-var-2</span></a></p>","reblog":null,"account":{"id":"795442","username":"chrismo","acct":"chrismo@ruby.social","display\_name":"chrismo","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2019-04-25T00:00:00.000Z","note":"<p>i mash keys</p>","url":"https://ruby.social/@chrismo","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/795/442/original/12084217a7eb7513.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/795/442/original/12084217a7eb7513.png","header":"https://static-cdn.mastodon.social/headers/original/missing.png","header\_static":"https://static-cdn.mastodon.social/headers/original/missing.png","followers\_count":40,"following\_count":62,"statuses\_count":42,"last\_status\_at":"2022-11-15","emojis":[],"fields":[{"name":"web","value":"clabs.org","verified\_at":null},{"name":"github","value":"github.com/chrismo","verified\_at":null},{"name":"twitter","value":"twitter.com/the\_chrismo","verified\_at":null},{"name":"bandcamp","value":"cstudios.bandcamp.com","verified\_at":null}]},"media\_attachments":[],"mentions":[],"tags":[{"name":"MUSICTUESDAY","url":"https://mastodon.social/tags/MUSICTUESDAY"},{"name":"piano","url":"https://mastodon.social/tags/piano"},{"name":"neoclassical","url":"https://mastodon.social/tags/neoclassical"},{"name":"jazz","url":"https://mastodon.social/tags/jazz"}],"emojis":[],"card":null,"poll":null}

```

---

## Watch the local timeline for a hashtag

```
GET /api/v1/streaming/hashtag/local HTTP/1.1

```
Returns all local public statuses for a particular hashtag

**Returns:** `update`, `delete`, `status.update`  
**OAuth:** User token + `read:statuses`  
**Version history:**  
1.1.0 - added  
3.5.0 - now returns `status.update`
4.2.0 - changed to require a User token, removing Public and App token access [#23989](https://github.com/mastodon/mastodon/pull/23989)

## Request

## Headers

AuthorizationProvide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

tagrequired String. The name of the hashtag to watch.## Events

An example update to the local hashtag timeline:

```
event: update
data: {"id":"108914430312582020","created\_at":"2022-08-30T23:31:58.006Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://mastodon.social/users/trwnh/statuses/108914430312582020","url":"https://mastodon.social/@trwnh/108914430312582020","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"content":"<p><a href=\"https://mastodon.social/tags/test\" class=\"mention hashtag\" rel=\"tag\">#<span>test</span></a></p>","reblog":null,"application":{"name":"Web","website":null},"account":{"id":"14715","username":"trwnh","acct":"trwnh","display\_name":"infinite love ⴳ","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2016-11-24T00:00:00.000Z","note":"<p>i have approximate knowledge of many things. perpetual student. (nb/ace/they)</p><p>xmpp/email: a@trwnh.com<br /><a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a><br />help me live: <a href=\"https://liberapay.com/trwnh\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/trwnh</span><span class=\"invisible\"></span></a> or paypal</p><p>- my triggers are moths and glitter<br />- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise<br />- dm me if i did something wrong, so i can improve<br />- purest person on fedi, do not lewd in my presence</p>","url":"https://mastodon.social/@trwnh","avatar":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","avatar\_static":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","header":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","header\_static":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","followers\_count":2520,"following\_count":266,"statuses\_count":59817,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"Website","value":"<a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2019-08-29T04:14:55.571+00:00"},{"name":"Portfolio","value":"<a href=\"https://abdullahtarawneh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">abdullahtarawneh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2021-02-11T20:34:13.574+00:00"},{"name":"Fan of:","value":"Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo&#39;s Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)","verified\_at":null},{"name":"What to expect:","value":"talking about various things i find interesting, and otherwise being a genuine and decent wholesome poster. i&#39;m just here to hang out and talk to cool people! and to spill my thoughts.","verified\_at":null}]},"media\_attachments":[],"mentions":[],"tags":[{"name":"test","url":"https://mastodon.social/tags/test"}],"emojis":[],"card":null,"poll":null}

```
An example delete:

```
event: delete
data: 108914430312582020

```
An example status edit:

```
event: status.update
data: {"id":"108914430312582020","created\_at":"2022-08-30T23:32:12.006Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"public","language":"en","uri":"https://mastodon.social/users/trwnh/statuses/108914430312582020","url":"https://mastodon.social/@trwnh/108914430312582020","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"content":"<p><a href=\"https://mastodon.social/tags/test\" class=\"mention hashtag\" rel=\"tag\">#<span>test</span></a> but edited</p>","reblog":null,"application":{"name":"Web","website":null},"account":{"id":"14715","username":"trwnh","acct":"trwnh","display\_name":"infinite love ⴳ","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2016-11-24T00:00:00.000Z","note":"<p>i have approximate knowledge of many things. perpetual student. (nb/ace/they)</p><p>xmpp/email: a@trwnh.com<br /><a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a><br />help me live: <a href=\"https://liberapay.com/trwnh\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">liberapay.com/trwnh</span><span class=\"invisible\"></span></a> or paypal</p><p>- my triggers are moths and glitter<br />- i have all notifs except mentions turned off, so please interact if you wanna be friends! i literally will not notice otherwise<br />- dm me if i did something wrong, so i can improve<br />- purest person on fedi, do not lewd in my presence</p>","url":"https://mastodon.social/@trwnh","avatar":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","avatar\_static":"https://files.mastodon.social/accounts/avatars/000/014/715/original/e430cc93d56f5ac2.png","header":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","header\_static":"https://files.mastodon.social/accounts/headers/000/014/715/original/5c6fc24edb3bb873.jpg","followers\_count":2520,"following\_count":266,"statuses\_count":59817,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"Website","value":"<a href=\"https://trwnh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">trwnh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2019-08-29T04:14:55.571+00:00"},{"name":"Portfolio","value":"<a href=\"https://abdullahtarawneh.com\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://</span><span class=\"\">abdullahtarawneh.com</span><span class=\"invisible\"></span></a>","verified\_at":"2021-02-11T20:34:13.574+00:00"},{"name":"Fan of:","value":"Punk-rock and post-hardcore (Circa Survive, letlive., La Dispute, THE FEVER 333)Manga (Yu-Gi-Oh!, One Piece, JoJo&#39;s Bizarre Adventure, Death Note, Shaman King)Platformers and RPGs (Banjo-Kazooie, Boktai, Final Fantasy Crystal Chronicles)","verified\_at":null},{"name":"What to expect:","value":"talking about various things i find interesting, and otherwise being a genuine and decent wholesome poster. i&#39;m just here to hang out and talk to cool people! and to spill my thoughts.","verified\_at":null}]},"media\_attachments":[],"mentions":[],"tags":[{"name":"test","url":"https://mastodon.social/tags/test"}],"emojis":[],"card":null,"poll":null}

```

---

## Watch for list updates

```
GET /api/v1/streaming/list HTTP/1.1

```
Returns statuses for a list

**Returns:** `update`, `delete`, `status.update`  
**OAuth:** User token + `read:statuses`  
**Version history:**  
2.1.0 - added  
3.5.0 - now returns `status.update`
4.2.0 - changed to require a User token, removing Public and App token access [#23989](https://github.com/mastodon/mastodon/pull/23989)

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

listrequired String. The ID of the list to watch.## Events

An example update to the list timeline:

```
event: update
data: {"id":"108914327388663283","created\_at":"2022-08-30T23:05:46.839Z","in\_reply\_to\_id":"108914298452377720","in\_reply\_to\_account\_id":"107946650784398271","sensitive":false,"spoiler\_text":"","visibility":"unlisted","language":null,"uri":"https://letsalllovela.in/objects/e9cebb0c-7c75-414f-9608-20b5628e52d7","url":"https://letsalllovela.in/objects/e9cebb0c-7c75-414f-9608-20b5628e52d7","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"content":"<span class=\"h-card\"><a class=\"u-url mention\" href=\"https://pl.nulled.red/users/disarray\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>disarray</span></a></span> glad i was able to help","filtered":[],"reblog":null,"account":{"id":"464472","username":"freon","acct":"freon@letsalllovela.in","display\_name":"freon","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2018-08-18T00:00:00.000Z","note":"tech archaeologist, unix weenie<br><a class=\"hashtag\" href=\"https://letsalllovela.in/tag/nobot\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#nobot</a>","url":"https://letsalllovela.in/users/freon","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/464/472/original/bfc518d70cf6f13a.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/464/472/original/bfc518d70cf6f13a.png","header":"https://files.mastodon.social/cache/accounts/headers/000/464/472/original/2e94bd33745f86a6.gif","header\_static":"https://files.mastodon.social/cache/accounts/headers/000/464/472/static/2e94bd33745f86a6.png","followers\_count":37,"following\_count":41,"statuses\_count":18442,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"pronouns","value":"emacs/xemacs (or he/they)","verified\_at":null},{"name":"age","value":"23.66667","verified\_at":null}]},"media\_attachments":[],"mentions":[{"id":"107946650784398271","username":"disarray","url":"https://pl.nulled.red/users/disarray","acct":"disarray@pl.nulled.red"}],"tags":[],"emojis":[],"card":null,"poll":null}

```
An example delete:

```
event: delete
data: 108914398911648589

```
An example status edit:

```
event: status.update
data: {"id":"108914327388663283","created\_at":"2022-08-30T23:05:53.839Z","in\_reply\_to\_id":"108914298452377720","in\_reply\_to\_account\_id":"107946650784398271","sensitive":false,"spoiler\_text":"","visibility":"unlisted","language":null,"uri":"https://letsalllovela.in/objects/e9cebb0c-7c75-414f-9608-20b5628e52d7","url":"https://letsalllovela.in/objects/e9cebb0c-7c75-414f-9608-20b5628e52d7","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"content":"<span class=\"h-card\"><a class=\"u-url mention\" href=\"https://pl.nulled.red/users/disarray\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>disarray</span></a></span> glad i was able to help","filtered":[],"reblog":null,"account":{"id":"464472","username":"freon","acct":"freon@letsalllovela.in","display\_name":"freon","locked":false,"bot":false,"discoverable":true,"group":false,"created\_at":"2018-08-18T00:00:00.000Z","note":"tech archaeologist, unix weenie<br><a class=\"hashtag\" href=\"https://letsalllovela.in/tag/nobot\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#nobot</a>","url":"https://letsalllovela.in/users/freon","avatar":"https://files.mastodon.social/cache/accounts/avatars/000/464/472/original/bfc518d70cf6f13a.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/000/464/472/original/bfc518d70cf6f13a.png","header":"https://files.mastodon.social/cache/accounts/headers/000/464/472/original/2e94bd33745f86a6.gif","header\_static":"https://files.mastodon.social/cache/accounts/headers/000/464/472/static/2e94bd33745f86a6.png","followers\_count":37,"following\_count":41,"statuses\_count":18442,"last\_status\_at":"2022-08-30","emojis":[],"fields":[{"name":"pronouns","value":"emacs/xemacs (or he/they)","verified\_at":null},{"name":"age","value":"23.66667","verified\_at":null}]},"media\_attachments":[],"mentions":[{"id":"107946650784398271","username":"disarray","url":"https://pl.nulled.red/users/disarray","acct":"disarray@pl.nulled.red"}],"tags":[],"emojis":[],"card":null,"poll":null}

```

---

## Watch for direct messages

```
GET /api/v1/streaming/direct HTTP/1.1

```
Returns events for received direct messages.

**Returns:** `conversation`  
**OAuth:** User token + `read:statuses`  
**Version history:**  
2.4.0 - added  
2.6.0 - now returns `conversation` instead of `update`

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Events

## Events

An example conversation being updated:

```
event: conversation
data: {"id":"819516","unread":true,"accounts":[{"id":"108892712797543112","username":"a","acct":"a@pl.nulled.red","display\_name":"a","locked":false,"bot":true,"discoverable":false,"group":false,"created\_at":"2022-08-27T00:00:00.000Z","note":"a (pleroma edition)","url":"https://pl.nulled.red/users/a","avatar":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/975674b2caa61034.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/975674b2caa61034.png","header":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","header\_static":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","followers\_count":0,"following\_count":0,"statuses\_count":362,"last\_status\_at":"2022-11-13","emojis":[],"fields":[]}],"last\_status":{"id":"109346889330629417","created\_at":"2022-11-15T08:31:57.476Z","in\_reply\_to\_id":null,"in\_reply\_to\_account\_id":null,"sensitive":false,"spoiler\_text":"","visibility":"direct","language":null,"uri":"https://pl.nulled.red/objects/c869c5be-c184-4706-a45d-3459d9aa711c","url":"https://pl.nulled.red/objects/c869c5be-c184-4706-a45d-3459d9aa711c","replies\_count":0,"reblogs\_count":0,"favourites\_count":0,"edited\_at":null,"favourited":false,"reblogged":false,"muted":false,"bookmarked":false,"content":"test <span class=\"h-card\"><a class=\"u-url mention\" href=\"https://mastodon.social/@trwnh\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">@<span>trwnh</span></a></span>","filtered":[],"reblog":null,"account":{"id":"108892712797543112","username":"a","acct":"a@pl.nulled.red","display\_name":"a","locked":false,"bot":true,"discoverable":false,"group":false,"created\_at":"2022-08-27T00:00:00.000Z","note":"a (pleroma edition)","url":"https://pl.nulled.red/users/a","avatar":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/975674b2caa61034.png","avatar\_static":"https://files.mastodon.social/cache/accounts/avatars/108/892/712/797/543/112/original/975674b2caa61034.png","header":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","header\_static":"https://files.mastodon.social/cache/accounts/headers/108/892/712/797/543/112/original/f61d0382356caa0e.png","followers\_count":0,"following\_count":0,"statuses\_count":362,"last\_status\_at":"2022-11-13","emojis":[],"fields":[]},"media\_attachments":[],"mentions":[{"id":"14715","username":"trwnh","url":"https://mastodon.social/@trwnh","acct":"trwnh"}],"tags":[],"emojis":[],"card":null,"poll":null}}

```

---

## Establishing a WebSocket connection

```
wss://mastodon.example/api/v1/streaming

```
**Returns:** Stream of [Event](/methods/streaming/#events)  
**OAuth:** User token + `read` (or `read:statuses` and/or `read:notifications`)  
**Version history:**  
3.3.0 - added
4.2.0 - changed to require a User token, removing Public and App token access [#23989](https://github.com/mastodon/mastodon/pull/23989)

Open a multiplexed WebSocket connection to receive events.

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Parameters

Query parameters are recommended for single-purpose connections, but parameters may also be provided by sending a JSON-encoded payload over the WebSocket connection with `type` parameter.

Example subscription to local statuses containing the hashtag `#foo`:

```
{ "type": "subscribe", "stream": "hashtag:local", "tag": "foo" }

```
Example unsubscription from user updates:

```
{ "type": "unsubscribe", "stream": "user" }

```
access\_tokenrequired String. A user-authorized OAuth token. Alternative to `Authorization` header.streamrequired String. The stream to watch for events. See [Streams](/methods/streaming/#streams) for possible values.listString. When `stream` is set to `list`, use this parameter to specify the list ID.tagString. When `stream` is set to `hashtag` or `hashtag:local`, use this parameter to specify the tag name.typeString. For JSON-encoded payloads sent to the server, specify either `subscribe` or `unsubscribe` in order to manage the events that you wish to receive.## Events

Events are JSON-encoded. If an invalid access token is provided, the connection will be closed immediately. If your server has enabled limited federation mode or authorized-fetch mode, then an access token must be provided in order to receive events.

An example update to the public timeline:

```
{
 "stream": [
 "public"
 ],
 "event": "update",
 "payload": "{\"id\":\"108913983692647032\",\"created\_at\":\"2022-08-30T21:38:22.000Z\",\"in\_reply\_to\_id\":\"108913981098896721\",\"in\_reply\_to\_account\_id\":\"1081104\",\"sensitive\":false,\"spoiler\_text\":\"\",\"visibility\":\"public\",\"language\":\"en\",\"uri\":\"https://fosstodon.org/users/tobtobxx/statuses/108913983628474640\",\"url\":\"https://fosstodon.org/@tobtobxx/108913983628474640\",\"replies\_count\":0,\"reblogs\_count\":0,\"favourites\_count\":0,\"edited\_at\":null,\"content\":\"<p>And now I can't exit the inner nvim because I mapped escape to the parent vim instance 😂</p>\",\"reblog\":null,\"account\":{\"id\":\"1081104\",\"username\":\"tobtobxx\",\"acct\":\"tobtobxx@fosstodon.org\",\"display\_name\":\"TobTobXX\",\"locked\":false,\"bot\":false,\"discoverable\":true,\"group\":false,\"created\_at\":\"2020-01-10T00:00:00.000Z\",\"note\":\"<p>Young tech enthusiast. Likes software (and also general, just not work-) minimalsim. Constantly trying to escape big-tech software.<br>Other hobbies include making music, stargazing, math and recently chess, but there's a lot that piques my interest and a lot left to learn out there.</p><p>„Of course, every house is constructed by someone, but the one who constructed all things is God.“ (Hebrews 3:4 [nwt18])</p>\",\"url\":\"https://fosstodon.org/@tobtobxx\",\"avatar\":\"https://files.mastodon.social/cache/accounts/avatars/001/081/104/original/230a8d0fb54e249b.png\",\"avatar\_static\":\"https://files.mastodon.social/cache/accounts/avatars/001/081/104/original/230a8d0fb54e249b.png\",\"header\":\"https://static-cdn.mastodon.social/headers/original/missing.png\",\"header\_static\":\"https://static-cdn.mastodon.social/headers/original/missing.png\",\"followers\_count\":150,\"following\_count\":216,\"statuses\_count\":2447,\"last\_status\_at\":\"2022-08-30\",\"emojis\":[],\"fields\":[{\"name\":\"📍 Lives in:\",\"value\":\"Switzerland (CET: UTC+1 or CEST: UTC+2)\",\"verified\_at\":null},{\"name\":\"🔑 GPG key:\",\"value\":\"EA23 42C5 3EBF 2A2D 985C 416A 12AC 3D47 52E2 FA2E\",\"verified\_at\":null}]},\"media\_attachments\":[],\"mentions\":[],\"tags\":[],\"emojis\":[],\"card\":null,\"poll\":null}"
}

```
Note that while the event is JSON-encoded, the `payload` is string-encoded and escaped, so it must be parsed and loaded as JSON from that string. However, for `delete` and `announcements.delete` events the payload is a string representing an identifier, not a JSON value.An example delete event from the public timeline:

```
{
 "stream": [
 "public"
 ],
 "event": "delete",
 "payload": "106692867363994015"
}

```
An example filter change by the user:

```
{
 "stream": [
 "user"
 ],
 "event": "filters\_changed"
}

```
Note that the `payload` property is not present for `filters_changed` events. And for `delete` and `announcements.delete` the payload is a string, not an object.## See also

## Streaming server

[streaming/index.js](https://github.com/mastodon/mastodon/blob/main/streaming/index.js)## Backend event publishing

Streaming timelines are maintained in Redis, and are published to Redis via `redis.publish()`

## Status events

[app/services/fan\_out\_on\_write\_service.rb](https://github.com/mastodon/mastodon/blob/main/app/services/fan_out_on_write_service.rb)[app/services/remove\_status\_service.rb](https://github.com/mastodon/mastodon/blob/main/app/services/remove_status_service.rb)[app/services/batched\_remove\_status\_service.rb](https://github.com/mastodon/mastodon/blob/main/app/services/batched_remove_status_service.rb)[app/workers/push\_conversation\_worker.rb](https://github.com/mastodon/mastodon/blob/main/app/workers/push_conversation_worker.rb)## User events

[app/lib/feed\_manager.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/feed_manager.rb)[app/workers/push\_update\_worker.rb](https://github.com/mastodon/mastodon/blob/main/app/workers/push_update_worker.rb)[app/services/notify\_service.rb](https://github.com/mastodon/mastodon/blob/main/app/services/notify_service.rb)[app/models/custom\_filter.rb](https://github.com/mastodon/mastodon/blob/main/app/models/custom_filter.rb)[app/workers/publish\_scheduled\_announcement\_worker.rb](https://github.com/mastodon/mastodon/blob/main/app/workers/publish_scheduled_announcement_worker.rb)[app/workers/publish\_announcement\_reaction\_worker.rb](https://github.com/mastodon/mastodon/blob/main/app/workers/publish_announcement_reaction_worker.rb)[app/workers/unpublish\_announcement\_worker.rb](https://github.com/mastodon/mastodon/blob/main/app/workers/unpublish_announcement_worker.rb)[app/workers/push\_encrypted\_message\_worker.rb](https://github.com/mastodon/mastodon/blob/main/app/workers/push_encrypted_message_worker.rb)## Streaming client

[app/javascript/mastodon/stream.js](https://github.com/mastodon/mastodon/blob/main/app/javascript/mastodon/stream.js)[app/javascript/mastodon/actions/streaming.js](https://github.com/mastodon/mastodon/blob/main/app/javascript/mastodon/actions/streaming.js)Last updated December 19, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/streaming.md)

---


# push API methods

Source: https://docs.joinmastodon.org/methods/push/

# push API methods

Subscribe to and receive push notifications when a server-side notification is received, via the Web Push API

## About the Web Push API

Mastodon natively supports the [Web Push API](https://developer.mozilla.org/en-US/docs/Web/API/Push_API). You can utilize the same mechanisms for your native app. Mastodon doesn’t connect to Android’s and Apple’s proprietary notification gateways directly, so if you wish to use those you can use a proxy server that translates between the WebPush standard and those gateways. This can be implemented in such a way that the proxy server does not have access to the contents of the notifications. For an example, see [Mozilla’s reference web push server](https://github.com/mozilla-services/autopush), or one of the several relays developed by the Mastodon community specifically for this purpose:

* [toot-relay](https://github.com/DagAgren/toot-relay)
* [PushToFCM](https://github.com/tateisu/PushToFCM)
* [metatext-apns](https://github.com/metabolist/metatext-apns)

---

## Subscribe to push notifications

```
POST /api/v1/push/subscription HTTP/1.1

```
Add a Web Push API subscription to receive notifications. Each access token can have one push subscription. If you create a new subscription, the old subscription is deleted.

**Returns:** [WebPushSubscription](/entities/WebPushSubscription/)  
**OAuth:** User token + `push`  
**Version history:**  
2.4.0 - added  
3.3.0 - added `data[alerts][status]`  
3.4.0 - added `data[policy]`  
3.5.0 - added `data[alerts][update]` and `data[alerts][admin.sign_up]`  
4.0.0 - added `data[alerts][admin.report]`  
4.3.0 - added stricter request parameter validation, invalid endpoint URLs and subscription keys will now result in an error, previously these would be accepted, but silently fail.  
4.4.0 - added `subscription[standard]`

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

subscription[endpoint]required String. The endpoint URL that is called when a notification event occurs.subscription[keys][p256dh]required String. User agent public key. Base64 encoded string of a public key from a ECDH keypair using the `prime256v1` curve.subscription[keys][auth]required String. Auth secret. Base64 encoded string of 16 bytes of random data.subscription[standard]Boolean. Follow standardized webpush (RFC8030+RFC8291+RFC8292) ? Else follow legacy webpush (unpublished version, 4th draft of RFC8291 and 1st draft of RFC8292). Defaults to false.data[alerts][mention]Boolean. Receive mention notifications? Defaults to false.data[alerts][status]Boolean. Receive new subscribed account notifications? Defaults to false.data[alerts][reblog]Boolean. Receive reblog notifications? Defaults to false.data[alerts][follow]Boolean. Receive follow notifications? Defaults to false.data[alerts][follow\_request]Boolean. Receive follow request notifications? Defaults to false.data[alerts][favourite]Boolean. Receive favourite notifications? Defaults to false.data[alerts][poll]Boolean. Receive poll notifications? Defaults to false.data[alerts][update]Boolean. Receive status edited notifications? Defaults to false.data[alerts][admin.sign\_up]Boolean. Receive new user signup notifications? Defaults to false. Must have a role with the appropriate permissions.data[alerts][admin.report]Boolean. Receive new report notifications? Defaults to false. Must have a role with the appropriate permissions.data[policy]String. Specify whether to receive push notifications from `all`, `followed`, `follower`, or `none` users.## Response

## 200: OK

A new PushSubscription has been generated, which will send the requested alerts to your endpoint.

```
{
 "id": 328183,
 "endpoint": "https://yourdomain.example/listener",
 "standard": true,
 "alerts": {
 "follow": true,
 "favourite": true,
 "reblog": true,
 "mention": true,
 "poll": true
 },
 "server\_key": "BCk-QqERU0q-CfYZjcuB6lnyyOYfJ2AifKqfeGIm7Z-HiTU5T9eTG5GxVA0\_OH5mMlI4UkkDTpaZwozy0TzdZ2M="
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Get current subscription

```
GET /api/v1/push/subscription HTTP/1.1

```
View the PushSubscription currently associated with this access token.

**Returns:** [WebPushSubscription](/entities/WebPushSubscription/)  
**OAuth:** User token + `push`  
**Version history:**  
2.4.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": 328183,
 "endpoint": "https://yourdomain.example/listener",
 "standard": true,
 "alerts": {
 "follow": true,
 "favourite": true,
 "reblog": true,
 "mention": true,
 "poll": true
 },
 "server\_key": "BCk-QqERU0q-CfYZjcuB6lnyyOYfJ2AifKqfeGIm7Z-HiTU5T9eTG5GxVA0\_OH5mMlI4UkkDTpaZwozy0TzdZ2M="
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

A PushSubscription does not exist for this token.

```
{
 "error": "Record not found"
}

```

---

## Change types of notifications

```
PUT /api/v1/push/subscription HTTP/1.1

```
Updates the current push subscription. Only the data part can be updated. To change fundamentals, a new subscription must be created instead.

**Returns:** [WebPushSubscription](/entities/WebPushSubscription/)  
**OAuth:** User token + `push`  
**Version history:**  
2.4.0 - added  
3.3.0 - added `data[alerts][status]`  
3.4.0 - added `policy`  
3.5.0 - added `data[alerts][update]` and `data[alerts][admin.sign_up]`  
4.0.0 - added `data[alerts][admin.report]`

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

data[alerts][mention]Boolean. Receive mention notifications? Defaults to false.data[alerts][status]Boolean. Receive new subscribed account notifications? Defaults to false.data[alerts][reblog]Boolean. Receive reblog notifications? Defaults to false.data[alerts][follow]Boolean. Receive follow notifications? Defaults to false.data[alerts][follow\_request]Boolean. Receive follow request notifications? Defaults to false.data[alerts][favourite]Boolean. Receive favourite notifications? Defaults to false.data[alerts][poll]Boolean. Receive poll notifications? Defaults to false.data[alerts][update]Boolean. Receive status edited notifications? Defaults to false.data[alerts][admin.sign\_up]Boolean. Receive new user signup notifications? Defaults to false. Must have a role with the appropriate permissions.data[alerts][admin.report]Boolean. Receive new report notifications? Defaults to false. Must have a role with the appropriate permissions.policyString. Specify whether to receive push notifications from `all`, `followed`, `follower`, or `none` users.## Response

## 200: OK

Updating a PushSubscription to only receive mention alerts

```
{
 "id": 328183,
 "endpoint": "https://yourdomain.example/listener",
 "standard": true,
 "alerts": {
 "follow": false,
 "favourite": false,
 "reblog": false,
 "mention": true,
 "poll": false
 },
 "server\_key": "BCk-QqERU0q-CfYZjcuB6lnyyOYfJ2AifKqfeGIm7Z-HiTU5T9eTG5GxVA0\_OH5mMlI4UkkDTpaZwozy0TzdZ2M="
}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

No existing PushSubscription for this token

```
{
 "error": "Record not found"
}

```

---

## Remove current subscription

```
DELETE /api/v1/push/subscription HTTP/1.1

```
Removes the current Web Push API subscription.

**Returns:** Empty  
**OAuth:** User token + `push`  
**Version history:**  
2.4.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

PushSubscription successfully deleted or did not exist previously

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## See also

[app/controllers/api/v1/push/subscriptions\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/push/subscriptions_controller.rb)Last updated March 5, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/push.md)

---


# trends API methods

Source: https://docs.joinmastodon.org/methods/trends/

# trends API methods

View hashtags that are currently being used more frequently than usual.

## View trending tags

```
GET /api/v1/trends/tags HTTP/1.1

```
Tags that are being used more frequently within the past week.

**Returns:** Array of [Tag](/entities/Tag/)  
**OAuth:** Public  
**Version history:**  
3.0.0 - added  
3.5.0 - method signature changed from `GET /api/v1/trends` to `GET /api/v1/trends/tags`. The former is a deprecated alias that may be removed in the future.

## Request

## Query parameters

limitInteger. Maximum number of results to return. Defaults to 10 tags. Max 20 tags.offsetInteger. Skip the first n results.## Response

## 200: OK

```
[
 {
 "name": "hola",
 "url": "https://mastodon.social/tags/hola",
 "history": [
 {
 "day": "1574726400",
 "uses": "13",
 "accounts": "10"
 },
 // ...
 ]
 },
 {
 "name": "SaveDotOrg",
 "url": "https://mastodon.social/tags/SaveDotOrg",
 "history": [
 {
 "day": "1574726400",
 "uses": "9",
 "accounts": "9"
 },
 // ...
 ]
 },
 {
 "name": "introduction",
 "url": "https://mastodon.social/tags/introduction",
 "history": [
 {
 "day": "1574726400",
 "uses": "15",
 "accounts": "14"
 },
 // ...
 ]
 },
 // ...
]

```

---

## View trending statuses

```
GET /api/v1/trends/statuses HTTP/1.1

```
Statuses that have been interacted with more than others.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** Public  
**Version history:**  
3.5.0 - added

## Request

## Query parameters

limitInteger. Maximum number of results to return. Defaults to 20 statuses. Max 40 statuses.offsetInteger. Skip the first n results.## Response

## 200: OK

```
[
 {
 "id": "108910940413327534",
 "created\_at": "2022-08-30T08:44:26.366Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 // ...
 "content": "<p>In order to prevent such incidents from happening in the future, we are implementing a fixed set of internal guidelines which must be met before any media content can be shared on our social media platforms. The distribution of material which promotes a message of racism or sexism is unacceptable. We can do better and in the future we will do better.</p><p>We apologize again for this incident and can assure you that it will not happen again.</p><p>Your Tutanota Team</p>",
 // ...
 },
 // ...
]

```

---

## View trending links

```
GET /api/v1/trends/links HTTP/1.1

```
Links that have been shared more than others.

**Returns:** Array of [Trends::Link](/entities/PreviewCard/#trends-link)  
**OAuth:** Public  
**Version history:**  
3.5.0 - added

## Request

## Query parameters

limitInteger. Maximum number of results to return. Defaults to 10 links. Max 20 links.offsetInteger. Skip the first n results.## Response

## 200: OK

```
[
 {
 "url": "https://www.nbcnews.com/specials/plan-your-vote-2022-elections/index.html",
 "title": "Plan Your Vote: 2022 Elections",
 "description": "Everything you need to know about the voting rules where you live, including registration, mail-in voting, changes since 2020, and more.",
 "type": "link",
 "author\_name": "NBC News",
 "author\_url": "",
 "provider\_name": "NBC News",
 "provider\_url": "",
 "html": "",
 "width": 400,
 "height": 225,
 "image": "https://files.mastodon.social/cache/preview\_cards/images/045/027/478/original/0783d5e91a14fd49.jpeg",
 "embed\_url": "",
 "blurhash": "UcQmF#ay~qofj[WBj[j[~qof9Fayofofayay",
 "history": [
 {
 "day": "1661817600",
 "accounts": "7",
 "uses": "7"
 },
 {
 "day": "1661731200",
 "accounts": "23",
 "uses": "23"
 },
 {
 "day": "1661644800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661558400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661472000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661385600",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661299200",
 "accounts": "0",
 "uses": "0"
 }
 ]
 },
 // ...
]

```

---

## See also

[app/controllers/api/v1/trends/links\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/trends/links_controller.rb)[app/controllers/api/v1/trends/statuses\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/trends/statuses_controller.rb)[app/controllers/api/v1/trends/tags\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/trends/tags_controller.rb)Last updated December 14, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/trends.md)

---


# directory API methods

Source: https://docs.joinmastodon.org/methods/directory/

# directory API methods

A directory of profiles that your website is aware of.

## View profile directory

```
GET /api/v1/directory HTTP/1.1

```
List accounts visible in the directory.

**Returns:** Array of [Account](/entities/Account/)  
**OAuth:** Public  
**Version history:**  
3.0.0 - added

## Request

## Query parameters

offsetNumber. Skip the first n results.limitNumber. How many accounts to load. Defaults to 40 accounts. Max 80 accounts.orderString. Use `active` to sort by most recently posted statuses (default) or `new` to sort by most recently created profiles.localBoolean. If true, returns only local accounts.## Response

## 200: OK

Sample results with limit=2

```
[
 {
 "id": "796927",
 "username": "eternalNo3",
 "acct": "eternalNo3@best-friends.chat",
 "display\_name": "ESD＠┓（谷）┏",
 // ...
 },
 {
 "id": "787648",
 "username": "ariel",
 "acct": "ariel@best-friends.chat",
 "display\_name": "あやっしー🧜🏻‍♀️",
 // ...
 }
]

```

---

## See also

[app/controllers/api/v1/directories\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/directories_controller.rb)Last updated December 14, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/directory.md)

---


# custom_emojis API methods

Source: https://docs.joinmastodon.org/methods/custom_emojis/

# custom\_emojis API methods

Each site can define and upload its own custom emoji to be attached to profiles or statuses.

## View all custom emoji

```
GET /api/v1/custom\_emojis HTTP/1.1

```
Returns custom emojis that are available on the server.

**Returns:** Array of [CustomEmoji](/entities/CustomEmoji/)  
**OAuth:** Public  
**Version history:**  
2.0.0 - added  
3.0.0 - optional `category` added to response

## Response

## 200: OK

Sample response from mastodon.social

```
[
 {
 "shortcode": "aaaa",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/007/118/original/aaaa.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/007/118/static/aaaa.png",
 "visible\_in\_picker": true
 },
 {
 "shortcode": "AAAAAA",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/071/387/original/AAAAAA.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/071/387/static/AAAAAA.png",
 "visible\_in\_picker": true
 },

 // [...]

 {
 "shortcode": "blobaww",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/011/739/original/blobaww.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/011/739/static/blobaww.png",
 "visible\_in\_picker": true,
 "category": "Blobs"
 },

 // [...]

 {
 "shortcode": "yikes",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/031/275/original/yikes.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/031/275/static/yikes.png",
 "visible\_in\_picker": true
 },
 {
 "shortcode": "ziltoid",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/017/094/original/05252745eb087806.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/017/094/static/05252745eb087806.png",
 "visible\_in\_picker": true
 }
]

```

---

## See also

[app/controllers/api/v1/custom\_emojis\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/custom_emojis_controller.rb)Last updated December 14, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/custom_emojis.md)

---


# announcements API methods

Source: https://docs.joinmastodon.org/methods/announcements/

# announcements API methods

For announcements set by administration.

## View all announcements

```
GET /api/v1/announcements HTTP/1.1

```
See all currently active announcements set by admins.

**Returns:** Array of [Announcement](/entities/Announcement/)  
**OAuth:** User token  
**Version history:**  
3.1.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Currently active announcements

```
[
 {
 "id": "8",
 "content": "<p>Looks like there was an issue processing audio attachments without embedded art since yesterday due to an experimental new feature. That issue has now been fixed, so you may see older posts with audio from other servers pop up in your feeds now as they are being finally properly processed. Sorry!</p>",
 "starts\_at": null,
 "ends\_at": null,
 "all\_day": false,
 "published\_at": "2020-07-03T01:27:38.726Z",
 "updated\_at": "2020-07-03T01:27:38.752Z",
 "read": true,
 "mentions": [],
 "statuses": [],
 "tags": [],
 "emojis": [],
 "reactions": [
 {
 "name": "bongoCat",
 "count": 9,
 "me": false,
 "url": "https://files.mastodon.social/custom\_emojis/images/000/067/715/original/fdba57dff7576d53.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/067/715/static/fdba57dff7576d53.png"
 },
 {
 "name": "thonking",
 "count": 1,
 "me": false,
 "url": "https://files.mastodon.social/custom\_emojis/images/000/098/690/original/a8d36edc4a7032e8.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/098/690/static/a8d36edc4a7032e8.png"
 },
 {
 "name": "AAAAAA",
 "count": 1,
 "me": false,
 "url": "https://files.mastodon.social/custom\_emojis/images/000/071/387/original/AAAAAA.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/071/387/static/AAAAAA.png"
 },
 {
 "name": "🤔",
 "count": 1,
 "me": true
 }
 ]
 }
]

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```

---

## Dismiss an announcement

```
POST /api/v1/announcements/:id/dismiss HTTP/1.1

```
Allows a user to mark the announcement as read.

**Returns:** Empty  
**OAuth:** User token + `write:accounts`  
**Version history:**  
3.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Announcement in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Announcement with given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## Add a reaction to an announcement

```
PUT /api/v1/announcements/:id/reactions/:name HTTP/1.1

```
React to an announcement with an emoji.

**Returns:** Empty  
**OAuth:** User token + `write:favourites`  
**Version history:**  
3.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Announcement in the database.:namerequired String. Unicode emoji, or the shortcode of a custom emoji.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Announcement with given ID does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

```
{
 "error": "Validation failed: Name is not a recognized emoji"
}

```

---

## Remove a reaction from an announcement

```
DELETE /api/v1/announcements/:id/reactions/:name HTTP/1.1

```
Undo a react emoji to an announcement.

**Returns:** Empty  
**OAuth:** User token + `write:favourites`  
**Version history:**  
3.1.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Announcement in the database.:namerequired String. Unicode emoji, or the shortcode of a custom emoji.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{}

```
## 401: Unauthorized

Invalid or missing Authorization header.

```
{
 "error": "The access token is invalid"
}

```
## 404: Not found

Announcement with given ID does not exist

```
{
 "error": "Record not found"
}

```
## 422: Unprocessable entity

```
{
 "error": "Validation failed: Name is not a recognized emoji"
}

```

---

## See also

[app/controllers/api/v1/announcements\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/announcements_controller.rb)[app/controllers/api/v1/announcements/reactions\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/announcements/reactions_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/announcements.md)

---


# admin/accounts API methods

Source: https://docs.joinmastodon.org/methods/admin/accounts/

# admin/accounts API methods

Perform moderation actions with accounts.

## View accounts (v1)

```
GET /api/v1/admin/accounts HTTP/1.1

```
View all accounts, optionally matching certain criteria for filtering, up to 100 at a time. Pagination may be done with the HTTP Link header in the response. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

**Returns:** Array of [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:read:accounts`  
**Permissions:** Manage Users  
**Version history:**  
2.9.1 - added  
3.3.0 - added `sensitized`  
4.0.0 - support custom roles and permissions

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

localBoolean. Filter for local accounts?remoteBoolean. Filter for remote accounts?activeBoolean. Filter for currently active accounts?pendingBoolean. Filter for currently pending accounts?disabledBoolean. Filter for currently disabled accounts?silencedBoolean. Filter for currently silenced accounts?suspendedBoolean. Filter for currently suspended accounts?sensitizedBoolean. Filter for accounts force-marked as sensitive?usernameString. Search for the given usernamedisplay\_nameString. Search for the given display nameby\_domainString. Filter by the given domainemailString. Lookup a user with this emailipString. Lookup users with this IP addressstaffBoolean. Filter for staff accounts?max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 100 accounts. Max 200 accounts.## Response

## 200: OK

```
[
 {
 "id": "108267707882207829",
 "username": "trwnh",
 "domain": null,
 "created\_at": "2022-05-08T18:21:56.870Z",
 "email": "trwnh@mastodon.local",
 "ip": {
 "user\_id": 2,
 "ip": "192.168.42.1",
 "used\_at": "2022-05-08T18:21:56.944Z"
 },
 "role": "user",
 "confirmed": false,
 "suspended": false,
 "silenced": false,
 "disabled": false,
 "approved": true,
 "locale": "en",
 "invite\_request": null,
 "ips": [
 {
 "ip": "192.168.42.1",
 "used\_at": "2022-05-08T18:21:56.944Z"
 }
 ],
 "account": {
 "id": "108267707882207829",
 "username": "trwnh",
 "acct": "trwnh",
 // ...
 }
 },
 {
 "id": "108267695853695427",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-05-08T18:18:53.221Z",
 "email": "admin@mastodon.local",
 "ip": {
 "user\_id": 1,
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T16:10:38.621Z"
 },
 "role": "admin",
 "confirmed": true,
 "suspended": false,
 "silenced": false,
 "disabled": false,
 "approved": true,
 "locale": null,
 "invite\_request": null,
 "ips": [
 {
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T16:10:38.621Z"
 }
 ],
 "account": {
 "id": "108267695853695427",
 "username": "admin",
 "acct": "admin",
 // ...
 }
 }
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## View accounts (v2)

```
GET /api/v2/admin/accounts HTTP/1.1

```
View all accounts, optionally matching certain criteria for filtering, up to 100 at a time. Pagination may be done with the HTTP Link header in the response. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

**Returns:** Array of [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:read:accounts`  
**Permissions:** Manage Users  
**Version history:**  
3.5.0 - added  
4.0.0 - added `role_ids`. Support custom roles and permissions

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

originString. Filter for `local` or `remote` accounts.statusString. Filter for `active`, `pending`, `disabled`, `silenced`, or `suspended` accounts.permissionsString. Filter for accounts with `staff` permissions (users that can manage reports).role\_ids[]Array of String. Filter for users with these roles.invited\_byString. Lookup users invited by the account with this ID.usernameString. Search for the given username.display\_nameString. Search for the given display name.by\_domainString. Filter by the given domain.emailString. Lookup a user with this email.ipString. Lookup users with this IP address.max\_idString. All results returned will be lesser than this ID. In effect, sets an upper bound on results.since\_idString. All results returned will be greater than this ID. In effect, sets a lower bound on results.min\_idString. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward.limitInteger. Maximum number of results to return. Defaults to 100 accounts. Max 200 accounts.## Response

## 200: OK

```
[
 {
 "id": "108267695853695427",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-05-08T18:18:53.221Z",
 "email": "admin@mastodon.local",
 "ip": {
 "user\_id": 1,
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T16:10:38.621Z"
 },
 "role": {
 "id": 3,
 "name": "Owner",
 "color": "#3584e4",
 "position": 1000,
 "permissions": 1,
 "highlighted": true,
 "created\_at": "2022-09-08T22:48:07.983Z",
 "updated\_at": "2022-09-09T10:45:13.226Z"
 },
 "confirmed": true,
 "suspended": false,
 "silenced": false,
 "disabled": false,
 "approved": true,
 "locale": null,
 "invite\_request": null,
 "ips": [
 {
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T16:10:38.621Z"
 }
 ],
 "account": {
 "id": "108267695853695427",
 "username": "admin",
 "acct": "admin",
 // ...
 }
 }
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## View a specific account

```
GET /api/v1/admin/accounts/:id HTTP/1.1

```
View admin-level information about the given account.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:read:accounts`  
**Permissions:** Manage Users  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "108267695853695427",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-05-08T18:18:53.221Z",
 "email": "admin@mastodon.local",
 "ip": {
 "user\_id": 1,
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T16:10:38.621Z"
 },
 "role": {
 "id": 3,
 "name": "Owner",
 "color": "",
 "position": 1000,
 "permissions": 1,
 "highlighted": true,
 "created\_at": "2022-09-08T22:48:07.983Z",
 "updated\_at": "2022-09-08T22:48:07.983Z"
 },
 "confirmed": true,
 "suspended": false,
 "silenced": false,
 "disabled": false,
 "approved": true,
 "locale": null,
 "invite\_request": null,
 "ips": [
 {
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T16:10:38.621Z"
 }
 ],
 "account": {
 "id": "108267695853695427",
 "username": "admin",
 "acct": "admin",
 // ...
 }
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```

---

## Approve a pending account

```
POST /api/v1/admin/accounts/:id/approve HTTP/1.1

```
Approve the given local account if it is currently pending approval.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Manage Users  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The account is now approved

```
{
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 // ...
 "approved": true,
 // ...
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header, or account is currently not pending.

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```

---

## Reject a pending account

```
POST /api/v1/admin/accounts/:id/reject HTTP/1.1

```
Reject the given local account if it is currently pending approval.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Manage Users  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "108965436418975594",
 "username": "badguy",
 "domain": null,
 "created\_at": "2022-09-08T23:43:29.427Z",
 "email": "badguy@mastodon.local",
 "ip": null,
 "role": {
 "id": -99,
 "name": "",
 "color": "",
 "position": -1,
 "permissions": 65536,
 "highlighted": false,
 "created\_at": "2022-09-08T22:48:07.977Z",
 "updated\_at": "2022-09-08T22:48:07.977Z"
 },
 "confirmed": true,
 "suspended": false,
 "silenced": false,
 "disabled": false,
 "approved": false,
 "locale": "en",
 "invite\_request": "i am going to commit crimes",
 "ips": [],
 "account": {
 "id": "108965436418975594",
 "username": "badguy",
 "acct": "badguy",
 "display\_name": "",
 "locked": false,
 "bot": false,
 "discoverable": null,
 "group": false,
 "created\_at": "2022-09-08T00:00:00.000Z",
 "note": "",
 "url": "http://mastodon.local/@badguy",
 "avatar": "http://mastodon.local/avatars/original/missing.png",
 "avatar\_static": "http://mastodon.local/avatars/original/missing.png",
 "header": "http://mastodon.local/headers/original/missing.png",
 "header\_static": "http://mastodon.local/headers/original/missing.png",
 "followers\_count": 0,
 "following\_count": 0,
 "statuses\_count": 0,
 "last\_status\_at": null,
 "emojis": [],
 "fields": []
 }
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header, or the account is not currently pending.

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```

---

## Delete an account

```
DELETE /api/v1/admin/accounts/:id HTTP/1.1

```
Permanently delete data for a suspended account.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Delete User Data  
**Version history:**  
3.3.0 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The account’s data has been deleted.

```
{
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 "email": "goody@mastodon.local",
 "ip": {
 "user\_id": 3,
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T23:42:04.761Z"
 },
 "role": {
 "id": -99,
 "name": "",
 "color": "",
 "position": -1,
 "permissions": 65536,
 "highlighted": false,
 "created\_at": "2022-09-08T22:48:07.977Z",
 "updated\_at": "2022-09-08T22:48:07.977Z"
 },
 "confirmed": true,
 "suspended": true,
 "silenced": false,
 "disabled": false,
 "approved": true,
 "locale": "en",
 "invite\_request": "this is a compelling reason",
 "ips": [
 {
 "ip": "192.168.42.1",
 "used\_at": "2022-09-08T23:42:04.761Z"
 }
 ],
 "account": {
 "id": "108965430868193066",
 "username": "goody",
 "acct": "goody",
 "display\_name": "",
 "locked": false,
 "bot": false,
 "discoverable": false,
 "group": false,
 "created\_at": "2022-09-08T00:00:00.000Z",
 "note": "",
 "url": "http://mastodon.local/@goody",
 "avatar": "http://mastodon.local/avatars/original/missing.png",
 "avatar\_static": "http://mastodon.local/avatars/original/missing.png",
 "header": "http://mastodon.local/headers/original/missing.png",
 "header\_static": "http://mastodon.local/headers/original/missing.png",
 "followers\_count": 0,
 "following\_count": 0,
 "statuses\_count": 0,
 "last\_status\_at": null,
 "suspended": true,
 "emojis": [],
 "fields": []
 }
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header, or account was already deleted.

```
{
 "error": "This action is not allowed"
}

```

---

## Perform an action against an account

```
POST /api/v1/admin/accounts/:id/action HTTP/1.1

```
Perform an action against an account and log this action in the moderation history. Also resolves any open reports against this account.

**Returns:** Empty  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Manage Users, Manage Reports  
**Version history:**  
2.9.1 - added  
3.3.0 - add `sensitive` as a possible `type`  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

typerequired String. The type of action to be taken: `none`, `sensitive`, `disable`, `silence`, or `suspend`.report\_idString. The ID of an associated report that caused this action to be taken.warning\_preset\_idString. The ID of a preset warning.textString. Additional clarification for why this action was taken.send\_email\_notificationBoolean. Should an email be sent to the user with the above information?## Response

## 200: OK

The action was successfully taken

```
{}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account or Report with given ID does not exist

```
{
 "error": "Record not found"
}

```
## 422: Server error

`type` is not provided or is not understood

```
{
 "error": "Record invalid"
}

```

---

## Enable a currently disabled account

```
POST /api/v1/admin/accounts/:id/enable HTTP/1.1

```
Re-enable a local account whose login is currently disabled.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Manage Users  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Account was enabled, or was already enabled.

```
{
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 // ...
 "disabled": false,
 // ...
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```

---

## Unsilence an account

```
POST /api/v1/admin/accounts/:id/unsilence HTTP/1.1

```
Unsilence an account if it is currently silenced.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Manage Users  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Account was unsilenced, or was already not silenced

```
{
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 // ...
 "silenced": false,
 // ...
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```

---

## Unsuspend an account

```
POST /api/v1/admin/accounts/:id/unsuspend HTTP/1.1

```
Unsuspend a currently suspended account.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Manage Users  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Account successfully unsuspended

```
{
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 // ...
 "suspended": false,
 // ...
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header, or Account is not currently suspended

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```

---

## Unmark an account as sensitive

```
POST /api/v1/admin/accounts/:id/unsensitive HTTP/1.1

```
Stops marking an account’s posts as sensitive, if it was previously flagged as sensitive.

**Returns:** [Admin::Account](/entities/Admin_Account/)  
**OAuth:** User token + `admin:write:accounts`  
**Permissions:** Manage Users  
**Version history:**  
3.3.0 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Account in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The account is no longer marked as sensitive, or was already not marked as sensitive.

```
{
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 // ...
 "sensitized": false,
 // ...
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Account does not exist

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/admin/accounts\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/accounts_controller.rb)[app/controllers/api/v1/admin/account\_actions\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/account_actions_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/accounts.md)

---


# canonical_email_blocks API methods

Source: https://docs.joinmastodon.org/methods/admin/canonical_email_blocks/

# canonical\_email\_blocks API methods

Block certain email addresses by their hash.

## List all canonical email blocks

```
GET /api/v1/admin/canonical\_email\_blocks HTTP/1.1

```
**Returns:** Array of [Admin::CanonicalEmailBlock](/entities/Admin_CanonicalEmailBlock/)  
**OAuth:** User token + `admin:read:canonical_email_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 blocks. Max 200 blocks.## Response

## 200: OK

```
[
 {
 "id": "1",
 "canonical\_email\_hash": "b344e55d11b3fc25d0d53194e0475838bf17e9be67ce3e6469956222d9a34f9c"
 },
 // ...
]

```
Because CanonicalEmailBlock IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <http://mastodon.example/api/v1/admin/canonical\_email\_blocks?limit=2&max\_id=2>; rel="next", <http://mastodon.example/api/v1/admin/canonical\_email\_blocks?limit=2&since\_id=1>; rel="prev"

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Show a single canonical email block

```
GET /api/v1/admin/canonical\_email\_blocks/:id HTTP/1.1

```
**Returns:** [Admin::CanonicalEmailBlock](/entities/Admin_CanonicalEmailBlock/)  
**OAuth:** User token + `admin:read:canonical_email_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Admin::CanonicalEmailBlock in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "1",
 "canonical\_email\_hash": "b344e55d11b3fc25d0d53194e0475838bf17e9be67ce3e6469956222d9a34f9c"
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Canonical email block does not exist or was already deleted

```
{
 "error": "Record not found"
}

```

---

## Test

```
POST /api/v1/admin/canonical\_email\_blocks/test HTTP/1.1

```
Canoniocalize and hash an email address.

**Returns:** Array of [Admin::CanonicalEmailBlock](/entities/Admin_CanonicalEmailBlock/)  
**OAuth:** User token + `admin:read:canonical_email_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

emailrequired String. The email to canonicalize and hash.## Response

## 200: OK

All matching canonical email blocks are returned.

```
[
 {
 "id": "1",
 "canonical\_email\_hash": "b344e55d11b3fc25d0d53194e0475838bf17e9be67ce3e6469956222d9a34f9c"
 }
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 500: Server error

No email was provided

---

## Block a canonical email

```
POST /api/v1/admin/canonical\_email\_blocks HTTP/1.1

```
**Returns:** [Admin::CanonicalEmailBlock](/entities/Admin_CanonicalEmailBlock/)  
**OAuth:** User token + `admin:write:canonical_email_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

emailrequired String. The email to canonicalize, hash, and block. If this parameter is provided, `canonical_email_hash` will be ignored.canonical\_email\_hashString. The hash to test against. If `email` is not provided, this parameter is required.## Response

## 200: OK

Canonical email has been successfully blocked

```
{
 "id": "1",
 "canonical\_email\_hash": "b344e55d11b3fc25d0d53194e0475838bf17e9be67ce3e6469956222d9a34f9c"
}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 422: Unprocessable entity

Canonical email hash is already blocked

```
{
 "error":"Validation failed: Canonical email hash has already been taken"
}

```

---

## Delete a canonical email block

```
DELETE /api/v1/admin/canonical\_email\_blocks/:id HTTP/1.1

```
**Returns:** [Admin::CanonicalEmailBlock](/entities/Admin_CanonicalEmailBlock/)  
**OAuth:** User token + `admin:write:canonical_email_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the Admin::CanonicalEmailBlock in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

Canonical email block successfully deleted.

```
{}

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

Canonical email block does not exist or was already deleted

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/admin/canonical\_email\_blocks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/canonical_email_blocks_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/canonical_email_blocks.md)

---


# dimensions API methods

Source: https://docs.joinmastodon.org/methods/admin/dimensions/

# dimensions API methods

Obtain qualitative metrics about the server.

## Get dimensional data

```
POST /api/v1/admin/dimensions HTTP/1.1

```
Obtain information about popularity of certain accounts, servers, languages, etc.

**Returns:** Array of [Admin::Dimension](/entities/Admin_Dimension/)  
**OAuth:** User token + `admin:read`  
**Permissions:** View Dashboard  
**Version history:**  
3.5.0 - added  
4.0.0 - support custom roles and permissions

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

keys[]required Array of String. Request specific dimensions by their keystring. Supported dimensions include:* `languages` = Most-used languages on this server
* `sources` = Most-used client apps on this server
* `servers` = Remote servers with the most statuses
* `space_usage` = How much space is used by your software stack
* `software_versions` = The version numbers for your software stack
* `tag_servers` = Most-common servers for statuses including a trending tag
* `tag_languages` = Most-used languages for statuses including a trending tag
* `instance_accounts` = Most-followed accounts from a remote server
* `instance_languages` = Most-used languages from a remote server

start\_atString ([Datetime](/api/datetime-format/#datetime)). The start date for the time period. If a time is provided, it will be ignored.end\_atString ([Datetime](/api/datetime-format/#datetime)). The end date for the time period. If a time is provided, it will be ignored.limitInteger. The maximum number of results to return for sources, servers, languages, tag or instance dimensions.tag\_servers[id]String. When `tag_servers` is one of the requested keys, you must provide a trending tag ID to obtain information about which servers are posting the tag.tag\_languages[id]String. When `tag_languages` is one of the requested keys, you must provide a trending tag ID to obtain information about which languages are posting the tag.instance\_accounts[domain]String. When `instance_accounts` is one of the requested keys, you must provide a domain to obtain information about popular accounts from that server.instance\_languages[domain]String. When `instance_accounts` is one of the requested keys, you must provide a domain to obtain information about popular languages from that server.## Response

## 200: OK

Requesting data on mastodon.social and a given trending tag with a limit of 2.

```
[
 {
 "key": "languages",
 "data": [
 {
 "key": "en",
 "human\_key": "English",
 "value": "10"
 },
 {
 "key": "es",
 "human\_key": "Spanish",
 "value": "1"
 }
 ]
 },
 {
 "key": "sources",
 "data": [
 {
 "key": "web",
 "human\_key": "Website",
 "value": "3"
 }
 ]
 },
 {
 "key": "servers",
 "data": [
 {
 "key": "botsin.space",
 "human\_key": "botsin.space",
 "value": "13738"
 },
 {
 "key": "monads.online",
 "human\_key": "monads.online",
 "value": "8928"
 }
 ]
 },
 {
 "key": "space\_usage",
 "data": [
 {
 "key": "postgresql",
 "human\_key": "PostgreSQL",
 "value": "49581359907",
 "unit": "bytes",
 "human\_value": "46.2 GB"
 },
 {
 "key": "redis",
 "human\_key": "Redis",
 "value": "100765744",
 "unit": "bytes",
 "human\_value": "96.1 MB"
 },
 {
 "key": "media",
 "human\_key": "Media storage",
 "value": "837837315424",
 "unit": "bytes",
 "human\_value": "780 GB"
 }
 ]
 },
 {
 "key": "software\_versions",
 "data": [
 {
 "key": "mastodon",
 "human\_key": "Mastodon",
 "value": "3.5.1+chitter",
 "human\_value": "3.5.1+chitter"
 },
 {
 "key": "ruby",
 "human\_key": "Ruby",
 "value": "3.0.3p157",
 "human\_value": "3.0.3p157"
 },
 {
 "key": "postgresql",
 "human\_key": "PostgreSQL",
 "value": "14.3",
 "human\_value": "14.3"
 },
 {
 "key": "redis",
 "human\_key": "Redis",
 "value": "6.2.7",
 "human\_value": "6.2.7"
 }
 ]
 },
 {
 "key": "instance\_languages",
 "data": [
 {
 "key": "en",
 "human\_key": "English",
 "value": "5848"
 },
 {
 "key": "de",
 "human\_key": "German",
 "value": "155"
 }
 ]
 },
 {
 "key": "instance\_accounts",
 "data": [
 {
 "key": "fribbledom",
 "human\_key": "fribbledom",
 "value": "33"
 },
 {
 "key": "ShugoWah",
 "human\_key": "ShugoWah",
 "value": "26"
 }
 ]
 },
 {
 "key": "tag\_servers",
 "data": [
 {
 "key": "live.hatnix.net",
 "human\_key": "live.hatnix.net",
 "value": "6"
 },
 {
 "key": "linuxrocks.online",
 "human\_key": "linuxrocks.online",
 "value": "4"
 }
 ]
 },
 {
 "key": "tag\_languages",
 "data": [
 {
 "key": "und",
 "human\_key": "und",
 "value": "8"
 },
 {
 "key": "en",
 "human\_key": "English",
 "value": "7"
 }
 ]
 }
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## See also

[app/controllers/api/v1/admin/dimensions\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/dimensions_controller.rb)[app/lib/admin/metrics/dimension.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/dimension.rb)[app/lib/admin/metrics/dimension/](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/dimension/)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/dimensions.md)

---


# domain_allows API methods

Source: https://docs.joinmastodon.org/methods/admin/domain_allows/

# domain\_allows API methods

Allow certain domains to federate.

## List all allowed domains

```
GET /api/v1/admin/domain\_allows HTTP/1.1

```
Show information about all allowed domains.

**Returns:** Array of [Admin::DomainAllow](/entities/Admin_DomainAllow/)  
**OAuth:** User token + `admin:read:domain_allows`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 allows. Max 200 allows.## Response

## 200: OK

```
[
 {
 "id": "2",
 "domain": "mastodon",
 "created\_at": "2022-09-14T21:24:15.360Z"
 },
 {
 "id": "1",
 "domain": "mastodon.social",
 "created\_at": "2022-09-14T21:23:02.755Z"
 }
]

```
Because DomainAllow IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <http://mastodon.example/api/v1/admin/domain\_allows?limit=2&max\_id=2>; rel="next", <http://mastodon.example/api/v1/admin/domain\_allows?limit=2&since\_id=1>; rel="prev"

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Get a single allowed domain

```
GET /api/v1/admin/domain\_allows/:id HTTP/1.1

```
Show information about a single allowed domain.

**Returns:** [Admin::DomainAllow](/entities/Admin_DomainAllow/)  
**OAuth:** User token + `admin:read:domain_allows`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Path parameters

:idrequired String. The ID of the DomainAllow in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "1",
 "domain": "mastodon.social",
 "created\_at": "2022-09-14T21:23:02.755Z"
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

DomainAllow with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## Allow a domain to federate

```
POST /api/v1/admin/domain\_allows HTTP/1.1

```
Add a domain to the list of domains allowed to federate, to be used when the instance is in allow-list federation mode.

**Returns:** [Admin::DomainAllow](/entities/Admin_DomainAllow/)  
**OAuth:** User token + `admin:write:domain_allows`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

domainrequired String. The domain to allow federation with.## Response

## 200: OK

Domain has been allowed to federate, or was already allowed to federate

```
{
 "id": "1",
 "domain": "mastodon.social",
 "created\_at": "2022-09-14T21:23:02.755Z"
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 422: Unprocessable entity

The domain parameter was not provided or was invalid

```
{
 "error": "Validation failed: Domain can't be blank"
}

```

---

## Delete an allowed domain

```
DELETE /api/v1/admin/domain\_allows/:id HTTP/1.1

```
Delete a domain from the allowed domains list.

**Returns:** [Admin::DomainAllow](/entities/Admin_DomainAllow/)  
**OAuth:** User token + `admin:write:domain_allows`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the DomainAllow in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The allowed domain has been removed from the allow list

```
{
 "id": "4",
 "domain": "\*",
 "created\_at": "2022-09-14T21:32:44.945Z"
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

DomainAllow with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/admin/domain\_allows\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/domain_allows_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/domain_allows.md)

---


# admin/domain_blocks API methods

Source: https://docs.joinmastodon.org/methods/admin/domain_blocks/

# admin/domain\_blocks API methods

Disallow certain domains to federate.

## List all blocked domains

```
GET /api/v1/admin/domain\_blocks HTTP/1.1

```
Show information about all blocked domains.

**Returns:** Array of [Admin::DomainBlock](/entities/Admin_DomainBlock/)  
**OAuth:** User token + `admin:read:domain_blocks`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 blocks. Max 200 blocks.## Response

## 200: OK

```
[
 {
 "id": "1",
 "domain": "example.com",
 "digest": "a379a6f6eeafb9a55e378c118034e2751e682fab9f2d30ab13d2125586ce1947",
 "created\_at": "2022-11-16T08:15:34.238Z",
 "severity": "noop",
 "reject\_media": false,
 "reject\_reports": false,
 "private\_comment": null,
 "public\_comment": null,
 "obfuscate": false
 },
 // ...
]

```
Because DomainBlock IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <http://mastodon.example/api/v1/admin/domain\_blocks?limit=2&max\_id=2>; rel="next", <http://mastodon.example/api/v1/admin/domain\_blocks?limit=2&since\_id=1>; rel="prev"

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Get a single blocked domain

```
GET /api/v1/admin/domain\_blocks/:id HTTP/1.1

```
Show information about a single blocked domain.

**Returns:** [Admin::DomainBlock](/entities/Admin_DomainBlock/)  
**OAuth:** User token + `admin:read:domain_blocks`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Path parameters

:idrequired String. The ID of the DomainBlock in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "1",
 "domain": "example.com",
 "digest": "a379a6f6eeafb9a55e378c118034e2751e682fab9f2d30ab13d2125586ce1947",
 "created\_at": "2022-11-16T08:15:34.238Z",
 "severity": "noop",
 "reject\_media": false,
 "reject\_reports": false,
 "private\_comment": null,
 "public\_comment": null,
 "obfuscate": false
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

DomainBlock with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## Block a domain from federating

```
POST /api/v1/admin/domain\_blocks HTTP/1.1

```
Add a domain to the list of domains blocked from federating.

**Returns:** [Admin::DomainBlock](/entities/Admin_DomainBlock/)  
**OAuth:** User token + `admin:write:domain_blocks`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

domainrequired String. The domain to block federation with.severityString. Whether to apply a `silence`, `suspend`, or `noop` to the domain. Defaults to `silence`reject\_mediaBoolean. Whether media attachments should be rejected. Defaults to falsereject\_reportsBoolean. Whether reports from this domain should be rejected. Defaults to falseprivate\_commentString. A private note about this domain block, visible only to admins.public\_commentString. A public note about this domain block, optionally shown on the about page.obfuscateBoolean. Whether to partially censor the domain when shown in public. Defaults to false## Response

## 200: OK

Domain has been blocked from federating.

```
{
 "id": "1",
 "domain": "example.com",
 "digest": "a379a6f6eeafb9a55e378c118034e2751e682fab9f2d30ab13d2125586ce1947",
 "created\_at": "2022-11-16T08:15:34.238Z",
 "severity": "noop",
 "reject\_media": false,
 "reject\_reports": false,
 "private\_comment": null,
 "public\_comment": null,
 "obfuscate": false
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 422: Unprocessable entity - Missing Parameter

The domain parameter was not provided

```
{
 "error": "Validation failed: Domain can't be blank"
}

```
## 422: Unprocessable entity - Existing Domain Block

The domain parameter already is covered by an existing domain block.

```
{
 "error": "You have already imposed stricter limits on example.com."
 "existing\_domain\_block": {
 "id": "1",
 "domain": "example.com",
 "digest": "a379a6f6eeafb9a55e378c118034e2751e682fab9f2d30ab13d2125586ce1947",
 "created\_at": "2022-11-16T08:15:34.238Z",
 "severity": "noop",
 "reject\_media": false,
 "reject\_reports": false,
 "private\_comment": null,
 "public\_comment": null,
 "obfuscate": false
 }
}

```

---

## Update a domain block

```
PUT /api/v1/admin/domain\_blocks/:id HTTP/1.1

```
Change parameters for an existing domain block.

**Returns:** [Admin::DomainBlock](/entities/Admin_DomainBlock/)  
**OAuth:** User token + `admin:write:domain_blocks`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the DomainAllow in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

severityString. Whether to apply a `silence`, `suspend`, or `noop` to the domain. Defaults to `silence`reject\_mediaBoolean. Whether media attachments should be rejected. Defaults to falsereject\_reportsBoolean. Whether reports from this domain should be rejected. Defaults to falseprivate\_commentString. A private note about this domain block, visible only to admins.public\_commentString. A public note about this domain block, optionally shown on the about page.obfuscateBoolean. Whether to partially censor the domain when shown in public. Defaults to false## Response

## 200: OK

Domain block has been updated

```
{
 "id": "1",
 "domain": "example.com",
 "digest": "a379a6f6eeafb9a55e378c118034e2751e682fab9f2d30ab13d2125586ce1947",
 "created\_at": "2022-11-16T08:15:34.238Z",
 "severity": "noop",
 "reject\_media": false,
 "reject\_reports": false,
 "private\_comment": null,
 "public\_comment": null,
 "obfuscate": false
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 500: Server error

Invalid severity

---

## Remove a domain block

```
DELETE /api/v1/admin/domain\_blocks/:id HTTP/1.1

```
Lift a block against a domain.

**Returns:** [Admin::DomainBlock](/entities/Admin_DomainBlock/)  
**OAuth:** User token + `admin:write:domain_blocks`  
**Permissions:** Manage Federation  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the DomainAllow in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The domain has been removed from the block list

```
{}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

DomainBlock with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/admin/domain\_blocks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/domain_blocks_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/domain_blocks.md)

---


# email_domain_blocks API methods

Source: https://docs.joinmastodon.org/methods/admin/email_domain_blocks/

# email\_domain\_blocks API methods

Disallow certain email domains from signing up.

## List all blocked email domains

```
GET /api/v1/admin/email\_domain\_blocks HTTP/1.1

```
Show information about all email domains blocked from signing up.

**Returns:** Array of [Admin::EmailDomainBlock](/entities/Admin_EmailDomainBlock/)  
**OAuth:** User token + `admin:read:email_domain_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 blocks. Max 200 blocks.## Response

## 200: OK

```
[
 {
 "id": "1",
 "domain": "foo",
 "created\_at": "2022-11-16T06:09:36.176Z",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ]
 },
 // ...
]

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Get a single blocked email domain

```
GET /api/v1/admin/email\_domain\_blocks/:id HTTP/1.1

```
Show information about a single email domain that is blocked from signups.

**Returns:** [Admin::EmailDomainBlock](/entities/Admin_EmailDomainBlock/)  
**OAuth:** User token + `admin:read:email_domain_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.1.0 - added

## Path parameters

:idrequired String. The ID of the DomainBlock in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "1",
 "domain": "foo",
 "created\_at": "2022-11-16T06:09:36.176Z",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ]
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

EmailDomainBlock with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## Block an email domain from signups

```
POST /api/v1/admin/email\_domain\_blocks HTTP/1.1

```
Add a domain to the list of email domains blocked from signups.

**Returns:** [Admin::EmailDomainBlock](/entities/Admin_EmailDomainBlock/)  
**OAuth:** User token + `admin:write:email_domain_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

domainrequired String. The domain to block federation with.## Response

## 200: OK

Email domain has been blocked from signups.

```
{
 "id": "1",
 "domain": "foo",
 "created\_at": "2022-11-16T06:09:36.176Z",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ]
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 422: Unprocessable entity

The domain parameter was not provided

```
{
 "error": "Validation failed: Domain can't be blank"
}

```
Alternatively, the domain provided contains an invalid character

```
{
 "error": "Validation failed: Domain is invalid, Domain is not a valid domain name"
}

```

---

## Delete an email domain block

```
DELETE /api/v1/admin/email\_domain\_blocks/:id HTTP/1.1

```
Lift a block against an email domain.

**Returns:** [Admin::EmailDomainBlock](/entities/Admin_EmailDomainBlock/)  
**OAuth:** User token + `admin:write:email_domain_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the DomainAllow in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The email domain has been removed from the block list

```
{}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

EmailDomainBlock with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/admin/email\_domain\_blocks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/email_domain_blocks_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/email_domain_blocks.md)

---


# ip_blocks API methods

Source: https://docs.joinmastodon.org/methods/admin/ip_blocks/

# ip\_blocks API methods

Disallow certain IP address ranges from signing up.

## List all IP blocks

```
GET /api/v1/admin/ip\_blocks HTTP/1.1

```
Show information about all blocked IP ranges.

**Returns:** Array of [Admin::IpBlock](/entities/Admin_IpBlock/)  
**OAuth:** User token + `admin:read:ip_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 blocks. Max 200 blocks.## Response

## 200: OK

```
[
 {
 "id": "1",
 "ip": "8.8.8.8/32",
 "severity": "no\_access",
 "comment": "",
 "created\_at": "2022-11-16T07:22:00.501Z",
 "expires\_at": null
 },
 // ...
]

```
Because IpBlock IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <http://mastodon.example/api/v1/admin/ip\_blocks?limit=2&max\_id=2>; rel="next", <http://mastodon.example/api/v1/admin/ip\_blocks?limit=2&since\_id=1>; rel="prev"

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Get a single IP block

```
GET /api/v1/admin/ip\_blocks/:id HTTP/1.1

```
Show information about a single IP block.

**Returns:** [Admin::IpBlock](/entities/Admin_IpBlock/)  
**OAuth:** User token + `admin:read:ip_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Path parameters

:idrequired String. The ID of the IpBlock in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "1",
 "ip": "8.8.8.8/32",
 "severity": "no\_access",
 "comment": "",
 "created\_at": "2022-11-16T07:22:00.501Z",
 "expires\_at": null
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

IpBlock with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## Block an IP address range from signing up

```
POST /api/v1/admin/ip\_blocks HTTP/1.1

```
Add an IP address range to the list of IP blocks.

**Returns:** [Admin::IpBlock](/entities/Admin_IpBlock/)  
**OAuth:** User token + `admin:write:ip_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

ipString. The IP address and prefix to block. Defaults to `0.0.0.0/32`severityrequired String. The policy to apply to this IP range: `sign_up_requires_approval`, `sign_up_block`, or `no_access`commentString. The reason for this IP block.expires\_inInteger. The number of seconds in which this IP block will expire.## Response

## 200: OK

IP has been blocked from signups.

```
{
 "id": "1",
 "ip": "8.8.8.8/32",
 "severity": "no\_access",
 "comment": "",
 "created\_at": "2022-11-16T07:22:00.501Z",
 "expires\_at": null
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 422: Unprocessable entity

IP has already been blocked, and/or no severity was provided

```
{
 "error": "Validation failed: Severity can't be blank, Ip has already been taken"
}

```

---

## Update a domain block

```
PUT /api/v1/admin/ip\_blocks/:id HTTP/1.1

```
Change parameters for an existing IP block.

**Returns:** [Admin::IpBlock](/entities/Admin_IpBlock/)  
**OAuth:** User token + `admin:write:ip_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the IpBlock in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

ipString. The IP address and prefix to block. Defaults to `0.0.0.0/32`severityString. The policy to apply to this IP range: `sign_up_requires_approval`, `sign_up_block`, or `no_access`commentString. The reason for this IP block.expires\_inInteger. The number of seconds in which this IP block will expire.## Response

## 200: OK

IP block has been updated

```
{
 "id": "1",
 "ip": "8.8.4.4/32",
 "severity": "no\_access",
 "comment": "",
 "created\_at": "2022-11-16T07:22:00.501Z",
 "expires\_at": null
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Delete an IP block

```
DELETE /api/v1/admin/ip\_blocks/:id HTTP/1.1

```
Lift a block against an IP range.

**Returns:** [Admin::IpBlock](/entities/Admin_IpBlock/)  
**OAuth:** User token + `admin:write:domain_blocks`  
**Permissions:** Manage Blocks  
**Version history:**  
4.0.0 - added

## Request

## Path parameters

:idrequired String. The ID of the DomainAllow in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The IP has been removed from the block list

```
{}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## 404: Not found

IpBlock with the given ID does not exist

```
{
 "error": "Record not found"
}

```

---

## See also

[app/controllers/api/v1/admin/ip\_blocks\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/ip_blocks_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/ip_blocks.md)

---


# measures API methods

Source: https://docs.joinmastodon.org/methods/admin/measures/

# measures API methods

Obtain quantitative metrics about the server.

## Get measurable data

```
POST /api/v1/admin/measures HTTP/1.1

```
Obtain statistical measures for your server.

**Returns:** Array of [Admin::Measure](/entities/Admin_Measure/)  
**OAuth:** User token + `admin:read`  
**Permissions:** View Dashboard  
**Version history:**  
3.5.0 - added  
4.0.0 - support custom roles and permissions

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

keys[]required Array of String. Request specific measures by their keystring. Supported measures include:* `active_users` = Total active users on your instance within the time period
* `new_users` = Users who joined your instance within the time period
* `interactions` = Total interactions (favourites, boosts, replies) on local statuses within the time period
* `opened_reports` = Total reports filed within the time period
* `resolved_reports` = Total reports resolved within the time period
* `tag_accounts` = Total accounts who used a tag in at least one status within the time period
* `tag_uses` = Total statuses which used a tag within the time period
* `tag_servers` = Total remote origin servers for statuses which used a tag within the time period
* `instance_accounts` = Total accounts originating from a remote domain within the time period
* `instance_media_attachments` = Total space used by media attachments from a remote domain within the time period
* `instance_reports` = Total reports filed against accounts from a remote domain within the time period
* `instance_statuses` = Total statuses originating from a remote domain within the time period
* `instance_follows` = Total accounts from a remote domain followed by a local user within the time period
* `instance_followers` = Total local accounts followed by accounts from a remote domain within the time period

start\_atrequired String ([Datetime](/api/datetime-format/#datetime)). The start date for the time period. If a time is provided, it will be ignored.end\_atrequired String ([Datetime](/api/datetime-format/#datetime)). The end date for the time period. If a time is provided, it will be ignored.tag\_accounts[id]String. When `tag_accounts` is one of the requested keys, you must provide a tag ID to obtain the measure of how many accounts used that hashtag in at least one status within the given time period.tag\_uses[id]String. When `tag_uses` is one of the requested keys, you must provide a tag ID to obtain the measure of how many statuses used that hashtag within the given time period.tag\_servers[id]String. When `tag_servers` is one of the requested keys, you must provide a tag ID to obtain the measure of how many servers used that hashtag in at least one status within the given time period.instance\_accounts[domain]String. When `instance_accounts` is one of the requested keys, you must provide a remote domain to obtain the measure of how many accounts have been discovered from that server within the given time period.instance\_media\_attachments[domain]String. When `instance_media_attachments` is one of the requested keys, you must provide a remote domain to obtain the measure of how much space is used by media attachments from that server within the given time period.instance\_reports[domain]String. When `instance_reports` is one of the requested keys, you must provide a remote domain to obtain the measure of how many reports have been filed against accounts from that server within the given time period.instance\_statuses[domain]String. When `instance_statuses` is one of the requested keys, you must provide a remote domain to obtain the measure of how many statuses originate from that server within the given time period.instance\_follows[domain]String. When `instance_follows` is one of the requested keys, you must provide a remote domain to obtain the measure of how many follows were performed on accounts from that server by local accounts within the given time period.instance\_followers[domain]String. When `instance_followers` is one of the requested keys, you must provide a remote domain to obtain the measure of how many follows were performed by accounts from that server on local accounts within the given time period.## Response

## 200: OK

Returns quantitative data for each measure, in aggregate and also by data bucket.

```
[
 {
 "key": "active\_users",
 "unit": null,
 "total": "2",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00Z",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "new\_users",
 "unit": null,
 "total": "2",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "interactions",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00Z",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "opened\_reports",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "resolved\_reports",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "tag\_accounts",
 "unit": null,
 "total": "1",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00Z",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "tag\_uses",
 "unit": null,
 "total": "2",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00Z",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "tag\_servers",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "instance\_accounts",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "instance\_media\_attachments",
 "unit": "bytes",
 "total": "0",
 "human\_value": "0 Bytes",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": ""
 },
 // ...
 ]
 },
 {
 "key": "instance\_reports",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "instance\_statuses",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "instance\_follows",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 },
 {
 "key": "instance\_followers",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 // ...
 ]
 }
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## See also

[app/controllers/api/v1/admin/measures\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/measures_controller.rb)[app/lib/admin/metrics/measure.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/measure.rb)[app/lib/admin/metrics/measure/](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/measure/)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/measures.md)

---


# admin/reports API methods

Source: https://docs.joinmastodon.org/methods/admin/reports/

# admin/reports API methods

Perform moderation actions with reports.

## View all reports

```
GET /api/v1/admin/reports HTTP/1.1

```
View information about all reports.

**Returns:** Array of [Admin::Report](/entities/Admin_Report/)  
**OAuth:** User token + `admin:read:reports`  
**Permissions:** Manage Reports  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Query parameters

resolvedBoolean. Filter for resolved reports?account\_idString. Filter for reports filed by this account.target\_account\_idString. Filter for reports targeting this account.max\_id**Internal parameter.** Use HTTP `Link` header for pagination.since\_id**Internal parameter.** Use HTTP `Link` header for pagination.min\_id**Internal parameter.** Use HTTP `Link` header for pagination.limitInteger. Maximum number of results to return. Defaults to 100 reports. Max 200 reports.## Response

## 200: OK

```
[
 {
 "id": "3",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "spam",
 "comment": "",
 "forwarded": false,
 "created\_at": "2022-09-09T21:19:23.085Z",
 "updated\_at": "2022-09-09T21:19:23.085Z",
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-09-08T22:48:07.985Z",
 "email": "admin@mastodon.local",
 // ...
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "acct": "admin",
 // ...
 }
 },
 "target\_account": {
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 "email": "goody@mastodon.local",
 // ...
 "account": {
 "id": "108965430868193066",
 "username": "goody",
 "acct": "goody",
 // ...
 }
 },
 "assigned\_account": null,
 "action\_taken\_by\_account": null,
 "statuses": [],
 "rules": []
 },
 // ...
]

```
Because Report IDs are generally not exposed via any API responses, you will have to parse the HTTP `Link` header to load older or newer results. See [Paginating through API responses](/api/guidelines/#pagination) for more information.

```
Link: <http://mastodon.example/api/v1/admin/reports?limit=2&max\_id=2>; rel="next", <http://mastodon.example/api/v1/admin/reports?limit=2&since\_id=1>; rel="prev"

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## View a single report

```
GET /api/v1/admin/reports/:id HTTP/1.1

```
**Returns:** [Admin::Report](/entities/Admin_Report/)  
**OAuth:** User token + `admin:read:reports`  
**Permissions:** Manage Reports  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Report in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
{
 "id": "2",
 "action\_taken": true,
 "action\_taken\_at": "2022-09-09T21:38:54.679Z",
 "category": "spam",
 "comment": "",
 "forwarded": false,
 "created\_at": "2022-09-09T21:19:44.021Z",
 "updated\_at": "2022-09-09T21:38:54.681Z",
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-09-08T22:48:07.985Z",
 "email": "admin@mastodon.local",
 // ...
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "acct": "admin",
 // ...
 }
 },
 "target\_account": {
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 "email": "goody@mastodon.local",
 // ...
 "account": {
 "id": "108965430868193066",
 "username": "goody",
 "acct": "goody",
 // ...
 }
 },
 "assigned\_account": null,
 "action\_taken\_by\_account": {
 "id": "108965218747268792",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-09-08T22:48:07.985Z",
 "email": "admin@mastodon.local",
 // ...
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "acct": "admin",
 // ...
 }
 },
 "statuses": [],
 "rules": []
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Update a report

```
PUT /api/v1/admin/reports/:id HTTP/1.1

```
Change metadata for a report.

**Returns:** [Admin::Report](/entities/Admin_Report/)  
**OAuth:** User token + `admin:write:reports`  
**Permissions:** Manage Reports  
**Version history:**  
3.5.0 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Report in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

categoryString. Change the classification of the report to `spam`, `violation`, or `other`.rule\_ids[]Array of Integer. For `violation` category reports, specify the ID of the exact rules broken. Rules and their IDs are available via [GET /api/v1/instance/rules](/methods/instance/#rules) and [GET /api/v1/instance](/methods/instance/#get).## Response

## 200: OK

The report category and/or rule IDs should now be updated.

```
{
 "id": "3",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "other",
 // ...
 "rules": []
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Assign report to self

```
POST /api/v1/admin/reports/:id/assign\_to\_self HTTP/1.1

```
Claim the handling of this report to yourself.

**Returns:** [Admin::Report](/entities/Admin_Report/)  
**OAuth:** User token + `admin:write:reports`  
**Permissions:** Manage Reports  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Report in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The report should now be assigned to you, or it was already assigned to you.

```
{
 "id": "3",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "other",
 "comment": "",
 "forwarded": false,
 "created\_at": "2022-09-09T21:21:01.204Z",
 "updated\_at": "2022-09-11T14:39:01.531Z",
 // ...
 "assigned\_account": {
 "id": "108965218747268792",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-09-08T22:48:07.985Z",
 "email": "admin@mastodon.local",
 // ...
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "acct": "admin",
 // ...
 }
 },
 "action\_taken\_by\_account": null,
 "statuses": [],
 "rules": []
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Unassign report

```
POST /api/v1/admin/reports/:id/unassign HTTP/1.1

```
Unassign a report so that someone else can claim it.

**Returns:** [Admin::Report](/entities/Admin_Report/)  
**OAuth:** User token + `admin:write:reports`  
**Permissions:** Manage Reports  
**Version history:**  
2.9.1 - added
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Report in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The report should no longer be assigned to you, or it was already not assigned to anyone.

```
{
 "id": "3",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "other",
 "comment": "",
 "forwarded": false,
 "created\_at": "2022-09-09T21:21:01.204Z",
 "updated\_at": "2022-09-11T14:39:01.531Z",
 // ...
 "assigned\_account": null,
 "action\_taken\_by\_account": null,
 "statuses": [],
 "rules": []
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Mark report as resolved

```
POST /api/v1/admin/reports/:id/resolve HTTP/1.1

```
Mark a report as resolved with no further action taken.

**Returns:** [Admin::Report](/entities/Admin_Report/)  
**OAuth:** User token + `admin:write:reports`  
**Permissions:** Manage Reports  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Report in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The report is now resolved, or it was already resolved.

```
{
 "id": "2",
 "action\_taken": true,
 "action\_taken\_at": "2022-09-11T14:46:22.936Z",
 "category": "spam",
 "comment": "",
 "forwarded": false,
 "created\_at": "2022-09-09T21:19:44.021Z",
 "updated\_at": "2022-09-11T14:46:22.945Z",
 // ...
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## Reopen a closed report

```
POST /api/v1/admin/reports/:id/reopen HTTP/1.1

```
Reopen a currently closed report, if it is closed.

**Returns:** [Admin::Report](/entities/Admin_Report/)  
**OAuth:** User token + `admin:write:reports`  
**Permissions:** Manage Reports  
**Version history:**  
2.9.1 - added  
4.0.0 - support custom roles and permissions

## Request

## Path parameters

:idrequired String. The ID of the Report in the database.## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

The report no longer has an action taken, or it already had no action taken.

```
{
 "id": "2",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "spam",
 "comment": "",
 "forwarded": false,
 "created\_at": "2022-09-09T21:19:44.021Z",
 "updated\_at": "2022-09-11T14:42:21.855Z",
 // ...
}

```
## 403: Forbidden

Authorized user is not allowed to perform this action, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## See also

[POST /api/v1/admin/accounts/:id/action](/methods/admin/accounts/#action)[app/controllers/api/v1/admin/reports\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/reports_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/reports.md)

---


# retention API methods

Source: https://docs.joinmastodon.org/methods/admin/retention/

# retention API methods

Show retention data over time.

## Calculate retention data

```
POST /api/v1/admin/retention HTTP/1.1

```
Generate a retention data report for a given time period and bucket.

**Returns:** Array of [Admin::Cohort](/entities/Admin_Cohort/)  
**OAuth:** User token + `admin:read`  
**Permissions:** View Dashboard  
**Version history:**  
3.5.0 - added  
4.0.0 - support custom roles and permissions

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Form data parameters

start\_atrequired String ([Datetime](/api/datetime-format/#datetime)). The start date for the time period. If a time is provided, it will be ignored.end\_atrequired String ([Datetime](/api/datetime-format/#datetime)). The end date for the time period. If a time is provided, it will be ignored.frequencyrequired String (Enumerable oneOf). Specify whether to use `day` or `month` buckets. If any other value is provided, defaults to `day`.## Response

## 200: OK

Monthly retention data for the month of 2022-09, given that 2 users registered during 2022-09 and were active at least once during that month.

```
[
 {
 "period": "2022-09-01T00:00:00+00:00",
 "frequency": "month",
 "data": [
 {
 "date": "2022-09-01T00:00:00+00:00",
 "rate": 1.0,
 "value": "2"
 }
 ]
 }
]

```
Daily retention data for the week between 2022-09-08 and 2022-09-14, given that 2 users registered on 2022-09-08 and 1 of those users stopped being active after 2022-09-09.

```
[
 {
 "period": "2022-09-08T00:00:00+00:00",
 "frequency": "day",
 "data": [
 {
 "date": "2022-09-08T00:00:00+00:00",
 "rate": 1,
 "value": "2"
 },
 {
 "date": "2022-09-09T00:00:00+00:00",
 "rate": 1,
 "value": "2"
 },
 {
 "date": "2022-09-10T00:00:00+00:00",
 "rate": 0.5,
 "value": "1"
 },
 // ...
 {
 "date": "2022-09-14T00:00:00+00:00",
 "rate": 0.5,
 "value": "1"
 }
 ]
 },
 {
 "period": "2022-09-09T00:00:00+00:00",
 "frequency": "day",
 "data": [
 {
 "date": "2022-09-09T00:00:00+00:00",
 "rate": 0,
 "value": "0"
 },
 // ...
 {
 "date": "2022-09-14T00:00:00+00:00",
 "rate": 0,
 "value": "0"
 }
 ]
 },
 {
 "period": "2022-09-10T00:00:00+00:00",
 "frequency": "day",
 "data": [
 {
 "date": "2022-09-10T00:00:00+00:00",
 "rate": 0,
 "value": "0"
 },
 // ...
 {
 "date": "2022-09-14T00:00:00+00:00",
 "rate": 0,
 "value": "0"
 }
 ]
 },
 // ...
 {
 "period": "2022-09-14T00:00:00+00:00",
 "frequency": "day",
 "data": [
 {
 "date": "2022-09-14T00:00:00+00:00",
 "rate": 0,
 "value": "0"
 }
 ]
 }
]

```
If any of the parameters are missing, cohort calculation will fail and an empty array will be returned.

```
[]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```

---

## See also

[app/controllers/api/v1/admin/retention\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/retention_controller.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/retention.md)

---


# admin/trends API methods

Source: https://docs.joinmastodon.org/methods/admin/trends/

# admin/trends API methods

TODO

## View trending links

```
GET /api/v1/admin/trends/links HTTP/1.1

```
Links that have been shared more than others, including unapproved and unreviewed links.

**Returns:** Array of [Trends::Link](/entities/PreviewCard/#trends-link)  
**OAuth:** User token + `admin:read`  
**Permissions:** Manage Taxonomies  
**Version history:**  
3.5.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "url": "https://twitter.com/arufa\_faru/status/1594262272007753728",
 "title": "ARuFa on Twitter",
 "description": "“言葉をマネするぬいぐるみを改造してエレキギターを直接繋いでみました”",
 "type": "link",
 "author\_name": "",
 "author\_url": "",
 "provider\_name": "Twitter",
 "provider\_url": "",
 "html": "",
 "width": 400,
 "height": 225,
 "image": "https://media.chitter.xyz/cache/preview\_cards/images/002/162/720/original/b5360261e8ce17fc.jpeg",
 "embed\_url": "",
 "blurhash": "UNFiDM~o-oD%x[xtaxM|xaNHRkjsoft7ofWB",
 "history": [
 {
 "day": "1669507200",
 "accounts": "9",
 "uses": "9"
 },
 {
 "day": "1669420800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1669334400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1669248000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1669161600",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1669075200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668988800",
 "accounts": "0",
 "uses": "0"
 }
 ]
 },
 // ...
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## View trending statuses

```
GET /api/v1/admin/trends/statuses HTTP/1.1

```
Statuses that have been interacted with more than others, including unapproved and unreviewed statuses.

**Returns:** Array of [Status](/entities/Status/)  
**OAuth:** User token + `admin:read`  
**Permissions:** Manage Taxonomies  
**Version history:**  
3.5.0 - added

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "id": "109415512969053017",
 "created\_at": "2022-11-27T11:23:52.000Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 // ...
 "account": {
 "id": "109332240210946752",
 // ...
 },
 "media\_attachments": [],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": null,
 "poll": null
 },
 // ...
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## View trending tags

```
GET /api/v1/admin/trends/tags HTTP/1.1

```
Tags that are being used more frequently within the past week, including unapproved and unreviewed tags.

**Returns:** Array of [Admin::Tag](/entities/Tag/#admin)  
**OAuth:** User token + `admin:read`  
**Permissions:** Manage Taxonomies  
**Version history:**  
3.5.0 - added  
4.0.0 - Returns an array of Tag due to a bug  
4.1.0 - Bug fixed

## Request

## Headers

Authorizationrequired Provide this header with `Bearer <user_token>` to gain authorized access to this API method.## Response

## 200: OK

```
[
 {
 "name": "caturday",
 "url": "https://mastodon.example/tags/caturday",
 "history": [
 {
 "day": "1669507200",
 "accounts": "53",
 "uses": "56"
 },
 {
 "day": "1669420800",
 "accounts": "142",
 "uses": "171"
 },
 {
 "day": "1669334400",
 "accounts": "11",
 "uses": "11"
 },
 {
 "day": "1669248000",
 "accounts": "8",
 "uses": "9"
 },
 {
 "day": "1669161600",
 "accounts": "8",
 "uses": "20"
 },
 {
 "day": "1669075200",
 "accounts": "11",
 "uses": "11"
 },
 {
 "day": "1668988800",
 "accounts": "17",
 "uses": "22"
 }
 ],
 "id": "802",
 "trendable": true,
 "usable": true,
 "requires\_review": false
 },
]

```
## 403: Forbidden

Authorized user is missing a permission, or invalid or missing Authorization header

```
{
 "error": "This action is not allowed"
}

```
## See also

[app/controllers/api/v1/admin/trends/links\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/trends/links_controller.rb)[app/controllers/api/v1/admin/trends/statuses\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/trends/statuses_controller.rb)[app/controllers/api/v1/admin/trends/tags\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/v1/admin/trends/tags_controller.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/methods/admin/trends.md)

---


# AccountWarning

Source: https://docs.joinmastodon.org/entities/AccountWarning/

# AccountWarning

Moderation warning against a particular account.

## Attributes

## `id`

**Description:** The ID of the account warning in the database.  
**Type:** String (cast from integer)  
**Version history:**  
4.3.0 - added

## `action`

**Description:** Action taken against the account.  
**Type:** String (Enumerable oneOf)  
`none` = No action was taken, this is a simple warning  
`disable` = The account has been disabled  
`mark_statuses_as_sensitive` = Specific posts from the target account have been marked as sensitive  
`delete_statuses` = Specific statuses from the target account have been deleted  
`sensitive` = All posts from the target account are marked as sensitive  
`silence` = The target account has been limited  
`suspend` = The target account has been suspended  
**Version history:**  
4.3.0 - added

## `text`

**Description:** Message from the moderator to the target account.  
**Type:** String  
**Version history:**  
4.3.0 - added

## `status_ids`

**Description:** List of status IDs that are relevant to the warning. When `action` is `mark_statuses_as_sensitive` or `delete_statuses`, those are the affected statuses.  
**Type:** nullable Array of String (cast from integer), or null  
**Version history:**  
4.3.0 - added

## `target_account`

**Description:** Account against which a moderation decision has been taken.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
4.3.0 - added

## `appeal`

**Description:** Appeal submitted by the target account, if any.  
**Type:** nullable [Appeal](/entities/Appeal/), or null  
**Version history:**  
4.3.0 - added

## `created_at`

**Description:** When the event took place.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.3.0 - added

Last updated January 3, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/AccountWarning.md)

---


# Admin::Account

Source: https://docs.joinmastodon.org/entities/Admin_Account/

# Admin::Account

Admin-level information about a given account.

## Example

```
{
 "id": "108965278956942133",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-09-08T23:03:26.762Z",
 "email": "admin@mastodon.local",
 "ip": "192.168.42.1",
 "role": {
 "id": 3,
 "name": "Owner",
 "color": "",
 "position": 1000,
 "permissions": 1,
 "highlighted": true,
 "created\_at": "2022-09-08T22:48:07.983Z",
 "updated\_at": "2022-09-08T22:48:07.983Z"
 },
 "confirmed": true,
 "suspended": false,
 "silenced": false,
 "disabled": false,
 "approved": true,
 "locale": null,
 "invite\_request": null,
 "ips": [
 {
 "ip": "192.168.42.1",
 "used\_at": "2022-09-15T01:38:58.851Z"
 }
 ],
 "account": {
 "id": "108965278956942133",
 "username": "admin",
 "acct": "admin",
 "display\_name": "",
 "locked": false,
 "bot": false,
 "discoverable": null,
 "group": false,
 "created\_at": "2022-09-08T00:00:00.000Z",
 "note": "",
 "url": "http://mastodon.local/@admin",
 "avatar": "http://mastodon.local/avatars/original/missing.png",
 "avatar\_static": "http://mastodon.local/avatars/original/missing.png",
 "header": "http://mastodon.local/headers/original/missing.png",
 "header\_static": "http://mastodon.local/headers/original/missing.png",
 "followers\_count": 0,
 "following\_count": 0,
 "statuses\_count": 0,
 "last\_status\_at": null,
 "emojis": [],
 "fields": []
 }
}

```
## Attributes

## `id`

**Description:** The ID of the account in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.9.1 - added

## `username`

**Description:** The username of the account.  
**Type:** String  
**Version history:**  
2.9.1 - added

## `domain`

**Description:** The domain of the account, if it is remote.  
**Type:** nullable String, or null for local accounts  
**Version history:**  
2.9.1 - added

## `created_at`

**Description:** When the account was first discovered.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
2.9.1 - added

## `email`

**Description:** The email address associated with the account.  
**Type:** String  
**Version history:**  
2.9.1 - added

## `ip`

**Description:** The IP address last used to login to this account.  
**Type:** nullable String  
**Version history:**  
2.9.1 - added  
3.5.0 - return type changed from String to [Admin::Ip](/entities/Admin_Ip/) due to a bug  
4.0.0 - bug fixed, return type is now a String again

## `ips`

**Description:** All known IP addresses associated with this account.  
**Type:** Array of [Admin::Ip](/entities/Admin_Ip/)  
**Version history:**  
3.5.0 - added

## `locale`

**Description:** The locale of the account.  
**Type:** String (ISO 639 Part 1 two-letter language code)  
**Version history:**  
2.9.1 - added

## `invite_request`

**Description:** The reason given when requesting an invite (for instances that require manual approval of registrations)  
**Type:** nullable String  
**Version history:**  
2.9.1 - added

## `role`

**Description:** The current role of the account.  
**Type:** [Role](/entities/Role/)  
**Version history:**  
2.9.1 - added, returns a String (enumerable, oneOf `user` `moderator` `admin`)  
4.0.0 - now uses Role entity

## `confirmed`

**Description:** Whether the account has confirmed their email address.  
**Type:** Boolean  
**Version history:**  
2.9.1 - added

## `approved`

**Description:** Whether the account is currently approved.  
**Type:** Boolean  
**Version history:**  
2.9.1 - added

## `disabled`

**Description:** Whether the account is currently disabled.  
**Type:** Boolean  
**Version history:**  
2.9.1 - added

## `silenced`

**Description:** Whether the account is currently silenced.
**Type:** Boolean  
**Version history:**  
2.9.1 - added

## `suspended`

**Description:** Whether the account is currently suspended.  
**Type:** Boolean  
**Version history:**  
2.9.1 - added

## `account`

**Description:** User-level information about the account.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
2.9.1 - added

## `created_by_application_id` optional

**Description:** The ID of the [Application](/entities/Application/) that created this account, if applicable.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.9.1 - added

## `invited_by_account_id` optional

**Description:** The ID of the [Account](/entities/Account/) that invited this user, if applicable.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.9.1 - added

## See also

[admin/accounts API methods](/methods/admin/accounts/)[app/serializers/rest/admin/account\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/account_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_Account.md)

---


# Admin::CanonicalEmailBlock

Source: https://docs.joinmastodon.org/entities/Admin_CanonicalEmailBlock/

# Admin::CanonicalEmailBlock

Represents a canonical email block (hashed).

## Example

```
{
 "id": "2",
 "canonical\_email\_hash": "b344e55d11b3fc25d0d53194e0475838bf17e9be67ce3e6469956222d9a34f9c"
}

```
## Attributes

## `id`

**Description:** The ID of the email block in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `canonical_email_hash`

**Description:** The SHA256 hash of the canonical email address.  
**Type:** String (SHA256)  
**Version history:**  
4.0.0 - added

## See also

[admin/canonical\_email\_blocks API methods](/methods/admin/canonical_email_blocks/)[app/serializers/rest/admin/canonical\_email\_block\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/canonical_email_block_serializer.rb)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_CanonicalEmailBlock.md)

---


# Admin::Cohort

Source: https://docs.joinmastodon.org/entities/Admin_Cohort/

# Admin::Cohort

Represents a retention metric.

## Example

Monthly retention data for the month of 2022-09, given that 2 users registered during 2022-09 and were active at least once during that month.

```
{
 "period": "2022-09-01T00:00:00+00:00",
 "frequency": "month",
 "data": [
 {
 "date": "2022-09-01T00:00:00+00:00",
 "rate": 1.0,
 "value": "2"
 }
 ]
}

```
Daily retention data for the week between 2022-09-08 and 2022-09-14, given that 2 users registered on 2022-09-08 and 1 of those users stopped being active after 2022-09-09.

```
{
 "period": "2022-09-08T00:00:00+00:00",
 "frequency": "day",
 "data": [
 {
 "date": "2022-09-08T00:00:00+00:00",
 "rate": 1.0,
 "value": "2"
 },
 {
 "date": "2022-09-09T00:00:00+00:00",
 "rate": 1.0,
 "value": "2"
 },
 {
 "date": "2022-09-10T00:00:00+00:00",
 "rate": 0.5,
 "value": "1"
 },
 {
 "date": "2022-09-11T00:00:00+00:00",
 "rate": 0.5,
 "value": "1"
 },
 {
 "date": "2022-09-12T00:00:00+00:00",
 "rate": 0.5,
 "value": "1"
 },
 {
 "date": "2022-09-13T00:00:00+00:00",
 "rate": 0.5,
 "value": "1"
 },
 {
 "date": "2022-09-14T00:00:00+00:00",
 "rate": 0.5,
 "value": "1"
 }
 ]
}

```
## Attributes

## `period`

**Description:** The timestamp for the start of the period, at midnight.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.5.0 - added

## `frequency`

**Description:** The size of the bucket for the returned data.  
**Type:** String (Enumerable oneOf)  
`day` = Daily buckets  
`month` = Monthly buckets  
**Version history:**  
3.5.0 - added

## `data`

**Description:** Retention data for users who registered during the given period.  
**Type:** Array of [CohortData](/entities/Admin_Cohort/#CohortData)  
**Version history:**  
3.5.0 - added

## CohortData entity attributes

## `date`

**Description:** The timestamp for the start of the bucket, at midnight.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.5.0 - added

## `rate`

**Description:** The percentage rate of users who registered in the specified `period` and were active for the given `date` bucket.  
**Type:** Number  
**Version history:**  
3.5.0 - added

## `value`

**Description:** How many users registered in the specified `period` and were active for the given `date` bucket.  
**Type:** Integer  
**Version history:**  
3.5.0 - added

## See also

[admin/retention API methods](/methods/admin/retention/)[app/serializers/rest/admin/cohort\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/cohort_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_Cohort.md)

---


# Admin::Dimension

Source: https://docs.joinmastodon.org/entities/Admin_Dimension/

# Admin::Dimension

Represents qualitative data about the server.

## Attributes

## `key`

**Description:** The unique keystring for the requested dimension.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `data`

**Description:** The data available for the requested dimension.  
**Type:** Array of Hash  
**Version history:**  
3.5.0 - added

## Data attributes

## `key`

**Description:** The unique keystring for this data item.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `human_key`

**Description:** A human-readable key for this data item.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `value`

**Description:** The value for this data item.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `unit` optional

**Description:** The units associated with this data item’s value, if applicable.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `human_value` optional

**Description:** A human-readable formatted value for this data item.  
**Type:** String  
**Version history:**  
3.5.0 - added

## Examples

## `languages`

Count how many local statuses are posted in each language, then show dimensional data about how popular each language is.

```
{
 "key": "languages",
 "data": [
 {
 "key": "en",
 "human\_key": "English",
 "value": "10"
 },
 {
 "key": "es",
 "human\_key": "Spanish",
 "value": "1"
 },
 // ...
 ]
}

```
## `sources`

Count how many local statuses were authored by a given client, then show dimensional data about how popular each client is.

```
{
 "key": "sources",
 "data": [
 {
 "key": "web",
 "human\_key": "Website",
 "value": "2"
 },
 // ...
 ]
}

```
## `servers`

Count how many statuses were posted from a given domain, then show dimensional data about the most popular remote servers.

```
{
 "key": "servers",
 "data": [
 {
 "key": "botsin.space",
 "human\_key": "botsin.space",
 "value": "13738"
 },
 {
 "key": "mastodon.social",
 "human\_key": "mastodon.social",
 "value": "8928"
 },
 // ...
 ]
 }

```
## `space_usage`

Show dimensional data about how much space is used by each software in your server stack.

```
{
 "key": "space\_usage",
 "data": [
 {
 "key": "postgresql",
 "human\_key": "PostgreSQL",
 "value": "14924935",
 "unit": "bytes",
 "human\_value": "14.2 MB"
 },
 {
 "key": "redis",
 "human\_key": "Redis",
 "value": "1972544",
 "unit": "bytes",
 "human\_value": "1.88 MB"
 },
 {
 "key": "media",
 "human\_key": "Media storage",
 "value": "0",
 "unit": "bytes",
 "human\_value": "0 Bytes"
 }
 ]
}

```
## `software_versions`

Show dimensional data about which versions of software in your server stack you are using.

```
{
 "key": "software\_versions",
 "data": [
 {
 "key": "mastodon",
 "human\_key": "Mastodon",
 "value": "3.5.3",
 "human\_value": "3.5.3"
 },
 {
 "key": "ruby",
 "human\_key": "Ruby",
 "value": "3.0.4p208",
 "human\_value": "3.0.4p208"
 },
 {
 "key": "postgresql",
 "human\_key": "PostgreSQL",
 "value": "10.22",
 "human\_value": "10.22"
 },
 {
 "key": "redis",
 "human\_key": "Redis",
 "value": "4.0.9",
 "human\_value": "4.0.9"
 }
 ]
}

```
## `tag_servers`

Count how many statuses contain the trending tag with the given `id`, then show dimensional data about the most popular servers using that trending tag.

```
{
 "key": "tag\_servers",
 "data": [
 {
 "key": "live.hatnix.net",
 "human\_key": "live.hatnix.net",
 "value": "6"
 },
 {
 "key": "linuxrocks.online",
 "human\_key": "linuxrocks.online",
 "value": "4"
 }
 ]
}

```
## `tag_languages`

Count how many statuses contain the trending tag with the given `id`, then show dimensional data about the most popular languages for those statuses.

```
{
 "key": "tag\_languages",
 "data": [
 {
 "key": "und",
 "human\_key": "und",
 "value": "8"
 },
 {
 "key": "en",
 "human\_key": "English",
 "value": "7"
 },
 // ...
 ]
 }

```
## `instance_accounts`

Count how many followers each account from the given `domain` has, then show dimensional data about the most popular accounts from that remote server.

```
{
 "key": "instance\_accounts",
 "data": [
 {
 "key": "fribbledom",
 "human\_key": "fribbledom",
 "value": "33"
 },
 {
 "key": "ShugoWah",
 "human\_key": "ShugoWah",
 "value": "26"
 },
 // ...
 ]
}

```
## `instance_languages`

Count how many statuses from the given `domain` are posted in each language, then show dimensional data about how popular each language is on that remote server.

```
{
 "key": "instance\_languages",
 "data": [
 {
 "key": "en",
 "human\_key": "English",
 "value": "5848"
 },
 {
 "key": "de",
 "human\_key": "German",
 "value": "155"
 },
 // ...
 ]
}

```
## See also

[admin/dimensions API methods](/methods/admin/dimensions/)[app/serializers/rest/admin/dimension\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/dimension_serializer.rb)[app/lib/admin/metrics/dimension.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/dimension.rb)[app/lib/admin/metrics/dimension/](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/dimension/)Last updated September 20, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_Dimension.md)

---


# Admin::DomainAllow

Source: https://docs.joinmastodon.org/entities/Admin_DomainAllow/

# Admin::DomainAllow

Represents a domain allowed to federate.

## Example

```
{
 "id": "1",
 "domain": "mastodon.social",
 "created\_at": "2022-09-14T21:23:02.755Z"
}

```
## Attributes

## `id`

**Description:** The ID of the DomainAllow in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `domain`

**Description:** The domain that is allowed to federate.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `created_at`

**Description:** When the domain was allowed to federate.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## See also

admin/domain\_allows API methods[app/serializers/rest/admin/domain\_allow\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/domain_allow_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_DomainAllow.md)

---


# Admin::DomainBlock

Source: https://docs.joinmastodon.org/entities/Admin_DomainBlock/

# Admin::DomainBlock

Represents a domain limited from federating.

## Example

```
{
 "id": "1",
 "domain": "example.com",
 "digest": "a379a6f6eeafb9a55e378c118034e2751e682fab9f2d30ab13d2125586ce1947",
 "created\_at": "2022-11-16T08:15:34.238Z",
 "severity": "noop",
 "reject\_media": false,
 "reject\_reports": false,
 "private\_comment": null,
 "public\_comment": null,
 "obfuscate": false
}

```
## Attributes

## `id`

**Description:** The ID of the DomainBlock in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `domain`

**Description:** The domain that is not allowed to federate.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `digest`

**Description:** The sha256 hex digest of the domain that is not allowed to federated.  
**Type:** String  
**Version history:**  
4.3.0 - added

## `created_at`

**Description:** When the domain was blocked from federating.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## `severity`

**Description:** The policy to be applied by this domain block.  
**Type:** String (Enumerable oneOf)  
`silence` = Account statuses from this domain will be hidden by default  
`suspend` = All incoming data from this domain will be rejected  
`noop` = Do nothing. Allows for rejecting media or reports  
**Version history:**  
4.0.0 - added

## `reject_media`

**Description:** Whether to reject media attachments from this domain  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## `reject_reports`

**Description:** Whether to reject reports from this domain  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## `private_comment`

**Description:**  
**Type:** nullable String  
**Version history:**  
4.0.0 - added

## `public_comment`

**Description:**  
**Type:** nullable String  
**Version history:**  
4.0.0 - added

## `obfuscate`

**Description:** Whether to obfuscate public displays of this domain block  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## See also

admin/domain\_blocks API methods[app/serializers/rest/admin/domain\_block\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/domain_block_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_DomainBlock.md)

---


# Admin::EmailDomainBlock

Source: https://docs.joinmastodon.org/entities/Admin_EmailDomainBlock/

# Admin::EmailDomainBlock

Represents an email domain that cannot be used to sign up.

## Example

```
{
 "id": "1",
 "domain": "foo",
 "created\_at": "2022-11-16T06:09:36.176Z",
 "history": [
 {
 "day": "1668556800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668470400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668384000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668297600",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668211200",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668124800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1668038400",
 "accounts": "0",
 "uses": "0"
 }
 ]
}

```
## Attributes

## `id`

**Description:** The ID of the EmailDomainBlock in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `domain`

**Description:** The email domain that is not allowed to be used for signups.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `created_at`

**Description:** When the email domain was disallowed from signups.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## `history`

**Description:** Usage statistics for given days (typically the past week).  
**Type:** Array of Hash  
**Version history:**  
4.0.0 - added

## `history[][day]`

**Description:** UNIX timestamp on midnight of the given day.  
**Type:** String (UNIX timestamp)  
**Version history:**  
4.0.0 - added

## `history[][accounts]`

**Description:** The counted accounts signup attempts using that email domain within that day.  
**Type:** String (cast from an integer)  
**Version history:**  
4.0.0 - added

## `history[][uses]`

**Description:** The counted IP signup attempts of that email domain within that day.  
**Type:** String (cast from an integer)  
**Version history:**  
4.0.0 - added

## See also

admin/email\_domain\_blocks API methods[app/serializers/rest/admin/email\_domain\_block\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/email_domain_block_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_EmailDomainBlock.md)

---


# Admin::Ip

Source: https://docs.joinmastodon.org/entities/Admin_Ip/

# Admin::Ip

Represents an IP address associated with a user.

## Example

```
{
 "ip": "192.168.42.1",
 "used\_at": "2022-09-15T01:38:58.851Z"
}

```
## Attributes

## `ip`

**Description:** The IP address.  
**Type:** String (IP address)  
**Version history:**  
3.5.0 - added

## `used_at`

**Description:** The timestamp of when the IP address was last used for this account.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.5.0 - added

## See also

[Admin::Account (`ips` attribute)](/entities/Admin_Account/#ips)[app/serializers/rest/admin/ip\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/ip_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_Ip.md)

---


# Admin::IpBlock

Source: https://docs.joinmastodon.org/entities/Admin_IpBlock/

# Admin::IpBlock

Represents an IP address range that cannot be used to sign up.

## Example

```
{
 "id": "1",
 "ip": "8.8.8.8/32",
 "severity": "no\_access",
 "comment": "",
 "created\_at": "2022-11-16T07:22:00.501Z",
 "expires\_at": null
}

```
## Attributes

## `id`

**Description:** The ID of the DomainBlock in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `ip`

**Description:** The IP address range that is not allowed to federate.  
**Type:** String (IP address and prefix)  
**Version history:**  
4.0.0 - added

## `severity`

**Description:** The associated policy with this IP block.  
**Type:** String (Enumerable, oneOf)  
`sign_up_requires_approval` = Any signup from this IP range will create a pending account  
`sign_up_block` = Any signup from this IP range will be rejected  
`no_access` = Any activity from this IP range will be rejected entirely  
**Version history:**  
4.0.0 - added

## `comment`

**Description:** The recorded reason for this IP block.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `created_at`

**Description:** When the IP block was created.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## `expires_at`

**Description:** When the IP block will expire.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## See also

admin/ip\_blocks API methods[app/serializers/rest/admin/ip\_block\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/ip_block_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_IpBlock.md)

---


# Admin::Measure

Source: https://docs.joinmastodon.org/entities/Admin_Measure/

# Admin::Measure

Represents quantitative data about the server.

## Attributes

## `key`

**Description:** The unique keystring for the requested measure.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `unit`

**Description:** The units associated with this data item’s value, if applicable.  
**Type:** nullable String or null  
**Version history:**  
3.5.0 - added

## `total`

**Description:** The numeric total associated with the requested measure.  
**Type:** String (cast from integer)  
**Version history:**  
3.5.0 - added

## `human_value` optional

**Description:** A human-readable formatted value for this data item.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `previous_total` optional

**Description:** The numeric total associated with the requested measure, in the previous period. Previous period is calculated by subtracting the start\_at and end\_at dates, then offsetting both start and end dates backwards by the length of the time period.  
**Type:** String (cast from integer)  
**Version history:**  
3.5.0 - added

## `data`

**Description:** The data available for the requested measure, split into daily buckets.  
**Type:** Array of Hash  
**Version history:**  
3.5.0 - added

## `data[][date]`

**Description:** Midnight on the requested day in the time period.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.5.0 - added

## `data[][value]`

**Description:** The numeric value for the requested measure.  
**Type:** String (cast from integer)  
**Version history:**  
3.5.0 - added

## Examples

## `active_users`

Total active users on your instance within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "active\_users",
 "unit": null,
 "total": "2",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00Z",
 "value": "1"
 },
 {
 "date": "2022-09-18T00:00:00Z",
 "value": "1"
 },
 {
 "date": "2022-09-19T00:00:00Z",
 "value": "1"
 },
 {
 "date": "2022-09-20T00:00:00Z",
 "value": "2"
 },
 {
 "date": "2022-09-21T00:00:00Z",
 "value": "1"
 }
 ]
}

```
## `new_users`

Users who joined your instance within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "new\_users",
 "unit": null,
 "total": "2",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "1"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "1"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `interactions`

Total interactions (favourites, boosts, replies) on local statuses within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "interactions",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00Z",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00Z",
 "value": "0"
 }
 ]
}

```
## `opened_reports`

Total reports filed within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "opened\_reports",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
 }

```
## `resolved_reports`

Total reports resolved within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "resolved\_reports",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `tag_accounts`

Total accounts who used a tag in at least one status within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "tag\_accounts",
 "unit": null,
 "total": "1",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "1"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `tag_uses`

Total statuses which used a tag within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "tag\_uses",
 "unit": null,
 "total": "2",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "1"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "1"
 }
 ]
}

```
## `tag_servers`

Total remote origin servers for statuses which used a tag within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "tag\_servers",
 "unit": null,
 "total": "0",
 "previous\_total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `instance_accounts`

Total accounts originating from a remote domain within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "instance\_accounts",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `instance_media_attachments`

Total space used by media attachments from a remote domain within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "instance\_media\_attachments",
 "unit": "bytes",
 "total": "0",
 "human\_value": "0 Bytes",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": ""
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": ""
 }
 ]
}

```
## `instance_reports`

Total reports filed against accounts from a remote domain within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "instance\_reports",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `instance_statuses`

Total statuses originating from a remote domain within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "instance\_statuses",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `instance_follows`

Total accounts from a remote domain followed by a local user within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "instance\_follows",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## `instance_followers`

Total local accounts followed by accounts from a remote domain within the time period starting at 2022-09-14 and ending at 2022-09-22

```
{
 "key": "instance\_followers",
 "unit": null,
 "total": "0",
 "data": [
 {
 "date": "2022-09-14T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-15T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-16T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-17T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-18T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-19T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-20T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-21T00:00:00.000+00:00",
 "value": "0"
 },
 {
 "date": "2022-09-22T00:00:00.000+00:00",
 "value": "0"
 }
 ]
}

```
## See also

[admin/dimensions API methods](/methods/admin/dimensions/)[app/serializers/rest/admin/measure\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/measure_serializer.rb)[app/lib/admin/metrics/measure.rb](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/measure.rb)[app/lib/admin/metrics/measure/](https://github.com/mastodon/mastodon/blob/main/app/lib/admin/metrics/measure/)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_Measure.md)

---


# Admin::Report

Source: https://docs.joinmastodon.org/entities/Admin_Report/

# Admin::Report

Admin-level information about a filed report.

## Example

```
{
 "id": "1",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "spam",
 "comment": "",
 "forwarded": false,
 "created\_at": "2022-09-09T21:19:23.085Z",
 "updated\_at": "2022-09-09T21:19:23.085Z",
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "domain": null,
 "created\_at": "2022-09-08T22:48:07.985Z",
 "email": "admin@mastodon.local",
 // ...
 "account": {
 "id": "108965218747268792",
 "username": "admin",
 "acct": "admin",
 // ...
 }
 },
 "target\_account": {
 "id": "108965430868193066",
 "username": "goody",
 "domain": null,
 "created\_at": "2022-09-08T23:42:04.731Z",
 "email": "goody@mastodon.local",
 // ...
 "account": {
 "id": "108965430868193066",
 "username": "goody",
 "acct": "goody",
 // ...
 }
 },
 "assigned\_account": null,
 "action\_taken\_by\_account": null,
 "statuses": [],
 "rules": []
}

```
## Attributes

## `id`

**Description:** The ID of the report in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.9.1 - added

## `action_taken`

**Description:** Whether an action was taken to resolve this report.  
**Type:** Boolean  
**Version history:**  
2.9.1 - added

## `action_taken_at`

**Description:** When an action was taken, if this report is currently resolved.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)) or null  
**Version history:**  
2.9.1 - added

## `category`

**Description:** The category under which the report is classified.  
**Type:** String (Enumerable oneOf)  
`spam` = Malicious, fake, or repetitive content  
`violation` = Violates one or more specific [`rules`](/entities/Admin_Report/#rules)  
`other` = The default (catch-all) category  
**Version history:**  
3.5.0 - added

## `comment`

**Description:** An optional reason for reporting.  
**Type:** String  
**Version history:**  
2.9.1 - added

## `forwarded`

**Description:** Whether a report was forwarded to a remote instance.  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## `created_at`

**Description:** The time the report was filed.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
2.9.1 - added

## `updated_at`

**Description:** The time of last action on this report.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
2.9.1 - added

## `account`

**Description:** The account which filed the report.  
**Type:** [Admin::Account](/entities/Admin_Account/)  
**Version history:**  
2.9.1 - added

## `target_account`

**Description:** The account being reported.  
**Type:** [Admin::Account](/entities/Admin_Account/)  
**Version history:**  
2.9.1 - added

## `assigned_account`

**Description:** The account of the moderator assigned to this report.  
**Type:** nullable [Admin::Account](/entities/Admin_Account/) or null  
**Version history:**  
2.9.1 - added

## `action_taken_by_account`

**Description:** The account of the moderator who handled the report.  
**Type:** nullable [Admin::Account](/entities/Admin_Account/) or null  
**Version history:**  
2.9.1 - added

## `statuses`

**Description:** Statuses attached to the report, for context.  
**Type:** Array of [Status](/entities/Status/)  
**Version history:**  
2.9.1 - added

## `rules`

**Description:** Rules attached to the report, for context.  
**Type:** Array of [Rule](/entities/Rule/)  
**Version history:**  
3.5.0 - added

## See also

admin/reports API methods[app/serializers/rest/admin/report\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/report_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Admin_Report.md)

---


# Announcement

Source: https://docs.joinmastodon.org/entities/Announcement/

# Announcement

Represents an announcement set by an administrator.

## Example

```
{
 "id": "8",
 "content": "<p>Looks like there was an issue processing audio attachments without embedded art since yesterday due to an experimental new feature. That issue has now been fixed, so you may see older posts with audio from other servers pop up in your feeds now as they are being finally properly processed. Sorry!</p>",
 "starts\_at": null,
 "ends\_at": null,
 "all\_day": false,
 "published\_at": "2020-07-03T01:27:38.726Z",
 "updated\_at": "2020-07-03T01:27:38.752Z",
 "read": true,
 "mentions": [],
 "statuses": [],
 "tags": [],
 "emojis": [],
 "reactions": [
 {
 "name": "bongoCat",
 "count": 9,
 "me": false,
 "url": "https://files.mastodon.social/custom\_emojis/images/000/067/715/original/fdba57dff7576d53.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/067/715/static/fdba57dff7576d53.png"
 },
 {
 "name": "thonking",
 "count": 1,
 "me": false,
 "url": "https://files.mastodon.social/custom\_emojis/images/000/098/690/original/a8d36edc4a7032e8.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/098/690/static/a8d36edc4a7032e8.png"
 },
 {
 "name": "AAAAAA",
 "count": 1,
 "me": false,
 "url": "https://files.mastodon.social/custom\_emojis/images/000/071/387/original/AAAAAA.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/071/387/static/AAAAAA.png"
 },
 {
 "name": "🤔",
 "count": 1,
 "me": true
 }
 ]
}

```
## Attributes

## `id`

**Description:** The ID of the announcement in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
3.1.0 - added

## `content`

**Description:** The text of the announcement.  
**Type:** String (HTML)  
**Version history:**  
3.1.0 - added

## `starts_at`

**Description:** When the announcement will start.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)) or null  
**Version history:**  
3.1.0 - added

## `ends_at`

**Description:** When the announcement will end.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)) or null  
**Version history:**  
3.1.0 - added

## `published`

**Description:** Whether the announcement is currently active.  
**Type:** Boolean  
**Version history:**  
3.1.0 - added

## `all_day`

**Description:** Whether the announcement should start and end on dates only instead of datetimes. Will be false if there is no `starts_at` or `ends_at` time.  
**Type:** Boolean  
**Version history:**  
3.1.0 - added

## `published_at`

**Description:** When the announcement was published.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.1.0 - added

## `updated_at`

**Description:** When the announcement was last updated.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.1.0 - added

## `read` optional

**Description:** Whether the announcement has been read by the current user.  
**Type:** Boolean  
**Version history:**  
3.1.0 - added

## `mentions`

**Description:** Accounts mentioned in the announcement text.  
**Type:** Array of [Announcement::Account](/entities/Announcement/#Account)  
**Version history:**  
3.1.0 - added

## `statuses`

**Description:** Statuses linked in the announcement text.  
**Type:** Array of [Announcement::Status](/entities/Announcement/#Status)  
**Version history:**  
3.1.0 - added

## `tags`

**Description:** Tags linked in the announcement text.  
**Type:** Array of [Status::Tag](/entities/Status/#Tag)  
**Version history:**  
3.1.0 - added

## `emojis`

**Description:** Custom emoji used in the announcement text.  
**Type:** Array of [CustomEmoji](/entities/CustomEmoji/)  
**Version history:**  
3.1.0 - added

## `reactions`

**Description:** Emoji reactions attached to the announcement.  
**Type:** Array of [Reaction](/entities/Reaction/)  
**Version history:**  
3.1.0 - added

## Announcement::Account attributes

## `id`

**Description:** The account ID of the mentioned user.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
3.1.0 - added

## `username`

**Description:** The username of the mentioned user.  
**Type:** String  
**Version history:**  
3.1.0 - added

## `url`

**Description:** The location of the mentioned user’s profile.  
**Type:** String (URL)  
**Version history:**  
3.1.0 - added

## `acct`

**Description:** The webfinger acct: URI of the mentioned user. Equivalent to `username` for local users, or `username@domain` for remote users.  
**Type:** String  
**Version history:**  
3.1.0 - added

## Announcement::Status attributes

## `id`

**Description:** The ID of an attached Status in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
3.1.0 - added

## `url`

**Description:** The URL of an attached Status.  
**Type:** String (URL)  
**Version history:**  
3.1.0 - added

## See also

[announcements API methods](/methods/announcements/)[app/serializers/rest/announcement\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/announcement_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Announcement.md)

---


# Appeal

Source: https://docs.joinmastodon.org/entities/Appeal/

# Appeal

Appeal against a moderation action.

## Attributes

## `text`

**Description:** Text of the appeal from the moderated account to the moderators.  
**Type:** String  
**Version history:**  
4.3.0 - added

## `state`

**Description:** State of the appeal.  
**Type:** String (Enumerable oneOf)  
`approved` = The appeal has been approved by a moderator  
`rejected` = The appeal has been rejected by a moderator  
`pending` = The appeal has been submitted, but neither approved nor rejected yet  
**Version history:**  
4.3.0 - added

Last updated July 15, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Appeal.md)

---


# Application

Source: https://docs.joinmastodon.org/entities/Application/

# Application

Represents an application that interfaces with the REST API to access accounts or post statuses.

## Example

```
{
 "name": "Test Application",
 "website": "https://app.example",
 "scopes": ["read", "write", "push"],
 "redirect\_uri": "https://app.example/callback\nhttps://app.example/register",
 "redirect\_uris": [
 "https://app.example/callback",
 "https://app.example/register"
 ]
}

```
## Attributes

## `name`

**Description:** The name of your application.  
**Type:** String  
**Version history:**  
0.9.9 - added

## `website` optional

**Description:** The website associated with your application.  
**Type:** nullable String (URL)  
**Version history:**  
0.9.9 - added  
3.5.1 - this property is now nullable

## `scopes`

**Description:** The scopes for your application. This is the registered `scopes` string split on whitespace.  
**Type:** Array of Strings  
**Version history:**  
4.3.0 - added

## `redirect_uris`

**Description:** The registered redirection URI(s) for your application.  
**Type:** Array of String (URLs or `"urn:ietf:wg:oauth:2.0:oob"` as values)  
**Version history:**  
4.3.0 - added

## `redirect_uri` deprecated

**Description:** The registered redirection URI(s) for your application.  
May contain `\n` characters when multiple redirect URIs are registered.  
**Type:** String  
**Version history:**  
0.0.0 - added  
4.3.0 - deprecated in favour of [`redirect_uris`](/entities/Application/#redirect_uris), since the value of this property is not a well-formed URI when multiple redirect URIs are registered

## `vapid_key` deprecated

**Description:** Used for Push Streaming API. Returned with [POST /api/v1/apps](/methods/apps/#create). Equivalent to [WebPushSubscription#server\_key](/entities/WebPushSubscription/#server_key) and [Instance#vapid\_public\_key](/entities/Instance/#vapid_public_key)  
**Type:** String  
**Version history:**  
2.8.0 - added  
4.3.0 - deprecated pending removal, please see [api/v2/instance](/methods/instance/#v2) for this value (`configuration.vapid.public_key`)

## CredentialApplication attributes

All [Application](/entities/Application/#attributes) attributes and the following:

## `client_id`

**Description:** Client ID key, to be used for obtaining OAuth tokens  
**Type:** String  
**Version history:**  
0.9.9 - added
4.3.0 - moved to `CredentialApplication` from `Application`

## `client_secret`

**Description:** Client secret key, to be used for obtaining OAuth tokens  
**Type:** String  
**Version history:**  
0.9.9 - added
4.3.0 - moved to `CredentialApplication` from `Application`

## `client_secret_expires_at`

**Description:** When the client secret key will expire at, presently this always returns `0` indicating that OAuth Clients do not expire  
**Type:** String  
**Version history:**  
4.3.0 - added

## See also

[apps API methods](/methods/apps/)[Status (`application` attribute)](/entities/Status/#application)[app/serializers/rest/application\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/application_serializer.rb)[app/serializers/rest/credential\_application\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/credential_application_serializer.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Application.md)

---


# Context

Source: https://docs.joinmastodon.org/entities/Context/

# Context

Represents the tree around a given status. Used for reconstructing threads of statuses.

## Example

```
{
 "ancestors": [
 {
 "id": "103188938570975982",
 "created\_at": "2019-11-23T19:44:00.124Z",
 "in\_reply\_to\_id": null,
 // ...
 },
 {
 "id": "103188971072973252",
 "created\_at": "2019-11-23T19:52:23.398Z",
 "in\_reply\_to\_id": "103188938570975982",
 // ...
 },
 {
 "id": "103188982235527758",
 "created\_at": "2019-11-23T19:55:08.208Z",
 "in\_reply\_to\_id": "103188971072973252",
 // ...
 }
 ],
 "descendants": [
 {
 "id": "103189026958574542",
 "created\_at": "2019-11-23T20:06:36.011Z",
 "in\_reply\_to\_id": "103189005915505698",
 // ...
 }
 ]
}

```
## Attributes

## `ancestors`

**Description:** Parents in the thread.  
**Type:** Array of [Status](/entities/Status/)  
**Version history:**  
0.6.0 - added

## `descendants`

**Description:** Children in the thread.  
**Type:** Array of [Status](/entities/Status/)  
**Version history:**  
0.6.0 - added

## See also

[GET /api/v1/statuses/:id/context](/methods/statuses/#context)[app/serializers/rest/context\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/context_serializer.rb)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Context.md)

---


# Conversation

Source: https://docs.joinmastodon.org/entities/Conversation/

# Conversation

Represents a conversation with "direct message" visibility.

## Example

```
{
 "id": "418450",
 "unread": true,
 "accounts": [
 {
 "id": "482403",
 "username": "amic",
 "acct": "amic@nulled.red",
 // ...
 }
 ],
 "last\_status": {
 "id": "103196583826321184",
 "created\_at": "2019-11-25T04:08:24.000Z",
 "in\_reply\_to\_id": "103196540587943467",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 }
}

```
## Attributes

## `id`

**Description:** The ID of the conversation in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.6.0 - added

## `unread`

**Description:** Is the conversation currently marked as unread?  
**Type:** Boolean  
**Version history:**  
2.6.0 - added

## `accounts`

**Description:** Participants in the conversation.  
**Type:** Array of [Account](/entities/Account/)  
**Version history:**  
2.6.0 - added

## `last_status`

**Description:** The last status in the conversation.  
**Type:** nullable [Status](/entities/Status/)  
**Version history:**  
2.6.0 - added

## See also

[conversations API methods](/methods/conversations/)[app/serializers/rest/conversation\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/conversation_serializer.rb)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Conversation.md)

---


# CustomEmoji

Source: https://docs.joinmastodon.org/entities/CustomEmoji/

# CustomEmoji

Represents a custom emoji.

## Example

```
{
 "shortcode": "blobaww",
 "url": "https://files.mastodon.social/custom\_emojis/images/000/011/739/original/blobaww.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/011/739/static/blobaww.png",
 "visible\_in\_picker": true,
 "category": "Blobs"
}

```
## Attributes

## `shortcode`

**Description:** The name of the custom emoji.  
**Type:** String  
**Version history:**  
2.0.0 - added

## `url`

**Description:** A link to the custom emoji.  
**Type:** String (URL)  
**Version history:**  
2.0.0 - added

## `static_url`

**Description:** A link to a static copy of the custom emoji.  
**Type:** String (URL)  
**Version history:**  
2.0.0 - added

## `visible_in_picker`

**Description:** Whether this Emoji should be visible in the picker or unlisted.  
**Type:** Boolean  
**Version history:**  
2.0.0 - added

## `category`

**Description:** Used for sorting custom emoji in the picker.  
**Type:** nullable String  
**Version history:**  
3.0.0 - added

## See also

[GET /api/v1/custom\_emojis](/methods/custom_emojis/)[Status (`emojis` attribute)](/entities/Status/#emojis)[Announcement (`emojis` attribute)](/entities/Announcement/#emojis)[app/serializers/rest/custom\_emoji\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/custom_emoji_serializer.rb)Last updated April 29, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/CustomEmoji.md)

---


# DomainBlock

Source: https://docs.joinmastodon.org/entities/DomainBlock/

# DomainBlock

Represents a domain that is blocked by the instance.

## Example

```
{
 "domain":"daji\*\*\*\*\*\*.com",
 "digest":"3752f63a7079d60c2de5dceb8bd7608e86a15544eb78a494a482041c3684b37f",
 "severity":"suspend",
 "comment":"Inappropriate content"
}

```
## Attributes

## `domain`

**Description:** The domain which is blocked. This may be obfuscated or partially censored.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `digest`

**Description:** The SHA256 hash digest of the domain string.  
**Type:** String (SHA256)  
**Version history:**  
4.0.0 - added

## `severity`

**Description:** The level to which the domain is blocked.  
**Type:** String (Enumerable, oneOf)  
`silence` = Users from this domain will be hidden from timelines, threads, and notifications (unless you follow the user).  
`suspend` = Incoming messages from this domain will be rejected and dropped entirely.  
**Version history:**  
4.0.0 - added

## `comment` optional

**Description:** An optional reason for the domain block.  
**Type:** String  
**Version history:**  
4.0.0 - added

## See also

[GET /api/v1/instance/domain\_blocks](/methods/instance/#domain_blocks)[app/serializers/rest/domain\_block\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/domain_block_serializer.rb)Last updated August 3, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/DomainBlock.md)

---


# Error

Source: https://docs.joinmastodon.org/entities/Error/

# Error

Represents an error message.

## Example

```
{
 "error": "invalid\_grant",
 "error\_description": "The provided authorization grant is invalid, expired, revoked, does not match the redirection URI used in the authorization request, or was issued to another client."
}

```
**The most important part of an error response is the HTTP status code.** Standard semantics are followed. The body of an error is a JSON object containing more information, if available.## Attributes

## `error`

**Description:** The error message.  
**Type:** String  
**Version history:**  
0.6.0 - added

## `error_description` optional

**Description:** A longer description of the error, mainly provided with the OAuth API.  
**Type:** String  
**Version history:**  
0.6.0 - added

## Possible reasons

## 400 - Bad request

## ParameterMissing

Error: {string}. Appears when a required parameter is missing from the API call.

## 401 - Unauthorized

## require\_authenticated\_user!

Error: This API requires an authenticated user. Appears when the instance is in secure mode, which disables all public use of API methods.

## 403 - Forbidden

## NotPermitted

Error: This action is not allowed. Appears when trying to call a method that you do not have permission for (such as admin or staff methods), or performing actions you are not allowed to do (such as following a user that blocks you).

## current\_user.disabled?

Error: Your login is currently disabled. Appears when the OAuth token’s authorized user has had their account disabled by a moderator.

## !current\_user.confirmed?

Error: Your login is missing a confirmed e-mail address. Appears when the email address associated with the OAuth token’s authorized user’s account has not yet been confirmed.

## !current\_user.approved?

Error: Your login is currently pending approval. Appears when the OAuth token’s authorized user has signed up on an instance with approval-required registrations, and the user has not yet had their account approved by a moderator.

## 404 - Not found

## RecordNotFound

Error: Record not found. Appears when an entity record does not exist, or the authorized user is not within the audience of a private entity.operates on a user.

## 422 - Unprocessable entity

## RecordInvalid

Error: {string}. May appear when entity creation failed.

## RecordNotUnique

Error: Duplicate record. Appears when you are trying to pin an account or status that is already pinned.

## !current\_user

Error: This method requires an authenticated user. Appears when using an OAuth token without an authorized user (or no token at all), while trying to call an API method that requires a user to be processed.

## 429 - Too many requests

Error: {translated string}. Appears when you have exceeded the rate limit. See [Rate limits](/api/rate-limits/) for more information.

## 503 - Remote service unavailable

## UnexpectedResponseError

Error: Remote data could not be fetched. Appears when Mastodon calls a remote service (such as WebFinger from another instance) which returns an error.

## SSLError

Error: Remote SSL certificate could not be verified. Appears when a remote service is called, but it has an invalid SSL certificate.

## NetworkingError

Error: There was a temporary problem serving your request, please try again. Appears when there was a failed call to an S3 storage server.

## RaceConditionError

Error: There was a temporary problem serving your request, please try again. Appears when there was an error due to a race condition in server-side code.

## See also

[app/controllers/api/base\_controller.rb](https://github.com/mastodon/mastodon/blob/main/app/controllers/api/base_controller.rb)Last updated March 8, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Error.md)

---


# ExtendedDescription

Source: https://docs.joinmastodon.org/entities/ExtendedDescription/

# ExtendedDescription

Represents an extended description for the instance, to be shown on its about page.

## Example

```
{
 "updated\_at":"2022-11-03T04:09:07Z",
 "content":"<p>For inquiries not related specifically to the operation of this server, such as press inquiries, please contact <a href=\"mailto:press@joinmastodon.org\">press@joinmastodon.org</a>.</p>\n\n<h2>Funding</h2>\n\n<p>This server is crowdfunded by <a href=\"https://patreon.com/mastodon\">Patreon donations</a>. For a list of sponsors, see <a href=\"https://joinmastodon.org/sponsors\">joinmastodon.org</a>.</p>\n\n<h2>Reporting and moderation</h2>\n\n<p>When reporting accounts, please make sure to include at least a few posts that show rule-breaking behaviour, when applicable. If there is any additional context that might help make a decision, please also include it in the comment. This is especially important when the content is in a language nobody on the moderation team speaks.</p>\n\n<p>We usually handle reports within 24 hours. Please mind that you are not notified when a report you have made has led to a punitive action, and that not all punitive actions are externally visible. For first time offenses, we may opt to delete offending content, escalating to harsher measures on repeat offenses.</p>\n\n<h2>Impressum</h2>\n\n<p>Mastodon gGmbH<br>\nMühlenstraße 8a<br>\n14167 Berlin<br>\nGermany</p>\n\n<p>E-Mail-Adresse: hello@joinmastodon.org</p>\n\n<p>Vertretungsberechtigt: Eugen Rochko (Geschäftsführer)</p>\n\n<p>Umsatzsteuer Identifikationsnummer (USt-ID): DE344258260</p>\n\n<p>Handelsregister<br>\nGeführt bei: Amtsgericht Charlottenburg<br>\nNummer: HRB 230086 B</p>\n"
}

```
## Attributes

## `updated_at`

**Description:** A timestamp of when the extended description was last updated.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## `content`

**Description:** The rendered HTML content of the extended description.  
**Type:** String (HTML)  
**Version history:**  
4.0.0 - added

## See also

[GET /api/v1/instance/extended\_description](/methods/instance/#extended_description)[app/serializers/rest/extended\_description\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/extended_description_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/ExtendedDescription.md)

---


# FamiliarFollowers

Source: https://docs.joinmastodon.org/entities/FamiliarFollowers/

# FamiliarFollowers

Represents a subset of your follows who also follow some other user.

## Example

```
[
 {
 "id":"1",
 "accounts":[
 {
 "id":"1087990",
 "username":"moss",
 "acct":"moss@goblin.camp",
 // ...
 },
 {
 "id":"1092723",
 "username":"vivianrose",
 "acct":"vivianrose",
 // ...
 },
 // ...
 ]
 },
 {
 "id":"2",
 "accounts":[]
 }
]

```
## Attributes

## `id`

**Description:** The ID of the Account in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
3.5.0 - added

## `accounts`

**Description:** Accounts you follow that also follow this account.  
**Type:** Array of [Account](/entities/Account/)  
**Version history:**  
3.5.0 - added

## See also

[GET /api/v1/accounts/:id/familiar\_followers](/methods/accounts/#familiar_followers)[app/serializers/rest/familiar\_followers\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/familiar_followers_serializer.rb)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/FamiliarFollowers.md)

---


# FeaturedTag

Source: https://docs.joinmastodon.org/entities/FeaturedTag/

# FeaturedTag

Represents a hashtag that is featured on a profile.

## Example

```
{
 "id": "627",
 "name": "nowplaying",
 "url": "https://mastodon.social/@trwnh/tagged/nowplaying",
 "statuses\_count": "70",
 "last\_status\_at": "2022-08-29"
}

```
## Attributes

## `id`

**Description:** The internal ID of the featured tag in the database.  
**Type:** String (cast from integer but not guaranteed to be a number)  
**Version history:**  
3.0.0 - added

## `name`

**Description:** The name of the hashtag being featured.  
**Type:** String  
**Version history:**  
3.0.0 - added

## `url`

**Description:** A link to all statuses by a user that contain this hashtag.  
**Type:** String (URL)  
**Version history:**  
3.3.0 - added

## `statuses_count`

**Description:** The number of authored statuses containing this hashtag.  
**Type:** String  
**Version history:**  
3.0.0 - added

## `last_status_at`

**Description:** The date of the last authored status containing this hashtag.  
**Type:** String ([Date](/api/datetime-format/#date))  
**Version history:**  
3.0.0 - added

## See also

[featured\_tags API methods](/methods/featured_tags/)[app/serializers/rest/featured\_tag\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/featured_tag_serializer.rb)Last updated December 2, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/FeaturedTag.md)

---


# Filter

Source: https://docs.joinmastodon.org/entities/Filter/

# Filter

Represents a user-defined filter for determining which statuses should not be shown to the user.

## Example

```
{
 "id": "19972",
 "title": "Test filter",
 "context": [
 "home"
 ],
 "expires\_at": "2022-09-20T17:27:39.296Z",
 "filter\_action": "warn",
 "keywords": [
 {
 "id": "1197",
 "keyword": "bad word",
 "whole\_word": false
 }
 ],
 "statuses": [
 {
 "id": "1",
 "status\_id": "109031743575371913"
 }
 ]
}

```
## Attributes

## `id`

**Description:** The ID of the Filter in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `title`

**Description:** A title given by the user to name the filter.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `context`

**Description:** The contexts in which the filter should be applied.  
**Type:** Array of String (Enumerable, anyOf)  
`home` = home timeline and lists  
`notifications` = notifications timeline  
`public` = public timelines  
`thread` = expanded thread of a detailed status  
`account` = when viewing a profile  
**Version history:**  
4.0.0 - added

## `expires_at`

**Description:** When the filter should no longer be applied.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)), or null if the filter does not expire  
**Version history:**  
4.0.0 - added

## `filter_action`

**Description:** The action to be taken when a status matches this filter.  
**Type:** String (Enumerable, oneOf)  
`warn` = show a warning that identifies the matching filter by `title`, and allow the user to expand the filtered status. This is the default (and unknown values should be treated as equivalent to `warn`).  
`hide` = do not show this status if it is received  
`blur` = hide/blur media attachments with a warning identifying the matching filter by `title`
**Version history:**  
4.0.0 - added  
4.4.0 (`mastodon` [API version](/entities/Instance/#api-versions) 5) - added `blur` value to `filter_action` attribute

## `keywords`

**Description:** The keywords grouped under this filter.  
**Type:** Array of [FilterKeyword](/entities/FilterKeyword/)  
**Version history:**  
4.0.0 - added

## `statuses`

**Description:** The statuses grouped under this filter.  
**Type:** Array of [FilterStatus](/entities/FilterStatus/)  
**Version history:**  
4.0.0 - added

## See also

[Implementation guidelines for filters](/api/guidelines/#filters)[V1::Filter (for Mastodon 3.5 and earlier)](/entities/V1_Filter/)[/api/v2/filters methods](/methods/filters/)[app/serializers/rest/filter\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/filter_serializer.rb)Last updated March 26, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Filter.md)

---


# FilterKeyword

Source: https://docs.joinmastodon.org/entities/FilterKeyword/

# FilterKeyword

Represents a keyword that, if matched, should cause the filter action to be taken.

## Example

```
{
 "id": "1197",
 "keyword": "bad word",
 "whole\_word": false
}

```
## Attributes

## `id`

**Description:** The ID of the FilterKeyword in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `keyword`

**Description:** The phrase to be matched against.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `whole_word`

**Description:** Should the filter consider word boundaries? See [implementation guidelines for filters](/api/guidelines/#filters).  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## See also

[Implementation guidelines for filters](/api/guidelines/#filters)[/api/v2/filters methods](/methods/filters/)[app/serializers/rest/filter\_keyword\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/filter_keyword_serializer.rb)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/FilterKeyword.md)

---


# FilterResult

Source: https://docs.joinmastodon.org/entities/FilterResult/

# FilterResult

Represents a filter whose keywords matched a given status.

## Example

```
{
 "filter": {
 "id": "3",
 "title": "Hide completely",
 "context": [
 "home"
 ],
 "expires\_at": "2022-09-20T17:27:39.296Z",
 "filter\_action": "hide"
 },
 "keyword\_matches": [
 "bad word"
 ],
 "status\_matches": [
 "109031743575371913"
 ]
}

```
## Attributes

## `filter`

**Description:** The filter that was matched.  
**Type:** [Filter](/entities/Filter/)  
**Version history:**  
4.0.0 - added

## `keyword_matches`

**Description:** The keyword within the filter that was matched.  
**Type:** nullable Array of String, or null  
**Version history:**  
4.0.0 - added

## `status_matches`

**Description:** The status ID within the filter that was matched.  
**Type:** nullable Array of String, or null  
**Version history:**  
4.0.0 - added

## See also

[Implementation guidelines for filters](/api/guidelines/#filters)[/api/v2/filters methods](/methods/filters/)[app/serializers/rest/filter\_result\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/filter_result_serializer.rb)Last updated December 8, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/FilterResult.md)

---


# FilterStatus

Source: https://docs.joinmastodon.org/entities/FilterStatus/

# FilterStatus

Represents a status ID that, if matched, should cause the filter action to be taken.

## Example

```
{
 "id": "1",
 "status\_id": "109031743575371913"
}

```
## Attributes

## `id`

**Description:** The ID of the FilterStatus in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## `status_id`

**Description:** The ID of the Status that will be filtered.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.0.0 - added

## See also

[Implementation guidelines for filters](/api/guidelines/#filters)[/api/v2/filters methods](/methods/filters/)[app/serializers/rest/filter\_status\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/filter_status_serializer.rb)Last updated February 6, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/FilterStatus.md)

---


# IdentityProof

Source: https://docs.joinmastodon.org/entities/IdentityProof/

# IdentityProof

Represents a proof from an external identity provider.

Identity proofs have been deprecated in 3.5.0 and newer. Previously, the only proof provider was Keybase, but development on Keybase has stalled entirely since it was acquired by Zoom.
```
{
 "provider": "Keybase",
 "provider\_username": "gargron",
 "updated\_at": "2019-07-21T20:14:39.596Z",
 "proof\_url": "https://keybase.io/gargron/sigchain#5cfc20c7018f2beefb42a68836da59a792e55daa4d118498c9b1898de7e845690f",
 "profile\_url": "https://keybase.io/gargron"
}

```
## Attributes

## `provider`

**Description:** The name of the identity provider.  
**Type:** String  
**Version history:**  
2.8.0 - added

## `provider_username`

**Description:** The account owner’s username on the identity provider’s service.  
**Type:** String  
**Version history:**  
2.8.0 - added

## `updated_at`

**Description:** When the identity proof was last updated.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
2.8.0 - added

## `proof_url`

**Description:** A link to a statement of identity proof, hosted by the identity provider.  
**Type:** String (URL)  
**Version history:**  
2.8.0 - added

## `profile_url`

**Description:** The account owner’s profile URL on the identity provider.  
**Type:** String (URL)  
**Version history:**  
2.8.0 - added

## See also

[GET /api/v1/accounts/:id/identity\_proofs](/methods/accounts/#identity_proofs)[Remove Keybase integration (#17045)](https://github.com/mastodon/mastodon/pull/17045)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/IdentityProof.md)

---


# Instance

Source: https://docs.joinmastodon.org/entities/Instance/

# Instance

Represents the software instance of Mastodon running on this domain.

## Example

```
{
 "domain": "mastodon.social",
 "title": "Mastodon",
 "version": "4.0.0rc1",
 "source\_url": "https://github.com/mastodon/mastodon",
 "description": "The original server operated by the Mastodon gGmbH non-profit",
 "usage": {
 "users": {
 "active\_month": 123122
 }
 },
 "thumbnail": {
 "url": "https://files.mastodon.social/site\_uploads/files/000/000/001/@1x/57c12f441d083cde.png",
 "blurhash": "UeKUpFxuo~R%0nW;WCnhF6RjaJt757oJodS$",
 "versions": {
 "@1x": "https://files.mastodon.social/site\_uploads/files/000/000/001/@1x/57c12f441d083cde.png",
 "@2x": "https://files.mastodon.social/site\_uploads/files/000/000/001/@2x/57c12f441d083cde.png"
 }
 },
 "icon": [
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/36/accf17b0104f18e5.png",
 "size": "36x36"
 },
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/72/accf17b0104f18e5.png",
 "size": "72x72"
 },
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/192/accf17b0104f18e5.png",
 "size": "192x192"
 },
 {
 "src": "https://files.mastodon.social/site\_uploads/files/000/000/003/512/accf17b0104f18e5.png",
 "size": "512x512"
 }
 ],
 "languages": [
 "en"
 ],
 "configuration": {
 "urls": {
 "streaming": "wss://mastodon.social"
 },
 "vapid": {
 "public\_key": "BCkMmVdKDnKYwzVCDC99Iuc9GvId-x7-kKtuHnLgfF98ENiZp\_aj-UNthbCdI70DqN1zUVis-x0Wrot2sBagkMc="
 },
 "accounts": {
 "max\_featured\_tags": 10,
 "max\_pinned\_statuses": 4
 },
 "statuses": {
 "max\_characters": 500,
 "max\_media\_attachments": 4,
 "characters\_reserved\_per\_url": 23
 },
 "media\_attachments": {
 "supported\_mime\_types": [
 "image/jpeg",
 "image/png",
 "image/gif",
 "image/heic",
 "image/heif",
 "image/webp",
 "video/webm",
 "video/mp4",
 "video/quicktime",
 "video/ogg",
 "audio/wave",
 "audio/wav",
 "audio/x-wav",
 "audio/x-pn-wave",
 "audio/vnd.wave",
 "audio/ogg",
 "audio/vorbis",
 "audio/mpeg",
 "audio/mp3",
 "audio/webm",
 "audio/flac",
 "audio/aac",
 "audio/m4a",
 "audio/x-m4a",
 "audio/mp4",
 "audio/3gpp",
 "video/x-ms-asf"
 ],
 "description\_limit": 1500,
 "image\_size\_limit": 10485760,
 "image\_matrix\_limit": 16777216,
 "video\_size\_limit": 41943040,
 "video\_frame\_rate\_limit": 60,
 "video\_matrix\_limit": 2304000
 },
 "polls": {
 "max\_options": 4,
 "max\_characters\_per\_option": 50,
 "min\_expiration": 300,
 "max\_expiration": 2629746
 },
 "translation": {
 "enabled": true
 }
 },
 "registrations": {
 "enabled": false,
 "approval\_required": false,
 "reason\_required": false,
 "message": null,
 "min\_age": 16
 },
 "api\_versions": {
 "mastodon": 1,
 },
 "contact": {
 "email": "staff@mastodon.social",
 "account": {
 "id": "1",
 "username": "Gargron",
 "acct": "Gargron",
 "display\_name": "Eugen 💀",
 "locked": false,
 "bot": false,
 "discoverable": true,
 "group": false,
 "created\_at": "2016-03-16T00:00:00.000Z",
 "note": "<p>Founder, CEO and lead developer <span class=\"h-card\"><a href=\"https://mastodon.social/@Mastodon\" class=\"u-url mention\">@<span>Mastodon</span></a></span>, Germany.</p>",
 "url": "https://mastodon.social/@Gargron",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "header": "https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "followers\_count": 133026,
 "following\_count": 311,
 "statuses\_count": 72605,
 "last\_status\_at": "2022-10-31",
 "noindex": false,
 "emojis": [],
 "fields": [
 {
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span></a>",
 "verified\_at": null
 }
 ]
 }
 },
 "rules": [
 {
 "id": "1",
 "text": "Sexually explicit or violent media must be marked as sensitive when posting"
 },
 {
 "id": "2",
 "text": "No racism, sexism, homophobia, transphobia, xenophobia, or casteism"
 },
 {
 "id": "3",
 "text": "No incitement of violence or promotion of violent ideologies"
 },
 {
 "id": "4",
 "text": "No harassment, dogpiling or doxxing of other users"
 },
 {
 "id": "5",
 "text": "No content illegal in Germany"
 },
 {
 "id": "7",
 "text": "Do not share intentionally false or misleading information"
 }
 ]
}

```
## Attributes

## `domain`

**Description:** The domain name of the instance.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `title`

**Description:** The title of the website.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `version`

**Description:** The version of Mastodon installed on the instance.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `source_url`

**Description:** The URL for the source code of the software running on this instance, in keeping with AGPL license requirements.  
**Type:** String (URL)  
**Version history:**  
4.0.0 - added

## `description`

**Description:** A short, plain-text description defined by the admin.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `usage`

**Description:** Usage data for this instance.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `usage[users]`

**Description:** Usage data related to users on this instance.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `usage[users][active_month]`

**Description:** The number of active users in the past 4 weeks.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `thumbnail`

**Description:** An image used to represent this instance.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `thumbnail[url]`

**Description:** The URL for the thumbnail image.  
**Type:** String (URL)  
**Version history:**  
4.0.0 - added

## `thumbnail[blurhash]` optional

**Description:** A hash computed by [the BlurHash algorithm](https://github.com/woltapp/blurhash), for generating colorful preview thumbnails when media has not been downloaded yet.  
**Type:** String (Blurhash)  
**Version history:**  
4.0.0 - added

## `thumbnail[versions]` optional

**Description:** Links to scaled resolution images, for high DPI screens.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `thumbnail[versions][@1x]` optional

**Description:** The URL for the thumbnail image at 1x resolution.  
**Type:** String (URL)  
**Version history:**  
4.0.0 - added

## `thumbnail[versions][@2x]` optional

**Description:** The URL for the thumbnail image at 2x resolution.  
**Type:** String (URL)  
**Version history:**  
4.0.0 - added

## `icon`

**Description:** The list of available size variants for this instance configured icon.  
**Type:** Array of [InstanceIcon](/entities/Instance/#InstanceIcon)  
**Version history:**  
4.3.0 - added

## `languages`

**Description:** Primary languages of the website and its staff.  
**Type:** Array of String (ISO 639-1 two-letter code)  
**Version history:**  
4.0.0 - added

## `configuration`

**Description:** Configured values and limits for this website.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[urls]`

**Description:** URLs of interest for clients apps.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[urls][streaming]`

**Description:** The Websockets URL for connecting to the streaming API.  
**Type:** String (URL)  
**Version history:**  
4.0.0 - added

## `configuration[vapid][public_key]`

**Description:** The instances VAPID public key, used for push notifications, the same as [WebPushSubscription#server\_key](/entities/WebPushSubscription/#server_key).  
**Type:** String  
**Version history:**  
4.3.0 - added

## `configuration[accounts]`

**Description:** Limits related to accounts.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[accounts][max_featured_tags]`

**Description:** The maximum number of featured tags allowed for each account.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[accounts][max_pinned_statuses]`

**Description:** The maximum number of pinned statuses for each account.  
**Type:** Integer  
**Version history:**  
4.3.0 - added

## `configuration[statuses]`

**Description:** Limits related to authoring statuses.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[statuses][max_characters]`

**Description:** The maximum number of allowed characters per status.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[statuses][max_media_attachments]`

**Description:** The maximum number of media attachments that can be added to a status.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[statuses][characters_reserved_per_url]`

**Description:** Each URL in a status will be assumed to be exactly this many characters.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[media_attachments]`

**Description:** Hints for which attachments will be accepted.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[media_attachments][supported_mime_types]`

**Description:** Contains MIME types that can be uploaded.  
**Type:** Array of String  
**Version history:**  
4.0.0 - added

## `configuration[media_attachments][description_limit]`

**Description:** The maximum size of a description, in characters.  
**Type:** Integer  
**Version history:**  
4.4.0 - added

## `configuration[media_attachments][image_size_limit]`

**Description:** The maximum size of any uploaded image, in bytes.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[media_attachments][image_matrix_limit]`

**Description:** The maximum number of pixels (width times height) for image uploads.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[media_attachments][video_size_limit]`

**Description:** The maximum size of any uploaded video, in bytes.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[media_attachments][video_frame_rate_limit]`

**Description:** The maximum frame rate for any uploaded video.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[media_attachments][video_matrix_limit]`

**Description:** The maximum number of pixels (width times height) for video uploads.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[polls]`

**Description:** Limits related to polls.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[polls][max_options]`

**Description:** Each poll is allowed to have up to this many options.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[polls][max_characters_per_option]`

**Description:** Each poll option is allowed to have this many characters.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[polls][min_expiration]`

**Description:** The shortest allowed poll duration, in seconds.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[polls][max_expiration]`

**Description:** The longest allowed poll duration, in seconds.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[translation]`

**Description:** Hints related to translation.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[translation][enabled]`

**Description:** Whether the Translations API is available on this instance.  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## `registrations`

**Description:** Information about registering for this website.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `registrations[enabled]`

**Description:** Whether registrations are enabled.  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## `registrations[approval_required]`

**Description:** Whether registrations require moderator approval.  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## `registrations[message]`

**Description:** A custom message to be shown when registrations are closed.  
**Type:** nullable String (HTML) or null  
**Version history:**  
4.0.0 - added

## `registrations[min_age]`

**Description:** A minimum age required to register, if configured.  
**Type:** nullable Integer or null  
**Version history:**  
4.4.0 - added

## `registrations[reason_required]` #{registrations-reason\_required}

**Description:** Whether registrations require the user to provide a reason for joining. Only applicable when `registrations[approval_required]` is true.  
**Type:** nullable Boolean  
**Version history:**  
4.4.0 - added

## `api_versions`

**Description:** Information about which version of the API is implemented by this server. It contains at least a `mastodon` attribute, and other implementations may have their own additional attributes.  
**Type:** Hash  
**Version history:**  
4.3.0 - added

## `api_versions[mastodon]`

**Description:** API version number that this server implements. Starting from Mastodon v4.3.0, API changes will come with a version number, which clients can check against this value.  
**Type:** Integer  
**Version history:**  
4.3.0 - added

## `contact`

**Description:** Hints related to contacting a representative of the website.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `contact[email]`

**Description:** An email address that can be messaged regarding inquiries or issues.  
**Type:** String (Email)  
**Version history:**  
4.0.0 - added

## `contact[account]`

**Description:** An account that can be contacted natively over the network regarding inquiries or issues.  
**Type:** nullable [Account](/entities/Account/) or null  
**Version history:**  
4.0.0 - added

## `rules`

**Description:** An itemized list of rules for this website.  
**Type:** Array of [Rule](/entities/Rule/)  
**Version history:**  
4.0.0 - added

## InstanceIcon attributes

## `src`

**Description:** The URL of this icon.  
**Type:** String  
4.3.0 - added

## `size`

**Description:** The size of this icon.  
**Type:** String (in the form of `12x34`, where `12` is the width and `34` is the height of the icon)  
**Version history:**  
4.3.0 - added

## See also

[GET /api/v2/instance](/methods/instance/#v2)[app/serializers/rest/instance\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/instance_serializer.rb)Last updated March 26, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Instance.md)

---


# List

Source: https://docs.joinmastodon.org/entities/List/

# List

Represents a list of some users that the authenticated user follows.

## Example

```
{
 "id": "12249",
 "title": "Friends"
}

```
## Attributes

## `id`

**Description:** The internal database ID of the list.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.1.0 - added

## `title`

**Description:** The user-defined title of the list.  
**Type:** String  
**Version history:**  
2.1.0 - added

## `replies_policy`

**Description:** Which replies should be shown in the list.  
**Type:** String (Enumerable oneOf)  
`followed` = Show replies to any followed user  
`list` = Show replies to members of the list  
`none` = Show replies to no one  
**Version history:**  
3.3.0 - added

## See also

[GET /api/v1/accounts/:id/lists](/methods/accounts/#lists)[lists API methods](/methods/lists/)[app/serializers/rest/list\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/list_serializer.rb)Last updated December 14, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/List.md)

---


# Marker

Source: https://docs.joinmastodon.org/entities/Marker/

# Marker

Represents the last read position within a user's timelines.

## Example

```
{
 "last\_read\_id": "103194548672408537",
 "version": 462,
 "updated\_at": "2019-11-24T19:39:39.337Z"
}

```
## Attributes

## `last_read_id`

**Description:** The ID of the most recently viewed entity.  
**Type:** String (cast from integer but not guaranteed to be a number)  
3.0.0 - added

## `version`

**Description:** An incrementing counter, used for locking to prevent write conflicts.  
**Type:** Integer  
**Version history:**  
3.0.0 - added

## `updated_at`

**Description:** The timestamp of when the marker was set.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
3.0.0 - added

## See also

[markers API methods](/methods/markers/)[app/serializers/rest/marker\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/marker_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Marker.md)

---


# MediaAttachment

Source: https://docs.joinmastodon.org/entities/MediaAttachment/

# MediaAttachment

Represents a file or media attachment that can be added to a status.

## Example

## Image

```
{
 "id": "22345792",
 "type": "image",
 "url": "https://files.mastodon.social/media\_attachments/files/022/345/792/original/57859aede991da25.jpeg",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/345/792/small/57859aede991da25.jpeg",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/2N4uvkuUtPVrkZGysms",
 "meta": {
 "original": {
 "width": 640,
 "height": 480,
 "size": "640x480",
 "aspect": 1.3333333333333333
 },
 "small": {
 "width": 461,
 "height": 346,
 "size": "461x346",
 "aspect": 1.3323699421965318
 },
 "focus": {
 "x": -0.27,
 "y": 0.51
 }
 },
 "description": "test media description",
 "blurhash": "UFBWY:8\_0Jxv4mx]t8t64.%M-:IUWGWAt6M}"
}

```
## Video

```
{
 "id": "22546306",
 "type": "video",
 "url": "https://files.mastodon.social/media\_attachments/files/022/546/306/original/dab9a597f68b9745.mp4",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/022/546/306/small/dab9a597f68b9745.png",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/wWd1HJIBmH1MZGDfg50",
 "meta": {
 "length": "0:01:28.65",
 "duration": 88.65,
 "fps": 24,
 "size": "1280x720",
 "width": 1280,
 "height": 720,
 "aspect": 1.7777777777777777,
 "audio\_encode": "aac (LC) (mp4a / 0x6134706D)",
 "audio\_bitrate": "44100 Hz",
 "audio\_channels": "stereo",
 "original": {
 "width": 1280,
 "height": 720,
 "frame\_rate": "6159375/249269",
 "duration": 88.654,
 "bitrate": 862056
 },
 "small": {
 "width": 400,
 "height": 225,
 "size": "400x225",
 "aspect": 1.7777777777777777
 }
 },
 "description": null,
 "blurhash": "U58E0g8\_0M.94T?bIr00?bD%NGoM?bD%oLt7"
}

```
## GIFV

```
{
 "id": "21130559",
 "type": "gifv",
 "url": "https://files.mastodon.social/media\_attachments/files/021/130/559/original/bc84838f77991326.mp4",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/021/130/559/small/bc84838f77991326.png",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/2ICiasGyjezmi7cQYM8",
 "meta": {
 "length": "0:00:01.11",
 "duration": 1.11,
 "fps": 33,
 "size": "600x332",
 "width": 600,
 "height": 332,
 "aspect": 1.8072289156626506,
 "original": {
 "width": 600,
 "height": 332,
 "frame\_rate": "100/3",
 "duration": 1.11,
 "bitrate": 1627639
 },
 "small": {
 "width": 400,
 "height": 221,
 "size": "400x221",
 "aspect": 1.8099547511312217
 }
 },
 "description": null,
 "blurhash": "URHT%Jm,2a1d%MRO%LozkrNH$\*n\*oMn$Rjt7"
}

```
## Audio

```
{
 "id": "21165404",
 "type": "audio",
 "url": "https://files.mastodon.social/media\_attachments/files/021/165/404/original/a31a4a46cd713cd2.mp3",
 "preview\_url": "https://files.mastodon.social/media\_attachments/files/021/165/404/small/a31a4a46cd713cd2.mp3",
 "remote\_url": null,
 "text\_url": "https://mastodon.social/media/5O4uILClVqBWx0NNgvo",
 "meta": {
 "length": "0:06:42.86",
 "duration": 402.86,
 "audio\_encode": "mp3",
 "audio\_bitrate": "44100 Hz",
 "audio\_channels": "stereo",
 "original": {
 "duration": 402.860408,
 "bitrate": 166290
 }
 },
 "description": null,
 "blurhash": null
}

```
## Attributes

## `id`

**Description:** The ID of the attachment in the database.  
**Type:** String (cast from an integer but not guaranteed to be a number)  
**Version history:**  
0.6.0 - added

## `type`

**Description:** The type of the attachment.  
**Type:** String (Enumerable, oneOf)  
`unknown` = unsupported or unrecognized file type  
`image` = Static image  
`gifv` = Looping, soundless animation  
`video` = Video clip  
`audio` = Audio track  
**Version history:**  
0.6.0 - added  
2.9.1 - added `audio`

## `url`

**Description:** The location of the original full-size attachment.  
**Type:** String (URL)  
**Version history:**  
0.6.0 - added

## `preview_url`

**Description:** The location of a scaled-down preview of the attachment.  
**Type:** nullable String (URL)  
**Version history:**  
0.6.0 - added

## `remote_url`

**Description:** The location of the full-size original attachment on the remote website.  
**Type:** nullable String (URL), or null if the attachment is local  
**Version history:**  
0.6.0 - added

## `meta`

**Description:** Metadata returned by Paperclip.  
**Type:** Hash  
**Version history:**  
1.5.0 - added  
2.3.0 - added `meta.focus`

May contain subtrees `small` and `original`, as well as various other top-level properties.

More importantly, there may be another top-level `focus` Hash object on images as of 2.3.0, with coordinates can be used for smart thumbnail cropping – see [Focal points for cropped media thumbnails](/api/guidelines/#focal-points) for more.

## `description`

**Description:** Alternate text that describes what is in the media attachment, to be used for the visually impaired or when media attachments do not load.  
**Type:** nullable String, or null if alternate text was not provided for the media attachment  
**Version history:**  
2.0.0 - added

## `blurhash`

**Description:** A hash computed by [the BlurHash algorithm](https://github.com/woltapp/blurhash), for generating colorful preview thumbnails when media has not been downloaded yet.  
**Type:** nullable String (Blurhash)  
**Version history:**  
2.8.1 - added

## `text_url` removed

**Description:** A shorter URL for the attachment.  
**Type:** String (URL)  
**Version history:**  
0.6.0 - added  
3.5.0 - removed

## See also

[Status (`media_attachments` attribute)](/entities/Status/#media_attachments)[media API methods](/methods/media/)[app/serializers/rest/media\_attachment\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/media_attachment_serializer.rb)Last updated March 24, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/MediaAttachment.md)

---


# Notification

Source: https://docs.joinmastodon.org/entities/Notification/

# Notification

Represents a notification of an event relevant to the user.

## Attributes

## `id`

**Description:** The id of the notification in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
0.9.9 - added

## `type`

**Description:** The type of event that resulted in the notification.  
**Type:** String (Enumerable oneOf)  
`mention` = Someone mentioned you in their status  
`status` = Someone you enabled notifications for has posted a status  
`reblog` = Someone boosted one of your statuses  
`follow` = Someone followed you  
`follow_request` = Someone requested to follow you  
`favourite` = Someone favourited one of your statuses  
`poll` = A poll you have voted in or created has ended  
`update` = A status you reblogged has been edited  
`admin.sign_up` = Someone signed up (optionally sent to admins)  
`admin.report` = A new report has been filed  
`severed_relationships` = Some of your follow relationships have been severed as a result of a moderation or block event  
`moderation_warning` = A moderator has taken action against your account or has sent you a warning  
**Version history:**  
0.9.9 - added  
2.8.0 - added `poll`  
3.1.0 - added `follow_request`  
3.3.0 - added `status`  
3.5.0 - added `update` and `admin.sign_up`  
4.0.0 - added `admin.report`  
4.3.0 - added `severed_relationships` and `moderation_warning`

## `group_key`

**Description:** Group key shared by similar notifications, to be used in the grouped notifications feature. Should be considered opaque, but ungrouped notifications can be assumed to have a `group_key` of the form `ungrouped-{notification_id}`.
**Type:** String  
**Version history:**  
4.3.0 - added

## `created_at`

**Description:** The timestamp of the notification.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
0.9.9 - added

## `account`

**Description:** The account that performed the action that generated the notification.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
0.9.9 - added

## `status` optional

**Description:** Status that was the object of the notification. Attached when `type` of the notification is `favourite`, `reblog`, `status`, `mention`, `poll`, or `update`.  
**Type:** [Status](/entities/Status/)  
**Version history:**  
0.9.9 - added

## `report` optional

**Description:** Report that was the object of the notification. Attached when `type` of the notification is `admin.report`.  
**Type:** [Report](/entities/Report/)  
**Version history:**  
4.0.0 - added

## `event` optional

**Description:** Summary of the event that caused follow relationships to be severed. Attached when `type` of the notification is `severed_relationships`.  
**Type:** [RelationshipSeveranceEvent](/entities/RelationshipSeveranceEvent/)  
**Version history:**  
4.3.0 - added

## `moderation_warning` optional

**Description:** Moderation warning that caused the notification. Attached when `type` of the notification is `moderation_warning`.  
**Type:** [AccountWarning](/entities/AccountWarning/)  
**Version history:**  
4.3.0 - added

## Examples

## Mention

```

 {
 "id": "34975861",
 "type": "mention",
 "created\_at": "2019-11-23T07:49:02.064Z",
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 "status": {
 "id": "103186126728896492",
 "created\_at": "2019-11-23T07:49:01.940Z",
 "in\_reply\_to\_id": "103186038209478945",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 }
 }

```
## Favourite

```
 {
 "id": "34975535",
 "type": "favourite",
 "created\_at": "2019-11-23T07:29:18.903Z",
 "account": {
 "id": "297420",
 "username": "haskal",
 "acct": "haskal@cybre.space",
 // ...
 },
 "status": {
 "id": "103186046267791694",
 "created\_at": "2019-11-23T07:28:34.210Z",
 // ...
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 // ...
 },
 // ...
 }
 }

```
## See also

[notifications API methods](/methods/notifications/)[app/serializers/rest/notification\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/notification_serializer.rb)Last updated January 3, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Notification.md)

---


# NotificationPolicy

Source: https://docs.joinmastodon.org/entities/NotificationPolicy/

# NotificationPolicy

Represents the notification filtering policy of the user.

## Attributes

## `for_not_following`

**Description:** Whether to `accept`, `filter` or `drop` notifications from accounts the user is not following. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.  
**Type:** String (one of `accept`, `filter` or `drop`)  
**Version history:**  
4.3.0 - added

## `for_not_followers`

**Description:** Whether to `accept`, `filter` or `drop` notifications from accounts that are not following the user. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.  
**Type:** String (one of `accept`, `filter` or `drop`)  
**Version history:**  
4.3.0 - added

## `for_new_accounts`

**Description:** Whether to `accept`, `filter` or `drop` notifications from accounts created in the past 30 days. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.  
**Type:** String (one of `accept`, `filter` or `drop`)  
**Version history:**  
4.3.0 - added

## `for_private_mentions`

**Description:** Whether to `accept`, `filter` or `drop` notifications from private mentions. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing. Replies to private mentions initiated by the user, as well as accounts the user follows, are always allowed, regardless of this value.  
**Type:** String (one of `accept`, `filter` or `drop`)  
**Version history:**  
4.3.0 - added

## `for_limited_accounts`

**Description:** Whether to `accept`, `filter` or `drop` notifications from accounts that were limited by a moderator. `drop` will prevent creation of the notification object altogether (without preventing the underlying activity), `filter` will cause it to be marked as filtered, and `accept` will not affect its processing.
**Type:** String (one of `accept`, `filter` or `drop`)  
**Version history:**  
4.3.0 - added

## `summary`

**Description:** Summary of the filtered notifications
**Type:** Hash  
**Version history:**  
4.3.0 - added

## `summary[pending_requests_count]`

**Description:** Number of different accounts from which the user has non-dismissed filtered notifications. Capped at 100.
**Type:** Integer  
**Version history:**  
4.3.0 - added

## `summary[pending_notifications_count]`

**Description:** Number of total non-dismissed filtered notifications. May be inaccurate.
**Type:** Integer  
**Version history:**  
4.3.0 - added

## Example

```

{
 "for\_not\_following": "accept",
 "for\_not\_followers": "accept",
 "for\_new\_accounts": "accept",
 "for\_private\_mentions": "drop",
 "for\_limited\_accounts": "filter",
 "summary": {
 "pending\_requests\_count": 0,
 "pending\_notifications\_count": 0
 }
}

```
## See also

[notifications API methods](/methods/notifications/)[app/serializers/rest/notification\_policy\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/notification_policy_serializer.rb)Last updated August 22, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/NotificationPolicy.md)

---


# NotificationRequest

Source: https://docs.joinmastodon.org/entities/NotificationRequest/

# NotificationRequest

Represents a group of filtered notifications from a specific user.

## Attributes

## `id`

**Description:** The id of the notification request in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.3.0 - added

## `created_at`

**Description:** The timestamp of the notification request, i.e. when the first filtered notification from that user was created.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.3.0 - added

## `updated_at`

**Description:** The timestamp of when the notification request was last updated.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.3.0 - added

## `account`

**Description:** The account that performed the action that generated the filtered notifications.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
4.3.0 - added

## `notifications_count`

**Description:** How many of this account’s notifications were filtered.  
**Type:** String  
**Version history:**  
4.3.0 - added

## `last_status` optional

**Description:** Most recent status associated with a filtered notification from that account.  
**Type:** [Status](/entities/Status/)  
**Version history:**  
4.3.0 - added

## Example

```

{
 "id": "112456967201894256",
 "created\_at": "2024-05-17T14:45:41.171Z",
 "updated\_at": "2024-05-17T14:45:41.171Z",
 "notifications\_count": "1",
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 "last\_status": {
 "id": "103186126728896492",
 "created\_at": "2019-11-23T07:49:01.940Z",
 "in\_reply\_to\_id": "103186038209478945",
 "in\_reply\_to\_account\_id": "14715",
 // ...
 "content": "<p><span class=\"h-card\"><a href=\"https://mastodon.social/@trwnh\" class=\"u-url mention\">@<span>trwnh</span></a></span> sup!</p>",
 // ...
 "account": {
 "id": "971724",
 "username": "zsc",
 "acct": "zsc",
 // ...
 },
 // ...
 "mentions": [
 {
 "id": "14715",
 "username": "trwnh",
 "url": "https://mastodon.social/@trwnh",
 "acct": "trwnh"
 }
 ],
 // ...
 }
}

```
## See also

[notifications API methods](/methods/notifications/)[app/serializers/rest/notification\_request\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/notification_request_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/NotificationRequest.md)

---


# Poll

Source: https://docs.joinmastodon.org/entities/Poll/

# Poll

Represents a poll attached to a status.

## Example

```
{
 "id": "34830",
 "expires\_at": "2019-12-05T04:05:08.302Z",
 "expired": true,
 "multiple": false,
 "votes\_count": 10,
 "voters\_count": null,
 "voted": true,
 "own\_votes": [
 1
 ],
 "options": [
 {
 "title": "accept",
 "votes\_count": 6
 },
 {
 "title": "deny",
 "votes\_count": 4
 }
 ],
 "emojis": []
}

```
## Attributes

## `id`

**Description:** The ID of the poll in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.8.0 - added

## `expires_at`

**Description:** When the poll ends.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)), or null if the poll does not end  
**Version history:**  
2.8.0 - added

## `expired`

**Description:** Is the poll currently expired?  
**Type:** Boolean  
**Version history:**  
2.8.0 - added

## `multiple`

**Description:** Does the poll allow multiple-choice answers?  
**Type:** Boolean  
**Version history:**  
2.8.0 - added

## `votes_count`

**Description:** How many votes have been received.  
**Type:** Integer  
**Version history:**  
2.8.0 - added

## `voters_count`

**Description:** How many unique accounts have voted on a multiple-choice poll.  
**Type:** nullable Integer, or null if `multiple` is false.  
**Version history:**  
2.8.0 - added

## `options`

**Description:** Possible answers for the poll.  
**Type:** Array of [Poll::Option](/entities/Poll/#Option)  
**Version history:**  
2.8.0 - added

## `emojis`

**Description:** Custom emoji to be used for rendering poll options.  
**Type:** Array of [CustomEmoji](/entities/CustomEmoji/)  
**Version history:**  
2.8.0 - added

## `voted` optional

**Description:** When called with a user token, has the authorized user voted?  
**Type:** Boolean  
**Version history:**  
2.8.0 - added

## `own_votes` optional

**Description:** When called with a user token, which options has the authorized user chosen? Contains an array of index values for `options`.  
**Type:** Array of Integer  
**Version history:**  
2.8.0 - added

## Poll::Option attributes

## `title`

**Description:** The text value of the poll option.  
**Type:** String  
**Version history:**  
2.8.0 - added

## `votes_count`

**Description:** The total number of received votes for this option.  
**Type:** nullable Integer, or null if results are not published yet.  
**Version history:**  
2.8.0 - added

## See also

[Status (`poll` attribute)](/entities/Status/#poll)[polls API methods](/methods/polls/)[app/serializers/rest/poll\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/poll_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Poll.md)

---


# Preferences

Source: https://docs.joinmastodon.org/entities/Preferences/

# Preferences

Represents a user's preferences.

## Example

```
{
 "posting:default:visibility": "public",
 "posting:default:sensitive": false,
 "posting:default:language": null,
 "reading:expand:media": "default",
 "reading:expand:spoilers": false
}

```
## Attributes

## `posting:default:visibility`

**Description:** Default visibility for new posts. Equivalent to [CredentialAccount#source[privacy]](/entities/Account/#source-privacy).  
**Type:** String (Enumerable, oneOf)  
`public` = Public post  
`unlisted` = Unlisted post  
`private` = Followers-only post  
`direct` = Direct post  
**Version history:**  
2.8.0 - added

## `posting:default:sensitive`

**Description:** Default sensitivity flag for new posts. Equivalent to [CredentialAccount#source[sensitive]](/entities/Account/#source-sensitive).  
**Type:** Boolean  
**Version history:**  
2.8.0 - added

## `posting:default:language`

**Description:** Default language for new posts. Equivalent to [CredentialAccount#source[language]](/entities/Account/#source-language)  
**Type:** nullable String (ISO 639-1 language two-letter code), or null  
**Version history:**  
2.8.0 - added

## `reading:expand:media`

**Description:** Whether media attachments should be automatically displayed or blurred/hidden.  
**Type:** String (Enumerable, oneOf)  
`default` = Hide media marked as sensitive  
`show_all` = Always show all media by default, regardless of sensitivity  
`hide_all` = Always hide all media by default, regardless of sensitivity  
**Version history:**  
2.8.0 - added

## `reading:expand:spoilers`

**Description:** Whether CWs should be expanded by default.  
**Type:** Boolean  
**Version history:**  
2.8.0 - added

## See also

[preferences API methods](/methods/preferences/)[app/serializers/rest/preferences\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/preferences_serializer.rb)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Preferences.md)

---


# PreviewCard

Source: https://docs.joinmastodon.org/entities/PreviewCard/

# PreviewCard

Represents a rich preview card that is generated using OpenGraph tags from a URL.

## Examples

## Video

```
{
 "url": "https://www.youtube.com/watch?v=OMv\_EPMED8Y",
 "title": "♪ Brand New Friend (Christmas Song!)",
 "description": "",
 "type": "video",
 "author\_name": "YOGSCAST Lewis & Simon",
 "author\_url": "https://www.youtube.com/user/BlueXephos",
 "provider\_name": "YouTube",
 "provider\_url": "https://www.youtube.com/",
 "html": "<iframe width=\"480\" height=\"270\" src=\"https://www.youtube.com/embed/OMv\_EPMED8Y?feature=oembed\" frameborder=\"0\" allowfullscreen=\"\"></iframe>",
 "width": 480,
 "height": 270,
 "image": "https://files.mastodon.social/preview\_cards/images/014/179/145/original/9cf4b7cf5567b569.jpeg",
 "embed\_url": "",
 "blurhash": "UvK0HNkV,:s9xBR%njog0fo2W=WBS5ozofV@"
}

```
## Photo

```
{
 "url": "https://www.flickr.com/photos/tomfenskephotography/49088768431/",
 "title": "Oregon",
 "description": "",
 "type": "photo",
 "author\_name": "Tom Fenske Photography",
 "author\_url": "https://www.flickr.com/photos/tomfenskephotography/",
 "provider\_name": "Flickr",
 "provider\_url": "https://www.flickr.com/",
 "html": "",
 "width": 1024,
 "height": 427,
 "image": "https://files.mastodon.social/preview\_cards/images/014/287/139/original/651b1c6976817824.jpeg",
 "embed\_url": "https://live.staticflickr.com/65535/49088768431\_6a4322b3bb\_b.jpg",
 "blurhash": "UnE{@jt6M\_oIAhjYs+ayT2WBf9ayRkkDXAj["
}

```
## Link

```
{
 "url": "https://www.theguardian.com/money/2019/dec/07/i-lost-my-193000-inheritance-with-one-wrong-digit-on-my-sort-code",
 "title": "‘I lost my £193,000 inheritance – with one wrong digit on my sort code’",
 "description": "When Peter Teich’s money went to another Barclays customer, the bank offered £25 as a token gesture",
 "type": "link",
 "authors": [],
 "author\_name": "",
 "author\_url": "",
 "provider\_name": "",
 "provider\_url": "",
 "html": "",
 "width": 0,
 "height": 0,
 "image": null,
 "embed\_url": "",
 "blurhash": null
}

```
## Attributes

## `url`

**Description:** Location of linked resource.  
**Type:** String (URL)  
**Version history:**  
1.0.0 - added

## `title`

**Description:** Title of linked resource.  
**Type:** String  
**Version history:**  
1.0.0 - added

## `description`

**Description:** Description of preview.  
**Type:** String  
**Version history:**  
1.0.0 - added

## `type`

**Description:** The type of the preview card.  
**Type:** String (Enumerable, oneOf)  
`link` = Link OEmbed  
`photo` = Photo OEmbed  
`video` = Video OEmbed  
`rich` = iframe OEmbed. Not currently accepted, so won’t show up in practice.  
**Version history:**  
1.3.0 - added

## `authors`

**Description:** Fediverse account of the authors of the original resource.  
**Type:** Array of [PreviewCardAuthor](/entities/PreviewCardAuthor/)  
**Version history:**  
4.3.0 - added

## `author_name`

**Description:** The author of the original resource. Deprecated since 4.3.0, clients should use `authors` instead.  
**Type:** String  
**Version history:**  
1.3.0 - added  
4.3.0 - deprecated

## `author_url`

**Description:** A link to the author of the original resource. Deprecated since 4.3.0, clients should use `authors` instead.  
**Type:** String (URL)  
**Version history:**  
1.3.0 - added  
4.3.0 - deprecated

## `provider_name`

**Description:** The provider of the original resource.  
**Type:** String  
**Version history:**  
1.3.0 - added

## `provider_url`

**Description:** A link to the provider of the original resource.  
**Type:** String (URL)  
**Version history:**  
1.3.0 - added

## `html`

**Description:** HTML to be used for generating the preview card.  
**Type:** String (HTML)  
**Version history:**  
1.3.0 - added

## `width`

**Description:** Width of preview, in pixels.  
**Type:** Integer  
**Version history:**  
1.3.0 - added

## `height`

**Description:** Height of preview, in pixels.  
**Type:** Integer  
**Version history:**  
1.3.0 - added

## `image`

**Description:** Preview thumbnail.  
**Type:** nullable String (URL)  
**Version history:**  
1.0.0 - added

## `embed_url`

**Description:** Used for photo embeds, instead of custom `html`.  
**Type:** String (URL)  
**Version history:**  
2.1.0 - added

## `blurhash`

**Description:** A hash computed by [the BlurHash algorithm](https://github.com/woltapp/blurhash), for generating colorful preview thumbnails when media has not been downloaded yet.  
**Type:** nullable String  
**Version history:**  
3.2.0 - added

## Trends::Link entity attributes

```
{
 "url": "https://www.nbcnews.com/specials/plan-your-vote-2022-elections/index.html",
 "title": "Plan Your Vote: 2022 Elections",
 "description": "Everything you need to know about the voting rules where you live, including registration, mail-in voting, changes since 2020, and more.",
 "type": "link",
 "author\_name": "NBC News",
 "author\_url": "",
 "provider\_name": "NBC News",
 "provider\_url": "",
 "html": "",
 "width": 400,
 "height": 225,
 "image": "https://files.mastodon.social/cache/preview\_cards/images/045/027/478/original/0783d5e91a14fd49.jpeg",
 "embed\_url": "",
 "blurhash": "UcQmF#ay~qofj[WBj[j[~qof9Fayofofayay",
 "history": [
 {
 "day": "1661817600",
 "accounts": "7",
 "uses": "7"
 },
 {
 "day": "1661731200",
 "accounts": "23",
 "uses": "23"
 },
 {
 "day": "1661644800",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661558400",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661472000",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661385600",
 "accounts": "0",
 "uses": "0"
 },
 {
 "day": "1661299200",
 "accounts": "0",
 "uses": "0"
 }
 ]
}

```
## `history`

**Description:** Usage statistics for given days (typically the past week).  
**Type:** Array of Hash  
**Version history:**  
3.5.0 - added

## `history[][day]`

**Description:** UNIX timestamp on midnight of the given day.  
**Type:** String (UNIX timestamp)  
**Version history:**  
3.5.0 - added

## `history[][accounts]`

**Description:** The counted accounts using the link within that day.  
**Type:** String (cast from an integer)  
**Version history:**  
3.5.0 - added

## `history[][uses]`

**Description:** The counted statuses using the link within that day.  
**Type:** String (cast from an integer)  
**Version history:**  
3.5.0 - added

## See also

[Status (`card` attribute)](/entities/Status/#card)[app/serializers/rest/preview\_card\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/preview_card_serializer.rb)[app/serializers/rest/trends/link\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/trends/link_serializer.rb)[app/models/trends/links.rb](https://github.com/mastodon/mastodon/blob/main/app/models/trends/links.rb)Last updated August 23, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/PreviewCard.md)

---


# PreviewCardAuthor

Source: https://docs.joinmastodon.org/entities/PreviewCardAuthor/

# PreviewCardAuthor

Represents an author in a rich preview card.

## Attributes

## `name`

**Description:** The original resource author’s name. Replaces the deprecated `author_name` attribute of the preview card.  
**Type:** String  
**Version history:**  
4.3.0 - added

## `url`

**Description:** A link to the author of the original resource. Replaces the deprecated `author_url` attribute of the preview card.  
**Type:** String (URL)  
**Version history:**  
4.3.0 - added

## `account` nullable

**Description:** The fediverse account of the author.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
4.3.0 - added

## See also

[PreviewCard (`authors` attribute)](/entities/PreviewCard/#authors)[app/serializers/rest/preview\_card\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/preview_card_serializer.rb)Last updated August 23, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/PreviewCardAuthor.md)

---


# PrivacyPolicy

Source: https://docs.joinmastodon.org/entities/PrivacyPolicy/

# PrivacyPolicy

Represents the privacy policy of the instance.

## Example

```
{
 "updated\_at": "2022-10-07T00:00:00+00:00",
 "content": "<p>This privacy policy describes how example.com (&quot;example.com&quot;, &quot;we&quot;, &quot;us&quot;) collects,\nprotects and uses the personally identifiable information you may provide\nthrough the example.com website or its API.</p>\n\n<h1>What information do we collect?</h1>\n\n<ul>\n<li><strong>Basic account information</strong>: If you register on this server, you may be\nasked to enter a username, an e-mail address and a password.</li>\n<li><strong>Posts, following and other public information</strong>: The list of people you\nfollow is listed publicly, the same is true for your followers.</li>\n<li><strong>Direct and followers-only posts</strong>: All posts are stored and processed on the\nserver. You may\ntoggle an option to approve and reject new followers manually in the settings.\n<strong>Please keep in mind that the operators of the server and any receiving\nserver may view such messages</strong>, and that recipients may screenshot, copy or\notherwise re-share them. <strong>Do not share any sensitive information over\nMastodon.</strong></li>\n<li><strong>IPs and other metadata</strong>: When you log in, we record the IP address you log\nin from, as well as the name of your browser application.</li>\n</ul>\n\n<hr>\n\n<p>This document is CC-BY-SA. Originally adapted from the <a href=\"https://github.com/discourse/discourse\">Discourse privacy\npolicy</a>.</p>\n"
}

```
## Attributes

## `updated_at`

**Description:** A timestamp of when the privacy policy was last updated.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## `content`

**Description:** The rendered HTML content of the privacy policy.  
**Type:** String (HTML)  
**Version history:**  
4.0.0 - added

## See also

[GET /api/v1/instance/privacy\_policy](/methods/instance/#privacy_policy)[app/serializers/rest/privacy\_policy\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/privacy_policy_serializer.rb)Last updated February 5, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/PrivacyPolicy.md)

---


# Reaction

Source: https://docs.joinmastodon.org/entities/Reaction/

# Reaction

Represents an emoji reaction to an Announcement.

## Example

```
[
 {
 "name": "bongoCat",
 "count": 9,
 "me": false,
 "url": "https://files.mastodon.social/custom\_emojis/images/000/067/715/original/fdba57dff7576d53.png",
 "static\_url": "https://files.mastodon.social/custom\_emojis/images/000/067/715/static/fdba57dff7576d53.png"
 },
 {
 "name": "🤔",
 "count": 1,
 "me": true
 }
]

```
## Attributes

## `name`

**Description:** The emoji used for the reaction. Either a unicode emoji, or a custom emoji’s shortcode.  
**Type:** String  
**Version history:**  
3.1.0 - added

## `count`

**Description:** The total number of users who have added this reaction.  
**Type:** Integer  
**Version history:**  
3.1.0 - added

## `me` optional

**Description:** If there is a currently authorized user: Have you added this reaction?  
**Type:** Boolean  
**Version history:**  
3.1.0 - added

## `url` optional

**Description:** If the reaction is a custom emoji: A link to the custom emoji.  
**Type:** String (URL)  
**Version history:**  
3.1.0 - added

## `static_url` optional

**Description:** If the reaction is a custom emoji: A link to a non-animated version of the custom emoji.  
**Type:** String (URL)  
**Version history:**  
3.1.0 - added

## See also

[Add a reaction to an announcement](/methods/announcements/#put-reactions)[Delete a reaction from an announcement](/methods/announcements/#delete-reactions)[app/serializers/rest/reaction\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/reaction_serializer.rb)Last updated September 20, 2023 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Reaction.md)

---


# Relationship

Source: https://docs.joinmastodon.org/entities/Relationship/

# Relationship

Represents the relationship between accounts, such as following / blocking / muting / etc.

## Example

```
{
 "id": "1",
 "following": true,
 "showing\_reblogs": true,
 "notifying": false,
 "followed\_by": true,
 "blocking": false,
 "blocked\_by": false,
 "muting": false,
 "muting\_notifications": false,
 "requested": false,
 "requested\_by": false,
 "domain\_blocking": false,
 "endorsed": false,
 "note": ""
}

```
## Attributes

## `id`

**Description:** The account ID.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
0.6.0 - added

## `following`

**Description:** Are you following this user?  
**Type:** Boolean  
**Version history:**  
0.6.0 - added

## `showing_reblogs`

**Description:** Are you receiving this user’s boosts in your home timeline?  
**Type:** Boolean  
**Version history:**  
2.1.0 - added

## `notifying`

**Description:** Have you enabled notifications for this user?  
**Type:** Boolean  
**Version history:**  
3.3.0 - added

## `languages`

**Description:** Which languages are you following from this user?  
**Type:** Array of String (ISO 639-1 language two-letter code)  
**Version history:**  
4.0.0 - added

## `followed_by`

**Description:** Are you followed by this user?  
**Type:** Boolean  
**Version history:**  
0.6.0 - added

## `blocking`

**Description:** Are you blocking this user?  
**Type:** Boolean  
**Version history:**  
0.6.0 - added

## `blocked_by`

**Description:** Is this user blocking you?  
**Type:** Boolean  
**Version history:**  
2.8.0 - added

## `muting`

**Description:** Are you muting this user?  
**Type:** Boolean  
**Version history:**  
1.1.0 - added

## `muting_notifications`

**Description:** Are you muting notifications from this user?  
**Type:** Boolean  
**Version history:**  
2.1.0 - added

## `requested`

**Description:** Do you have a pending follow request for this user?  
**Type:** Boolean  
**Version history:**  
0.9.9 - added

## `requested_by`

**Description:** Has this user requested to follow you?  
**Type:** Boolean  
**Version history:**  
4.1.0 - added

## `domain_blocking`

**Description:** Are you blocking this user’s domain?  
**Type:** Boolean  
**Version history:**  
1.4.0 - added

## `endorsed`

**Description:** Are you featuring this user on your profile?  
**Type:** Boolean  
**Version history:**  
2.5.0 - added

## `note`

**Description:** This user’s profile bio  
**Type:** String  
**Version history:**  
3.2.0 - added

## See also

[GET /api/v1/accounts/relationships](/methods/accounts/#relationships)[app/serializers/rest/relationship\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/relationship_serializer.rb)Last updated January 7, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Relationship.md)

---


# RelationshipSeveranceEvent

Source: https://docs.joinmastodon.org/entities/RelationshipSeveranceEvent/

# RelationshipSeveranceEvent

Summary of a moderation or block event that caused follow relationships to be severed.

## Attributes

## `id`

**Description:** The ID of the relationship severance event in the database.  
**Type:** String (cast from integer)  
**Version history:**  
4.3.0 - added

## `type`

**Description:** Type of event.  
**Type:** String (Enumerable oneOf)  
`domain_block` = A moderator suspended a whole domain  
`user_domain_block` = The user blocked a whole domain  
`account_suspension` = A moderator suspended a specific account  
**Version history:**  
4.3.0 - added

## `purged`

**Description:** Whether the list of severed relationships is unavailable because the underlying issue has been purged.  
**Type:** Boolean  
**Version history:**  
4.3.0 - added

## `target_name`

**Description:** Name of the target of the moderation/block event. This is either a domain name or a user handle, depending on the event type.  
**Type:** String  
**Version history:**  
4.3.0 - added

## `followers_count`

**Description:** Number of followers that were removed as result of the event.  
**Type:** Integer  
**Version history:**  
4.3.0 - added

## `following_count`

**Description:** Number of accounts the user stopped following as result of the event.  
**Type:** Integer  
**Version history:**  
4.3.0 - added

## `created_at`

**Description:** When the event took place.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.3.0 - added

Last updated December 18, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/RelationshipSeveranceEvent.md)

---


# Report

Source: https://docs.joinmastodon.org/entities/Report/

# Report

Reports filed against users and/or statuses, to be taken action on by moderators.

## Example

```
{
 "id": "48914",
 "action\_taken": false,
 "action\_taken\_at": null,
 "category": "spam",
 "comment": "Spam account",
 "forwarded": false,
 "created\_at": "2022-08-25T09:56:16.763Z",
 "status\_ids": [
 "108882889550545820"
 ],
 "rule\_ids": null,
 "target\_account": {
 "id": "108366849347798387",
 "username": "Baluke",
 "acct": "Baluke",
 "display\_name": "Baluke Dental Studios",
 "locked": false,
 "bot": false,
 "discoverable": false,
 "group": false,
 "created\_at": "2022-05-26T00:00:00.000Z",
 "note": "<p>Baluke Dental Studios is a full service dental lab offering fabrication, staining, and digital services. Advanced technologies and a meticulous process ensure reduced chair time, lower costs, and better patient outcomes with beautiful smiles. Talk to a representative today.</p><p><a href=\"https://baluke.com/\" target=\"\_blank\" rel=\"nofollow noopener noreferrer\"><span class=\"invisible\">https://</span><span class=\"\">baluke.com/</span><span class=\"invisible\"></span></a></p>",
 "url": "https://mastodon.social/@Baluke",
 "avatar": "https://files.mastodon.social/accounts/avatars/108/366/849/347/798/387/original/dbcfe99ed5def0f4.png",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/108/366/849/347/798/387/original/dbcfe99ed5def0f4.png",
 "header": "https://static-cdn.mastodon.social/headers/original/missing.png",
 "header\_static": "https://static-cdn.mastodon.social/headers/original/missing.png",
 "followers\_count": 0,
 "following\_count": 0,
 "statuses\_count": 38,
 "last\_status\_at": "2022-08-25",
 "emojis": [],
 "fields": []
 }
}

```
## Attributes

## `id`

**Description:** The ID of the report in the database.  
**Type:** String (cast from integer)  
**Version history:**  
1.1.0 - added

## `action_taken`

**Description:** Whether an action was taken yet.  
**Type:** Boolean  
**Version history:**  
1.1.0 - added

## `action_taken_at`

**Description:** When an action was taken against the report.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)) or null  
**Version history:**  
4.0.0 - added

## `category`

**Description:** The generic reason for the report.  
**Type:** String (Enumerable oneOf)  
`spam` = Unwanted or repetitive content  
`violation` = A specific rule was violated  
`other` = Some other reason  
**Version history:**  
4.0.0 - added

## `comment`

**Description:** The reason for the report.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `forwarded`

**Description:** Whether the report was forwarded to a remote domain.  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## `created_at`

**Description:** When the report was created.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
4.0.0 - added

## `status_ids`

**Description:** IDs of statuses that have been attached to this report for additional context.  
**Type:** nullable Array of String (cast from integer), or null  
**Version history:**  
4.0.0 - added

## `rule_ids`

**Description:** IDs of the rules that have been cited as a violation by this report.  
**Type:** nullable Array of String (cast from integer), or null  
**Version history:**  
4.0.0 - added

## `target_account`

**Description:** The account that was reported.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
4.0.0 - added

## See also

[reports API methods](/methods/reports/)[Notification (`report` attribute)](/entities/Notification/#report)[app/serializers/rest/report\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/report_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Report.md)

---


# Role

Source: https://docs.joinmastodon.org/entities/Role/

# Role

Represents a custom user role that grants permissions.

## Example

```
{
 "id": "3",
 "name": "Owner",
 "color": "#ff3838",
 "permissions": "1048575",
 "highlighted": true
}

```
## Attributes

## `id`

**Description:** The ID of the Role in the database.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `name`

**Description:** The name of the role.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `color`

**Description:** The hex code assigned to this role. If no hex code is assigned, the string will be empty.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `permissions`

**Description:** A bitmask that represents the sum of all permissions granted to the role.  
**Type:** String  
**Version history:**  
4.0.0 - added

## `highlighted`

**Description:** Whether the role is publicly visible as a badge on user profiles.  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## Permission flags

To determine the permissions available to a certain role, convert the `permissions` attribute to binary and compare from the least significant bit upwards. For convenience (and to prevent the terms from growing too long), permissions will be presented below using hexadecimal values.

0x1**Administrator**. Users with this permission bypass all permissions.0x2**Devops**. Allows users to access Sidekiq and PgHero dashboards.0x4**View Audit Log**. Allows users to see history of admin actions.0x8**View Dashboard**. Allows users to access the dashboard and various metrics.0x10**Manage Reports**. Allows users to review reports and perform moderation actions against them.0x20**Manage Federation**. Allows users to block or allow federation with other domains, and control deliverability.0x40**Manage Settings**. Allows users to change site settings.0x80**Manage Blocks**. Allows users to block e-mail providers and IP addresses.0x100**Manage Taxonomies**. Allows users to review trending content and update hashtag settings.0x200**Manage Appeals**. Allows users to review appeals against moderation actions.0x400**Manage Users**. Allows users to view other users’ details and perform moderation actions against them.0x800**Manage Invites**. Allows users to browse and deactivate invite links.0x1000**Manage Rules**. Allows users to change server rules.0x2000**Manage Announcements**. Allows users to manage announcements on the server.0x4000**Manage Custom Emojis**. Allows users to manage custom emojis on the server.0x8000**Manage Webhooks**. Allows users to set up webhooks for administrative events.0x10000**Invite Users**. Allows users to invite new people to the server.0x20000**Manage Roles**. Allows users to manage and assign roles below theirs.0x40000**Manage User Access**. Allows users to disable other users’ two-factor authentication, change their e-mail address, and reset their password.0x80000**Delete User Data**. Allows users to delete other users’ data without delay.## See also

[app/serializers/rest/role\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/role_serializer.rb)Last updated April 29, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Role.md)

---


# Rule

Source: https://docs.joinmastodon.org/entities/Rule/

# Rule

Represents a rule that server users should follow.

## Example

```
{
 "id": "2",
 "text": "No racism, sexism, homophobia, transphobia, ableism, xenophobia, or casteism.",
 "hint": "Transphobic behavior such as intentional misgendering and deadnaming is strictly prohibited. Promotion of \"conversion therapy\" is strictly prohibited. Criticism of governments and religions is permissible unless being used as a proxy for discrimination."
}

```
## Attributes

## `id`

**Description:** An identifier for the rule.  
**Type:** String (cast from integer, but not guaranteed to be a number)  
**Version history:**  
3.4.0 - added

## `text`

**Description:** The rule to be followed.  
**Type:** String  
**Version history:**  
3.4.0 - added

## `hint`

**Description:** Longer-form description of the rule.  
**Type:** String  
**Version history:**  
4.3.0 - added

## See also

[GET /api/v1/instance/rules](/methods/instance/#rules)[app/models/rule.rb](https://github.com/mastodon/mastodon/blob/main/app/models/rule.rb)[app/serializers/rest/rule\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/rule_serializer.rb)Last updated July 16, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Rule.md)

---


# ScheduledStatus

Source: https://docs.joinmastodon.org/entities/ScheduledStatus/

# ScheduledStatus

Represents a status that will be published at a future scheduled date.

## Example

Returned from `POST /api/v1/statuses?status=test post&scheduled_at=2022-09-29`

```
{
 "id": "1",
 "scheduled\_at": "2022-09-29T00:00:00.000Z",
 "params": {
 "text": "test post",
 "media\_ids": null,
 "sensitive": null,
 "spoiler\_text": null,
 "visibility": null,
 "language": null,
 "scheduled\_at": null,
 "poll": null,
 "idempotency": null,
 "with\_rate\_limit": false,
 "in\_reply\_to\_id": null,
 "application\_id": 3
 },
 "media\_attachments": []
}

```
Returned from `GET /api/v1/scheduled_statuses`:

```
{
 "id": "1",
 "scheduled\_at": "2022-09-29T00:00:00.000Z",
 "params": {
 "poll": null,
 "text": "test post",
 "language": null,
 "media\_ids": null,
 "sensitive": null,
 "visibility": null,
 "idempotency": null,
 "scheduled\_at": null,
 "spoiler\_text": null,
 "application\_id": 3,
 "in\_reply\_to\_id": null,
 "with\_rate\_limit": false
 },
 "media\_attachments": []
}

```
## Attributes

## `id`

**Description:** ID of the scheduled status in the database.  
**Type:** String (cast from an integer but not guaranteed to be a number)  
**Version history:**  
2.7.0 - added

## `scheduled_at`

**Description:** The timestamp for when the status will be posted.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
2.7.0 - added

## `params`

**Description:** The parameters that were used when scheduling the status, to be used when the status is posted.  
**Type:** Hash  
**Version history:**  
2.7.0 - added

## `params[text]`

**Description:** Text to be used as status content.  
**Type:** String  
**Version history:**  
2.7.0 - added

## `params[poll]`

**Description:** Poll to be attached to the status.  
**Type:** nullable Hash  
**Version history:**  
2.8.0 - added

## `params[poll][options[]]`

**Description:** The poll options to be used.  
**Type:** Array of String  
**Version history:**  
2.8.0 - added

## `params[poll][expires_in]`

**Description:** How many seconds the poll should last before closing.  
**Type:** String (cast from integer)  
**Version history:**  
2.8.0 - added

## `params[poll][multiple]`

**Description:** Whether the poll allows multiple choices.  
**Type:** optional Boolean  
**Version history:**  
2.8.0 - added

## `params[poll][hide_totals]`

**Description:** Whether the poll should hide total votes until after voting has ended.  
**Type:** optional Boolean  
**Version history:**  
2.8.0 - added

## `params[media_ids]`

**Description:** IDs of the MediaAttachments that will be attached to the status.  
**Type:** nullable Array of String  
**Version history:**  
2.7.0 - added

## `params[sensitive]`

**Description:** Whether the status will be marked as sensitive.  
**Type:** nullable Boolean  
**Version history:**  
2.7.0 - added

## `params[spoiler_text]`

**Description:** The text of the content warning or summary for the status.  
**Type:** nullable String  
**Version history:**  
2.7.0 - added

## `params[visibility]`

**Description:** The visibility that the status will have once it is posted.  
**Type:** String (Enumerable oneOf)  
`public` = Visible to everyone, shown in public timelines.  
`unlisted` = Visible to public, but not included in public timelines.  
`private` = Visible to followers only, and to any mentioned users.  
`direct` = Visible only to mentioned users.  
**Version history:**  
2.7.0 - added

## `params[in_reply_to_id]`

**Description:** ID of the Status that will be replied to.  
**Type:** nullable Integer  
**Version history:**  
2.7.0 - added

## `params[language]`

**Description:** The language that will be used for the status.  
**Type:** nullable String (ISO 639-1 two-letter language code)  
**Version history:**  
2.7.0 - added

## `params[application_id]` deprecated

**Description:** Internal ID of the Application that posted the status. Provided for historical compatibility only and can be ignored.  
**Type:** Integer  
**Version history:**  
2.7.0 - added

## `params[scheduled_at]`

**Description:** When the status will be scheduled. This will be null because the status is only scheduled once.  
**Type:** nullable Null  
**Version history:**  
2.7.0 - added

## `params[idempotency]`

**Description:** Idempotency key to prevent duplicate statuses.  
**Type:** nullable String  
**Version history:**  
2.7.0 - added

## `params[with_rate_limit]` deprecated

**Description:** Whether status creation is subject to rate limiting. Provided for historical compatibility only and can be ignored.  
**Type:** Boolean  
**Version history:**  
2.7.0 - added

## `media_attachments`

**Description:** Media that will be attached when the status is posted.  
**Type:** Array of [MediaAttachment](/entities/MediaAttachment/)  
**Version history:**  
2.7.0 - added

## See also

[POST /api/v1/statuses (with `scheduled_at` parameter)](/methods/statuses/#create)[scheduled\_statuses API methods](/methods/scheduled_statuses/)[app/serializers/rest/scheduled\_status\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/scheduled_status_serializer.rb)Last updated January 9, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/ScheduledStatus.md)

---


# Search

Source: https://docs.joinmastodon.org/entities/Search/

# Search

Represents the results of a search.

## Example

Truncated sample search for q=cats limit=2

```
{
 "accounts": [
 {
 "id": "180744",
 "username": "catstar",
 "acct": "catstar@catgram.jp",
 "display\_name": "catstar",
 // ...
 },
 {
 "id": "214293",
 "username": "catsareweird",
 "acct": "catsareweird",
 "display\_name": "Cats Are Weird",
 // ...
 }
 ],
 "statuses": [
 {
 "id": "103085519055545958",
 "created\_at": "2019-11-05T13:23:09.000Z",
 // ...
 "content": "<p>cats<br>cats never change</p>",
 // ...
 },
 {
 "id": "101068121469614510",
 "created\_at": "2018-11-14T06:31:48.000Z",
 // ...
 "spoiler\_text": "Cats",
 // ...
 "content": "<p>Cats are inherently good at self-care. </p><p><a href=\"https://mspsocial.net/tags/cats\" class=\"mention hashtag\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\">#<span>cats</span}</p>",
 // ...
 },
 // ...
 ],
 "hashtags": [
 {
 "name": "cats",
 "url": "https://mastodon.social/tags/cats",
 "history": [
 {
 "day": "1574553600",
 "uses": "10",
 "accounts": "9"
 },
 // ...
 ]
 },
 {
 "name": "catsofmastodon",
 "url": "https://mastodon.social/tags/catsofmastodon",
 "history": [
 {
 "day": "1574553600",
 "uses": "6",
 "accounts": "5"
 },
 // ...
 ]
 }
 ]
}

```
## Attributes

## `accounts`

**Description:** Accounts which match the given query  
**Type:** Array of [Account](/entities/Account/)  
**Version history:**  
1.1.0 - added

## `statuses`

**Description:** Statuses which match the given query  
**Type:** Array of [Status](/entities/Status/)  
**Version history:**  
1.1.0 - added

## `hashtags`

**Description:** Hashtags which match the given query  
**Type:** Array of [Tag](/entities/Tag/)  
**Version history:**  
1.1.0 - added  
2.4.1 - v1/search deprecated because it returns Array of String. v2/search added which returns Array of Tag.  
3.0.0 - v1/search removed

## See also

[search API methods](/methods/search/)[app/serializers/rest/search\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/search_serializer.rb)Last updated October 10, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Search.md)

---


# Status

Source: https://docs.joinmastodon.org/entities/Status/

# Status

Represents a status posted by an account.

## Example

```
{
 "id": "103270115826048975",
 "created\_at": "2019-12-08T03:48:33.901Z",
 "in\_reply\_to\_id": null,
 "in\_reply\_to\_account\_id": null,
 "sensitive": false,
 "spoiler\_text": "",
 "visibility": "public",
 "language": "en",
 "uri": "https://mastodon.social/users/Gargron/statuses/103270115826048975",
 "url": "https://mastodon.social/@Gargron/103270115826048975",
 "replies\_count": 5,
 "reblogs\_count": 6,
 "favourites\_count": 11,
 "favourited": false,
 "reblogged": false,
 "muted": false,
 "bookmarked": false,
 "content": "<p>&quot;I lost my inheritance with one wrong digit on my sort code&quot;</p><p><a href=\"https://www.theguardian.com/money/2019/dec/07/i-lost-my-193000-inheritance-with-one-wrong-digit-on-my-sort-code\" rel=\"nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://www.</span><span class=\"ellipsis\">theguardian.com/money/2019/dec</span><span class=\"invisible\">/07/i-lost-my-193000-inheritance-with-one-wrong-digit-on-my-sort-code</span}</p>",
 "reblog": null,
 "application": {
 "name": "Web",
 "website": null
 },
 "account": {
 "id": "1",
 "username": "Gargron",
 "acct": "Gargron",
 "display\_name": "Eugen",
 "locked": false,
 "bot": false,
 "discoverable": true,
 "group": false,
 "created\_at": "2016-03-16T14:34:26.392Z",
 "note": "<p>Developer of Mastodon and administrator of mastodon.social. I post service announcements, development updates, and personal stuff.</p>",
 "url": "https://mastodon.social/@Gargron",
 "avatar": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "avatar\_static": "https://files.mastodon.social/accounts/avatars/000/000/001/original/d96d39a0abb45b92.jpg",
 "header": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "header\_static": "https://files.mastodon.social/accounts/headers/000/000/001/original/c91b871f294ea63e.png",
 "followers\_count": 322930,
 "following\_count": 459,
 "statuses\_count": 61323,
 "last\_status\_at": "2019-12-10T08:14:44.811Z",
 "emojis": [],
 "fields": [
 {
 "name": "Patreon",
 "value": "<a href=\"https://www.patreon.com/mastodon\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://www.</span><span class=\"\">patreon.com/mastodon</span><span class=\"invisible\"></span}",
 "verified\_at": null
 },
 {
 "name": "Homepage",
 "value": "<a href=\"https://zeonfederated.com\" rel=\"me nofollow noopener noreferrer\" target=\"\_blank\"><span class=\"invisible\">https://</span><span class=\"\">zeonfederated.com</span><span class=\"invisible\"></span}",
 "verified\_at": "2019-07-15T18:29:57.191+00:00"
 }
 ]
 },
 "media\_attachments": [],
 "mentions": [],
 "tags": [],
 "emojis": [],
 "card": {
 "url": "https://www.theguardian.com/money/2019/dec/07/i-lost-my-193000-inheritance-with-one-wrong-digit-on-my-sort-code",
 "title": "‘I lost my £193,000 inheritance – with one wrong digit on my sort code’",
 "description": "When Peter Teich’s money went to another Barclays customer, the bank offered £25 as a token gesture",
 "type": "link",
 "author\_name": "",
 "author\_url": "",
 "provider\_name": "",
 "provider\_url": "",
 "html": "",
 "width": 0,
 "height": 0,
 "image": null,
 "embed\_url": ""
 },
 "poll": null
}

```
## Attributes

## `id`

**Description:** ID of the status in the database.  
**Type:** String (cast from an integer but not guaranteed to be a number)  
**Version history:**  
0.1.0 - added

## `uri`

**Description:** URI of the status used for federation.  
**Type:** String  
**Version history:**  
0.1.0 - added

## `created_at`

**Description:** The date when this status was created.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
0.1.0 - added

## `account`

**Description:** The account that authored this status.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
0.1.0 - added

## `content`

**Description:** HTML-encoded status content.  
**Type:** String (HTML)  
**Version history:**  
0.1.0 - added

## `visibility`

**Description:** Visibility of this status.  
**Type:** String (Enumerable oneOf)  
`public` = Visible to everyone, shown in public timelines.  
`unlisted` = Visible to public, but not included in public timelines.  
`private` = Visible to followers only, and to any mentioned users.  
`direct` = Visible only to mentioned users.  
**Version history:**  
0.9.9 - added

## `sensitive`

**Description:** Is this status marked as sensitive content?  
**Type:** Boolean  
**Version history:**  
0.9.9 - added

## `spoiler_text`

**Description:** Subject or summary line, below which status content is collapsed until expanded.  
**Type:** String  
**Version history:**  
1.0.0 - added

## `media_attachments`

**Description:** Media that is attached to this status.  
**Type:** Array of [MediaAttachment](/entities/MediaAttachment/)  
**Version history:**  
0.6.0 - added

## `application` optional

**Description:** The application used to post this status.  
**Type:** Hash  
**Version history:**  
0.9.9 - added

## `application[name]`

**Description:** The name of the application that posted this status.  
**Type:** String  
**Version history:**  
0.9.9 - added

## `application[website]`

**Description:** The website associated with the application that posted this status.  
**Type:** nullable String (URL) or null  
**Version history:**  
0.9.9 - added  
3.5.1 - this property is now nullable

## `mentions`

**Description:** Mentions of users within the status content.  
**Type:** Array of [Status::Mention](/entities/Status/#Mention)  
**Version history:**  
0.6.0 - added

## `tags`

**Description:** Hashtags used within the status content.  
**Type:** Array of [Status::Tag](/entities/Status/#Tag)  
**Version history:**  
0.6.0 - added

## `emojis`

**Description:** Custom emoji to be used when rendering status content.  
**Type:** Array of [CustomEmoji](/entities/CustomEmoji/)  
**Version history:**  
2.0.0 - added

## `reblogs_count`

**Description:** How many boosts this status has received.  
**Type:** Integer  
**Version history:**  
0.1.0 - added

## `favourites_count`

**Description:** How many favourites this status has received.  
**Type:** Integer  
**Version history:**  
0.1.0 - added

## `replies_count`

**Description:** How many replies this status has received.  
**Type:** Integer  
**Version history:**  
2.5.0 - added

## `url`

**Description:** A link to the status’s HTML representation.  
**Type:** nullable String (URL) or null  
**Version history:**  
0.1.0 - added

## `in_reply_to_id`

**Description:** ID of the status being replied to.  
**Type:** nullable String (cast from an integer but not guaranteed to be a number) or null  
**Version history:**  
0.1.0 - added

## `in_reply_to_account_id`

**Description:** ID of the account that authored the status being replied to.  
**Type:** nullable String (cast from an integer but not guaranteed to be a number) or null  
**Version history:**  
0.1.0 - added

## `reblog`

**Description:** The status being reblogged.  
**Type:** nullable [Status](/entities/Status/) or null  
**Version history:**  
0.1.0 - added

## `poll`

**Description:** The poll attached to the status.  
**Type:** nullable [Poll](/entities/Poll/) or null  
**Version history:**  
2.8.0 - added

## `card`

**Description:** Preview card for links included within status content.  
**Type:** nullable [PreviewCard](/entities/PreviewCard/) or null  
**Version history:**  
2.6.0 - added

## `language`

**Description:** Primary language of this status.  
**Type:** nullable String (ISO 639 Part 1 two-letter language code) or null  
**Version history:**  
1.4.0 - added

## `text`

**Description:** Plain-text source of a status. Returned instead of `content` when status is deleted, so the user may redraft from the source text without the client having to reverse-engineer the original text from the HTML content.  
**Type:** nullable String or null  
**Version history:**  
2.9.0 - added

## `edited_at`

**Description:** Timestamp of when the status was last edited.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.5.0 - added

## `favourited` optional

**Description:** If the current token has an authorized user: Have you favourited this status?  
**Type:** Boolean  
**Version history:**  
0.1.0 - added

## `reblogged` optional

**Description:** If the current token has an authorized user: Have you boosted this status?  
**Type:** Boolean  
**Version history:**  
0.1.0 - added

## `muted` optional

**Description:** If the current token has an authorized user: Have you muted notifications for this status’s conversation?  
**Type:** Boolean  
**Version history:**  
1.4.0 - added

## `bookmarked` optional

**Description:** If the current token has an authorized user: Have you bookmarked this status?  
**Type:** Boolean  
**Version history:**  
3.1.0 - added

## `pinned` optional

**Description:** If the current token has an authorized user: Have you pinned this status? Only appears if the status is pinnable.  
**Type:** Boolean  
**Version history:**  
1.6.0 - added

## `filtered` optional

**Description:** If the current token has an authorized user: The filter and keywords that matched this status.  
**Type:** Array of [FilterResult](/entities/FilterResult/)  
**Version history:**  
4.0.0 - added

## Status::Mention attributes

## `id`

**Description:** The account ID of the mentioned user.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
0.6.0 - added

## `username`

**Description:** The username of the mentioned user.  
**Type:** String  
**Version history:**  
0.6.0 - added

## `url`

**Description:** The location of the mentioned user’s profile.  
**Type:** String (URL)  
**Version history:**  
0.6.0 - added

## `acct`

**Description:** The webfinger acct: URI of the mentioned user. Equivalent to `username` for local users, or `username@domain` for remote users.  
**Type:** String  
**Version history:**  
0.6.0 - added

## Status::Tag attributes

## `name`

**Description:** The value of the hashtag after the # sign.  
**Type:** String  
**Version history:**  
0.9.0 - added

## `url`

**Description:** A link to the hashtag on the instance.  
**Type:** String (URL)  
**Version history:**  
0.9.0 - added

## See also

[GET /api/v1/accounts/:id/statuses](/methods/accounts/#statuses)[POST /api/v2/search/](/methods/search/#v2)[statuses methods](/methods/statuses/)[app/serializers/rest/status\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/status_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Status.md)

---


# StatusEdit

Source: https://docs.joinmastodon.org/entities/StatusEdit/

# StatusEdit

Represents a revision of a status that has been edited.

## Example

```
{
 "content": "<p>this is a status that has been edited three times. this time a poll has been added.</p>",
 "spoiler\_text": "",
 "sensitive": false,
 "created\_at": "2022-09-05T00:03:32.480Z",
 "poll": {
 "options": [
 {
 "title": "cool"
 },
 {
 "title": "uncool"
 },
 {
 "title": "spiderman (this option has been changed)"
 }
 ]
 },
 "account": {
 "id": "14715",
 "username": "trwnh",
 "acct": "trwnh",
 "display\_name": "infinite love ⴳ",
 // ...
 },
 "media\_attachments": [],
 "emojis": []
}

```
## Attributes

## `content`

**Description:** The content of the status at this revision.  
**Type:** String (HTML)  
**Version history:**  
3.5.0 - added

## `spoiler_text`

**Description:** The content of the subject or content warning at this revision.  
**Type:** String (HTML)  
**Version history:**  
3.5.0 - added

## `sensitive`

**Description:** Whether the status was marked sensitive at this revision.  
**Type:** Boolean  
**Version history:**  
3.5.0 - added

## `created_at`

**Description:** The timestamp of when the revision was published.  
**Type:** String ([Datetime](/api/datetime-format/#datetime))  
**Version history:**  
3.5.0 - added

## `account`

**Description:** The account that published this revision.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
3.5.0 - added

## `poll` optional

**Description:** The current state of the poll options at this revision. Note that edits changing the poll options will be collapsed together into one edit, since this action resets the poll.  
**Type:** Hash  
**Version history:**  
3.5.0 - added

## `poll.options[]`

**Description:** The poll options at this revision.  
**Type:** Array of Hash  
**Version history:**  
3.5.0 - added

## `poll.options[].title`

**Description:** The text for a poll option.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `media_attachments`

**Description:** The current state of the media attachments at this revision.  
**Type:** Array of [MediaAttachment](/entities/MediaAttachment/)  
**Version history:**  
3.5.0 - added

## `emojis`

**Description:** Any custom emoji that are used in the current revision.  
**Type:** Array of [CustomEmoji](/entities/CustomEmoji/)  
**Version history:**  
3.5.0 - added

## See also

[GET /api/v1/statuses/:id/history](/methods/statuses/#history)[app/serializers/rest/status\_edit\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/status_edit_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/StatusEdit.md)

---


# StatusSource

Source: https://docs.joinmastodon.org/entities/StatusSource/

# StatusSource

Represents a status's source as plain text.

## Example

```
{
 "id": "108942703571991143",
 "text": "this is a status that will be edited",
 "spoiler\_text": ""
}

```
## Attributes

## `id`

**Description:** ID of the status in the database.  
**Type:** String (cast from an integer but not guaranteed to be a number)  
**Version history:**  
3.5.0 - added

## `text`

**Description:** The plain text used to compose the status.  
**Type:** String  
**Version history:**  
3.5.0 - added

## `spoiler_text`

**Description:** The plain text used to compose the status’s subject or content warning.  
**Type:** String  
**Version history:**  
3.5.0 - added

## See also

[GET /api/v1/statuses/:id/source](/methods/statuses/#source)[app/serializers/rest/status\_source\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/status_source_serializer.rb)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/StatusSource.md)

---


# Suggestion

Source: https://docs.joinmastodon.org/entities/Suggestion/

# Suggestion

Represents a suggested account to follow and an associated reason for the suggestion.

## Example

```
{
 "source": "staff",
 "account": {
 "id": "109031732217496096",
 "username": "alice",
 "acct": "alice",
 // ...
 }
}

```
## Attributes

## `source`

**Description:** The reason this account is being suggested.  
**Type:** String (Enumerable oneOf)  
`staff` = This account was manually recommended by your administration team  
`past_interactions` = You have interacted with this account previously  
`global` = This account has many reblogs, favourites, and active local followers within the last 30 days  
**Version history:**  
3.4.0 - added  
4.3.0 - deprecated, use `sources` instead

## `sources`

**Description:** A list of reasons this account is being suggested. This replaces `source`  
**Type:** Array of String (Enumerable oneOf)  
`featured` = This account was manually recommended by your administration team. Equivalent to the `staff` value for `source`  
`most_followed` = This account has many active local followers  
`most_interactions` = This account had many reblogs and favourites within the last 30 days  
`similar_to_recently_followed` = This account’s profile is similar to your most recent follows  
`friends_of_friends` = This account is followed by people you follow  
**Version history:**  
4.3.0 - added

## `account`

**Description:** The account being recommended to follow.  
**Type:** [Account](/entities/Account/)  
**Version history:**  
3.4.0 - added

## See also

[GET /api/v2/suggestions](/methods/suggestions/#v2)[app/serializers/rest/suggestion\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/suggestion_serializer.rb)[app/models/account\_suggestions.rb](https://github.com/mastodon/mastodon/blob/main/app/models/account_suggestions.rb)[app/models/account\_suggestions/](https://github.com/mastodon/mastodon/blob/main/app/models/account_suggestions/)Last updated July 15, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Suggestion.md)

---


# Tag

Source: https://docs.joinmastodon.org/entities/Tag/

# Tag

Represents a hashtag used within the content of a status.

## Example

```
{
 "name": "nowplaying",
 "url": "https://mastodon.social/tags/nowplaying",
 "history": [
 {
 "day": "1574553600",
 "uses": "200",
 "accounts": "31"
 },
 {
 "day": "1574467200",
 "uses": "272",
 "accounts": "39"
 },
 {
 "day": "1574380800",
 "uses": "345",
 "accounts": "40"
 },
 {
 "day": "1574294400",
 "uses": "366",
 "accounts": "46"
 },
 {
 "day": "1574208000",
 "uses": "226",
 "accounts": "32"
 },
 {
 "day": "1574121600",
 "uses": "217",
 "accounts": "42"
 },
 {
 "day": "1574035200",
 "uses": "214",
 "accounts": "34"
 }
 ],
 "following": false
}

```
## Attributes

## `name`

**Description:** The value of the hashtag after the # sign.  
**Type:** String  
**Version history:**  
0.9.0 - added

## `url`

**Description:** A link to the hashtag on the instance.  
**Type:** String (URL)  
**Version history:**  
0.9.0 - added

## `history`

**Description:** Usage statistics for given days (typically the past week).  
**Type:** Array of Hash  
**Version history:**  
2.4.1 - added

## `history[][day]`

**Description:** UNIX timestamp on midnight of the given day.  
**Type:** String (UNIX timestamp)  
**Version history:**  
2.4.1 - added

## `history[][uses]`

**Description:** The counted usage of the tag within that day.  
**Type:** String (cast from an integer)  
**Version history:**  
2.4.1 - added

## `history[][accounts]`

**Description:** The total of accounts using the tag within that day.  
**Type:** String (cast from an integer)  
**Version history:**  
2.4.1 - added

## `following` optional

**Description:** Whether the current token’s authorized user is following this tag.  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## Admin::Tag attributes

```
{
 "name": "caturday",
 "url": "https://mastodon.example/tags/caturday",
 "history": [
 {
 "day": "1669507200",
 "accounts": "53",
 "uses": "56"
 },
 {
 "day": "1669420800",
 "accounts": "142",
 "uses": "171"
 },
 {
 "day": "1669334400",
 "accounts": "11",
 "uses": "11"
 },
 {
 "day": "1669248000",
 "accounts": "8",
 "uses": "9"
 },
 {
 "day": "1669161600",
 "accounts": "8",
 "uses": "20"
 },
 {
 "day": "1669075200",
 "accounts": "11",
 "uses": "11"
 },
 {
 "day": "1668988800",
 "accounts": "17",
 "uses": "22"
 }
 ],
 "id": "802",
 "trendable": true,
 "usable": true,
 "requires\_review": false
}

```
## `id`

**Description:** The ID of the Tag in the database.  
**Type:** String (cast from integer, but not guaranteed to be a number)  
**Version history:**  
3.5.0 - added

## `trendable`

**Description:** Whether the hashtag has been approved to trend.  
**Type:** Boolean  
**Version history:**  
3.5.0 - added

## `usable`

**Description:** Whether the hashtag has not been disabled from auto-linking.  
**Type:** Boolean  
**Version history:**  
3.5.0 - added

## `requires_review`

**Description:** Whether the hashtag has not been reviewed yet to approve or deny its trending.  
**Type:** Boolean  
**Version history:**  
3.5.0 - added

## See also

[Search (`tags` attribute)](/entities/Search/#tags)[tags API methods](/methods/tags/)[GET /api/v1/featured\_tags/suggestions](/methods/featured_tags/#suggestions)[app/serializers/rest/tag\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/tag_serializer.rb)[app/serializers/rest/admin/tag\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/admin/tag_serializer.rb)[app/models/tag.rb](https://github.com/mastodon/mastodon/blob/main/app/models/tag.rb)[app/models/trends/history.rb](https://github.com/mastodon/mastodon/blob/main/app/models/trends/history.rb)Last updated December 14, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Tag.md)

---


# Token

Source: https://docs.joinmastodon.org/entities/Token/

# Token

Represents an OAuth token used for authenticating with the API and performing actions.

## Example

```
{
 "access\_token": "ZA-Yj3aBD8U8Cm7lKUp-lm9O9BmDgdhHzDeqsY8tlL0",
 "token\_type": "Bearer",
 "scope": "read write follow push",
 "created\_at": 1573979017
}

```
## Attributes

## `access_token`

**Description:** An OAuth token to be used for authorization.  
**Type:** String  
**Version history:**  
0.1.0 - added

## `token_type`

**Description:** The OAuth token type. Mastodon uses `Bearer` tokens.  
**Type:** String  
**Version history:**  
0.1.0 - added

## `scope`

**Description:** The OAuth scopes granted by this token, space-separated.  
**Type:** String  
**Version history:**  
0.1.0 - added

## `created_at`

**Description:** When the token was generated.  
**Type:** Number (UNIX Timestamp)  
**Version history:**  
0.1.0 - added

## See also

[OAuth Scopes](/api/oauth-scopes/)[oauth methods](/methods/oauth/)[Obtaining client app access](/client/token/)[Logging in with an account](/client/authorized/)Last updated November 20, 2022 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Token.md)

---


# Translation

Source: https://docs.joinmastodon.org/entities/Translation/

# Translation

Represents the result of machine translating some status content

## Examples

Translation of status with content warning and media

```
{
 "content": "<p>Hello world</p>",
 "spoiler\_text": "Greatings ahead",
 "media\_attachments": [
 {
 "id": "22345792",
 "description": "Status author waving at the camera"
 }
 ],
 "poll": null,
 "detected\_source\_language": "es",
 "provider": "DeepL.com"
}

```
Translation of status with poll:

```
{
 "content": "<p>Should I stay or should I go?</p>",
 "spoiler\_text": "",
 "media\_attachments": [],
 "poll": {
 "id": "34858",
 "options": [
 {
 "title": "Stay" 
 },
 {
 "title": "Go"
 }
 ]
 },
 "detected\_source\_language": "ja",
 "provider": "DeepL.com"
}

```
## Attributes

## `content`

**Description:** HTML-encoded translated content of the status.  
**Type:** String (HTML)  
**Version history:**  
4.0.0 - added

## `spoiler_text`

**Description:** The translated spoiler warning of the status.  
**Type:** String  
**Version history:**  
4.2.0 - added

## `poll` optional

**Description:** The translated poll of the status.  
**Type:** [Translation::Poll](/entities/Translation/#Poll)  
**Version history:**  
4.2.0 - added

## `media_attachments`

**Description:** The translated media descriptions of the status.  
**Type:** Array of [Translation::Attachment](/entities/Translation/#Attachment)  
**Version history:**  
4.2.0 - added

## `detected_source_language`

**Description:** The language of the source text, as auto-detected by the machine translation provider.  
**Type:** String (ISO 639 language code)  
**Version history:**  
4.0.0 - added

## `provider`

**Description:** The service that provided the machine translation.
**Type:** String  
**Version history:**  
4.0.0 - added

## Translation::Poll attributes

## `id`

**Description:** The ID of the poll.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.2.0 - added

## `options`

**Description:** The translated poll options.  
**Type:** Array of [Translation::Poll::Option](/entities/Translation/#Option)  
**Version history:**  
4.2.0 - added

## Translation::Poll::Option attributes

## `title`

**Description:** The translated title of the poll option.  
**Type:** String  
**Version history:**  
4.2.0 - added

## Translation::Attachment attributes

## `id`

**Description:** The id of the attachment.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
4.2.0 - added

## `description`

**Description:** The translated description of the attachment.  
**Type:** String  
**Version history:**  
4.2.0 - added

## See also

[POST /api/v1/statuses/:id/translate](/methods/statuses/#translate)[app/serializers/rest/translation\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/translation_serializer.rb)Last updated April 2, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/Translation.md)

---


# V1::Filter

Source: https://docs.joinmastodon.org/entities/V1_Filter/

# V1::Filter

Represents a user-defined filter for determining which statuses should not be shown to the user. Contains a single keyword or phrase.

## Example

```
{
 "id": "8449",
 "phrase": "test",
 "context": [
 "home",
 "notifications",
 "public",
 "thread"
 ],
 "whole\_word": false,
 "expires\_at": "2019-11-26T09:08:06.254Z",
 "irreversible": true
}

```
## Attributes

## `id`

**Description:** The ID of the filter in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.4.3 - added

## `phrase`

**Description:** The text to be filtered.  
**Type:** String  
**Version history:**  
2.4.3 - added

## `context`

**Description:** The contexts in which the filter should be applied.  
**Type:** Array of String (Enumerable anyOf)  
`home` = home timeline and lists  
`notifications` = notifications timeline  
`public` = public timelines  
`thread` = expanded thread of a detailed status  
`account` = when viewing a profile  
**Version history:**  
2.4.3 - added  
3.1.0 - added `account`

## `expires_at`

**Description:** When the filter should no longer be applied.  
**Type:** nullable String ([Datetime](/api/datetime-format/#datetime)), or null if the filter does not expire  
**Version history:**  
2.4.3 - added

## `irreversible`

**Description:** Should matching entities in home and notifications be dropped by the server? See [implementation guidelines for filters](/api/guidelines/#filters).  
**Type:** Boolean  
**Version history:**  
2.4.3 - added

## `whole_word`

**Description:** Should the filter consider word boundaries? See [implementation guidelines for filters](/api/guidelines/#filters).  
**Type:** Boolean  
**Version history:**  
2.4.3 - added

## See also

[Implementation guidelines for filters](/api/guidelines/#filters)[v1 filters API](/methods/filters/#v1)[app/serializers/rest/v1/filter\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/v1/filter_serializer.rb)Last updated November 27, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/V1_Filter.md)

---


# V1::Instance

Source: https://docs.joinmastodon.org/entities/V1_Instance/

# V1::Instance

Represents the software instance of Mastodon running on this domain.

## Example

```
{
 "uri":"mastodon.social",
 "title":"Mastodon",
 "short\_description":"The original server operated by the Mastodon gGmbH non-profit",
 "description":"",
 "email":"staff@mastodon.social",
 "version":"3.5.3",
 "urls":{
 "streaming\_api":"wss://mastodon.social"
 },
 "stats":{
 "user\_count":812303,
 "status\_count":38151616,
 "domain\_count":25255
 },
 "thumbnail":"https://files.mastodon.social/site\_uploads/files/000/000/001/original/vlcsnap-2018-08-27-16h43m11s127.png",
 "languages":[
 "en"
 ],
 "registrations":false,
 "approval\_required":false,
 "invites\_enabled":true,
 "configuration":{
 "statuses":{
 "max\_characters":500,
 "max\_media\_attachments":4,
 "characters\_reserved\_per\_url":23
 },
 "media\_attachments":{
 "supported\_mime\_types":[
 "image/jpeg",
 "image/png",
 "image/gif",
 "image/webp",
 "video/webm",
 "video/mp4",
 "video/quicktime",
 "video/ogg",
 "audio/wave",
 "audio/wav",
 "audio/x-wav",
 "audio/x-pn-wave",
 "audio/vnd.wave",
 "audio/ogg",
 "audio/vorbis",
 "audio/mpeg",
 "audio/mp3",
 "audio/webm",
 "audio/flac",
 "audio/aac",
 "audio/m4a",
 "audio/x-m4a",
 "audio/mp4",
 "audio/3gpp",
 "video/x-ms-asf"
 ],
 "image\_size\_limit":10485760,
 "image\_matrix\_limit":16777216,
 "video\_size\_limit":41943040,
 "video\_frame\_rate\_limit":60,
 "video\_matrix\_limit":2304000
 },
 "polls":{
 "max\_options":4,
 "max\_characters\_per\_option":50,
 "min\_expiration":300,
 "max\_expiration":2629746
 }
 },
 "contact\_account":{
 "id":"1",
 "username":"Gargron",
 "acct":"Gargron",
 "display\_name":"Eugen",
 "locked":false,
 "bot":false,
 "discoverable":true,
 "group":false,
 "created\_at":"2016-03-16T00:00:00.000Z",
 "note":"\u003cp\u003eFounder, CEO and lead developer \u003cspan class=\"h-card\"\u003e\u003ca href=\"https://mastodon.social/@Mastodon\" class=\"u-url mention\"\u003e@\u003cspan\u003eMastodon\u003c/span\u003e\u003c/a\u003e\u003c/span\u003e, Germany.\u003c/p\u003e",
 "url":"https://mastodon.social/@Gargron",
 "avatar":"https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "avatar\_static":"https://files.mastodon.social/accounts/avatars/000/000/001/original/dc4286ceb8fab734.jpg",
 "header":"https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "header\_static":"https://files.mastodon.social/accounts/headers/000/000/001/original/3b91c9965d00888b.jpeg",
 "followers\_count":118944,
 "following\_count":305,
 "statuses\_count":72309,
 "last\_status\_at":"2022-08-24",
 "emojis":[
 
 ],
 "fields":[
 {
 "name":"Patreon",
 "value":"\u003ca href=\"https://www.patreon.com/mastodon\" target=\"\_blank\" rel=\"nofollow noopener noreferrer me\"\u003e\u003cspan class=\"invisible\"\u003ehttps://www.\u003c/span\u003e\u003cspan class=\"\"\u003epatreon.com/mastodon\u003c/span\u003e\u003cspan class=\"invisible\"\u003e\u003c/span\u003e\u003c/a\u003e",
 "verified\_at":null
 }
 ]
 },
 "rules":[
 {
 "id":"1",
 "text":"Sexually explicit or violent media must be marked as sensitive when posting"
 },
 {
 "id":"2",
 "text":"No racism, sexism, homophobia, transphobia, xenophobia, or casteism"
 },
 {
 "id":"3",
 "text":"No incitement of violence or promotion of violent ideologies"
 },
 {
 "id":"4",
 "text":"No harassment, dogpiling or doxxing of other users"
 },
 {
 "id":"5",
 "text":"No content illegal in Germany"
 },
 {
 "id":"7",
 "text":"Do not share intentionally false or misleading information"
 }
 ]
}

```
## Attributes

## `uri`

**Description:** The domain name of the instance.  
**Type:** String  
**Version history:**  
1.1.0 - added

## `title`

**Description:** The title of the website.  
**Type:** String  
**Version history:**  
1.1.0 - added

## `short_description`

**Description:** A short, plain-text description defined by the admin.  
**Type:** String  
**Version history:**  
2.9.2 - added

## `description`

**Description:** An HTML-permitted description of the Mastodon site.  
**Type:** String  
**Version history:**  
1.1.0 - added

## `email`

**Description:** An email that may be contacted for any inquiries.  
**Type:** String  
**Version history:**  
1.1.0 - added

## `version`

**Description:** The version of Mastodon installed on the instance.  
**Type:** String  
**Version history:**  
1.3.0 - added

## `urls`

**Description:** URLs of interest for clients apps.  
**Type:** Hash  
**Version history:**  
1.4.2 - added

## `urls[streaming_api]`

**Description:** The Websockets URL for connecting to the streaming API.  
**Type:** String (URL)  
**Version history:**  
1.4.2 - added

## `stats`

**Description:** Statistics about how much information the instance contains.  
**Type:** Hash  
**Version history:**  
1.6.0 - added

## `stats[user_count]`

**Description:** Total users on this instance.  
**Type:** Integer  
**Version history:**  
1.6.0 - added

## `stats[status_count]`

**Description:** Total statuses on this instance.  
**Type:** Integer  
**Version history:**  
1.6.0 - added

## `stats[domain_count]`

**Description:** Total domains discovered by this instance.  
**Type:** Integer  
**Version history:**  
1.6.0 - added

## `thumbnail`

**Description:** Banner image for the website.  
**Type:** nullable String (URL)  
**Version history:**  
1.6.1 - added

## `languages`

**Description:** Primary languages of the website and its staff.  
**Type:** Array of String (ISO 639-1 two-letter code)  
**Version history:**  
2.3.0 - added

## `registrations`

**Description:** Whether registrations are enabled.  
**Type:** Boolean  
**Version history:**  
2.7.2 - added

## `approval_required`

**Description:** Whether registrations require moderator approval.  
**Type:** Boolean  
**Version history:**  
2.9.2 - added

## `invites_enabled`

**Description:** Whether invites are enabled.  
**Type:** Boolean  
**Version history:**  
3.1.4 - added

## `configuration`

**Description:** Configured values and limits for this website.  
**Type:** Hash  
**Version history:**  
3.4.2 - added

## `configuration[accounts]`

**Description:** Limits related to accounts.  
**Type:** Hash  
**Version history:**  
4.0.0 - added

## `configuration[accounts][max_featured_tags]`

**Description:** The maximum number of featured tags allowed for each account.  
**Type:** Integer  
**Version history:**  
4.0.0 - added

## `configuration[statuses]`

**Description:** Limits related to authoring statuses.  
**Type:** Hash  
**Version history:**  
3.4.2 - added

## `configuration[statuses][max_characters]`

**Description:** The maximum number of allowed characters per status.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[statuses][max_media_attachments]`

**Description:** The maximum number of media attachments that can be added to a status.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[statuses][characters_reserved_per_url]`

**Description:** Each URL in a status will be assumed to be exactly this many characters.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[media_attachments]`

**Description:** Hints for which attachments will be accepted.  
**Type:** Hash  
**Version history:**  
3.4.2 - added

## `configuration[media_attachments][supported_mime_types]`

**Description:** Contains MIME types that can be uploaded.  
**Type:** Array of String  
**Version history:**  
3.4.2 - added

## `configuration[media_attachments][image_size_limit]`

**Description:** The maximum size of any uploaded image, in bytes.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[media_attachments][image_matrix_limit]`

**Description:** The maximum number of pixels (width times height) for image uploads.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[media_attachments][video_size_limit]`

**Description:** The maximum size of any uploaded video, in bytes.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[media_attachments][video_frame_rate_limit]`

**Description:** The maximum frame rate for any uploaded video.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[media_attachments][video_matrix_limit]`

**Description:** The maximum number of pixels (width times height) for video uploads.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[polls]`

**Description:** Limits related to polls.  
**Type:** Hash  
**Version history:**  
3.4.2 - added

## `configuration[polls][max_options]`

**Description:** Each poll is allowed to have up to this many options.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[polls][max_characters_per_option]`

**Description:** Each poll option is allowed to have this many characters.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[polls][min_expiration]`

**Description:** The shortest allowed poll duration, in seconds.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `configuration[polls][max_expiration]`

**Description:** The longest allowed poll duration, in seconds.  
**Type:** Integer  
**Version history:**  
3.4.2 - added

## `contact_account`

**Description:** A user that can be contacted, as an alternative to `email`.  
**Type:** nullable [Account](/entities/Account/) or null  
**Version history:**  
2.3.0 - added

## `rules`

**Description:** An itemized list of rules for this website.  
**Type:** Array of [Rule](/entities/Rule/)  
**Version history:**  
3.4.0 - added

## See also

[GET /api/v1/instance](/methods/instance/#v1)[app/serializers/rest/v1/instance\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/v1/instance_serializer.rb)Last updated March 13, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/V1_Instance.md)

---


# V1::NotificationPolicy

Source: https://docs.joinmastodon.org/entities/V1_NotificationPolicy/

# V1::NotificationPolicy

Represents the notification filtering policy of the user.

This version of the notification filtering policy API is deprecated and has not shipped in any release. Please refer to the [current version](/entities/NotificationPolicy/) instead.## Attributes

## `filter_not_following`

**Description:** Whether to filter notifications from accounts the user is not following.  
**Type:** Boolean  
**Version history:**  
4.3.0 - added

## `filter_not_followers`

**Description:** Whether to filter notifications from accounts that are not following the user.  
**Type:** Boolean  
**Version history:**  
4.3.0 - added

## `filter_new_accounts`

**Description:** Whether to filter notifications from accounts created in the past 30 days.  
**Type:** Boolean  
**Version history:**  
4.3.0 - added

## `filter_private_mentions`

**Description:** Whether to filter notifications from private mentions. Replies to private mentions initiated by the user, as well as accounts the user follows, are never filtered.  
**Type:** Boolean  
**Version history:**  
4.3.0 - added

## `summary`

**Description:** Summary of the filtered notifications
**Type:** Hash  
**Version history:**  
4.3.0 - added

## `summary[pending_requests_count]`

**Description:** Number of different accounts from which the user has non-dismissed filtered notifications. Capped at 100.
**Type:** Integer  
**Version history:**  
4.3.0 - added

## `summary[pending_notifications_count]`

**Description:** Number of total non-dismissed filtered notifications. May be inaccurate.
**Type:** Integer  
**Version history:**  
4.3.0 - added

## Example

```

{
 "filter\_not\_following": false,
 "filter\_not\_followers": false,
 "filter\_new\_accounts": false,
 "filter\_private\_mentions": true,
 "summary": {
 "pending\_requests\_count": 0,
 "pending\_notifications\_count": 0
 }
}

```
## See also

[NotificationPolicy (for the released version)](/entities/NotificationPolicy/)[notifications API methods](/methods/notifications/)[app/serializers/rest/v1/notification\_policy\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/v1/notification_policy_serializer.rb)Last updated August 22, 2024 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/V1_NotificationPolicy.md)

---


# WebPushSubscription

Source: https://docs.joinmastodon.org/entities/WebPushSubscription/

# WebPushSubscription

Represents a subscription to the push streaming server.

## Example

```
{
 "id": 328183,
 "endpoint": "https://yourdomain.example/listener",
 "standard": true,
 "alerts": {
 "follow": false,
 "favourite": false,
 "reblog": false,
 "mention": true,
 "poll": false
 },
 "server\_key": "BCk-QqERU0q-CfYZjcuB6lnyyOYfJ2AifKqfeGIm7Z-HiTU5T9eTG5GxVA0\_OH5mMlI4UkkDTpaZwozy0TzdZ2M="
}

```
## Attributes

## `id`

**Description:** The ID of the Web Push subscription in the database.  
**Type:** String (cast from an integer, but not guaranteed to be a number)  
**Version history:**  
2.4.0 - added

## `endpoint`

**Description:** Where push alerts will be sent to.  
**Type:** String (URL)  
**Version history:**  
2.4.0 - added

## `standard`

**Description:** If the push messages follow the standardized specifications (RFC8030+RFC8291+RFC8292). Else they follow a legacy version of the specifications (4th draft of RFC8291 and 1st draft of RFC8292).
**Type:** Boolean
**Version history:**  
4.4.0 - added

## `server_key`

**Description:** The streaming server’s VAPID key.  
**Type:** String  
**Version history:**  
2.4.0 - added

## `alerts`

**Description:** Which alerts should be delivered to the `endpoint`.  
**Type:** Hash  
**Version history:**  
2.4.0 - added  
2.8.0 - added `alerts[poll]`  
3.1.0 - added `alerts[follow_request]`  
3.3.0 - added `alerts[status]`  
3.5.0 - added `alerts[update]` and `alerts[admin.sign_up]`  
4.0.0 - added `alerts[admin.report]`

## `alerts[mention]`

**Description:** Receive a push notification when someone else has mentioned you in a status?  
**Type:** Boolean  
**Version history:**  
2.4.0 - added

## `alerts[status]`

**Description:** Receive a push notification when a subscribed account posts a status?  
**Type:** Boolean  
**Version history:**  
3.3.0 - added

## `alerts[reblog]`

**Description:** Receive a push notification when a status you created has been boosted by someone else?  
**Type:** Boolean  
**Version history:**  
2.4.0 - added

## `alerts[follow]`

**Description:** Receive a push notification when someone has followed you?  
**Type:** Boolean  
**Version history:**  
2.4.0 - added

## `alerts[follow_request]`

**Description:** Receive a push notification when someone has requested to followed you?  
**Type:** Boolean  
**Version history:**  
3.1.0 - added

## `alerts[favourite]`

**Description:** Receive a push notification when a status you created has been favourited by someone else?  
**Type:** Boolean  
**Version history:**  
2.4.0 - added

## `alerts[poll]`

**Description:** Receive a push notification when a poll you voted in or created has ended?  
**Type:** Boolean  
**Version history:**  
2.8.0 - added

## `alerts[update]`

**Description:** Receive a push notification when a status you interacted with has been edited?  
**Type:** Boolean  
**Version history:**  
3.5.0 - added

## `alerts[admin.sign_up]`

**Description:** Receive a push notification when a new user has signed up?  
**Type:** Boolean  
**Version history:**  
3.5.0 - added

## `alerts[admin.report]`

**Description:** Receive a push notification when a new report has been filed?  
**Type:** Boolean  
**Version history:**  
4.0.0 - added

## See also

[push API methods](/methods/push/)[app/serializers/rest/web\_push\_subscription\_serializer.rb](https://github.com/mastodon/mastodon/blob/main/app/serializers/rest/web_push_subscription_serializer.rb)Last updated March 5, 2025 · [Improve this page](https://github.com/mastodon/documentation/tree/main/content/en/entities/WebPushSubscription.md)

---
